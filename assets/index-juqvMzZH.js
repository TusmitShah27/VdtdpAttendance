(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function lo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ib={exports:{}},Qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JM;function vG(){if(JM)return Qh;JM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return Qh.Fragment=e,Qh.jsx=n,Qh.jsxs=n,Qh}var QM;function _G(){return QM||(QM=1,ib.exports=vG()),ib.exports}var H=_G(),ob={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XM;function TG(){if(XM)return Qe;XM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=y&&K[y]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function I(K,ue,se){this.props=K,this.context=ue,this.refs=A,this.updater=se||E}I.prototype.isReactComponent={},I.prototype.setState=function(K,ue){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ue,"setState")},I.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function R(){}R.prototype=I.prototype;function M(K,ue,se){this.props=K,this.context=ue,this.refs=A,this.updater=se||E}var P=M.prototype=new R;P.constructor=M,w(P,I.prototype),P.isPureReactComponent=!0;var F=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function D(K,ue,se,de,Me,Fe){return se=Fe.ref,{$$typeof:t,type:K,key:ue,ref:se!==void 0?se:null,props:Fe}}function N(K,ue){return D(K.type,ue,void 0,void 0,void 0,K.props)}function V(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function q(K){var ue={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(se){return ue[se]})}var B=/\/+/g;function G(K,ue){return typeof K=="object"&&K!==null&&K.key!=null?q(""+K.key):ue.toString(36)}function z(){}function Ve(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(z,z):(K.status="pending",K.then(function(ue){K.status==="pending"&&(K.status="fulfilled",K.value=ue)},function(ue){K.status==="pending"&&(K.status="rejected",K.reason=ue)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function Pe(K,ue,se,de,Me){var Fe=typeof K;(Fe==="undefined"||Fe==="boolean")&&(K=null);var Ge=!1;if(K===null)Ge=!0;else switch(Fe){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(K.$$typeof){case t:case e:Ge=!0;break;case h:return Ge=K._init,Pe(Ge(K._payload),ue,se,de,Me)}}if(Ge)return Me=Me(K),Ge=de===""?"."+G(K,0):de,F(Me)?(se="",Ge!=null&&(se=Ge.replace(B,"$&/")+"/"),Pe(Me,ue,se,"",function(Ee){return Ee})):Me!=null&&(V(Me)&&(Me=N(Me,se+(Me.key==null||K&&K.key===Me.key?"":(""+Me.key).replace(B,"$&/")+"/")+Ge)),ue.push(Me)),1;Ge=0;var yn=de===""?".":de+":";if(F(K))for(var Ct=0;Ct<K.length;Ct++)de=K[Ct],Fe=yn+G(de,Ct),Ge+=Pe(de,ue,se,Fe,Me);else if(Ct=_(K),typeof Ct=="function")for(K=Ct.call(K),Ct=0;!(de=K.next()).done;)de=de.value,Fe=yn+G(de,Ct++),Ge+=Pe(de,ue,se,Fe,Me);else if(Fe==="object"){if(typeof K.then=="function")return Pe(Ve(K),ue,se,de,Me);throw ue=String(K),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function ne(K,ue,se){if(K==null)return K;var de=[],Me=0;return Pe(K,de,"","",function(Fe){return ue.call(se,Fe,Me++)}),de}function me(K){if(K._status===-1){var ue=K._result;ue=ue(),ue.then(function(se){(K._status===0||K._status===-1)&&(K._status=1,K._result=se)},function(se){(K._status===0||K._status===-1)&&(K._status=2,K._result=se)}),K._status===-1&&(K._status=0,K._result=ue)}if(K._status===1)return K._result.default;throw K._result}var Ae=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function qe(){}return Qe.Children={map:ne,forEach:function(K,ue,se){ne(K,function(){ue.apply(this,arguments)},se)},count:function(K){var ue=0;return ne(K,function(){ue++}),ue},toArray:function(K){return ne(K,function(ue){return ue})||[]},only:function(K){if(!V(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Qe.Component=I,Qe.Fragment=n,Qe.Profiler=i,Qe.PureComponent=M,Qe.StrictMode=r,Qe.Suspense=c,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(K){return U.H.useMemoCache(K)}},Qe.cache=function(K){return function(){return K.apply(null,arguments)}},Qe.cloneElement=function(K,ue,se){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var de=w({},K.props),Me=K.key,Fe=void 0;if(ue!=null)for(Ge in ue.ref!==void 0&&(Fe=void 0),ue.key!==void 0&&(Me=""+ue.key),ue)!$.call(ue,Ge)||Ge==="key"||Ge==="__self"||Ge==="__source"||Ge==="ref"&&ue.ref===void 0||(de[Ge]=ue[Ge]);var Ge=arguments.length-2;if(Ge===1)de.children=se;else if(1<Ge){for(var yn=Array(Ge),Ct=0;Ct<Ge;Ct++)yn[Ct]=arguments[Ct+2];de.children=yn}return D(K.type,Me,void 0,void 0,Fe,de)},Qe.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},Qe.createElement=function(K,ue,se){var de,Me={},Fe=null;if(ue!=null)for(de in ue.key!==void 0&&(Fe=""+ue.key),ue)$.call(ue,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Me[de]=ue[de]);var Ge=arguments.length-2;if(Ge===1)Me.children=se;else if(1<Ge){for(var yn=Array(Ge),Ct=0;Ct<Ge;Ct++)yn[Ct]=arguments[Ct+2];Me.children=yn}if(K&&K.defaultProps)for(de in Ge=K.defaultProps,Ge)Me[de]===void 0&&(Me[de]=Ge[de]);return D(K,Fe,void 0,void 0,null,Me)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(K){return{$$typeof:u,render:K}},Qe.isValidElement=V,Qe.lazy=function(K){return{$$typeof:h,_payload:{_status:-1,_result:K},_init:me}},Qe.memo=function(K,ue){return{$$typeof:f,type:K,compare:ue===void 0?null:ue}},Qe.startTransition=function(K){var ue=U.T,se={};U.T=se;try{var de=K(),Me=U.S;Me!==null&&Me(se,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(qe,Ae)}catch(Fe){Ae(Fe)}finally{U.T=ue}},Qe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Qe.use=function(K){return U.H.use(K)},Qe.useActionState=function(K,ue,se){return U.H.useActionState(K,ue,se)},Qe.useCallback=function(K,ue){return U.H.useCallback(K,ue)},Qe.useContext=function(K){return U.H.useContext(K)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(K,ue){return U.H.useDeferredValue(K,ue)},Qe.useEffect=function(K,ue,se){var de=U.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(K,ue)},Qe.useId=function(){return U.H.useId()},Qe.useImperativeHandle=function(K,ue,se){return U.H.useImperativeHandle(K,ue,se)},Qe.useInsertionEffect=function(K,ue){return U.H.useInsertionEffect(K,ue)},Qe.useLayoutEffect=function(K,ue){return U.H.useLayoutEffect(K,ue)},Qe.useMemo=function(K,ue){return U.H.useMemo(K,ue)},Qe.useOptimistic=function(K,ue){return U.H.useOptimistic(K,ue)},Qe.useReducer=function(K,ue,se){return U.H.useReducer(K,ue,se)},Qe.useRef=function(K){return U.H.useRef(K)},Qe.useState=function(K){return U.H.useState(K)},Qe.useSyncExternalStore=function(K,ue,se){return U.H.useSyncExternalStore(K,ue,se)},Qe.useTransition=function(){return U.H.useTransition()},Qe.version="19.1.0",Qe}var ZM;function yd(){return ZM||(ZM=1,ob.exports=TG()),ob.exports}var O=yd();const hA=lo(O);var sb={exports:{}},Xh={},ab={exports:{}},lb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eD;function EG(){return eD||(eD=1,function(t){function e(ne,me){var Ae=ne.length;ne.push(me);e:for(;0<Ae;){var qe=Ae-1>>>1,K=ne[qe];if(0<i(K,me))ne[qe]=me,ne[Ae]=K,Ae=qe;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var me=ne[0],Ae=ne.pop();if(Ae!==me){ne[0]=Ae;e:for(var qe=0,K=ne.length,ue=K>>>1;qe<ue;){var se=2*(qe+1)-1,de=ne[se],Me=se+1,Fe=ne[Me];if(0>i(de,Ae))Me<K&&0>i(Fe,de)?(ne[qe]=Fe,ne[Me]=Ae,qe=Me):(ne[qe]=de,ne[se]=Ae,qe=se);else if(Me<K&&0>i(Fe,Ae))ne[qe]=Fe,ne[Me]=Ae,qe=Me;else break e}}return me}function i(ne,me){var Ae=ne.sortIndex-me.sortIndex;return Ae!==0?Ae:ne.id-me.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],f=[],h=1,y=null,_=3,E=!1,w=!1,A=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function F(ne){for(var me=n(f);me!==null;){if(me.callback===null)r(f);else if(me.startTime<=ne)r(f),me.sortIndex=me.expirationTime,e(c,me);else break;me=n(f)}}function U(ne){if(A=!1,F(ne),!w)if(n(c)!==null)w=!0,$||($=!0,G());else{var me=n(f);me!==null&&Pe(U,me.startTime-ne)}}var $=!1,D=-1,N=5,V=-1;function q(){return I?!0:!(t.unstable_now()-V<N)}function B(){if(I=!1,$){var ne=t.unstable_now();V=ne;var me=!0;try{e:{w=!1,A&&(A=!1,M(D),D=-1),E=!0;var Ae=_;try{t:{for(F(ne),y=n(c);y!==null&&!(y.expirationTime>ne&&q());){var qe=y.callback;if(typeof qe=="function"){y.callback=null,_=y.priorityLevel;var K=qe(y.expirationTime<=ne);if(ne=t.unstable_now(),typeof K=="function"){y.callback=K,F(ne),me=!0;break t}y===n(c)&&r(c),F(ne)}else r(c);y=n(c)}if(y!==null)me=!0;else{var ue=n(f);ue!==null&&Pe(U,ue.startTime-ne),me=!1}}break e}finally{y=null,_=Ae,E=!1}me=void 0}}finally{me?G():$=!1}}}var G;if(typeof P=="function")G=function(){P(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Ve=z.port2;z.port1.onmessage=B,G=function(){Ve.postMessage(null)}}else G=function(){R(B,0)};function Pe(ne,me){D=R(function(){ne(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(ne){switch(_){case 1:case 2:case 3:var me=3;break;default:me=_}var Ae=_;_=me;try{return ne()}finally{_=Ae}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Ae=_;_=ne;try{return me()}finally{_=Ae}},t.unstable_scheduleCallback=function(ne,me,Ae){var qe=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?qe+Ae:qe):Ae=qe,ne){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Ae+K,ne={id:h++,callback:me,priorityLevel:ne,startTime:Ae,expirationTime:K,sortIndex:-1},Ae>qe?(ne.sortIndex=Ae,e(f,ne),n(c)===null&&ne===n(f)&&(A?(M(D),D=-1):A=!0,Pe(U,Ae-qe))):(ne.sortIndex=K,e(c,ne),w||E||(w=!0,$||($=!0,G()))),ne},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(ne){var me=_;return function(){var Ae=_;_=me;try{return ne.apply(this,arguments)}finally{_=Ae}}}}(lb)),lb}var tD;function bG(){return tD||(tD=1,ab.exports=EG()),ab.exports}var ub={exports:{}},pr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nD;function wG(){if(nD)return pr;nD=1;var t=yd();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(c,f,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:c,containerInfo:f,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pr.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(c,f,null,h)},pr.flushSync=function(c){var f=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=f,r.p=h,r.d.f()}},pr.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},pr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},pr.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,y=u(h,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:E}):h==="script"&&r.d.X(c,{crossOrigin:y,integrity:_,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},pr.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},pr.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,y=u(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},pr.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},pr.requestFormReset=function(c){r.d.r(c)},pr.unstable_batchedUpdates=function(c,f){return c(f)},pr.useFormState=function(c,f,h){return s.H.useFormState(c,f,h)},pr.useFormStatus=function(){return s.H.useHostTransitionStatus()},pr.version="19.1.0",pr}var rD;function zU(){if(rD)return ub.exports;rD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ub.exports=wG(),ub.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD;function AG(){if(iD)return Xh;iD=1;var t=bG(),e=yd(),n=zU();function r(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function s(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(o(a)!==a)throw Error(r(188))}function c(a){var l=a.alternate;if(!l){if(l=o(a),l===null)throw Error(r(188));return l!==a?null:a}for(var d=a,g=l;;){var T=d.return;if(T===null)break;var b=T.alternate;if(b===null){if(g=T.return,g!==null){d=g;continue}break}if(T.child===b.child){for(b=T.child;b;){if(b===d)return u(T),a;if(b===g)return u(T),l;b=b.sibling}throw Error(r(188))}if(d.return!==g.return)d=T,g=b;else{for(var x=!1,k=T.child;k;){if(k===d){x=!0,d=T,g=b;break}if(k===g){x=!0,g=T,d=b;break}k=k.sibling}if(!x){for(k=b.child;k;){if(k===d){x=!0,d=b,g=T;break}if(k===g){x=!0,g=b,d=T;break}k=k.sibling}if(!x)throw Error(r(189))}}if(d.alternate!==g)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:l}function f(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=f(a),l!==null)return l;a=a.sibling}return null}var h=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),P=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=B&&a[B]||a["@@iterator"],typeof a=="function"?a:null)}var z=Symbol.for("react.client.reference");function Ve(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case I:return"Profiler";case A:return"StrictMode";case U:return"Suspense";case $:return"SuspenseList";case V:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case P:return(a.displayName||"Context")+".Provider";case M:return(a._context.displayName||"Context")+".Consumer";case F:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return l=a.displayName||null,l!==null?l:Ve(a.type)||"Memo";case N:l=a._payload,a=a._init;try{return Ve(a(l))}catch{}}return null}var Pe=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},qe=[],K=-1;function ue(a){return{current:a}}function se(a){0>K||(a.current=qe[K],qe[K]=null,K--)}function de(a,l){K++,qe[K]=a.current,a.current=l}var Me=ue(null),Fe=ue(null),Ge=ue(null),yn=ue(null);function Ct(a,l){switch(de(Ge,l),de(Fe,a),de(Me,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?AM(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=AM(l),a=SM(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}se(Me),de(Me,a)}function Ee(){se(Me),se(Fe),se(Ge)}function Ke(a){a.memoizedState!==null&&de(yn,a);var l=Me.current,d=SM(l,a.type);l!==d&&(de(Fe,a),de(Me,d))}function Ye(a){Fe.current===a&&(se(Me),se(Fe)),yn.current===a&&(se(yn),Hh._currentValue=Ae)}var pe=Object.prototype.hasOwnProperty,tn=t.unstable_scheduleCallback,lt=t.unstable_cancelCallback,Mn=t.unstable_shouldYield,qn=t.unstable_requestPaint,vn=t.unstable_now,lc=t.unstable_getCurrentPriorityLevel,Gd=t.unstable_ImmediatePriority,uc=t.unstable_UserBlockingPriority,Tl=t.unstable_NormalPriority,oT=t.unstable_LowPriority,cc=t.unstable_IdlePriority,jd=t.log,cg=t.unstable_setDisableYieldValue,nn=null,Et=null;function Hr(a){if(typeof jd=="function"&&cg(a),Et&&typeof Et.setStrictMode=="function")try{Et.setStrictMode(nn,a)}catch{}}var hr=Math.clz32?Math.clz32:El,fg=Math.log,sT=Math.LN2;function El(a){return a>>>=0,a===0?32:31-(fg(a)/sT|0)|0}var bl=256,wl=4194304;function Ki(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function fc(a,l,d){var g=a.pendingLanes;if(g===0)return 0;var T=0,b=a.suspendedLanes,x=a.pingedLanes;a=a.warmLanes;var k=g&134217727;return k!==0?(g=k&~b,g!==0?T=Ki(g):(x&=k,x!==0?T=Ki(x):d||(d=k&~a,d!==0&&(T=Ki(d))))):(k=g&~b,k!==0?T=Ki(k):x!==0?T=Ki(x):d||(d=g&~a,d!==0&&(T=Ki(d)))),T===0?0:l!==0&&l!==T&&(l&b)===0&&(b=T&-T,d=l&-l,b>=d||b===32&&(d&4194048)!==0)?l:T}function Al(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function Hd(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kd(){var a=bl;return bl<<=1,(bl&4194048)===0&&(bl=256),a}function Wd(){var a=wl;return wl<<=1,(wl&62914560)===0&&(wl=4194304),a}function Xo(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function Zo(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Yd(a,l,d,g,T,b){var x=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var k=a.entanglements,j=a.expirationTimes,Z=a.hiddenUpdates;for(d=x&~d;0<d;){var oe=31-hr(d),ce=1<<oe;k[oe]=0,j[oe]=-1;var ee=Z[oe];if(ee!==null)for(Z[oe]=null,oe=0;oe<ee.length;oe++){var te=ee[oe];te!==null&&(te.lane&=-536870913)}d&=~ce}g!==0&&co(a,g,0),b!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=b&~(x&~l))}function co(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var g=31-hr(l);a.entangledLanes|=l,a.entanglements[g]=a.entanglements[g]|1073741824|d&4194090}function Jd(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-hr(d),T=1<<g;T&l|a[g]&l&&(a[g]|=l),d&=~T}}function Xs(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function dc(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Zs(){var a=me.p;return a!==0?a:(a=window.event,a===void 0?32:GM(a.type))}function dg(a,l){var d=me.p;try{return me.p=a,l()}finally{me.p=d}}var Gt=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Gt,_n="__reactProps$"+Gt,vi="__reactContainer$"+Gt,Qd="__reactEvents$"+Gt,aT="__reactListeners$"+Gt,ea="__reactHandles$"+Gt,hg="__reactResources$"+Gt,Sl="__reactMarker$"+Gt;function ta(a){delete a[Dn],delete a[_n],delete a[Qd],delete a[aT],delete a[ea]}function es(a){var l=a[Dn];if(l)return l;for(var d=a.parentNode;d;){if(l=d[vi]||d[Dn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=RM(a);a!==null;){if(d=a[Dn])return d;a=RM(a)}return l}a=d,d=a.parentNode}return null}function fo(a){if(a=a[Dn]||a[vi]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function ho(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(r(33))}function Sr(a){var l=a[hg];return l||(l=a[hg]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function un(a){a[Sl]=!0}var Xd=new Set,hc={};function Wi(a,l){ts(a,l),ts(a+"Capture",l)}function ts(a,l){for(hc[a]=l,a=0;a<l.length;a++)Xd.add(l[a])}var mg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pg={},Il={};function gg(a){return pe.call(Il,a)?!0:pe.call(pg,a)?!1:mg.test(a)?Il[a]=!0:(pg[a]=!0,!1)}function na(a,l,d){if(gg(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function mo(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function er(a,l,d,g){if(g===null)a.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+g)}}var Cl,yg;function ns(a){if(Cl===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Cl=l&&l[1]||"",yg=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cl+a+yg}var mc=!1;function pc(a,l){if(!a||mc)return"";mc=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(te){var ee=te}Reflect.construct(a,[],ce)}else{try{ce.call()}catch(te){ee=te}a.call(ce.prototype)}}else{try{throw Error()}catch(te){ee=te}(ce=a())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=g.DetermineComponentFrameRoot(),x=b[0],k=b[1];if(x&&k){var j=x.split(`
`),Z=k.split(`
`);for(T=g=0;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;for(;T<Z.length&&!Z[T].includes("DetermineComponentFrameRoot");)T++;if(g===j.length||T===Z.length)for(g=j.length-1,T=Z.length-1;1<=g&&0<=T&&j[g]!==Z[T];)T--;for(;1<=g&&0<=T;g--,T--)if(j[g]!==Z[T]){if(g!==1||T!==1)do if(g--,T--,0>T||j[g]!==Z[T]){var oe=`
`+j[g].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=g&&0<=T);break}}}finally{mc=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?ns(d):""}function Zd(a){switch(a.tag){case 26:case 27:case 5:return ns(a.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return pc(a.type,!1);case 11:return pc(a.type.render,!1);case 1:return pc(a.type,!0);case 31:return ns("Activity");default:return""}}function gc(a){try{var l="";do l+=Zd(a),a=a.return;while(a);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Ir(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function eh(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function lT(a){var l=eh(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var T=d.get,b=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return T.call(this)},set:function(x){g=""+x,b.call(this,x)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(x){g=""+x},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function yc(a){a._valueTracker||(a._valueTracker=lT(a))}function th(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=eh(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function xl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var uT=/[\n"\\]/g;function Tn(a){return a.replace(uT,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Kr(a,l,d,g,T,b,x,k){a.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?a.type=x:a.removeAttribute("type"),l!=null?x==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Ir(l)):a.value!==""+Ir(l)&&(a.value=""+Ir(l)):x!=="submit"&&x!=="reset"||a.removeAttribute("value"),l!=null?ra(a,x,Ir(l)):d!=null?ra(a,x,Ir(d)):g!=null&&a.removeAttribute("value"),T==null&&b!=null&&(a.defaultChecked=!!b),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?a.name=""+Ir(k):a.removeAttribute("name")}function Rl(a,l,d,g,T,b,x,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),l!=null||d!=null){if(!(b!=="submit"&&b!=="reset"||l!=null))return;d=d!=null?""+Ir(d):"",l=l!=null?""+Ir(l):d,k||l===a.value||(a.value=l),a.defaultValue=l}g=g??T,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=k?a.checked:!!g,a.defaultChecked=!!g,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.name=x)}function ra(a,l,d){l==="number"&&xl(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function rs(a,l,d,g){if(a=a.options,l){l={};for(var T=0;T<d.length;T++)l["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=l.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Ir(d),l=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,g&&(a[T].defaultSelected=!0);return}l!==null||a[T].disabled||(l=a[T])}l!==null&&(l.selected=!0)}}function xt(a,l,d){if(l!=null&&(l=""+Ir(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+Ir(d):""}function Pl(a,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(r(92));if(Pe(g)){if(1<g.length)throw Error(r(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Ir(l),a.defaultValue=d,g=a.textContent,g===d&&g!==""&&g!==null&&(a.value=g)}function _i(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Ml=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vg(a,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":g?a.setProperty(l,d):typeof d!="number"||d===0||Ml.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function nh(a,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(a=a.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var T in l)g=l[T],l.hasOwnProperty(T)&&d[T]!==g&&vg(a,T,g)}else for(var b in l)l.hasOwnProperty(b)&&vg(a,b,l[b])}function rh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vc(a){return fT.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var is=null;function Ti(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var os=null,ss=null;function ih(a){var l=fo(a);if(l&&(a=l.stateNode)){var d=a[_n]||null;e:switch(a=l.stateNode,l.type){case"input":if(Kr(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Tn(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var T=g[_n]||null;if(!T)throw Error(r(90));Kr(g,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===a.form&&th(g)}break e;case"textarea":xt(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&rs(a,!!d.multiple,l,!1)}}}var po=!1;function _g(a,l,d){if(po)return a(l,d);po=!0;try{var g=a(l);return g}finally{if(po=!1,(os!==null||ss!==null)&&(dy(),os&&(l=os,a=ss,ss=os=null,ih(l),a)))for(l=0;l<a.length;l++)ih(a[l])}}function Dl(a,l){var d=a.stateNode;if(d===null)return null;var g=d[_n]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ei=!1;if(Yi)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Ei=!1}var go=null,ia=null,as=null;function oh(){if(as)return as;var a,l=ia,d=l.length,g,T="value"in go?go.value:go.textContent,b=T.length;for(a=0;a<d&&l[a]===T[a];a++);var x=d-a;for(g=1;g<=x&&l[d-g]===T[b-g];g++);return as=T.slice(a,1<g?1-g:void 0)}function yo(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function vo(){return!0}function sh(){return!1}function zn(a){function l(d,g,T,b,x){this._reactName=d,this._targetInst=T,this.type=g,this.nativeEvent=b,this.target=x,this.currentTarget=null;for(var k in a)a.hasOwnProperty(k)&&(d=a[k],this[k]=d?d(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?vo:sh,this.isPropagationStopped=sh,this}return h(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=vo)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=vo)},persist:function(){},isPersistent:vo}),l}var vt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=zn(vt),kl=h({},vt,{view:0,detail:0}),Tg=zn(kl),Tc,Ec,_o,Ol=h({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==_o&&(_o&&a.type==="mousemove"?(Tc=a.screenX-_o.screenX,Ec=a.screenY-_o.screenY):Ec=Tc=0,_o=a),Tc)},movementY:function(a){return"movementY"in a?a.movementY:Ec}}),bi=zn(Ol),Eg=h({},Ol,{dataTransfer:0}),dT=zn(Eg),Vl=h({},kl,{relatedTarget:0}),bc=zn(Vl),ah=h({},vt,{animationName:0,elapsedTime:0,pseudoElement:0}),wc=zn(ah),bg=h({},vt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ac=zn(bg),hT=h({},vt,{data:0}),lh=zn(hT),Ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Ag[a])?!!l[a]:!1}function Ul(){return uh}var Sg=h({},kl,{key:function(a){if(a.key){var l=Ll[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=yo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?wg[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(a){return a.type==="keypress"?yo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?yo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Sc=zn(Sg),Ig=h({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=zn(Ig),ls=h({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),Cg=zn(ls),xg=h({},vt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=zn(xg),Pg=h({},Ol,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ic=zn(Pg),Cr=h({},vt,{newState:0,oldState:0}),Mg=zn(Cr),Dg=[9,13,27,32],To=Yi&&"CompositionEvent"in window,v=null;Yi&&"documentMode"in document&&(v=document.documentMode);var S=Yi&&"TextEvent"in window&&!v,C=Yi&&(!To||v&&8<v&&11>=v),L=" ",J=!1;function ie(a,l){switch(a){case"keyup":return Dg.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ut=!1;function Nn(a,l){switch(a){case"compositionend":return ve(l);case"keypress":return l.which!==32?null:(J=!0,L);case"textInput":return a=l.data,a===L&&J?null:a;default:return null}}function ct(a,l){if(ut)return a==="compositionend"||!To&&ie(a,l)?(a=oh(),as=ia=go=null,ut=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return C&&l.locale!=="ko"?null:l.data;default:return null}}var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!$n[a.type]:l==="textarea"}function us(a,l,d,g){os?ss?ss.push(g):ss=[g]:os=g,l=vy(l,"onChange"),0<l.length&&(d=new _c("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var tr=null,Eo=null;function fh(a){_M(a,0)}function Ng(a){var l=ho(a);if(th(l))return a}function B1(a,l){if(a==="change")return l}var q1=!1;if(Yi){var mT;if(Yi){var pT="oninput"in document;if(!pT){var z1=document.createElement("div");z1.setAttribute("oninput","return;"),pT=typeof z1.oninput=="function"}mT=pT}else mT=!1;q1=mT&&(!document.documentMode||9<document.documentMode)}function $1(){tr&&(tr.detachEvent("onpropertychange",G1),Eo=tr=null)}function G1(a){if(a.propertyName==="value"&&Ng(Eo)){var l=[];us(l,Eo,a,Ti(a)),_g(fh,l)}}function Wz(a,l,d){a==="focusin"?($1(),tr=l,Eo=d,tr.attachEvent("onpropertychange",G1)):a==="focusout"&&$1()}function Yz(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ng(Eo)}function Jz(a,l){if(a==="click")return Ng(l)}function Qz(a,l){if(a==="input"||a==="change")return Ng(l)}function Xz(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Wr=typeof Object.is=="function"?Object.is:Xz;function dh(a,l){if(Wr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var T=d[g];if(!pe.call(l,T)||!Wr(a[T],l[T]))return!1}return!0}function j1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function H1(a,l){var d=j1(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=j1(d)}}function K1(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?K1(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function W1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=xl(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=xl(a.document)}return l}function gT(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var Zz=Yi&&"documentMode"in document&&11>=document.documentMode,Cc=null,yT=null,hh=null,vT=!1;function Y1(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;vT||Cc==null||Cc!==xl(g)||(g=Cc,"selectionStart"in g&&gT(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),hh&&dh(hh,g)||(hh=g,g=vy(yT,"onSelect"),0<g.length&&(l=new _c("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Cc)))}function Fl(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var xc={animationend:Fl("Animation","AnimationEnd"),animationiteration:Fl("Animation","AnimationIteration"),animationstart:Fl("Animation","AnimationStart"),transitionrun:Fl("Transition","TransitionRun"),transitionstart:Fl("Transition","TransitionStart"),transitioncancel:Fl("Transition","TransitionCancel"),transitionend:Fl("Transition","TransitionEnd")},_T={},J1={};Yi&&(J1=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function Bl(a){if(_T[a])return _T[a];if(!xc[a])return a;var l=xc[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in J1)return _T[a]=l[d];return a}var Q1=Bl("animationend"),X1=Bl("animationiteration"),Z1=Bl("animationstart"),e$=Bl("transitionrun"),t$=Bl("transitionstart"),n$=Bl("transitioncancel"),eR=Bl("transitionend"),tR=new Map,TT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");TT.push("scrollEnd");function Ji(a,l){tR.set(a,l),Wi(l,[a])}var nR=new WeakMap;function wi(a,l){if(typeof a=="object"&&a!==null){var d=nR.get(a);return d!==void 0?d:(l={value:a,source:l,stack:gc(l)},nR.set(a,l),l)}return{value:a,source:l,stack:gc(l)}}var Ai=[],Rc=0,ET=0;function kg(){for(var a=Rc,l=ET=Rc=0;l<a;){var d=Ai[l];Ai[l++]=null;var g=Ai[l];Ai[l++]=null;var T=Ai[l];Ai[l++]=null;var b=Ai[l];if(Ai[l++]=null,g!==null&&T!==null){var x=g.pending;x===null?T.next=T:(T.next=x.next,x.next=T),g.pending=T}b!==0&&rR(d,T,b)}}function Og(a,l,d,g){Ai[Rc++]=a,Ai[Rc++]=l,Ai[Rc++]=d,Ai[Rc++]=g,ET|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function bT(a,l,d,g){return Og(a,l,d,g),Vg(a)}function Pc(a,l){return Og(a,null,null,l),Vg(a)}function rR(a,l,d){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d);for(var T=!1,b=a.return;b!==null;)b.childLanes|=d,g=b.alternate,g!==null&&(g.childLanes|=d),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(T=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,T&&l!==null&&(T=31-hr(d),a=b.hiddenUpdates,g=a[T],g===null?a[T]=[l]:g.push(l),l.lane=d|536870912),b):null}function Vg(a){if(50<Uh)throw Uh=0,xE=null,Error(r(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var Mc={};function r$(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(a,l,d,g){return new r$(a,l,d,g)}function wT(a){return a=a.prototype,!(!a||!a.isReactComponent)}function cs(a,l){var d=a.alternate;return d===null?(d=Yr(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function iR(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Lg(a,l,d,g,T,b){var x=0;if(g=a,typeof a=="function")wT(a)&&(x=1);else if(typeof a=="string")x=oG(a,d,Me.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case V:return a=Yr(31,d,l,T),a.elementType=V,a.lanes=b,a;case w:return ql(d.children,T,b,l);case A:x=8,T|=24;break;case I:return a=Yr(12,d,l,T|2),a.elementType=I,a.lanes=b,a;case U:return a=Yr(13,d,l,T),a.elementType=U,a.lanes=b,a;case $:return a=Yr(19,d,l,T),a.elementType=$,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:case P:x=10;break e;case M:x=9;break e;case F:x=11;break e;case D:x=14;break e;case N:x=16,g=null;break e}x=29,d=Error(r(130,a===null?"null":typeof a,"")),g=null}return l=Yr(x,d,l,T),l.elementType=a,l.type=g,l.lanes=b,l}function ql(a,l,d,g){return a=Yr(7,a,g,l),a.lanes=d,a}function AT(a,l,d){return a=Yr(6,a,null,l),a.lanes=d,a}function ST(a,l,d){return l=Yr(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var Dc=[],Nc=0,Ug=null,Fg=0,Si=[],Ii=0,zl=null,fs=1,ds="";function $l(a,l){Dc[Nc++]=Fg,Dc[Nc++]=Ug,Ug=a,Fg=l}function oR(a,l,d){Si[Ii++]=fs,Si[Ii++]=ds,Si[Ii++]=zl,zl=a;var g=fs;a=ds;var T=32-hr(g)-1;g&=~(1<<T),d+=1;var b=32-hr(l)+T;if(30<b){var x=T-T%5;b=(g&(1<<x)-1).toString(32),g>>=x,T-=x,fs=1<<32-hr(l)+T|d<<T|g,ds=b+a}else fs=1<<b|d<<T|g,ds=a}function IT(a){a.return!==null&&($l(a,1),oR(a,1,0))}function CT(a){for(;a===Ug;)Ug=Dc[--Nc],Dc[Nc]=null,Fg=Dc[--Nc],Dc[Nc]=null;for(;a===zl;)zl=Si[--Ii],Si[Ii]=null,ds=Si[--Ii],Si[Ii]=null,fs=Si[--Ii],Si[Ii]=null}var xr=null,rn=null,yt=!1,Gl=null,bo=!1,xT=Error(r(519));function jl(a){var l=Error(r(418,""));throw gh(wi(l,a)),xT}function sR(a){var l=a.stateNode,d=a.type,g=a.memoizedProps;switch(l[Dn]=a,l[_n]=g,d){case"dialog":nt("cancel",l),nt("close",l);break;case"iframe":case"object":case"embed":nt("load",l);break;case"video":case"audio":for(d=0;d<Bh.length;d++)nt(Bh[d],l);break;case"source":nt("error",l);break;case"img":case"image":case"link":nt("error",l),nt("load",l);break;case"details":nt("toggle",l);break;case"input":nt("invalid",l),Rl(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),yc(l);break;case"select":nt("invalid",l);break;case"textarea":nt("invalid",l),Pl(l,g.value,g.defaultValue,g.children),yc(l)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||wM(l.textContent,d)?(g.popover!=null&&(nt("beforetoggle",l),nt("toggle",l)),g.onScroll!=null&&nt("scroll",l),g.onScrollEnd!=null&&nt("scrollend",l),g.onClick!=null&&(l.onclick=_y),l=!0):l=!1,l||jl(a)}function aR(a){for(xr=a.return;xr;)switch(xr.tag){case 5:case 13:bo=!1;return;case 27:case 3:bo=!0;return;default:xr=xr.return}}function mh(a){if(a!==xr)return!1;if(!yt)return aR(a),yt=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||GE(a.type,a.memoizedProps)),d=!d),d&&rn&&jl(a),aR(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(l===0){rn=Xi(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;a=a.nextSibling}rn=null}}else l===27?(l=rn,Ta(a.type)?(a=WE,WE=null,rn=a):rn=l):rn=xr?Xi(a.stateNode.nextSibling):null;return!0}function ph(){rn=xr=null,yt=!1}function lR(){var a=Gl;return a!==null&&(Ur===null?Ur=a:Ur.push.apply(Ur,a),Gl=null),a}function gh(a){Gl===null?Gl=[a]:Gl.push(a)}var RT=ue(null),Hl=null,hs=null;function oa(a,l,d){de(RT,l._currentValue),l._currentValue=d}function ms(a){a._currentValue=RT.current,se(RT)}function PT(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function MT(a,l,d,g){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var b=T.dependencies;if(b!==null){var x=T.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=T;for(var j=0;j<l.length;j++)if(k.context===l[j]){b.lanes|=d,k=b.alternate,k!==null&&(k.lanes|=d),PT(b.return,d,a),g||(x=null);break e}b=k.next}}else if(T.tag===18){if(x=T.return,x===null)throw Error(r(341));x.lanes|=d,b=x.alternate,b!==null&&(b.lanes|=d),PT(x,d,a),x=null}else x=T.child;if(x!==null)x.return=T;else for(x=T;x!==null;){if(x===a){x=null;break}if(T=x.sibling,T!==null){T.return=x.return,x=T;break}x=x.return}T=x}}function yh(a,l,d,g){a=null;for(var T=l,b=!1;T!==null;){if(!b){if((T.flags&524288)!==0)b=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var x=T.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var k=T.type;Wr(T.pendingProps.value,x.value)||(a!==null?a.push(k):a=[k])}}else if(T===yn.current){if(x=T.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(Hh):a=[Hh])}T=T.return}a!==null&&MT(l,a,d,g),l.flags|=262144}function Bg(a){for(a=a.firstContext;a!==null;){if(!Wr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Kl(a){Hl=a,hs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function mr(a){return uR(Hl,a)}function qg(a,l){return Hl===null&&Kl(a),uR(a,l)}function uR(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},hs===null){if(a===null)throw Error(r(308));hs=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else hs=hs.next=l;return d}var i$=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,g){a.push(g)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},o$=t.unstable_scheduleCallback,s$=t.unstable_NormalPriority,On={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function DT(){return{controller:new i$,data:new Map,refCount:0}}function vh(a){a.refCount--,a.refCount===0&&o$(s$,function(){a.controller.abort()})}var _h=null,NT=0,kc=0,Oc=null;function a$(a,l){if(_h===null){var d=_h=[];NT=0,kc=OE(),Oc={status:"pending",value:void 0,then:function(g){d.push(g)}}}return NT++,l.then(cR,cR),l}function cR(){if(--NT===0&&_h!==null){Oc!==null&&(Oc.status="fulfilled");var a=_h;_h=null,kc=0,Oc=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function l$(a,l){var d=[],g={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){g.status="fulfilled",g.value=l;for(var T=0;T<d.length;T++)(0,d[T])(l)},function(T){for(g.status="rejected",g.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),g}var fR=ne.S;ne.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&a$(a,l),fR!==null&&fR(a,l)};var Wl=ue(null);function kT(){var a=Wl.current;return a!==null?a:Vt.pooledCache}function zg(a,l){l===null?de(Wl,Wl.current):de(Wl,l.pool)}function dR(){var a=kT();return a===null?null:{parent:On._currentValue,pool:a}}var Th=Error(r(460)),hR=Error(r(474)),$g=Error(r(542)),OT={then:function(){}};function mR(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Gg(){}function pR(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(Gg,Gg),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,yR(a),a;default:if(typeof l.status=="string")l.then(Gg,Gg);else{if(a=Vt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=l,a.status="pending",a.then(function(g){if(l.status==="pending"){var T=l;T.status="fulfilled",T.value=g}},function(g){if(l.status==="pending"){var T=l;T.status="rejected",T.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,yR(a),a}throw Eh=l,Th}}var Eh=null;function gR(){if(Eh===null)throw Error(r(459));var a=Eh;return Eh=null,a}function yR(a){if(a===Th||a===$g)throw Error(r(483))}var sa=!1;function VT(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function LT(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function aa(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function la(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(bt&2)!==0){var T=g.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),g.pending=l,l=Vg(a),rR(a,null,d),l}return Og(a,g,l,d),Vg(a)}function bh(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Jd(a,d)}}function UT(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var T=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var x={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};b===null?T=b=x:b=b.next=x,d=d.next}while(d!==null);b===null?T=b=l:b=b.next=l}else T=b=l;d={baseState:g.baseState,firstBaseUpdate:T,lastBaseUpdate:b,shared:g.shared,callbacks:g.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var FT=!1;function wh(){if(FT){var a=Oc;if(a!==null)throw a}}function Ah(a,l,d,g){FT=!1;var T=a.updateQueue;sa=!1;var b=T.firstBaseUpdate,x=T.lastBaseUpdate,k=T.shared.pending;if(k!==null){T.shared.pending=null;var j=k,Z=j.next;j.next=null,x===null?b=Z:x.next=Z,x=j;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,k=oe.lastBaseUpdate,k!==x&&(k===null?oe.firstBaseUpdate=Z:k.next=Z,oe.lastBaseUpdate=j))}if(b!==null){var ce=T.baseState;x=0,oe=Z=j=null,k=b;do{var ee=k.lane&-536870913,te=ee!==k.lane;if(te?(ft&ee)===ee:(g&ee)===ee){ee!==0&&ee===kc&&(FT=!0),oe!==null&&(oe=oe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var je=a,Be=k;ee=l;var Mt=d;switch(Be.tag){case 1:if(je=Be.payload,typeof je=="function"){ce=je.call(Mt,ce,ee);break e}ce=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Be.payload,ee=typeof je=="function"?je.call(Mt,ce,ee):je,ee==null)break e;ce=h({},ce,ee);break e;case 2:sa=!0}}ee=k.callback,ee!==null&&(a.flags|=64,te&&(a.flags|=8192),te=T.callbacks,te===null?T.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},oe===null?(Z=oe=te,j=ce):oe=oe.next=te,x|=ee;if(k=k.next,k===null){if(k=T.shared.pending,k===null)break;te=k,k=te.next,te.next=null,T.lastBaseUpdate=te,T.shared.pending=null}}while(!0);oe===null&&(j=ce),T.baseState=j,T.firstBaseUpdate=Z,T.lastBaseUpdate=oe,b===null&&(T.shared.lanes=0),ga|=x,a.lanes=x,a.memoizedState=ce}}function vR(a,l){if(typeof a!="function")throw Error(r(191,a));a.call(l)}function _R(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)vR(d[a],l)}var Vc=ue(null),jg=ue(0);function TR(a,l){a=Es,de(jg,a),de(Vc,l),Es=a|l.baseLanes}function BT(){de(jg,Es),de(Vc,Vc.current)}function qT(){Es=jg.current,se(Vc),se(jg)}var ua=0,Ze=null,Rt=null,En=null,Hg=!1,Lc=!1,Yl=!1,Kg=0,Sh=0,Uc=null,u$=0;function cn(){throw Error(r(321))}function zT(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!Wr(a[d],l[d]))return!1;return!0}function $T(a,l,d,g,T,b){return ua=b,Ze=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ne.H=a===null||a.memoizedState===null?rP:iP,Yl=!1,b=d(g,T),Yl=!1,Lc&&(b=bR(l,d,g,T)),ER(a),b}function ER(a){ne.H=Zg;var l=Rt!==null&&Rt.next!==null;if(ua=0,En=Rt=Ze=null,Hg=!1,Sh=0,Uc=null,l)throw Error(r(300));a===null||Gn||(a=a.dependencies,a!==null&&Bg(a)&&(Gn=!0))}function bR(a,l,d,g){Ze=a;var T=0;do{if(Lc&&(Uc=null),Sh=0,Lc=!1,25<=T)throw Error(r(301));if(T+=1,En=Rt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}ne.H=g$,b=l(d,g)}while(Lc);return b}function c$(){var a=ne.H,l=a.useState()[0];return l=typeof l.then=="function"?Ih(l):l,a=a.useState()[0],(Rt!==null?Rt.memoizedState:null)!==a&&(Ze.flags|=1024),l}function GT(){var a=Kg!==0;return Kg=0,a}function jT(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function HT(a){if(Hg){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Hg=!1}ua=0,En=Rt=Ze=null,Lc=!1,Sh=Kg=0,Uc=null}function Vr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Ze.memoizedState=En=a:En=En.next=a,En}function bn(){if(Rt===null){var a=Ze.alternate;a=a!==null?a.memoizedState:null}else a=Rt.next;var l=En===null?Ze.memoizedState:En.next;if(l!==null)En=l,Rt=a;else{if(a===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Rt=a,a={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},En===null?Ze.memoizedState=En=a:En=En.next=a}return En}function KT(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ih(a){var l=Sh;return Sh+=1,Uc===null&&(Uc=[]),a=pR(Uc,a,l),l=Ze,(En===null?l.memoizedState:En.next)===null&&(l=l.alternate,ne.H=l===null||l.memoizedState===null?rP:iP),a}function Wg(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ih(a);if(a.$$typeof===P)return mr(a)}throw Error(r(438,String(a)))}function WT(a){var l=null,d=Ze.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=Ze.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(T){return T.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=KT(),Ze.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),g=0;g<a;g++)d[g]=q;return l.index++,d}function ps(a,l){return typeof l=="function"?l(a):l}function Yg(a){var l=bn();return YT(l,Rt,a)}function YT(a,l,d){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var T=a.baseQueue,b=g.pending;if(b!==null){if(T!==null){var x=T.next;T.next=b.next,b.next=x}l.baseQueue=T=b,g.pending=null}if(b=a.baseState,T===null)a.memoizedState=b;else{l=T.next;var k=x=null,j=null,Z=l,oe=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(ft&ce)===ce:(ua&ce)===ce){var ee=Z.revertLane;if(ee===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===kc&&(oe=!0);else if((ua&ee)===ee){Z=Z.next,ee===kc&&(oe=!0);continue}else ce={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(k=j=ce,x=b):j=j.next=ce,Ze.lanes|=ee,ga|=ee;ce=Z.action,Yl&&d(b,ce),b=Z.hasEagerState?Z.eagerState:d(b,ce)}else ee={lane:ce,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(k=j=ee,x=b):j=j.next=ee,Ze.lanes|=ce,ga|=ce;Z=Z.next}while(Z!==null&&Z!==l);if(j===null?x=b:j.next=k,!Wr(b,a.memoizedState)&&(Gn=!0,oe&&(d=Oc,d!==null)))throw d;a.memoizedState=b,a.baseState=x,a.baseQueue=j,g.lastRenderedState=b}return T===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function JT(a){var l=bn(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var g=d.dispatch,T=d.pending,b=l.memoizedState;if(T!==null){d.pending=null;var x=T=T.next;do b=a(b,x.action),x=x.next;while(x!==T);Wr(b,l.memoizedState)||(Gn=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),d.lastRenderedState=b}return[b,g]}function wR(a,l,d){var g=Ze,T=bn(),b=yt;if(b){if(d===void 0)throw Error(r(407));d=d()}else d=l();var x=!Wr((Rt||T).memoizedState,d);x&&(T.memoizedState=d,Gn=!0),T=T.queue;var k=IR.bind(null,g,T,a);if(Ch(2048,8,k,[a]),T.getSnapshot!==l||x||En!==null&&En.memoizedState.tag&1){if(g.flags|=2048,Fc(9,Jg(),SR.bind(null,g,T,d,l),null),Vt===null)throw Error(r(349));b||(ua&124)!==0||AR(g,l,d)}return d}function AR(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=Ze.updateQueue,l===null?(l=KT(),Ze.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function SR(a,l,d,g){l.value=d,l.getSnapshot=g,CR(l)&&xR(a)}function IR(a,l,d){return d(function(){CR(l)&&xR(a)})}function CR(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!Wr(a,d)}catch{return!0}}function xR(a){var l=Pc(a,2);l!==null&&ei(l,a,2)}function QT(a){var l=Vr();if(typeof a=="function"){var d=a;if(a=d(),Yl){Hr(!0);try{d()}finally{Hr(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:a},l}function RR(a,l,d,g){return a.baseState=d,YT(a,Rt,typeof g=="function"?g:ps)}function f$(a,l,d,g,T){if(Xg(a))throw Error(r(485));if(a=l.action,a!==null){var b={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){b.listeners.push(x)}};ne.T!==null?d(!0):b.isTransition=!1,g(b),d=l.pending,d===null?(b.next=l.pending=b,PR(l,b)):(b.next=d.next,l.pending=d.next=b)}}function PR(a,l){var d=l.action,g=l.payload,T=a.state;if(l.isTransition){var b=ne.T,x={};ne.T=x;try{var k=d(T,g),j=ne.S;j!==null&&j(x,k),MR(a,l,k)}catch(Z){XT(a,l,Z)}finally{ne.T=b}}else try{b=d(T,g),MR(a,l,b)}catch(Z){XT(a,l,Z)}}function MR(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){DR(a,l,g)},function(g){return XT(a,l,g)}):DR(a,l,d)}function DR(a,l,d){l.status="fulfilled",l.value=d,NR(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,PR(a,d)))}function XT(a,l,d){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,NR(l),l=l.next;while(l!==g)}a.action=null}function NR(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function kR(a,l){return l}function OR(a,l){if(yt){var d=Vt.formState;if(d!==null){e:{var g=Ze;if(yt){if(rn){t:{for(var T=rn,b=bo;T.nodeType!==8;){if(!b){T=null;break t}if(T=Xi(T.nextSibling),T===null){T=null;break t}}b=T.data,T=b==="F!"||b==="F"?T:null}if(T){rn=Xi(T.nextSibling),g=T.data==="F!";break e}}jl(g)}g=!1}g&&(l=d[0])}}return d=Vr(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kR,lastRenderedState:l},d.queue=g,d=eP.bind(null,Ze,g),g.dispatch=d,g=QT(!1),b=rE.bind(null,Ze,!1,g.queue),g=Vr(),T={state:l,dispatch:null,action:a,pending:null},g.queue=T,d=f$.bind(null,Ze,T,b,d),T.dispatch=d,g.memoizedState=a,[l,d,!1]}function VR(a){var l=bn();return LR(l,Rt,a)}function LR(a,l,d){if(l=YT(a,l,kR)[0],a=Yg(ps)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Ih(l)}catch(x){throw x===Th?$g:x}else g=l;l=bn();var T=l.queue,b=T.dispatch;return d!==l.memoizedState&&(Ze.flags|=2048,Fc(9,Jg(),d$.bind(null,T,d),null)),[g,b,a]}function d$(a,l){a.action=l}function UR(a){var l=bn(),d=Rt;if(d!==null)return LR(l,d,a);bn(),l=l.memoizedState,d=bn();var g=d.queue.dispatch;return d.memoizedState=a,[l,g,!1]}function Fc(a,l,d,g){return a={tag:a,create:d,deps:g,inst:l,next:null},l=Ze.updateQueue,l===null&&(l=KT(),Ze.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a),a}function Jg(){return{destroy:void 0,resource:void 0}}function FR(){return bn().memoizedState}function Qg(a,l,d,g){var T=Vr();g=g===void 0?null:g,Ze.flags|=a,T.memoizedState=Fc(1|l,Jg(),d,g)}function Ch(a,l,d,g){var T=bn();g=g===void 0?null:g;var b=T.memoizedState.inst;Rt!==null&&g!==null&&zT(g,Rt.memoizedState.deps)?T.memoizedState=Fc(l,b,d,g):(Ze.flags|=a,T.memoizedState=Fc(1|l,b,d,g))}function BR(a,l){Qg(8390656,8,a,l)}function qR(a,l){Ch(2048,8,a,l)}function zR(a,l){return Ch(4,2,a,l)}function $R(a,l){return Ch(4,4,a,l)}function GR(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function jR(a,l,d){d=d!=null?d.concat([a]):null,Ch(4,4,GR.bind(null,l,a),d)}function ZT(){}function HR(a,l){var d=bn();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&zT(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function KR(a,l){var d=bn();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&zT(l,g[1]))return g[0];if(g=a(),Yl){Hr(!0);try{a()}finally{Hr(!1)}}return d.memoizedState=[g,l],g}function eE(a,l,d){return d===void 0||(ua&1073741824)!==0?a.memoizedState=l:(a.memoizedState=d,a=JP(),Ze.lanes|=a,ga|=a,d)}function WR(a,l,d,g){return Wr(d,l)?d:Vc.current!==null?(a=eE(a,d,g),Wr(a,l)||(Gn=!0),a):(ua&42)===0?(Gn=!0,a.memoizedState=d):(a=JP(),Ze.lanes|=a,ga|=a,l)}function YR(a,l,d,g,T){var b=me.p;me.p=b!==0&&8>b?b:8;var x=ne.T,k={};ne.T=k,rE(a,!1,l,d);try{var j=T(),Z=ne.S;if(Z!==null&&Z(k,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var oe=l$(j,g);xh(a,l,oe,Zr(a))}else xh(a,l,g,Zr(a))}catch(ce){xh(a,l,{then:function(){},status:"rejected",reason:ce},Zr())}finally{me.p=b,ne.T=x}}function h$(){}function tE(a,l,d,g){if(a.tag!==5)throw Error(r(476));var T=JR(a).queue;YR(a,T,l,Ae,d===null?h$:function(){return QR(a),d(g)})}function JR(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:Ae},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function QR(a){var l=JR(a).next.queue;xh(a,l,{},Zr())}function nE(){return mr(Hh)}function XR(){return bn().memoizedState}function ZR(){return bn().memoizedState}function m$(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=Zr();a=aa(d);var g=la(l,a,d);g!==null&&(ei(g,l,d),bh(g,l,d)),l={cache:DT()},a.payload=l;return}l=l.return}}function p$(a,l,d){var g=Zr();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Xg(a)?tP(l,d):(d=bT(a,l,d,g),d!==null&&(ei(d,a,g),nP(d,l,g)))}function eP(a,l,d){var g=Zr();xh(a,l,d,g)}function xh(a,l,d,g){var T={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Xg(a))tP(l,T);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var x=l.lastRenderedState,k=b(x,d);if(T.hasEagerState=!0,T.eagerState=k,Wr(k,x))return Og(a,l,T,0),Vt===null&&kg(),!1}catch{}finally{}if(d=bT(a,l,T,g),d!==null)return ei(d,a,g),nP(d,l,g),!0}return!1}function rE(a,l,d,g){if(g={lane:2,revertLane:OE(),action:g,hasEagerState:!1,eagerState:null,next:null},Xg(a)){if(l)throw Error(r(479))}else l=bT(a,d,g,2),l!==null&&ei(l,a,2)}function Xg(a){var l=a.alternate;return a===Ze||l!==null&&l===Ze}function tP(a,l){Lc=Hg=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function nP(a,l,d){if((d&4194048)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Jd(a,d)}}var Zg={readContext:mr,use:Wg,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn},rP={readContext:mr,use:Wg,useCallback:function(a,l){return Vr().memoizedState=[a,l===void 0?null:l],a},useContext:mr,useEffect:BR,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,Qg(4194308,4,GR.bind(null,l,a),d)},useLayoutEffect:function(a,l){return Qg(4194308,4,a,l)},useInsertionEffect:function(a,l){Qg(4,2,a,l)},useMemo:function(a,l){var d=Vr();l=l===void 0?null:l;var g=a();if(Yl){Hr(!0);try{a()}finally{Hr(!1)}}return d.memoizedState=[g,l],g},useReducer:function(a,l,d){var g=Vr();if(d!==void 0){var T=d(l);if(Yl){Hr(!0);try{d(l)}finally{Hr(!1)}}}else T=l;return g.memoizedState=g.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},g.queue=a,a=a.dispatch=p$.bind(null,Ze,a),[g.memoizedState,a]},useRef:function(a){var l=Vr();return a={current:a},l.memoizedState=a},useState:function(a){a=QT(a);var l=a.queue,d=eP.bind(null,Ze,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:ZT,useDeferredValue:function(a,l){var d=Vr();return eE(d,a,l)},useTransition:function(){var a=QT(!1);return a=YR.bind(null,Ze,a.queue,!0,!1),Vr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var g=Ze,T=Vr();if(yt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Vt===null)throw Error(r(349));(ft&124)!==0||AR(g,l,d)}T.memoizedState=d;var b={value:d,getSnapshot:l};return T.queue=b,BR(IR.bind(null,g,b,a),[a]),g.flags|=2048,Fc(9,Jg(),SR.bind(null,g,b,d,l),null),d},useId:function(){var a=Vr(),l=Vt.identifierPrefix;if(yt){var d=ds,g=fs;d=(g&~(1<<32-hr(g)-1)).toString(32)+d,l=""+l+"R"+d,d=Kg++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=u$++,l=""+l+"r"+d.toString(32)+"";return a.memoizedState=l},useHostTransitionStatus:nE,useFormState:OR,useActionState:OR,useOptimistic:function(a){var l=Vr();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=rE.bind(null,Ze,!0,d),d.dispatch=l,[a,l]},useMemoCache:WT,useCacheRefresh:function(){return Vr().memoizedState=m$.bind(null,Ze)}},iP={readContext:mr,use:Wg,useCallback:HR,useContext:mr,useEffect:qR,useImperativeHandle:jR,useInsertionEffect:zR,useLayoutEffect:$R,useMemo:KR,useReducer:Yg,useRef:FR,useState:function(){return Yg(ps)},useDebugValue:ZT,useDeferredValue:function(a,l){var d=bn();return WR(d,Rt.memoizedState,a,l)},useTransition:function(){var a=Yg(ps)[0],l=bn().memoizedState;return[typeof a=="boolean"?a:Ih(a),l]},useSyncExternalStore:wR,useId:XR,useHostTransitionStatus:nE,useFormState:VR,useActionState:VR,useOptimistic:function(a,l){var d=bn();return RR(d,Rt,a,l)},useMemoCache:WT,useCacheRefresh:ZR},g$={readContext:mr,use:Wg,useCallback:HR,useContext:mr,useEffect:qR,useImperativeHandle:jR,useInsertionEffect:zR,useLayoutEffect:$R,useMemo:KR,useReducer:JT,useRef:FR,useState:function(){return JT(ps)},useDebugValue:ZT,useDeferredValue:function(a,l){var d=bn();return Rt===null?eE(d,a,l):WR(d,Rt.memoizedState,a,l)},useTransition:function(){var a=JT(ps)[0],l=bn().memoizedState;return[typeof a=="boolean"?a:Ih(a),l]},useSyncExternalStore:wR,useId:XR,useHostTransitionStatus:nE,useFormState:UR,useActionState:UR,useOptimistic:function(a,l){var d=bn();return Rt!==null?RR(d,Rt,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:WT,useCacheRefresh:ZR},Bc=null,Rh=0;function ey(a){var l=Rh;return Rh+=1,Bc===null&&(Bc=[]),pR(Bc,a,l)}function Ph(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function ty(a,l){throw l.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function oP(a){var l=a._init;return l(a._payload)}function sP(a){function l(Y,W){if(a){var X=Y.deletions;X===null?(Y.deletions=[W],Y.flags|=16):X.push(W)}}function d(Y,W){if(!a)return null;for(;W!==null;)l(Y,W),W=W.sibling;return null}function g(Y){for(var W=new Map;Y!==null;)Y.key!==null?W.set(Y.key,Y):W.set(Y.index,Y),Y=Y.sibling;return W}function T(Y,W){return Y=cs(Y,W),Y.index=0,Y.sibling=null,Y}function b(Y,W,X){return Y.index=X,a?(X=Y.alternate,X!==null?(X=X.index,X<W?(Y.flags|=67108866,W):X):(Y.flags|=67108866,W)):(Y.flags|=1048576,W)}function x(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function k(Y,W,X,le){return W===null||W.tag!==6?(W=AT(X,Y.mode,le),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function j(Y,W,X,le){var Ie=X.type;return Ie===w?oe(Y,W,X.props.children,le,X.key):W!==null&&(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===N&&oP(Ie)===W.type)?(W=T(W,X.props),Ph(W,X),W.return=Y,W):(W=Lg(X.type,X.key,X.props,null,Y.mode,le),Ph(W,X),W.return=Y,W)}function Z(Y,W,X,le){return W===null||W.tag!==4||W.stateNode.containerInfo!==X.containerInfo||W.stateNode.implementation!==X.implementation?(W=ST(X,Y.mode,le),W.return=Y,W):(W=T(W,X.children||[]),W.return=Y,W)}function oe(Y,W,X,le,Ie){return W===null||W.tag!==7?(W=ql(X,Y.mode,le,Ie),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function ce(Y,W,X){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=AT(""+W,Y.mode,X),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return X=Lg(W.type,W.key,W.props,null,Y.mode,X),Ph(X,W),X.return=Y,X;case E:return W=ST(W,Y.mode,X),W.return=Y,W;case N:var le=W._init;return W=le(W._payload),ce(Y,W,X)}if(Pe(W)||G(W))return W=ql(W,Y.mode,X,null),W.return=Y,W;if(typeof W.then=="function")return ce(Y,ey(W),X);if(W.$$typeof===P)return ce(Y,qg(Y,W),X);ty(Y,W)}return null}function ee(Y,W,X,le){var Ie=W!==null?W.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ie!==null?null:k(Y,W,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case _:return X.key===Ie?j(Y,W,X,le):null;case E:return X.key===Ie?Z(Y,W,X,le):null;case N:return Ie=X._init,X=Ie(X._payload),ee(Y,W,X,le)}if(Pe(X)||G(X))return Ie!==null?null:oe(Y,W,X,le,null);if(typeof X.then=="function")return ee(Y,W,ey(X),le);if(X.$$typeof===P)return ee(Y,W,qg(Y,X),le);ty(Y,X)}return null}function te(Y,W,X,le,Ie){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Y=Y.get(X)||null,k(W,Y,""+le,Ie);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case _:return Y=Y.get(le.key===null?X:le.key)||null,j(W,Y,le,Ie);case E:return Y=Y.get(le.key===null?X:le.key)||null,Z(W,Y,le,Ie);case N:var et=le._init;return le=et(le._payload),te(Y,W,X,le,Ie)}if(Pe(le)||G(le))return Y=Y.get(X)||null,oe(W,Y,le,Ie,null);if(typeof le.then=="function")return te(Y,W,X,ey(le),Ie);if(le.$$typeof===P)return te(Y,W,X,qg(W,le),Ie);ty(W,le)}return null}function je(Y,W,X,le){for(var Ie=null,et=null,ke=W,ze=W=0,Hn=null;ke!==null&&ze<X.length;ze++){ke.index>ze?(Hn=ke,ke=null):Hn=ke.sibling;var ht=ee(Y,ke,X[ze],le);if(ht===null){ke===null&&(ke=Hn);break}a&&ke&&ht.alternate===null&&l(Y,ke),W=b(ht,W,ze),et===null?Ie=ht:et.sibling=ht,et=ht,ke=Hn}if(ze===X.length)return d(Y,ke),yt&&$l(Y,ze),Ie;if(ke===null){for(;ze<X.length;ze++)ke=ce(Y,X[ze],le),ke!==null&&(W=b(ke,W,ze),et===null?Ie=ke:et.sibling=ke,et=ke);return yt&&$l(Y,ze),Ie}for(ke=g(ke);ze<X.length;ze++)Hn=te(ke,Y,ze,X[ze],le),Hn!==null&&(a&&Hn.alternate!==null&&ke.delete(Hn.key===null?ze:Hn.key),W=b(Hn,W,ze),et===null?Ie=Hn:et.sibling=Hn,et=Hn);return a&&ke.forEach(function(Sa){return l(Y,Sa)}),yt&&$l(Y,ze),Ie}function Be(Y,W,X,le){if(X==null)throw Error(r(151));for(var Ie=null,et=null,ke=W,ze=W=0,Hn=null,ht=X.next();ke!==null&&!ht.done;ze++,ht=X.next()){ke.index>ze?(Hn=ke,ke=null):Hn=ke.sibling;var Sa=ee(Y,ke,ht.value,le);if(Sa===null){ke===null&&(ke=Hn);break}a&&ke&&Sa.alternate===null&&l(Y,ke),W=b(Sa,W,ze),et===null?Ie=Sa:et.sibling=Sa,et=Sa,ke=Hn}if(ht.done)return d(Y,ke),yt&&$l(Y,ze),Ie;if(ke===null){for(;!ht.done;ze++,ht=X.next())ht=ce(Y,ht.value,le),ht!==null&&(W=b(ht,W,ze),et===null?Ie=ht:et.sibling=ht,et=ht);return yt&&$l(Y,ze),Ie}for(ke=g(ke);!ht.done;ze++,ht=X.next())ht=te(ke,Y,ze,ht.value,le),ht!==null&&(a&&ht.alternate!==null&&ke.delete(ht.key===null?ze:ht.key),W=b(ht,W,ze),et===null?Ie=ht:et.sibling=ht,et=ht);return a&&ke.forEach(function(yG){return l(Y,yG)}),yt&&$l(Y,ze),Ie}function Mt(Y,W,X,le){if(typeof X=="object"&&X!==null&&X.type===w&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case _:e:{for(var Ie=X.key;W!==null;){if(W.key===Ie){if(Ie=X.type,Ie===w){if(W.tag===7){d(Y,W.sibling),le=T(W,X.props.children),le.return=Y,Y=le;break e}}else if(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===N&&oP(Ie)===W.type){d(Y,W.sibling),le=T(W,X.props),Ph(le,X),le.return=Y,Y=le;break e}d(Y,W);break}else l(Y,W);W=W.sibling}X.type===w?(le=ql(X.props.children,Y.mode,le,X.key),le.return=Y,Y=le):(le=Lg(X.type,X.key,X.props,null,Y.mode,le),Ph(le,X),le.return=Y,Y=le)}return x(Y);case E:e:{for(Ie=X.key;W!==null;){if(W.key===Ie)if(W.tag===4&&W.stateNode.containerInfo===X.containerInfo&&W.stateNode.implementation===X.implementation){d(Y,W.sibling),le=T(W,X.children||[]),le.return=Y,Y=le;break e}else{d(Y,W);break}else l(Y,W);W=W.sibling}le=ST(X,Y.mode,le),le.return=Y,Y=le}return x(Y);case N:return Ie=X._init,X=Ie(X._payload),Mt(Y,W,X,le)}if(Pe(X))return je(Y,W,X,le);if(G(X)){if(Ie=G(X),typeof Ie!="function")throw Error(r(150));return X=Ie.call(X),Be(Y,W,X,le)}if(typeof X.then=="function")return Mt(Y,W,ey(X),le);if(X.$$typeof===P)return Mt(Y,W,qg(Y,X),le);ty(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,W!==null&&W.tag===6?(d(Y,W.sibling),le=T(W,X),le.return=Y,Y=le):(d(Y,W),le=AT(X,Y.mode,le),le.return=Y,Y=le),x(Y)):d(Y,W)}return function(Y,W,X,le){try{Rh=0;var Ie=Mt(Y,W,X,le);return Bc=null,Ie}catch(ke){if(ke===Th||ke===$g)throw ke;var et=Yr(29,ke,null,Y.mode);return et.lanes=le,et.return=Y,et}finally{}}}var qc=sP(!0),aP=sP(!1),Ci=ue(null),wo=null;function ca(a){var l=a.alternate;de(Vn,Vn.current&1),de(Ci,a),wo===null&&(l===null||Vc.current!==null||l.memoizedState!==null)&&(wo=a)}function lP(a){if(a.tag===22){if(de(Vn,Vn.current),de(Ci,a),wo===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(wo=a)}}else fa()}function fa(){de(Vn,Vn.current),de(Ci,Ci.current)}function gs(a){se(Ci),wo===a&&(wo=null),se(Vn)}var Vn=ue(0);function ny(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||KE(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function iE(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:h({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var oE={enqueueSetState:function(a,l,d){a=a._reactInternals;var g=Zr(),T=aa(g);T.payload=l,d!=null&&(T.callback=d),l=la(a,T,g),l!==null&&(ei(l,a,g),bh(l,a,g))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=Zr(),T=aa(g);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=la(a,T,g),l!==null&&(ei(l,a,g),bh(l,a,g))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=Zr(),g=aa(d);g.tag=2,l!=null&&(g.callback=l),l=la(a,g,d),l!==null&&(ei(l,a,d),bh(l,a,d))}};function uP(a,l,d,g,T,b,x){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,b,x):l.prototype&&l.prototype.isPureReactComponent?!dh(d,g)||!dh(T,b):!0}function cP(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&oE.enqueueReplaceState(l,l.state,null)}function Jl(a,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(a=a.defaultProps){d===l&&(d=h({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}var ry=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function fP(a){ry(a)}function dP(a){console.error(a)}function hP(a){ry(a)}function iy(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function mP(a,l,d){try{var g=a.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function sE(a,l,d){return d=aa(d),d.tag=3,d.payload={element:null},d.callback=function(){iy(a,l)},d}function pP(a){return a=aa(a),a.tag=3,a}function gP(a,l,d,g){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var b=g.value;a.payload=function(){return T(b)},a.callback=function(){mP(l,d,g)}}var x=d.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(a.callback=function(){mP(l,d,g),typeof T!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function y$(a,l,d,g,T){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&yh(l,d,T,!0),d=Ci.current,d!==null){switch(d.tag){case 13:return wo===null?PE():d.alternate===null&&on===0&&(on=3),d.flags&=-257,d.flags|=65536,d.lanes=T,g===OT?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),DE(a,g,T)),!1;case 22:return d.flags|=65536,g===OT?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),DE(a,g,T)),!1}throw Error(r(435,d.tag))}return DE(a,g,T),PE(),!1}if(yt)return l=Ci.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=T,g!==xT&&(a=Error(r(422),{cause:g}),gh(wi(a,d)))):(g!==xT&&(l=Error(r(423),{cause:g}),gh(wi(l,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,g=wi(g,d),T=sE(a.stateNode,g,T),UT(a,T),on!==4&&(on=2)),!1;var b=Error(r(520),{cause:g});if(b=wi(b,d),Lh===null?Lh=[b]:Lh.push(b),on!==4&&(on=2),l===null)return!0;g=wi(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=sE(d.stateNode,g,a),UT(d,a),!1;case 1:if(l=d.type,b=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ya===null||!ya.has(b))))return d.flags|=65536,T&=-T,d.lanes|=T,T=pP(T),gP(T,a,d,g),UT(d,T),!1}d=d.return}while(d!==null);return!1}var yP=Error(r(461)),Gn=!1;function nr(a,l,d,g){l.child=a===null?aP(l,null,d,g):qc(l,a.child,d,g)}function vP(a,l,d,g,T){d=d.render;var b=l.ref;if("ref"in g){var x={};for(var k in g)k!=="ref"&&(x[k]=g[k])}else x=g;return Kl(l),g=$T(a,l,d,x,b,T),k=GT(),a!==null&&!Gn?(jT(a,l,T),ys(a,l,T)):(yt&&k&&IT(l),l.flags|=1,nr(a,l,g,T),l.child)}function _P(a,l,d,g,T){if(a===null){var b=d.type;return typeof b=="function"&&!wT(b)&&b.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=b,TP(a,l,b,g,T)):(a=Lg(d.type,null,g,l,l.mode,T),a.ref=l.ref,a.return=l,l.child=a)}if(b=a.child,!mE(a,T)){var x=b.memoizedProps;if(d=d.compare,d=d!==null?d:dh,d(x,g)&&a.ref===l.ref)return ys(a,l,T)}return l.flags|=1,a=cs(b,g),a.ref=l.ref,a.return=l,l.child=a}function TP(a,l,d,g,T){if(a!==null){var b=a.memoizedProps;if(dh(b,g)&&a.ref===l.ref)if(Gn=!1,l.pendingProps=g=b,mE(a,T))(a.flags&131072)!==0&&(Gn=!0);else return l.lanes=a.lanes,ys(a,l,T)}return aE(a,l,d,g,T)}function EP(a,l,d){var g=l.pendingProps,T=g.children,b=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=b!==null?b.baseLanes|d:d,a!==null){for(T=l.child=a.child,b=0;T!==null;)b=b|T.lanes|T.childLanes,T=T.sibling;l.childLanes=b&~g}else l.childLanes=0,l.child=null;return bP(a,l,g,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&zg(l,b!==null?b.cachePool:null),b!==null?TR(l,b):BT(),lP(l);else return l.lanes=l.childLanes=536870912,bP(a,l,b!==null?b.baseLanes|d:d,d)}else b!==null?(zg(l,b.cachePool),TR(l,b),fa(),l.memoizedState=null):(a!==null&&zg(l,null),BT(),fa());return nr(a,l,T,d),l.child}function bP(a,l,d,g){var T=kT();return T=T===null?null:{parent:On._currentValue,pool:T},l.memoizedState={baseLanes:d,cachePool:T},a!==null&&zg(l,null),BT(),lP(l),a!==null&&yh(a,l,g,!0),null}function oy(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function aE(a,l,d,g,T){return Kl(l),d=$T(a,l,d,g,void 0,T),g=GT(),a!==null&&!Gn?(jT(a,l,T),ys(a,l,T)):(yt&&g&&IT(l),l.flags|=1,nr(a,l,d,T),l.child)}function wP(a,l,d,g,T,b){return Kl(l),l.updateQueue=null,d=bR(l,g,d,T),ER(a),g=GT(),a!==null&&!Gn?(jT(a,l,b),ys(a,l,b)):(yt&&g&&IT(l),l.flags|=1,nr(a,l,d,b),l.child)}function AP(a,l,d,g,T){if(Kl(l),l.stateNode===null){var b=Mc,x=d.contextType;typeof x=="object"&&x!==null&&(b=mr(x)),b=new d(g,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=oE,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=g,b.state=l.memoizedState,b.refs={},VT(l),x=d.contextType,b.context=typeof x=="object"&&x!==null?mr(x):Mc,b.state=l.memoizedState,x=d.getDerivedStateFromProps,typeof x=="function"&&(iE(l,d,x,g),b.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(x=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),x!==b.state&&oE.enqueueReplaceState(b,b.state,null),Ah(l,g,b,T),wh(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(a===null){b=l.stateNode;var k=l.memoizedProps,j=Jl(d,k);b.props=j;var Z=b.context,oe=d.contextType;x=Mc,typeof oe=="object"&&oe!==null&&(x=mr(oe));var ce=d.getDerivedStateFromProps;oe=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=l.pendingProps!==k,oe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||Z!==x)&&cP(l,b,g,x),sa=!1;var ee=l.memoizedState;b.state=ee,Ah(l,g,b,T),wh(),Z=l.memoizedState,k||ee!==Z||sa?(typeof ce=="function"&&(iE(l,d,ce,g),Z=l.memoizedState),(j=sa||uP(l,d,j,g,ee,Z,x))?(oe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Z),b.props=g,b.state=Z,b.context=x,g=j):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{b=l.stateNode,LT(a,l),x=l.memoizedProps,oe=Jl(d,x),b.props=oe,ce=l.pendingProps,ee=b.context,Z=d.contextType,j=Mc,typeof Z=="object"&&Z!==null&&(j=mr(Z)),k=d.getDerivedStateFromProps,(Z=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(x!==ce||ee!==j)&&cP(l,b,g,j),sa=!1,ee=l.memoizedState,b.state=ee,Ah(l,g,b,T),wh();var te=l.memoizedState;x!==ce||ee!==te||sa||a!==null&&a.dependencies!==null&&Bg(a.dependencies)?(typeof k=="function"&&(iE(l,d,k,g),te=l.memoizedState),(oe=sa||uP(l,d,oe,g,ee,te,j)||a!==null&&a.dependencies!==null&&Bg(a.dependencies))?(Z||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,te,j),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,te,j)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||x===a.memoizedProps&&ee===a.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||x===a.memoizedProps&&ee===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=te),b.props=g,b.state=te,b.context=j,g=oe):(typeof b.componentDidUpdate!="function"||x===a.memoizedProps&&ee===a.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||x===a.memoizedProps&&ee===a.memoizedState||(l.flags|=1024),g=!1)}return b=g,oy(a,l),g=(l.flags&128)!==0,b||g?(b=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,a!==null&&g?(l.child=qc(l,a.child,null,T),l.child=qc(l,null,d,T)):nr(a,l,d,T),l.memoizedState=b.state,a=l.child):a=ys(a,l,T),a}function SP(a,l,d,g){return ph(),l.flags|=256,nr(a,l,d,g),l.child}var lE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uE(a){return{baseLanes:a,cachePool:dR()}}function cE(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=xi),a}function IP(a,l,d){var g=l.pendingProps,T=!1,b=(l.flags&128)!==0,x;if((x=b)||(x=a!==null&&a.memoizedState===null?!1:(Vn.current&2)!==0),x&&(T=!0,l.flags&=-129),x=(l.flags&32)!==0,l.flags&=-33,a===null){if(yt){if(T?ca(l):fa(),yt){var k=rn,j;if(j=k){e:{for(j=k,k=bo;j.nodeType!==8;){if(!k){k=null;break e}if(j=Xi(j.nextSibling),j===null){k=null;break e}}k=j}k!==null?(l.memoizedState={dehydrated:k,treeContext:zl!==null?{id:fs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},j=Yr(18,null,null,0),j.stateNode=k,j.return=l,l.child=j,xr=l,rn=null,j=!0):j=!1}j||jl(l)}if(k=l.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return KE(k)?l.lanes=32:l.lanes=536870912,null;gs(l)}return k=g.children,g=g.fallback,T?(fa(),T=l.mode,k=sy({mode:"hidden",children:k},T),g=ql(g,T,d,null),k.return=l,g.return=l,k.sibling=g,l.child=k,T=l.child,T.memoizedState=uE(d),T.childLanes=cE(a,x,d),l.memoizedState=lE,g):(ca(l),fE(l,k))}if(j=a.memoizedState,j!==null&&(k=j.dehydrated,k!==null)){if(b)l.flags&256?(ca(l),l.flags&=-257,l=dE(a,l,d)):l.memoizedState!==null?(fa(),l.child=a.child,l.flags|=128,l=null):(fa(),T=g.fallback,k=l.mode,g=sy({mode:"visible",children:g.children},k),T=ql(T,k,d,null),T.flags|=2,g.return=l,T.return=l,g.sibling=T,l.child=g,qc(l,a.child,null,d),g=l.child,g.memoizedState=uE(d),g.childLanes=cE(a,x,d),l.memoizedState=lE,l=T);else if(ca(l),KE(k)){if(x=k.nextSibling&&k.nextSibling.dataset,x)var Z=x.dgst;x=Z,g=Error(r(419)),g.stack="",g.digest=x,gh({value:g,source:null,stack:null}),l=dE(a,l,d)}else if(Gn||yh(a,l,d,!1),x=(d&a.childLanes)!==0,Gn||x){if(x=Vt,x!==null&&(g=d&-d,g=(g&42)!==0?1:Xs(g),g=(g&(x.suspendedLanes|d))!==0?0:g,g!==0&&g!==j.retryLane))throw j.retryLane=g,Pc(a,g),ei(x,a,g),yP;k.data==="$?"||PE(),l=dE(a,l,d)}else k.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=j.treeContext,rn=Xi(k.nextSibling),xr=l,yt=!0,Gl=null,bo=!1,a!==null&&(Si[Ii++]=fs,Si[Ii++]=ds,Si[Ii++]=zl,fs=a.id,ds=a.overflow,zl=l),l=fE(l,g.children),l.flags|=4096);return l}return T?(fa(),T=g.fallback,k=l.mode,j=a.child,Z=j.sibling,g=cs(j,{mode:"hidden",children:g.children}),g.subtreeFlags=j.subtreeFlags&65011712,Z!==null?T=cs(Z,T):(T=ql(T,k,d,null),T.flags|=2),T.return=l,g.return=l,g.sibling=T,l.child=g,g=T,T=l.child,k=a.child.memoizedState,k===null?k=uE(d):(j=k.cachePool,j!==null?(Z=On._currentValue,j=j.parent!==Z?{parent:Z,pool:Z}:j):j=dR(),k={baseLanes:k.baseLanes|d,cachePool:j}),T.memoizedState=k,T.childLanes=cE(a,x,d),l.memoizedState=lE,g):(ca(l),d=a.child,a=d.sibling,d=cs(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,a!==null&&(x=l.deletions,x===null?(l.deletions=[a],l.flags|=16):x.push(a)),l.child=d,l.memoizedState=null,d)}function fE(a,l){return l=sy({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function sy(a,l){return a=Yr(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function dE(a,l,d){return qc(l,a.child,null,d),a=fE(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function CP(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),PT(a.return,l,d)}function hE(a,l,d,g,T){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:T}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=d,b.tailMode=T)}function xP(a,l,d){var g=l.pendingProps,T=g.revealOrder,b=g.tail;if(nr(a,l,g.children,d),g=Vn.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&CP(a,d,l);else if(a.tag===19)CP(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(de(Vn,g),T){case"forwards":for(d=l.child,T=null;d!==null;)a=d.alternate,a!==null&&ny(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=l.child,l.child=null):(T=d.sibling,d.sibling=null),hE(l,!1,T,d,b);break;case"backwards":for(d=null,T=l.child,l.child=null;T!==null;){if(a=T.alternate,a!==null&&ny(a)===null){l.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}hE(l,!0,d,null,b);break;case"together":hE(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ys(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),ga|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(yh(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,d=cs(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=cs(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function mE(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Bg(a)))}function v$(a,l,d){switch(l.tag){case 3:Ct(l,l.stateNode.containerInfo),oa(l,On,a.memoizedState.cache),ph();break;case 27:case 5:Ke(l);break;case 4:Ct(l,l.stateNode.containerInfo);break;case 10:oa(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(ca(l),l.flags|=128,null):(d&l.child.childLanes)!==0?IP(a,l,d):(ca(l),a=ys(a,l,d),a!==null?a.sibling:null);ca(l);break;case 19:var T=(a.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(yh(a,l,d,!1),g=(d&l.childLanes)!==0),T){if(g)return xP(a,l,d);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),de(Vn,Vn.current),g)break;return null;case 22:case 23:return l.lanes=0,EP(a,l,d);case 24:oa(l,On,a.memoizedState.cache)}return ys(a,l,d)}function RP(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)Gn=!0;else{if(!mE(a,d)&&(l.flags&128)===0)return Gn=!1,v$(a,l,d);Gn=(a.flags&131072)!==0}else Gn=!1,yt&&(l.flags&1048576)!==0&&oR(l,Fg,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var g=l.elementType,T=g._init;if(g=T(g._payload),l.type=g,typeof g=="function")wT(g)?(a=Jl(g,a),l.tag=1,l=AP(null,l,g,a,d)):(l.tag=0,l=aE(null,l,g,a,d));else{if(g!=null){if(T=g.$$typeof,T===F){l.tag=11,l=vP(null,l,g,a,d);break e}else if(T===D){l.tag=14,l=_P(null,l,g,a,d);break e}}throw l=Ve(g)||g,Error(r(306,l,""))}}return l;case 0:return aE(a,l,l.type,l.pendingProps,d);case 1:return g=l.type,T=Jl(g,l.pendingProps),AP(a,l,g,T,d);case 3:e:{if(Ct(l,l.stateNode.containerInfo),a===null)throw Error(r(387));g=l.pendingProps;var b=l.memoizedState;T=b.element,LT(a,l),Ah(l,g,null,d);var x=l.memoizedState;if(g=x.cache,oa(l,On,g),g!==b.cache&&MT(l,[On],d,!0),wh(),g=x.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:x.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=SP(a,l,g,d);break e}else if(g!==T){T=wi(Error(r(424)),l),gh(T),l=SP(a,l,g,d);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(rn=Xi(a.firstChild),xr=l,yt=!0,Gl=null,bo=!0,d=aP(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(ph(),g===T){l=ys(a,l,d);break e}nr(a,l,g,d)}l=l.child}return l;case 26:return oy(a,l),a===null?(d=NM(l.type,null,l.pendingProps,null))?l.memoizedState=d:yt||(d=l.type,a=l.pendingProps,g=Ty(Ge.current).createElement(d),g[Dn]=l,g[_n]=a,ir(g,d,a),un(g),l.stateNode=g):l.memoizedState=NM(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Ke(l),a===null&&yt&&(g=l.stateNode=PM(l.type,l.pendingProps,Ge.current),xr=l,bo=!0,T=rn,Ta(l.type)?(WE=T,rn=Xi(g.firstChild)):rn=T),nr(a,l,l.pendingProps.children,d),oy(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&yt&&((T=g=rn)&&(g=H$(g,l.type,l.pendingProps,bo),g!==null?(l.stateNode=g,xr=l,rn=Xi(g.firstChild),bo=!1,T=!0):T=!1),T||jl(l)),Ke(l),T=l.type,b=l.pendingProps,x=a!==null?a.memoizedProps:null,g=b.children,GE(T,b)?g=null:x!==null&&GE(T,x)&&(l.flags|=32),l.memoizedState!==null&&(T=$T(a,l,c$,null,null,d),Hh._currentValue=T),oy(a,l),nr(a,l,g,d),l.child;case 6:return a===null&&yt&&((a=d=rn)&&(d=K$(d,l.pendingProps,bo),d!==null?(l.stateNode=d,xr=l,rn=null,a=!0):a=!1),a||jl(l)),null;case 13:return IP(a,l,d);case 4:return Ct(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=qc(l,null,g,d):nr(a,l,g,d),l.child;case 11:return vP(a,l,l.type,l.pendingProps,d);case 7:return nr(a,l,l.pendingProps,d),l.child;case 8:return nr(a,l,l.pendingProps.children,d),l.child;case 12:return nr(a,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,oa(l,l.type,g.value),nr(a,l,g.children,d),l.child;case 9:return T=l.type._context,g=l.pendingProps.children,Kl(l),T=mr(T),g=g(T),l.flags|=1,nr(a,l,g,d),l.child;case 14:return _P(a,l,l.type,l.pendingProps,d);case 15:return TP(a,l,l.type,l.pendingProps,d);case 19:return xP(a,l,d);case 31:return g=l.pendingProps,d=l.mode,g={mode:g.mode,children:g.children},a===null?(d=sy(g,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=cs(a.child,g),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return EP(a,l,d);case 24:return Kl(l),g=mr(On),a===null?(T=kT(),T===null&&(T=Vt,b=DT(),T.pooledCache=b,b.refCount++,b!==null&&(T.pooledCacheLanes|=d),T=b),l.memoizedState={parent:g,cache:T},VT(l),oa(l,On,T)):((a.lanes&d)!==0&&(LT(a,l),Ah(l,null,null,d),wh()),T=a.memoizedState,b=l.memoizedState,T.parent!==g?(T={parent:g,cache:g},l.memoizedState=T,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=T),oa(l,On,g)):(g=b.cache,oa(l,On,g),g!==T.cache&&MT(l,[On],d,!0))),nr(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function vs(a){a.flags|=4}function PP(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!UM(l)){if(l=Ci.current,l!==null&&((ft&4194048)===ft?wo!==null:(ft&62914560)!==ft&&(ft&536870912)===0||l!==wo))throw Eh=OT,hR;a.flags|=8192}}function ay(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Wd():536870912,a.lanes|=l,jc|=l)}function Mh(a,l){if(!yt)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Qt(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,g|=T.subtreeFlags&65011712,g|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,g|=T.subtreeFlags,g|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function _$(a,l,d){var g=l.pendingProps;switch(CT(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(l),null;case 1:return Qt(l),null;case 3:return d=l.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),ms(On),Ee(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(mh(l)?vs(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,lR())),Qt(l),null;case 26:return d=l.memoizedState,a===null?(vs(l),d!==null?(Qt(l),PP(l,d)):(Qt(l),l.flags&=-16777217)):d?d!==a.memoizedState?(vs(l),Qt(l),PP(l,d)):(Qt(l),l.flags&=-16777217):(a.memoizedProps!==g&&vs(l),Qt(l),l.flags&=-16777217),null;case 27:Ye(l),d=Ge.current;var T=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}a=Me.current,mh(l)?sR(l):(a=PM(T,g,d),l.stateNode=a,vs(l))}return Qt(l),null;case 5:if(Ye(l),d=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return Qt(l),null}if(a=Me.current,mh(l))sR(l);else{switch(T=Ty(Ge.current),a){case 1:a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=T.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?T.createElement("select",{is:g.is}):T.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?T.createElement(d,{is:g.is}):T.createElement(d)}}a[Dn]=l,a[_n]=g;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)a.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=a;e:switch(ir(a,d,g),d){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&vs(l)}}return Qt(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==g&&vs(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(a=Ge.current,mh(l)){if(a=l.stateNode,d=l.memoizedProps,g=null,T=xr,T!==null)switch(T.tag){case 27:case 5:g=T.memoizedProps}a[Dn]=l,a=!!(a.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||wM(a.nodeValue,d)),a||jl(l)}else a=Ty(a).createTextNode(g),a[Dn]=l,l.stateNode=a}return Qt(l),null;case 13:if(g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=mh(l),g!==null&&g.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[Dn]=l}else ph(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qt(l),T=!1}else T=lR(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return l.flags&256?(gs(l),l):(gs(l),null)}if(gs(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=g!==null,a=a!==null&&a.memoizedState!==null,d){g=l.child,T=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(T=g.alternate.memoizedState.cachePool.pool);var b=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(b=g.memoizedState.cachePool.pool),b!==T&&(g.flags|=2048)}return d!==a&&d&&(l.child.flags|=8192),ay(l,l.updateQueue),Qt(l),null;case 4:return Ee(),a===null&&FE(l.stateNode.containerInfo),Qt(l),null;case 10:return ms(l.type),Qt(l),null;case 19:if(se(Vn),T=l.memoizedState,T===null)return Qt(l),null;if(g=(l.flags&128)!==0,b=T.rendering,b===null)if(g)Mh(T,!1);else{if(on!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(b=ny(a),b!==null){for(l.flags|=128,Mh(T,!1),a=b.updateQueue,l.updateQueue=a,ay(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)iR(d,a),d=d.sibling;return de(Vn,Vn.current&1|2),l.child}a=a.sibling}T.tail!==null&&vn()>cy&&(l.flags|=128,g=!0,Mh(T,!1),l.lanes=4194304)}else{if(!g)if(a=ny(b),a!==null){if(l.flags|=128,g=!0,a=a.updateQueue,l.updateQueue=a,ay(l,a),Mh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!b.alternate&&!yt)return Qt(l),null}else 2*vn()-T.renderingStartTime>cy&&d!==536870912&&(l.flags|=128,g=!0,Mh(T,!1),l.lanes=4194304);T.isBackwards?(b.sibling=l.child,l.child=b):(a=T.last,a!==null?a.sibling=b:l.child=b,T.last=b)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=vn(),l.sibling=null,a=Vn.current,de(Vn,g?a&1|2:a&1),l):(Qt(l),null);case 22:case 23:return gs(l),qT(),g=l.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(Qt(l),l.subtreeFlags&6&&(l.flags|=8192)):Qt(l),d=l.updateQueue,d!==null&&ay(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),a!==null&&se(Wl),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ms(On),Qt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function T$(a,l){switch(CT(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return ms(On),Ee(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Ye(l),null;case 13:if(gs(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));ph()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return se(Vn),null;case 4:return Ee(),null;case 10:return ms(l.type),null;case 22:case 23:return gs(l),qT(),a!==null&&se(Wl),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return ms(On),null;case 25:return null;default:return null}}function MP(a,l){switch(CT(l),l.tag){case 3:ms(On),Ee();break;case 26:case 27:case 5:Ye(l);break;case 4:Ee();break;case 13:gs(l);break;case 19:se(Vn);break;case 10:ms(l.type);break;case 22:case 23:gs(l),qT(),a!==null&&se(Wl);break;case 24:ms(On)}}function Dh(a,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var T=g.next;d=T;do{if((d.tag&a)===a){g=void 0;var b=d.create,x=d.inst;g=b(),x.destroy=g}d=d.next}while(d!==T)}}catch(k){Nt(l,l.return,k)}}function da(a,l,d){try{var g=l.updateQueue,T=g!==null?g.lastEffect:null;if(T!==null){var b=T.next;g=b;do{if((g.tag&a)===a){var x=g.inst,k=x.destroy;if(k!==void 0){x.destroy=void 0,T=l;var j=d,Z=k;try{Z()}catch(oe){Nt(T,j,oe)}}}g=g.next}while(g!==b)}}catch(oe){Nt(l,l.return,oe)}}function DP(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{_R(l,d)}catch(g){Nt(a,a.return,g)}}}function NP(a,l,d){d.props=Jl(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(g){Nt(a,l,g)}}function Nh(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof d=="function"?a.refCleanup=d(g):d.current=g}}catch(T){Nt(a,l,T)}}function Ao(a,l){var d=a.ref,g=a.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(T){Nt(a,l,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){Nt(a,l,T)}else d.current=null}function kP(a){var l=a.type,d=a.memoizedProps,g=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(T){Nt(a,a.return,T)}}function pE(a,l,d){try{var g=a.stateNode;q$(g,a.type,d,l),g[_n]=l}catch(T){Nt(a,a.return,T)}}function OP(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ta(a.type)||a.tag===4}function gE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||OP(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ta(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function yE(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=_y));else if(g!==4&&(g===27&&Ta(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(yE(a,l,d),a=a.sibling;a!==null;)yE(a,l,d),a=a.sibling}function ly(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(g===27&&Ta(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(ly(a,l,d),a=a.sibling;a!==null;)ly(a,l,d),a=a.sibling}function VP(a){var l=a.stateNode,d=a.memoizedProps;try{for(var g=a.type,T=l.attributes;T.length;)l.removeAttributeNode(T[0]);ir(l,g,d),l[Dn]=a,l[_n]=d}catch(b){Nt(a,a.return,b)}}var _s=!1,fn=!1,vE=!1,LP=typeof WeakSet=="function"?WeakSet:Set,jn=null;function E$(a,l){if(a=a.containerInfo,zE=Iy,a=W1(a),gT(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var T=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var x=0,k=-1,j=-1,Z=0,oe=0,ce=a,ee=null;t:for(;;){for(var te;ce!==d||T!==0&&ce.nodeType!==3||(k=x+T),ce!==b||g!==0&&ce.nodeType!==3||(j=x+g),ce.nodeType===3&&(x+=ce.nodeValue.length),(te=ce.firstChild)!==null;)ee=ce,ce=te;for(;;){if(ce===a)break t;if(ee===d&&++Z===T&&(k=x),ee===b&&++oe===g&&(j=x),(te=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=te}d=k===-1||j===-1?null:{start:k,end:j}}else d=null}d=d||{start:0,end:0}}else d=null;for($E={focusedElem:a,selectionRange:d},Iy=!1,jn=l;jn!==null;)if(l=jn,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,jn=a;else for(;jn!==null;){switch(l=jn,b=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,d=l,T=b.memoizedProps,b=b.memoizedState,g=d.stateNode;try{var je=Jl(d.type,T,d.elementType===d.type);a=g.getSnapshotBeforeUpdate(je,b),g.__reactInternalSnapshotBeforeUpdate=a}catch(Be){Nt(d,d.return,Be)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)HE(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":HE(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=l.sibling,a!==null){a.return=l.return,jn=a;break}jn=l.return}}function UP(a,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:ha(a,d),g&4&&Dh(5,d);break;case 1:if(ha(a,d),g&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(x){Nt(d,d.return,x)}else{var T=Jl(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(T,l,a.__reactInternalSnapshotBeforeUpdate)}catch(x){Nt(d,d.return,x)}}g&64&&DP(d),g&512&&Nh(d,d.return);break;case 3:if(ha(a,d),g&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{_R(a,l)}catch(x){Nt(d,d.return,x)}}break;case 27:l===null&&g&4&&VP(d);case 26:case 5:ha(a,d),l===null&&g&4&&kP(d),g&512&&Nh(d,d.return);break;case 12:ha(a,d);break;case 13:ha(a,d),g&4&&qP(a,d),g&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=P$.bind(null,d),W$(a,d))));break;case 22:if(g=d.memoizedState!==null||_s,!g){l=l!==null&&l.memoizedState!==null||fn,T=_s;var b=fn;_s=g,(fn=l)&&!b?ma(a,d,(d.subtreeFlags&8772)!==0):ha(a,d),_s=T,fn=b}break;case 30:break;default:ha(a,d)}}function FP(a){var l=a.alternate;l!==null&&(a.alternate=null,FP(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&ta(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var jt=null,Lr=!1;function Ts(a,l,d){for(d=d.child;d!==null;)BP(a,l,d),d=d.sibling}function BP(a,l,d){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(nn,d)}catch{}switch(d.tag){case 26:fn||Ao(d,l),Ts(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:fn||Ao(d,l);var g=jt,T=Lr;Ta(d.type)&&(jt=d.stateNode,Lr=!1),Ts(a,l,d),zh(d.stateNode),jt=g,Lr=T;break;case 5:fn||Ao(d,l);case 6:if(g=jt,T=Lr,jt=null,Ts(a,l,d),jt=g,Lr=T,jt!==null)if(Lr)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(d.stateNode)}catch(b){Nt(d,l,b)}else try{jt.removeChild(d.stateNode)}catch(b){Nt(d,l,b)}break;case 18:jt!==null&&(Lr?(a=jt,xM(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Jh(a)):xM(jt,d.stateNode));break;case 4:g=jt,T=Lr,jt=d.stateNode.containerInfo,Lr=!0,Ts(a,l,d),jt=g,Lr=T;break;case 0:case 11:case 14:case 15:fn||da(2,d,l),fn||da(4,d,l),Ts(a,l,d);break;case 1:fn||(Ao(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&NP(d,l,g)),Ts(a,l,d);break;case 21:Ts(a,l,d);break;case 22:fn=(g=fn)||d.memoizedState!==null,Ts(a,l,d),fn=g;break;default:Ts(a,l,d)}}function qP(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Jh(a)}catch(d){Nt(l,l.return,d)}}function b$(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new LP),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new LP),l;default:throw Error(r(435,a.tag))}}function _E(a,l){var d=b$(a);l.forEach(function(g){var T=M$.bind(null,a,g);d.has(g)||(d.add(g),g.then(T,T))})}function Jr(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var T=d[g],b=a,x=l,k=x;e:for(;k!==null;){switch(k.tag){case 27:if(Ta(k.type)){jt=k.stateNode,Lr=!1;break e}break;case 5:jt=k.stateNode,Lr=!1;break e;case 3:case 4:jt=k.stateNode.containerInfo,Lr=!0;break e}k=k.return}if(jt===null)throw Error(r(160));BP(b,x,T),jt=null,Lr=!1,b=T.alternate,b!==null&&(b.return=null),T.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)zP(l,a),l=l.sibling}var Qi=null;function zP(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Jr(l,a),Qr(a),g&4&&(da(3,a,a.return),Dh(3,a),da(5,a,a.return));break;case 1:Jr(l,a),Qr(a),g&512&&(fn||d===null||Ao(d,d.return)),g&64&&_s&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var T=Qi;if(Jr(l,a),Qr(a),g&512&&(fn||d===null||Ao(d,d.return)),g&4){var b=d!==null?d.memoizedState:null;if(g=a.memoizedState,d===null)if(g===null)if(a.stateNode===null){e:{g=a.type,d=a.memoizedProps,T=T.ownerDocument||T;t:switch(g){case"title":b=T.getElementsByTagName("title")[0],(!b||b[Sl]||b[Dn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=T.createElement(g),T.head.insertBefore(b,T.querySelector("head > title"))),ir(b,g,d),b[Dn]=a,un(b),g=b;break e;case"link":var x=VM("link","href",T).get(g+(d.href||""));if(x){for(var k=0;k<x.length;k++)if(b=x[k],b.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&b.getAttribute("rel")===(d.rel==null?null:d.rel)&&b.getAttribute("title")===(d.title==null?null:d.title)&&b.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){x.splice(k,1);break t}}b=T.createElement(g),ir(b,g,d),T.head.appendChild(b);break;case"meta":if(x=VM("meta","content",T).get(g+(d.content||""))){for(k=0;k<x.length;k++)if(b=x[k],b.getAttribute("content")===(d.content==null?null:""+d.content)&&b.getAttribute("name")===(d.name==null?null:d.name)&&b.getAttribute("property")===(d.property==null?null:d.property)&&b.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&b.getAttribute("charset")===(d.charSet==null?null:d.charSet)){x.splice(k,1);break t}}b=T.createElement(g),ir(b,g,d),T.head.appendChild(b);break;default:throw Error(r(468,g))}b[Dn]=a,un(b),g=b}a.stateNode=g}else LM(T,a.type,a.stateNode);else a.stateNode=OM(T,g,a.memoizedProps);else b!==g?(b===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):b.count--,g===null?LM(T,a.type,a.stateNode):OM(T,g,a.memoizedProps)):g===null&&a.stateNode!==null&&pE(a,a.memoizedProps,d.memoizedProps)}break;case 27:Jr(l,a),Qr(a),g&512&&(fn||d===null||Ao(d,d.return)),d!==null&&g&4&&pE(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Jr(l,a),Qr(a),g&512&&(fn||d===null||Ao(d,d.return)),a.flags&32){T=a.stateNode;try{_i(T,"")}catch(te){Nt(a,a.return,te)}}g&4&&a.stateNode!=null&&(T=a.memoizedProps,pE(a,T,d!==null?d.memoizedProps:T)),g&1024&&(vE=!0);break;case 6:if(Jr(l,a),Qr(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,d=a.stateNode;try{d.nodeValue=g}catch(te){Nt(a,a.return,te)}}break;case 3:if(wy=null,T=Qi,Qi=Ey(l.containerInfo),Jr(l,a),Qi=T,Qr(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Jh(l.containerInfo)}catch(te){Nt(a,a.return,te)}vE&&(vE=!1,$P(a));break;case 4:g=Qi,Qi=Ey(a.stateNode.containerInfo),Jr(l,a),Qr(a),Qi=g;break;case 12:Jr(l,a),Qr(a);break;case 13:Jr(l,a),Qr(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(SE=vn()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,_E(a,g)));break;case 22:T=a.memoizedState!==null;var j=d!==null&&d.memoizedState!==null,Z=_s,oe=fn;if(_s=Z||T,fn=oe||j,Jr(l,a),fn=oe,_s=Z,Qr(a),g&8192)e:for(l=a.stateNode,l._visibility=T?l._visibility&-2:l._visibility|1,T&&(d===null||j||_s||fn||Ql(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){j=d=l;try{if(b=j.stateNode,T)x=b.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{k=j.stateNode;var ce=j.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;k.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){Nt(j,j.return,te)}}}else if(l.tag===6){if(d===null){j=l;try{j.stateNode.nodeValue=T?"":j.memoizedProps}catch(te){Nt(j,j.return,te)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=a.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,_E(a,d))));break;case 19:Jr(l,a),Qr(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,_E(a,g)));break;case 30:break;case 21:break;default:Jr(l,a),Qr(a)}}function Qr(a){var l=a.flags;if(l&2){try{for(var d,g=a.return;g!==null;){if(OP(g)){d=g;break}g=g.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var T=d.stateNode,b=gE(a);ly(a,b,T);break;case 5:var x=d.stateNode;d.flags&32&&(_i(x,""),d.flags&=-33);var k=gE(a);ly(a,k,x);break;case 3:case 4:var j=d.stateNode.containerInfo,Z=gE(a);yE(a,Z,j);break;default:throw Error(r(161))}}catch(oe){Nt(a,a.return,oe)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function $P(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;$P(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function ha(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)UP(a,l.alternate,l),l=l.sibling}function Ql(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:da(4,l,l.return),Ql(l);break;case 1:Ao(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&NP(l,l.return,d),Ql(l);break;case 27:zh(l.stateNode);case 26:case 5:Ao(l,l.return),Ql(l);break;case 22:l.memoizedState===null&&Ql(l);break;case 30:Ql(l);break;default:Ql(l)}a=a.sibling}}function ma(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,T=a,b=l,x=b.flags;switch(b.tag){case 0:case 11:case 15:ma(T,b,d),Dh(4,b);break;case 1:if(ma(T,b,d),g=b,T=g.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Z){Nt(g,g.return,Z)}if(g=b,T=g.updateQueue,T!==null){var k=g.stateNode;try{var j=T.shared.hiddenCallbacks;if(j!==null)for(T.shared.hiddenCallbacks=null,T=0;T<j.length;T++)vR(j[T],k)}catch(Z){Nt(g,g.return,Z)}}d&&x&64&&DP(b),Nh(b,b.return);break;case 27:VP(b);case 26:case 5:ma(T,b,d),d&&g===null&&x&4&&kP(b),Nh(b,b.return);break;case 12:ma(T,b,d);break;case 13:ma(T,b,d),d&&x&4&&qP(T,b);break;case 22:b.memoizedState===null&&ma(T,b,d),Nh(b,b.return);break;case 30:break;default:ma(T,b,d)}l=l.sibling}}function TE(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&vh(d))}function EE(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&vh(a))}function So(a,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)GP(a,l,d,g),l=l.sibling}function GP(a,l,d,g){var T=l.flags;switch(l.tag){case 0:case 11:case 15:So(a,l,d,g),T&2048&&Dh(9,l);break;case 1:So(a,l,d,g);break;case 3:So(a,l,d,g),T&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&vh(a)));break;case 12:if(T&2048){So(a,l,d,g),a=l.stateNode;try{var b=l.memoizedProps,x=b.id,k=b.onPostCommit;typeof k=="function"&&k(x,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(j){Nt(l,l.return,j)}}else So(a,l,d,g);break;case 13:So(a,l,d,g);break;case 23:break;case 22:b=l.stateNode,x=l.alternate,l.memoizedState!==null?b._visibility&2?So(a,l,d,g):kh(a,l):b._visibility&2?So(a,l,d,g):(b._visibility|=2,zc(a,l,d,g,(l.subtreeFlags&10256)!==0)),T&2048&&TE(x,l);break;case 24:So(a,l,d,g),T&2048&&EE(l.alternate,l);break;default:So(a,l,d,g)}}function zc(a,l,d,g,T){for(T=T&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var b=a,x=l,k=d,j=g,Z=x.flags;switch(x.tag){case 0:case 11:case 15:zc(b,x,k,j,T),Dh(8,x);break;case 23:break;case 22:var oe=x.stateNode;x.memoizedState!==null?oe._visibility&2?zc(b,x,k,j,T):kh(b,x):(oe._visibility|=2,zc(b,x,k,j,T)),T&&Z&2048&&TE(x.alternate,x);break;case 24:zc(b,x,k,j,T),T&&Z&2048&&EE(x.alternate,x);break;default:zc(b,x,k,j,T)}l=l.sibling}}function kh(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,g=l,T=g.flags;switch(g.tag){case 22:kh(d,g),T&2048&&TE(g.alternate,g);break;case 24:kh(d,g),T&2048&&EE(g.alternate,g);break;default:kh(d,g)}l=l.sibling}}var Oh=8192;function $c(a){if(a.subtreeFlags&Oh)for(a=a.child;a!==null;)jP(a),a=a.sibling}function jP(a){switch(a.tag){case 26:$c(a),a.flags&Oh&&a.memoizedState!==null&&aG(Qi,a.memoizedState,a.memoizedProps);break;case 5:$c(a);break;case 3:case 4:var l=Qi;Qi=Ey(a.stateNode.containerInfo),$c(a),Qi=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=Oh,Oh=16777216,$c(a),Oh=l):$c(a));break;default:$c(a)}}function HP(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Vh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];jn=g,WP(g,a)}HP(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)KP(a),a=a.sibling}function KP(a){switch(a.tag){case 0:case 11:case 15:Vh(a),a.flags&2048&&da(9,a,a.return);break;case 3:Vh(a);break;case 12:Vh(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,uy(a)):Vh(a);break;default:Vh(a)}}function uy(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];jn=g,WP(g,a)}HP(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:da(8,l,l.return),uy(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,uy(l));break;default:uy(l)}a=a.sibling}}function WP(a,l){for(;jn!==null;){var d=jn;switch(d.tag){case 0:case 11:case 15:da(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:vh(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,jn=g;else e:for(d=a;jn!==null;){g=jn;var T=g.sibling,b=g.return;if(FP(g),g===d){jn=null;break e}if(T!==null){T.return=b,jn=T;break e}jn=b}}}var w$={getCacheForType:function(a){var l=mr(On),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d}},A$=typeof WeakMap=="function"?WeakMap:Map,bt=0,Vt=null,tt=null,ft=0,wt=0,Xr=null,pa=!1,Gc=!1,bE=!1,Es=0,on=0,ga=0,Xl=0,wE=0,xi=0,jc=0,Lh=null,Ur=null,AE=!1,SE=0,cy=1/0,fy=null,ya=null,rr=0,va=null,Hc=null,Kc=0,IE=0,CE=null,YP=null,Uh=0,xE=null;function Zr(){if((bt&2)!==0&&ft!==0)return ft&-ft;if(ne.T!==null){var a=kc;return a!==0?a:OE()}return Zs()}function JP(){xi===0&&(xi=(ft&536870912)===0||yt?Kd():536870912);var a=Ci.current;return a!==null&&(a.flags|=32),xi}function ei(a,l,d){(a===Vt&&(wt===2||wt===9)||a.cancelPendingCommit!==null)&&(Wc(a,0),_a(a,ft,xi,!1)),Zo(a,d),((bt&2)===0||a!==Vt)&&(a===Vt&&((bt&2)===0&&(Xl|=d),on===4&&_a(a,ft,xi,!1)),Io(a))}function QP(a,l,d){if((bt&6)!==0)throw Error(r(327));var g=!d&&(l&124)===0&&(l&a.expiredLanes)===0||Al(a,l),T=g?C$(a,l):ME(a,l,!0),b=g;do{if(T===0){Gc&&!g&&_a(a,l,0,!1);break}else{if(d=a.current.alternate,b&&!S$(d)){T=ME(a,l,!1),b=!1;continue}if(T===2){if(b=l,a.errorRecoveryDisabledLanes&b)var x=0;else x=a.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){l=x;e:{var k=a;T=Lh;var j=k.current.memoizedState.isDehydrated;if(j&&(Wc(k,x).flags|=256),x=ME(k,x,!1),x!==2){if(bE&&!j){k.errorRecoveryDisabledLanes|=b,Xl|=b,T=4;break e}b=Ur,Ur=T,b!==null&&(Ur===null?Ur=b:Ur.push.apply(Ur,b))}T=x}if(b=!1,T!==2)continue}}if(T===1){Wc(a,0),_a(a,l,0,!0);break}e:{switch(g=a,b=T,b){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:_a(g,l,xi,!pa);break e;case 2:Ur=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(T=SE+300-vn(),10<T)){if(_a(g,l,xi,!pa),fc(g,0,!0)!==0)break e;g.timeoutHandle=IM(XP.bind(null,g,d,Ur,fy,AE,l,xi,Xl,jc,pa,b,2,-0,0),T);break e}XP(g,d,Ur,fy,AE,l,xi,Xl,jc,pa,b,0,-0,0)}}break}while(!0);Io(a)}function XP(a,l,d,g,T,b,x,k,j,Z,oe,ce,ee,te){if(a.timeoutHandle=-1,ce=l.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(jh={stylesheets:null,count:0,unsuspend:sG},jP(l),ce=lG(),ce!==null)){a.cancelPendingCommit=ce(oM.bind(null,a,l,b,d,g,T,x,k,j,oe,1,ee,te)),_a(a,b,x,!Z);return}oM(a,l,b,d,g,T,x,k,j)}function S$(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var T=d[g],b=T.getSnapshot;T=T.value;try{if(!Wr(b(),T))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function _a(a,l,d,g){l&=~wE,l&=~Xl,a.suspendedLanes|=l,a.pingedLanes&=~l,g&&(a.warmLanes|=l),g=a.expirationTimes;for(var T=l;0<T;){var b=31-hr(T),x=1<<b;g[b]=-1,T&=~x}d!==0&&co(a,d,l)}function dy(){return(bt&6)===0?(Fh(0),!1):!0}function RE(){if(tt!==null){if(wt===0)var a=tt.return;else a=tt,hs=Hl=null,HT(a),Bc=null,Rh=0,a=tt;for(;a!==null;)MP(a.alternate,a),a=a.return;tt=null}}function Wc(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,$$(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),RE(),Vt=a,tt=d=cs(a.current,null),ft=l,wt=0,Xr=null,pa=!1,Gc=Al(a,l),bE=!1,jc=xi=wE=Xl=ga=on=0,Ur=Lh=null,AE=!1,(l&8)!==0&&(l|=l&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=l;0<g;){var T=31-hr(g),b=1<<T;l|=a[T],g&=~b}return Es=l,kg(),d}function ZP(a,l){Ze=null,ne.H=Zg,l===Th||l===$g?(l=gR(),wt=3):l===hR?(l=gR(),wt=4):wt=l===yP?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Xr=l,tt===null&&(on=1,iy(a,wi(l,a.current)))}function eM(){var a=ne.H;return ne.H=Zg,a===null?Zg:a}function tM(){var a=ne.A;return ne.A=w$,a}function PE(){on=4,pa||(ft&4194048)!==ft&&Ci.current!==null||(Gc=!0),(ga&134217727)===0&&(Xl&134217727)===0||Vt===null||_a(Vt,ft,xi,!1)}function ME(a,l,d){var g=bt;bt|=2;var T=eM(),b=tM();(Vt!==a||ft!==l)&&(fy=null,Wc(a,l)),l=!1;var x=on;e:do try{if(wt!==0&&tt!==null){var k=tt,j=Xr;switch(wt){case 8:RE(),x=6;break e;case 3:case 2:case 9:case 6:Ci.current===null&&(l=!0);var Z=wt;if(wt=0,Xr=null,Yc(a,k,j,Z),d&&Gc){x=0;break e}break;default:Z=wt,wt=0,Xr=null,Yc(a,k,j,Z)}}I$(),x=on;break}catch(oe){ZP(a,oe)}while(!0);return l&&a.shellSuspendCounter++,hs=Hl=null,bt=g,ne.H=T,ne.A=b,tt===null&&(Vt=null,ft=0,kg()),x}function I$(){for(;tt!==null;)nM(tt)}function C$(a,l){var d=bt;bt|=2;var g=eM(),T=tM();Vt!==a||ft!==l?(fy=null,cy=vn()+500,Wc(a,l)):Gc=Al(a,l);e:do try{if(wt!==0&&tt!==null){l=tt;var b=Xr;t:switch(wt){case 1:wt=0,Xr=null,Yc(a,l,b,1);break;case 2:case 9:if(mR(b)){wt=0,Xr=null,rM(l);break}l=function(){wt!==2&&wt!==9||Vt!==a||(wt=7),Io(a)},b.then(l,l);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:mR(b)?(wt=0,Xr=null,rM(l)):(wt=0,Xr=null,Yc(a,l,b,7));break;case 5:var x=null;switch(tt.tag){case 26:x=tt.memoizedState;case 5:case 27:var k=tt;if(!x||UM(x)){wt=0,Xr=null;var j=k.sibling;if(j!==null)tt=j;else{var Z=k.return;Z!==null?(tt=Z,hy(Z)):tt=null}break t}}wt=0,Xr=null,Yc(a,l,b,5);break;case 6:wt=0,Xr=null,Yc(a,l,b,6);break;case 8:RE(),on=6;break e;default:throw Error(r(462))}}x$();break}catch(oe){ZP(a,oe)}while(!0);return hs=Hl=null,ne.H=g,ne.A=T,bt=d,tt!==null?0:(Vt=null,ft=0,kg(),on)}function x$(){for(;tt!==null&&!Mn();)nM(tt)}function nM(a){var l=RP(a.alternate,a,Es);a.memoizedProps=a.pendingProps,l===null?hy(a):tt=l}function rM(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=wP(d,l,l.pendingProps,l.type,void 0,ft);break;case 11:l=wP(d,l,l.pendingProps,l.type.render,l.ref,ft);break;case 5:HT(l);default:MP(d,l),l=tt=iR(l,Es),l=RP(d,l,Es)}a.memoizedProps=a.pendingProps,l===null?hy(a):tt=l}function Yc(a,l,d,g){hs=Hl=null,HT(l),Bc=null,Rh=0;var T=l.return;try{if(y$(a,T,l,d,ft)){on=1,iy(a,wi(d,a.current)),tt=null;return}}catch(b){if(T!==null)throw tt=T,b;on=1,iy(a,wi(d,a.current)),tt=null;return}l.flags&32768?(yt||g===1?a=!0:Gc||(ft&536870912)!==0?a=!1:(pa=a=!0,(g===2||g===9||g===3||g===6)&&(g=Ci.current,g!==null&&g.tag===13&&(g.flags|=16384))),iM(l,a)):hy(l)}function hy(a){var l=a;do{if((l.flags&32768)!==0){iM(l,pa);return}a=l.return;var d=_$(l.alternate,l,Es);if(d!==null){tt=d;return}if(l=l.sibling,l!==null){tt=l;return}tt=l=a}while(l!==null);on===0&&(on=5)}function iM(a,l){do{var d=T$(a.alternate,a);if(d!==null){d.flags&=32767,tt=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){tt=a;return}tt=a=d}while(a!==null);on=6,tt=null}function oM(a,l,d,g,T,b,x,k,j){a.cancelPendingCommit=null;do my();while(rr!==0);if((bt&6)!==0)throw Error(r(327));if(l!==null){if(l===a.current)throw Error(r(177));if(b=l.lanes|l.childLanes,b|=ET,Yd(a,d,b,x,k,j),a===Vt&&(tt=Vt=null,ft=0),Hc=l,va=a,Kc=d,IE=b,CE=T,YP=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,D$(Tl,function(){return cM(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=ne.T,ne.T=null,T=me.p,me.p=2,x=bt,bt|=4;try{E$(a,l,d)}finally{bt=x,me.p=T,ne.T=g}}rr=1,sM(),aM(),lM()}}function sM(){if(rr===1){rr=0;var a=va,l=Hc,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null;var g=me.p;me.p=2;var T=bt;bt|=4;try{zP(l,a);var b=$E,x=W1(a.containerInfo),k=b.focusedElem,j=b.selectionRange;if(x!==k&&k&&k.ownerDocument&&K1(k.ownerDocument.documentElement,k)){if(j!==null&&gT(k)){var Z=j.start,oe=j.end;if(oe===void 0&&(oe=Z),"selectionStart"in k)k.selectionStart=Z,k.selectionEnd=Math.min(oe,k.value.length);else{var ce=k.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),je=k.textContent.length,Be=Math.min(j.start,je),Mt=j.end===void 0?Be:Math.min(j.end,je);!te.extend&&Be>Mt&&(x=Mt,Mt=Be,Be=x);var Y=H1(k,Be),W=H1(k,Mt);if(Y&&W&&(te.rangeCount!==1||te.anchorNode!==Y.node||te.anchorOffset!==Y.offset||te.focusNode!==W.node||te.focusOffset!==W.offset)){var X=ce.createRange();X.setStart(Y.node,Y.offset),te.removeAllRanges(),Be>Mt?(te.addRange(X),te.extend(W.node,W.offset)):(X.setEnd(W.node,W.offset),te.addRange(X))}}}}for(ce=[],te=k;te=te.parentNode;)te.nodeType===1&&ce.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ce.length;k++){var le=ce[k];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Iy=!!zE,$E=zE=null}finally{bt=T,me.p=g,ne.T=d}}a.current=l,rr=2}}function aM(){if(rr===2){rr=0;var a=va,l=Hc,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=ne.T,ne.T=null;var g=me.p;me.p=2;var T=bt;bt|=4;try{UP(a,l.alternate,l)}finally{bt=T,me.p=g,ne.T=d}}rr=3}}function lM(){if(rr===4||rr===3){rr=0,qn();var a=va,l=Hc,d=Kc,g=YP;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?rr=5:(rr=0,Hc=va=null,uM(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(ya=null),dc(d),l=l.stateNode,Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(nn,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=ne.T,T=me.p,me.p=2,ne.T=null;try{for(var b=a.onRecoverableError,x=0;x<g.length;x++){var k=g[x];b(k.value,{componentStack:k.stack})}}finally{ne.T=l,me.p=T}}(Kc&3)!==0&&my(),Io(a),T=a.pendingLanes,(d&4194090)!==0&&(T&42)!==0?a===xE?Uh++:(Uh=0,xE=a):Uh=0,Fh(0)}}function uM(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,vh(l)))}function my(a){return sM(),aM(),lM(),cM()}function cM(){if(rr!==5)return!1;var a=va,l=IE;IE=0;var d=dc(Kc),g=ne.T,T=me.p;try{me.p=32>d?32:d,ne.T=null,d=CE,CE=null;var b=va,x=Kc;if(rr=0,Hc=va=null,Kc=0,(bt&6)!==0)throw Error(r(331));var k=bt;if(bt|=4,KP(b.current),GP(b,b.current,x,d),bt=k,Fh(0,!1),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(nn,b)}catch{}return!0}finally{me.p=T,ne.T=g,uM(a,l)}}function fM(a,l,d){l=wi(d,l),l=sE(a.stateNode,l,2),a=la(a,l,2),a!==null&&(Zo(a,2),Io(a))}function Nt(a,l,d){if(a.tag===3)fM(a,a,d);else for(;l!==null;){if(l.tag===3){fM(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ya===null||!ya.has(g))){a=wi(d,a),d=pP(2),g=la(l,d,2),g!==null&&(gP(d,g,l,a),Zo(g,2),Io(g));break}}l=l.return}}function DE(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new A$;var T=new Set;g.set(l,T)}else T=g.get(l),T===void 0&&(T=new Set,g.set(l,T));T.has(d)||(bE=!0,T.add(d),a=R$.bind(null,a,l,d),l.then(a,a))}function R$(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Vt===a&&(ft&d)===d&&(on===4||on===3&&(ft&62914560)===ft&&300>vn()-SE?(bt&2)===0&&Wc(a,0):wE|=d,jc===ft&&(jc=0)),Io(a)}function dM(a,l){l===0&&(l=Wd()),a=Pc(a,l),a!==null&&(Zo(a,l),Io(a))}function P$(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),dM(a,d)}function M$(a,l){var d=0;switch(a.tag){case 13:var g=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),dM(a,d)}function D$(a,l){return tn(a,l)}var py=null,Jc=null,NE=!1,gy=!1,kE=!1,Zl=0;function Io(a){a!==Jc&&a.next===null&&(Jc===null?py=Jc=a:Jc=Jc.next=a),gy=!0,NE||(NE=!0,k$())}function Fh(a,l){if(!kE&&gy){kE=!0;do for(var d=!1,g=py;g!==null;){if(a!==0){var T=g.pendingLanes;if(T===0)var b=0;else{var x=g.suspendedLanes,k=g.pingedLanes;b=(1<<31-hr(42|a)+1)-1,b&=T&~(x&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(d=!0,gM(g,b))}else b=ft,b=fc(g,g===Vt?b:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(b&3)===0||Al(g,b)||(d=!0,gM(g,b));g=g.next}while(d);kE=!1}}function N$(){hM()}function hM(){gy=NE=!1;var a=0;Zl!==0&&(z$()&&(a=Zl),Zl=0);for(var l=vn(),d=null,g=py;g!==null;){var T=g.next,b=mM(g,l);b===0?(g.next=null,d===null?py=T:d.next=T,T===null&&(Jc=d)):(d=g,(a!==0||(b&3)!==0)&&(gy=!0)),g=T}Fh(a)}function mM(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,T=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var x=31-hr(b),k=1<<x,j=T[x];j===-1?((k&d)===0||(k&g)!==0)&&(T[x]=Hd(k,l)):j<=l&&(a.expiredLanes|=k),b&=~k}if(l=Vt,d=ft,d=fc(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,d===0||a===l&&(wt===2||wt===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&lt(g),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Al(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(g!==null&&lt(g),dc(d)){case 2:case 8:d=uc;break;case 32:d=Tl;break;case 268435456:d=cc;break;default:d=Tl}return g=pM.bind(null,a),d=tn(d,g),a.callbackPriority=l,a.callbackNode=d,l}return g!==null&&g!==null&&lt(g),a.callbackPriority=2,a.callbackNode=null,2}function pM(a,l){if(rr!==0&&rr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(my()&&a.callbackNode!==d)return null;var g=ft;return g=fc(a,a===Vt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(QP(a,g,l),mM(a,vn()),a.callbackNode!=null&&a.callbackNode===d?pM.bind(null,a):null)}function gM(a,l){if(my())return null;QP(a,l,!0)}function k$(){G$(function(){(bt&6)!==0?tn(Gd,N$):hM()})}function OE(){return Zl===0&&(Zl=Kd()),Zl}function yM(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:vc(""+a)}function vM(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function O$(a,l,d,g,T){if(l==="submit"&&d&&d.stateNode===T){var b=yM((T[_n]||null).action),x=g.submitter;x&&(l=(l=x[_n]||null)?yM(l.formAction):x.getAttribute("formAction"),l!==null&&(b=l,x=null));var k=new _c("action","action",null,g,T);a.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Zl!==0){var j=x?vM(T,x):new FormData(T);tE(d,{pending:!0,data:j,method:T.method,action:b},null,j)}}else typeof b=="function"&&(k.preventDefault(),j=x?vM(T,x):new FormData(T),tE(d,{pending:!0,data:j,method:T.method,action:b},b,j))},currentTarget:T}]})}}for(var VE=0;VE<TT.length;VE++){var LE=TT[VE],V$=LE.toLowerCase(),L$=LE[0].toUpperCase()+LE.slice(1);Ji(V$,"on"+L$)}Ji(Q1,"onAnimationEnd"),Ji(X1,"onAnimationIteration"),Ji(Z1,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(e$,"onTransitionRun"),Ji(t$,"onTransitionStart"),Ji(n$,"onTransitionCancel"),Ji(eR,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bh));function _M(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],T=g.event;g=g.listeners;e:{var b=void 0;if(l)for(var x=g.length-1;0<=x;x--){var k=g[x],j=k.instance,Z=k.currentTarget;if(k=k.listener,j!==b&&T.isPropagationStopped())break e;b=k,T.currentTarget=Z;try{b(T)}catch(oe){ry(oe)}T.currentTarget=null,b=j}else for(x=0;x<g.length;x++){if(k=g[x],j=k.instance,Z=k.currentTarget,k=k.listener,j!==b&&T.isPropagationStopped())break e;b=k,T.currentTarget=Z;try{b(T)}catch(oe){ry(oe)}T.currentTarget=null,b=j}}}}function nt(a,l){var d=l[Qd];d===void 0&&(d=l[Qd]=new Set);var g=a+"__bubble";d.has(g)||(TM(l,a,2,!1),d.add(g))}function UE(a,l,d){var g=0;l&&(g|=4),TM(d,a,g,l)}var yy="_reactListening"+Math.random().toString(36).slice(2);function FE(a){if(!a[yy]){a[yy]=!0,Xd.forEach(function(d){d!=="selectionchange"&&(U$.has(d)||UE(d,!1,a),UE(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[yy]||(l[yy]=!0,UE("selectionchange",!1,l))}}function TM(a,l,d,g){switch(GM(l)){case 2:var T=fG;break;case 8:T=dG;break;default:T=ZE}d=T.bind(null,l,d,a),T=void 0,!Ei||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),g?T!==void 0?a.addEventListener(l,d,{capture:!0,passive:T}):a.addEventListener(l,d,!0):T!==void 0?a.addEventListener(l,d,{passive:T}):a.addEventListener(l,d,!1)}function BE(a,l,d,g,T){var b=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var x=g.tag;if(x===3||x===4){var k=g.stateNode.containerInfo;if(k===T)break;if(x===4)for(x=g.return;x!==null;){var j=x.tag;if((j===3||j===4)&&x.stateNode.containerInfo===T)return;x=x.return}for(;k!==null;){if(x=es(k),x===null)return;if(j=x.tag,j===5||j===6||j===26||j===27){g=b=x;continue e}k=k.parentNode}}g=g.return}_g(function(){var Z=b,oe=Ti(d),ce=[];e:{var ee=tR.get(a);if(ee!==void 0){var te=_c,je=a;switch(a){case"keypress":if(yo(d)===0)break e;case"keydown":case"keyup":te=Sc;break;case"focusin":je="focus",te=bc;break;case"focusout":je="blur",te=bc;break;case"beforeblur":case"afterblur":te=bc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=dT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Cg;break;case Q1:case X1:case Z1:te=wc;break;case eR:te=Rg;break;case"scroll":case"scrollend":te=Tg;break;case"wheel":te=Ic;break;case"copy":case"cut":case"paste":te=Ac;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=ch;break;case"toggle":case"beforetoggle":te=Mg}var Be=(l&4)!==0,Mt=!Be&&(a==="scroll"||a==="scrollend"),Y=Be?ee!==null?ee+"Capture":null:ee;Be=[];for(var W=Z,X;W!==null;){var le=W;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||Y===null||(le=Dl(W,Y),le!=null&&Be.push(qh(W,le,X))),Mt)break;W=W.return}0<Be.length&&(ee=new te(ee,je,null,d,oe),ce.push({event:ee,listeners:Be}))}}if((l&7)===0){e:{if(ee=a==="mouseover"||a==="pointerover",te=a==="mouseout"||a==="pointerout",ee&&d!==is&&(je=d.relatedTarget||d.fromElement)&&(es(je)||je[vi]))break e;if((te||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(je=d.relatedTarget||d.toElement,te=Z,je=je?es(je):null,je!==null&&(Mt=o(je),Be=je.tag,je!==Mt||Be!==5&&Be!==27&&Be!==6)&&(je=null)):(te=null,je=Z),te!==je)){if(Be=bi,le="onMouseLeave",Y="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(Be=ch,le="onPointerLeave",Y="onPointerEnter",W="pointer"),Mt=te==null?ee:ho(te),X=je==null?ee:ho(je),ee=new Be(le,W+"leave",te,d,oe),ee.target=Mt,ee.relatedTarget=X,le=null,es(oe)===Z&&(Be=new Be(Y,W+"enter",je,d,oe),Be.target=X,Be.relatedTarget=Mt,le=Be),Mt=le,te&&je)t:{for(Be=te,Y=je,W=0,X=Be;X;X=Qc(X))W++;for(X=0,le=Y;le;le=Qc(le))X++;for(;0<W-X;)Be=Qc(Be),W--;for(;0<X-W;)Y=Qc(Y),X--;for(;W--;){if(Be===Y||Y!==null&&Be===Y.alternate)break t;Be=Qc(Be),Y=Qc(Y)}Be=null}else Be=null;te!==null&&EM(ce,ee,te,Be,!1),je!==null&&Mt!==null&&EM(ce,Mt,je,Be,!0)}}e:{if(ee=Z?ho(Z):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var Ie=B1;else if(kn(ee))if(q1)Ie=Qz;else{Ie=Yz;var et=Wz}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&rh(Z.elementType)&&(Ie=B1):Ie=Jz;if(Ie&&(Ie=Ie(a,Z))){us(ce,Ie,d,oe);break e}et&&et(a,ee,Z),a==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&ra(ee,"number",ee.value)}switch(et=Z?ho(Z):window,a){case"focusin":(kn(et)||et.contentEditable==="true")&&(Cc=et,yT=Z,hh=null);break;case"focusout":hh=yT=Cc=null;break;case"mousedown":vT=!0;break;case"contextmenu":case"mouseup":case"dragend":vT=!1,Y1(ce,d,oe);break;case"selectionchange":if(Zz)break;case"keydown":case"keyup":Y1(ce,d,oe)}var ke;if(To)e:{switch(a){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ut?ie(a,d)&&(ze="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(ze="onCompositionStart");ze&&(C&&d.locale!=="ko"&&(ut||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ut&&(ke=oh()):(go=oe,ia="value"in go?go.value:go.textContent,ut=!0)),et=vy(Z,ze),0<et.length&&(ze=new lh(ze,a,null,d,oe),ce.push({event:ze,listeners:et}),ke?ze.data=ke:(ke=ve(d),ke!==null&&(ze.data=ke)))),(ke=S?Nn(a,d):ct(a,d))&&(ze=vy(Z,"onBeforeInput"),0<ze.length&&(et=new lh("onBeforeInput","beforeinput",null,d,oe),ce.push({event:et,listeners:ze}),et.data=ke)),O$(ce,a,Z,d,oe)}_M(ce,l)})}function qh(a,l,d){return{instance:a,listener:l,currentTarget:d}}function vy(a,l){for(var d=l+"Capture",g=[];a!==null;){var T=a,b=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||b===null||(T=Dl(a,d),T!=null&&g.unshift(qh(a,T,b)),T=Dl(a,l),T!=null&&g.push(qh(a,T,b))),a.tag===3)return g;a=a.return}return[]}function Qc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function EM(a,l,d,g,T){for(var b=l._reactName,x=[];d!==null&&d!==g;){var k=d,j=k.alternate,Z=k.stateNode;if(k=k.tag,j!==null&&j===g)break;k!==5&&k!==26&&k!==27||Z===null||(j=Z,T?(Z=Dl(d,b),Z!=null&&x.unshift(qh(d,Z,j))):T||(Z=Dl(d,b),Z!=null&&x.push(qh(d,Z,j)))),d=d.return}x.length!==0&&a.push({event:l,listeners:x})}var F$=/\r\n?/g,B$=/\u0000|\uFFFD/g;function bM(a){return(typeof a=="string"?a:""+a).replace(F$,`
`).replace(B$,"")}function wM(a,l){return l=bM(l),bM(a)===l}function _y(){}function Pt(a,l,d,g,T,b){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||_i(a,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&_i(a,""+g);break;case"className":mo(a,"class",g);break;case"tabIndex":mo(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":mo(a,d,g);break;case"style":nh(a,g,b);break;case"data":if(l!=="object"){mo(a,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=vc(""+g),a.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(d==="formAction"?(l!=="input"&&Pt(a,l,"name",T.name,T,null),Pt(a,l,"formEncType",T.formEncType,T,null),Pt(a,l,"formMethod",T.formMethod,T,null),Pt(a,l,"formTarget",T.formTarget,T,null)):(Pt(a,l,"encType",T.encType,T,null),Pt(a,l,"method",T.method,T,null),Pt(a,l,"target",T.target,T,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=vc(""+g),a.setAttribute(d,g);break;case"onClick":g!=null&&(a.onclick=_y);break;case"onScroll":g!=null&&nt("scroll",a);break;case"onScrollEnd":g!=null&&nt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}d=vc(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""+g):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":g===!0?a.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,g):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(d,g):a.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(d):a.setAttribute(d,g);break;case"popover":nt("beforetoggle",a),nt("toggle",a),na(a,"popover",g);break;case"xlinkActuate":er(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":er(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":er(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":er(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":er(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":er(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":er(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":er(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":er(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":na(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=cT.get(d)||d,na(a,d,g))}}function qE(a,l,d,g,T,b){switch(d){case"style":nh(a,g,b);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(d=g.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof g=="string"?_i(a,g):(typeof g=="number"||typeof g=="bigint")&&_i(a,""+g);break;case"onScroll":g!=null&&nt("scroll",a);break;case"onScrollEnd":g!=null&&nt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=_y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hc.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),l=d.slice(2,T?d.length-7:void 0),b=a[_n]||null,b=b!=null?b[d]:null,typeof b=="function"&&a.removeEventListener(l,b,T),typeof g=="function")){typeof b!="function"&&b!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,g,T);break e}d in a?a[d]=g:g===!0?a.setAttribute(d,""):na(a,d,g)}}}function ir(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",a),nt("load",a);var g=!1,T=!1,b;for(b in d)if(d.hasOwnProperty(b)){var x=d[b];if(x!=null)switch(b){case"src":g=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Pt(a,l,b,x,d,null)}}T&&Pt(a,l,"srcSet",d.srcSet,d,null),g&&Pt(a,l,"src",d.src,d,null);return;case"input":nt("invalid",a);var k=b=x=T=null,j=null,Z=null;for(g in d)if(d.hasOwnProperty(g)){var oe=d[g];if(oe!=null)switch(g){case"name":T=oe;break;case"type":x=oe;break;case"checked":j=oe;break;case"defaultChecked":Z=oe;break;case"value":b=oe;break;case"defaultValue":k=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:Pt(a,l,g,oe,d,null)}}Rl(a,b,k,j,Z,x,T,!1),yc(a);return;case"select":nt("invalid",a),g=x=b=null;for(T in d)if(d.hasOwnProperty(T)&&(k=d[T],k!=null))switch(T){case"value":b=k;break;case"defaultValue":x=k;break;case"multiple":g=k;default:Pt(a,l,T,k,d,null)}l=b,d=x,a.multiple=!!g,l!=null?rs(a,!!g,l,!1):d!=null&&rs(a,!!g,d,!0);return;case"textarea":nt("invalid",a),b=T=g=null;for(x in d)if(d.hasOwnProperty(x)&&(k=d[x],k!=null))switch(x){case"value":g=k;break;case"defaultValue":T=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:Pt(a,l,x,k,d,null)}Pl(a,g,T,b),yc(a);return;case"option":for(j in d)if(d.hasOwnProperty(j)&&(g=d[j],g!=null))switch(j){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Pt(a,l,j,g,d,null)}return;case"dialog":nt("beforetoggle",a),nt("toggle",a),nt("cancel",a),nt("close",a);break;case"iframe":case"object":nt("load",a);break;case"video":case"audio":for(g=0;g<Bh.length;g++)nt(Bh[g],a);break;case"image":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"embed":case"source":case"link":nt("error",a),nt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in d)if(d.hasOwnProperty(Z)&&(g=d[Z],g!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Pt(a,l,Z,g,d,null)}return;default:if(rh(l)){for(oe in d)d.hasOwnProperty(oe)&&(g=d[oe],g!==void 0&&qE(a,l,oe,g,d,void 0));return}}for(k in d)d.hasOwnProperty(k)&&(g=d[k],g!=null&&Pt(a,l,k,g,d,null))}function q$(a,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,b=null,x=null,k=null,j=null,Z=null,oe=null;for(te in d){var ce=d[te];if(d.hasOwnProperty(te)&&ce!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":j=ce;default:g.hasOwnProperty(te)||Pt(a,l,te,null,g,ce)}}for(var ee in g){var te=g[ee];if(ce=d[ee],g.hasOwnProperty(ee)&&(te!=null||ce!=null))switch(ee){case"type":b=te;break;case"name":T=te;break;case"checked":Z=te;break;case"defaultChecked":oe=te;break;case"value":x=te;break;case"defaultValue":k=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:te!==ce&&Pt(a,l,ee,te,g,ce)}}Kr(a,x,k,j,Z,oe,b,T);return;case"select":te=x=k=ee=null;for(b in d)if(j=d[b],d.hasOwnProperty(b)&&j!=null)switch(b){case"value":break;case"multiple":te=j;default:g.hasOwnProperty(b)||Pt(a,l,b,null,g,j)}for(T in g)if(b=g[T],j=d[T],g.hasOwnProperty(T)&&(b!=null||j!=null))switch(T){case"value":ee=b;break;case"defaultValue":k=b;break;case"multiple":x=b;default:b!==j&&Pt(a,l,T,b,g,j)}l=k,d=x,g=te,ee!=null?rs(a,!!d,ee,!1):!!g!=!!d&&(l!=null?rs(a,!!d,l,!0):rs(a,!!d,d?[]:"",!1));return;case"textarea":te=ee=null;for(k in d)if(T=d[k],d.hasOwnProperty(k)&&T!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Pt(a,l,k,null,g,T)}for(x in g)if(T=g[x],b=d[x],g.hasOwnProperty(x)&&(T!=null||b!=null))switch(x){case"value":ee=T;break;case"defaultValue":te=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==b&&Pt(a,l,x,T,g,b)}xt(a,ee,te);return;case"option":for(var je in d)if(ee=d[je],d.hasOwnProperty(je)&&ee!=null&&!g.hasOwnProperty(je))switch(je){case"selected":a.selected=!1;break;default:Pt(a,l,je,null,g,ee)}for(j in g)if(ee=g[j],te=d[j],g.hasOwnProperty(j)&&ee!==te&&(ee!=null||te!=null))switch(j){case"selected":a.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Pt(a,l,j,ee,g,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in d)ee=d[Be],d.hasOwnProperty(Be)&&ee!=null&&!g.hasOwnProperty(Be)&&Pt(a,l,Be,null,g,ee);for(Z in g)if(ee=g[Z],te=d[Z],g.hasOwnProperty(Z)&&ee!==te&&(ee!=null||te!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,l));break;default:Pt(a,l,Z,ee,g,te)}return;default:if(rh(l)){for(var Mt in d)ee=d[Mt],d.hasOwnProperty(Mt)&&ee!==void 0&&!g.hasOwnProperty(Mt)&&qE(a,l,Mt,void 0,g,ee);for(oe in g)ee=g[oe],te=d[oe],!g.hasOwnProperty(oe)||ee===te||ee===void 0&&te===void 0||qE(a,l,oe,ee,g,te);return}}for(var Y in d)ee=d[Y],d.hasOwnProperty(Y)&&ee!=null&&!g.hasOwnProperty(Y)&&Pt(a,l,Y,null,g,ee);for(ce in g)ee=g[ce],te=d[ce],!g.hasOwnProperty(ce)||ee===te||ee==null&&te==null||Pt(a,l,ce,ee,g,te)}var zE=null,$E=null;function Ty(a){return a.nodeType===9?a:a.ownerDocument}function AM(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SM(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function GE(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var jE=null;function z$(){var a=window.event;return a&&a.type==="popstate"?a===jE?!1:(jE=a,!0):(jE=null,!1)}var IM=typeof setTimeout=="function"?setTimeout:void 0,$$=typeof clearTimeout=="function"?clearTimeout:void 0,CM=typeof Promise=="function"?Promise:void 0,G$=typeof queueMicrotask=="function"?queueMicrotask:typeof CM<"u"?function(a){return CM.resolve(null).then(a).catch(j$)}:IM;function j$(a){setTimeout(function(){throw a})}function Ta(a){return a==="head"}function xM(a,l){var d=l,g=0,T=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(0<g&&8>g){d=g;var x=a.ownerDocument;if(d&1&&zh(x.documentElement),d&2&&zh(x.body),d&4)for(d=x.head,zh(d),x=d.firstChild;x;){var k=x.nextSibling,j=x.nodeName;x[Sl]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&x.rel.toLowerCase()==="stylesheet"||d.removeChild(x),x=k}}if(T===0){a.removeChild(b),Jh(l);return}T--}else d==="$"||d==="$?"||d==="$!"?T++:g=d.charCodeAt(0)-48;else g=0;d=b}while(d);Jh(l)}function HE(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":HE(d),ta(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function H$(a,l,d,g){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Sl])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var b=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Xi(a.nextSibling),a===null)break}return null}function K$(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=Xi(a.nextSibling),a===null))return null;return a}function KE(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function W$(a,l){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function Xi(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var WE=null;function RM(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}function PM(a,l,d){switch(l=Ty(d),a){case"html":if(a=l.documentElement,!a)throw Error(r(452));return a;case"head":if(a=l.head,!a)throw Error(r(453));return a;case"body":if(a=l.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function zh(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);ta(a)}var Ri=new Map,MM=new Set;function Ey(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var bs=me.d;me.d={f:Y$,r:J$,D:Q$,C:X$,L:Z$,m:eG,X:nG,S:tG,M:rG};function Y$(){var a=bs.f(),l=dy();return a||l}function J$(a){var l=fo(a);l!==null&&l.tag===5&&l.type==="form"?QR(l):bs.r(a)}var Xc=typeof document>"u"?null:document;function DM(a,l,d){var g=Xc;if(g&&typeof l=="string"&&l){var T=Tn(l);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),MM.has(T)||(MM.add(T),a={rel:a,crossOrigin:d,href:l},g.querySelector(T)===null&&(l=g.createElement("link"),ir(l,"link",a),un(l),g.head.appendChild(l)))}}function Q$(a){bs.D(a),DM("dns-prefetch",a,null)}function X$(a,l){bs.C(a,l),DM("preconnect",a,l)}function Z$(a,l,d){bs.L(a,l,d);var g=Xc;if(g&&a&&l){var T='link[rel="preload"][as="'+Tn(l)+'"]';l==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+Tn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+Tn(d.imageSizes)+'"]')):T+='[href="'+Tn(a)+'"]';var b=T;switch(l){case"style":b=Zc(a);break;case"script":b=ef(a)}Ri.has(b)||(a=h({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),Ri.set(b,a),g.querySelector(T)!==null||l==="style"&&g.querySelector($h(b))||l==="script"&&g.querySelector(Gh(b))||(l=g.createElement("link"),ir(l,"link",a),un(l),g.head.appendChild(l)))}}function eG(a,l){bs.m(a,l);var d=Xc;if(d&&a){var g=l&&typeof l.as=="string"?l.as:"script",T='link[rel="modulepreload"][as="'+Tn(g)+'"][href="'+Tn(a)+'"]',b=T;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ef(a)}if(!Ri.has(b)&&(a=h({rel:"modulepreload",href:a},l),Ri.set(b,a),d.querySelector(T)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Gh(b)))return}g=d.createElement("link"),ir(g,"link",a),un(g),d.head.appendChild(g)}}}function tG(a,l,d){bs.S(a,l,d);var g=Xc;if(g&&a){var T=Sr(g).hoistableStyles,b=Zc(a);l=l||"default";var x=T.get(b);if(!x){var k={loading:0,preload:null};if(x=g.querySelector($h(b)))k.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":l},d),(d=Ri.get(b))&&YE(a,d);var j=x=g.createElement("link");un(j),ir(j,"link",a),j._p=new Promise(function(Z,oe){j.onload=Z,j.onerror=oe}),j.addEventListener("load",function(){k.loading|=1}),j.addEventListener("error",function(){k.loading|=2}),k.loading|=4,by(x,l,g)}x={type:"stylesheet",instance:x,count:1,state:k},T.set(b,x)}}}function nG(a,l){bs.X(a,l);var d=Xc;if(d&&a){var g=Sr(d).hoistableScripts,T=ef(a),b=g.get(T);b||(b=d.querySelector(Gh(T)),b||(a=h({src:a,async:!0},l),(l=Ri.get(T))&&JE(a,l),b=d.createElement("script"),un(b),ir(b,"link",a),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(T,b))}}function rG(a,l){bs.M(a,l);var d=Xc;if(d&&a){var g=Sr(d).hoistableScripts,T=ef(a),b=g.get(T);b||(b=d.querySelector(Gh(T)),b||(a=h({src:a,async:!0,type:"module"},l),(l=Ri.get(T))&&JE(a,l),b=d.createElement("script"),un(b),ir(b,"link",a),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(T,b))}}function NM(a,l,d,g){var T=(T=Ge.current)?Ey(T):null;if(!T)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Zc(d.href),d=Sr(T).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Zc(d.href);var b=Sr(T).hoistableStyles,x=b.get(a);if(x||(T=T.ownerDocument||T,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,x),(b=T.querySelector($h(a)))&&!b._p&&(x.instance=b,x.state.loading=5),Ri.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ri.set(a,d),b||iG(T,a,d,x.state))),l&&g===null)throw Error(r(528,""));return x}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ef(d),d=Sr(T).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Zc(a){return'href="'+Tn(a)+'"'}function $h(a){return'link[rel="stylesheet"]['+a+"]"}function kM(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function iG(a,l,d,g){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=a.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),ir(l,"link",d),un(l),a.head.appendChild(l))}function ef(a){return'[src="'+Tn(a)+'"]'}function Gh(a){return"script[async]"+a}function OM(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=a.querySelector('style[data-href~="'+Tn(d.href)+'"]');if(g)return l.instance=g,un(g),g;var T=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),un(g),ir(g,"style",T),by(g,d.precedence,a),l.instance=g;case"stylesheet":T=Zc(d.href);var b=a.querySelector($h(T));if(b)return l.state.loading|=4,l.instance=b,un(b),b;g=kM(d),(T=Ri.get(T))&&YE(g,T),b=(a.ownerDocument||a).createElement("link"),un(b);var x=b;return x._p=new Promise(function(k,j){x.onload=k,x.onerror=j}),ir(b,"link",g),l.state.loading|=4,by(b,d.precedence,a),l.instance=b;case"script":return b=ef(d.src),(T=a.querySelector(Gh(b)))?(l.instance=T,un(T),T):(g=d,(T=Ri.get(b))&&(g=h({},d),JE(g,T)),a=a.ownerDocument||a,T=a.createElement("script"),un(T),ir(T,"link",g),a.head.appendChild(T),l.instance=T);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,by(g,d.precedence,a));return l.instance}function by(a,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=g.length?g[g.length-1]:null,b=T,x=0;x<g.length;x++){var k=g[x];if(k.dataset.precedence===l)b=k;else if(b!==T)break}b?b.parentNode.insertBefore(a,b.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function YE(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function JE(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var wy=null;function VM(a,l,d){if(wy===null){var g=new Map,T=wy=new Map;T.set(d,g)}else T=wy,g=T.get(d),g||(g=new Map,T.set(d,g));if(g.has(a))return g;for(g.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var b=d[T];if(!(b[Sl]||b[Dn]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var x=b.getAttribute(l)||"";x=a+x;var k=g.get(x);k?k.push(b):g.set(x,[b])}}return g}function LM(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function oG(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function UM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var jh=null;function sG(){}function aG(a,l,d){if(jh===null)throw Error(r(475));var g=jh;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var T=Zc(d.href),b=a.querySelector($h(T));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=Ay.bind(g),a.then(g,g)),l.state.loading|=4,l.instance=b,un(b);return}b=a.ownerDocument||a,d=kM(d),(T=Ri.get(T))&&YE(d,T),b=b.createElement("link"),un(b);var x=b;x._p=new Promise(function(k,j){x.onload=k,x.onerror=j}),ir(b,"link",d),l.instance=b}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=Ay.bind(g),a.addEventListener("load",l),a.addEventListener("error",l))}}function lG(){if(jh===null)throw Error(r(475));var a=jh;return a.stylesheets&&a.count===0&&QE(a,a.stylesheets),0<a.count?function(l){var d=setTimeout(function(){if(a.stylesheets&&QE(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Ay(){if(this.count--,this.count===0){if(this.stylesheets)QE(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Sy=null;function QE(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Sy=new Map,l.forEach(uG,a),Sy=null,Ay.call(a))}function uG(a,l){if(!(l.state.loading&4)){var d=Sy.get(a);if(d)var g=d.get(null);else{d=new Map,Sy.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<T.length;b++){var x=T[b];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(d.set(x.dataset.precedence,x),g=x)}g&&d.set(null,g)}T=l.instance,x=T.getAttribute("data-precedence"),b=d.get(x)||g,b===g&&d.set(null,T),d.set(x,T),this.count++,g=Ay.bind(this),T.addEventListener("load",g),T.addEventListener("error",g),b?b.parentNode.insertBefore(T,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),l.state.loading|=4}}var Hh={$$typeof:P,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function cG(a,l,d,g,T,b,x,k){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xo(0),this.hiddenUpdates=Xo(null),this.identifierPrefix=g,this.onUncaughtError=T,this.onCaughtError=b,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function FM(a,l,d,g,T,b,x,k,j,Z,oe,ce){return a=new cG(a,l,d,x,k,j,Z,ce),l=1,b===!0&&(l|=24),b=Yr(3,null,null,l),a.current=b,b.stateNode=a,l=DT(),l.refCount++,a.pooledCache=l,l.refCount++,b.memoizedState={element:g,isDehydrated:d,cache:l},VT(b),a}function BM(a){return a?(a=Mc,a):Mc}function qM(a,l,d,g,T,b){T=BM(T),g.context===null?g.context=T:g.pendingContext=T,g=aa(l),g.payload={element:d},b=b===void 0?null:b,b!==null&&(g.callback=b),d=la(a,g,l),d!==null&&(ei(d,a,l),bh(d,a,l))}function zM(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function XE(a,l){zM(a,l),(a=a.alternate)&&zM(a,l)}function $M(a){if(a.tag===13){var l=Pc(a,67108864);l!==null&&ei(l,a,67108864),XE(a,67108864)}}var Iy=!0;function fG(a,l,d,g){var T=ne.T;ne.T=null;var b=me.p;try{me.p=2,ZE(a,l,d,g)}finally{me.p=b,ne.T=T}}function dG(a,l,d,g){var T=ne.T;ne.T=null;var b=me.p;try{me.p=8,ZE(a,l,d,g)}finally{me.p=b,ne.T=T}}function ZE(a,l,d,g){if(Iy){var T=eb(g);if(T===null)BE(a,l,g,Cy,d),jM(a,g);else if(mG(T,a,l,d,g))g.stopPropagation();else if(jM(a,g),l&4&&-1<hG.indexOf(a)){for(;T!==null;){var b=fo(T);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var x=Ki(b.pendingLanes);if(x!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;x;){var j=1<<31-hr(x);k.entanglements[1]|=j,x&=~j}Io(b),(bt&6)===0&&(cy=vn()+500,Fh(0))}}break;case 13:k=Pc(b,2),k!==null&&ei(k,b,2),dy(),XE(b,2)}if(b=eb(g),b===null&&BE(a,l,g,Cy,d),b===T)break;T=b}T!==null&&g.stopPropagation()}else BE(a,l,g,null,d)}}function eb(a){return a=Ti(a),tb(a)}var Cy=null;function tb(a){if(Cy=null,a=es(a),a!==null){var l=o(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=s(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Cy=a,null}function GM(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lc()){case Gd:return 2;case uc:return 8;case Tl:case oT:return 32;case cc:return 268435456;default:return 32}default:return 32}}var nb=!1,Ea=null,ba=null,wa=null,Kh=new Map,Wh=new Map,Aa=[],hG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jM(a,l){switch(a){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":Kh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wh.delete(l.pointerId)}}function Yh(a,l,d,g,T,b){return a===null||a.nativeEvent!==b?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:b,targetContainers:[T]},l!==null&&(l=fo(l),l!==null&&$M(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),a)}function mG(a,l,d,g,T){switch(l){case"focusin":return Ea=Yh(Ea,a,l,d,g,T),!0;case"dragenter":return ba=Yh(ba,a,l,d,g,T),!0;case"mouseover":return wa=Yh(wa,a,l,d,g,T),!0;case"pointerover":var b=T.pointerId;return Kh.set(b,Yh(Kh.get(b)||null,a,l,d,g,T)),!0;case"gotpointercapture":return b=T.pointerId,Wh.set(b,Yh(Wh.get(b)||null,a,l,d,g,T)),!0}return!1}function HM(a){var l=es(a.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=s(d),l!==null){a.blockedOn=l,dg(a.priority,function(){if(d.tag===13){var g=Zr();g=Xs(g);var T=Pc(d,g);T!==null&&ei(T,d,g),XE(d,g)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xy(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=eb(a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);is=g,d.target.dispatchEvent(g),is=null}else return l=fo(d),l!==null&&$M(l),a.blockedOn=d,!1;l.shift()}return!0}function KM(a,l,d){xy(a)&&d.delete(l)}function pG(){nb=!1,Ea!==null&&xy(Ea)&&(Ea=null),ba!==null&&xy(ba)&&(ba=null),wa!==null&&xy(wa)&&(wa=null),Kh.forEach(KM),Wh.forEach(KM)}function Ry(a,l){a.blockedOn===l&&(a.blockedOn=null,nb||(nb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pG)))}var Py=null;function WM(a){Py!==a&&(Py=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Py===a&&(Py=null);for(var l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],T=a[l+2];if(typeof g!="function"){if(tb(g||d)===null)continue;break}var b=fo(d);b!==null&&(a.splice(l,3),l-=3,tE(b,{pending:!0,data:T,method:d.method,action:g},g,T))}}))}function Jh(a){function l(j){return Ry(j,a)}Ea!==null&&Ry(Ea,a),ba!==null&&Ry(ba,a),wa!==null&&Ry(wa,a),Kh.forEach(l),Wh.forEach(l);for(var d=0;d<Aa.length;d++){var g=Aa[d];g.blockedOn===a&&(g.blockedOn=null)}for(;0<Aa.length&&(d=Aa[0],d.blockedOn===null);)HM(d),d.blockedOn===null&&Aa.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var T=d[g],b=d[g+1],x=T[_n]||null;if(typeof b=="function")x||WM(d);else if(x){var k=null;if(b&&b.hasAttribute("formAction")){if(T=b,x=b[_n]||null)k=x.formAction;else if(tb(T)!==null)continue}else k=x.action;typeof k=="function"?d[g+1]=k:(d.splice(g,3),g-=3),WM(d)}}}function rb(a){this._internalRoot=a}My.prototype.render=rb.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,g=Zr();qM(d,g,a,l,null,null)},My.prototype.unmount=rb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;qM(a.current,2,null,a,null,null),dy(),l[vi]=null}};function My(a){this._internalRoot=a}My.prototype.unstable_scheduleHydration=function(a){if(a){var l=Zs();a={blockedOn:null,target:a,priority:l};for(var d=0;d<Aa.length&&l!==0&&l<Aa[d].priority;d++);Aa.splice(d,0,a),d===0&&HM(a)}};var YM=e.version;if(YM!=="19.1.0")throw Error(r(527,YM,"19.1.0"));me.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=c(l),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var gG={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dy.isDisabled&&Dy.supportsFiber)try{nn=Dy.inject(gG),Et=Dy}catch{}}return Xh.createRoot=function(a,l){if(!i(a))throw Error(r(299));var d=!1,g="",T=fP,b=dP,x=hP,k=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks)),l=FM(a,1,!1,null,null,d,g,T,b,x,k,null),a[vi]=l.current,FE(a),new rb(l)},Xh.hydrateRoot=function(a,l,d){if(!i(a))throw Error(r(299));var g=!1,T="",b=fP,x=dP,k=hP,j=null,Z=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(b=d.onUncaughtError),d.onCaughtError!==void 0&&(x=d.onCaughtError),d.onRecoverableError!==void 0&&(k=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(j=d.unstable_transitionCallbacks),d.formState!==void 0&&(Z=d.formState)),l=FM(a,1,!0,l,d??null,g,T,b,x,k,j,Z),l.context=BM(null),d=l.current,g=Zr(),g=Xs(g),T=aa(g),T.callback=null,la(d,T,g),d=g,l.current.lanes=d,Zo(l,d),Io(l),a[vi]=l.current,FE(a),new My(l)},Xh.version="19.1.0",Xh}var oD;function SG(){if(oD)return sb.exports;oD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sb.exports=AG(),sb.exports}var IG=SG();const CG=lo(IG),xG=()=>{};var sD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RG=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],u=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},GU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,u=s?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=o>>2,y=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,E=f&63;c||(E=64,s||(_=64)),r.push(n[h],n[y],n[_],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($U(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new PG;const _=o<<2|u>>4;if(r.push(_),f!==64){const E=u<<4&240|f>>2;if(r.push(E),y!==64){const w=f<<6&192|y;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MG=function(t){const e=$U(t);return GU.encodeByteArray(e,!0)},wv=function(t){return MG(t).replace(/\./g,"")},mI=function(t){try{return GU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Av(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!DG(n)||(t[n]=Av(t[n],e[n]));return t}function DG(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NG=()=>pI().__FIREBASE_DEFAULTS__,kG=()=>{if(typeof process>"u"||typeof sD>"u")return;const t=sD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mI(t[1]);return e&&JSON.parse(e)},gI=()=>{try{return xG()||NG()||kG()||OG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jU=()=>{var t;return(t=gI())===null||t===void 0?void 0:t.config},VG=t=>{var e;return(e=gI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HU(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wv(JSON.stringify(n)),wv(JSON.stringify(s)),""].join(".")}const xm={};function FG(){const t={prod:[],emulator:[]};for(const e of Object.keys(xm))xm[e]?t.emulator.push(e):t.prod.push(e);return t}function BG(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let aD=!1;function KU(t,e){if(typeof window>"u"||typeof document>"u"||!vd(window.location.host)||xm[t]===e||xm[t]||aD)return;xm[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",o=FG().prod.length>0;function s(){const _=document.getElementById(r);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{aD=!0,s()},_}function h(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=BG(r),E=n("text"),w=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),I=document.getElementById(A)||document.createElement("a"),R=n("preprendIcon"),M=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const P=_.element;u(P),h(I,A);const F=f();c(M,R),P.append(M,w,I,F),document.body.appendChild(P)}o?(w.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function L_(){var t;const e=(t=gI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zG(){return typeof window<"u"||WU()}function WU(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $G(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JU(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QU(){return!L_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XU(){return!L_()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Hm(){try{return typeof indexedDB=="object"}catch{return!1}}function GG(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG="FirebaseError";class Dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jG,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yu.prototype.create)}}class Yu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?HG(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new Dr(i,u,r)}}function HG(t,e){return t.replace(KG,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KG=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function WG(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(uD(o)&&uD(s)){if(!Wa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uD(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Tf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ym(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ZU(t,e){const n=new YG(t,e);return n.subscribe.bind(n)}class YG{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JG(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=cb),i.error===void 0&&(i.error=cb),i.complete===void 0&&(i.complete=cb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JG(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Go{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QG=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LG;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZG(e))try{this.getOrInitializeService({instanceIdentifier:nu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=nu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nu){return this.instances.has(e)}getOptions(e=nu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nu){return this.component?this.component.multipleInstances?e:nu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XG(t){return t===nu?void 0:t}function ZG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QG(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=[];var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const tF={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},ej=rt.INFO,tj={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},nj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=tj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class U_{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null,vI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}function rj(t){vI.forEach(e=>{e.setLogLevel(t)})}function ij(t,e){for(const n of vI){let r=null;e&&e.level&&(r=tF[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const u=s.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");o>=(r??i.logLevel)&&t({level:rt[o].toLowerCase(),message:u,args:s,type:i.name})}}}const oj=(t,e)=>e.some(n=>t instanceof n);let cD,fD;function sj(){return cD||(cD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aj(){return fD||(fD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nF=new WeakMap,mA=new WeakMap,rF=new WeakMap,fb=new WeakMap,_I=new WeakMap;function lj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Ba(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&nF.set(n,t)}).catch(()=>{}),_I.set(e,t),e}function uj(t){if(mA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});mA.set(t,e)}let pA={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rF.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ba(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cj(t){pA=t(pA)}function fj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(db(this),e,...n);return rF.set(r,e.sort?e.sort():[e]),Ba(r)}:aj().includes(t)?function(...e){return t.apply(db(this),e),Ba(nF.get(this))}:function(...e){return Ba(t.apply(db(this),e))}}function dj(t){return typeof t=="function"?fj(t):(t instanceof IDBTransaction&&uj(t),oj(t,sj())?new Proxy(t,pA):t)}function Ba(t){if(t instanceof IDBRequest)return lj(t);if(fb.has(t))return fb.get(t);const e=dj(t);return e!==t&&(fb.set(t,e),_I.set(e,t)),e}const db=t=>_I.get(t);function hj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),u=Ba(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Ba(s.result),c.oldVersion,c.newVersion,Ba(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const mj=["get","getKey","getAll","getAllKeys","count"],pj=["put","add","delete","clear"],hb=new Map;function dD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hb.get(e))return hb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mj.includes(n)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&c.done]))[0]};return hb.set(e,o),o}cj(t=>({...t,get:(e,n,r)=>dD(e,n)||t.get(e,n,r),has:(e,n)=>!!dD(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yj(t){const e=t.getComponent();return e?.type==="VERSION"}const Sv="@firebase/app",gA="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new U_("@firebase/app"),vj="@firebase/app-compat",_j="@firebase/analytics-compat",Tj="@firebase/analytics",Ej="@firebase/app-check-compat",bj="@firebase/app-check",wj="@firebase/auth",Aj="@firebase/auth-compat",Sj="@firebase/database",Ij="@firebase/data-connect",Cj="@firebase/database-compat",xj="@firebase/functions",Rj="@firebase/functions-compat",Pj="@firebase/installations",Mj="@firebase/installations-compat",Dj="@firebase/messaging",Nj="@firebase/messaging-compat",kj="@firebase/performance",Oj="@firebase/performance-compat",Vj="@firebase/remote-config",Lj="@firebase/remote-config-compat",Uj="@firebase/storage",Fj="@firebase/storage-compat",Bj="@firebase/firestore",qj="@firebase/ai",zj="@firebase/firestore-compat",$j="firebase",Gj="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="[DEFAULT]",jj={[Sv]:"fire-core",[vj]:"fire-core-compat",[Tj]:"fire-analytics",[_j]:"fire-analytics-compat",[bj]:"fire-app-check",[Ej]:"fire-app-check-compat",[wj]:"fire-auth",[Aj]:"fire-auth-compat",[Sj]:"fire-rtdb",[Ij]:"fire-data-connect",[Cj]:"fire-rtdb-compat",[xj]:"fire-fn",[Rj]:"fire-fn-compat",[Pj]:"fire-iid",[Mj]:"fire-iid-compat",[Dj]:"fire-fcm",[Nj]:"fire-fcm-compat",[kj]:"fire-perf",[Oj]:"fire-perf-compat",[Vj]:"fire-rc",[Lj]:"fire-rc-compat",[Uj]:"fire-gcs",[Fj]:"fire-gcs-compat",[Bj]:"fire-fst",[zj]:"fire-fst-compat",[qj]:"fire-vertex","fire-js":"fire-js",[$j]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new Map,kf=new Map,Of=new Map;function Km(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function iF(t,e){t.container.addOrOverwriteComponent(e)}function Qa(t){const e=t.name;if(Of.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of Ja.values())Km(n,t);for(const n of kf.values())Km(n,t);return!0}function oF(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hj(t,e,n=Ya){oF(t,e).clearInstance(n)}function sF(t){return t.options!==void 0}function Kt(t){return t==null?!1:t.settings!==void 0}function Kj(){Of.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new Yu("app","Firebase",Wj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aF=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t,e){const n=mI(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class Yj extends aF{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const u=e;super(u.options,s,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},n),this._serverConfig.authIdToken&&hD(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&hD(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,ro(Sv,gA,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){EI(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Li.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=Gj;function TI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ya,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Li.create("bad-app-name",{appName:String(i)});if(n||(n=jU()),!n)throw Li.create("no-options");const o=Ja.get(i);if(o){if(Wa(n,o.options)&&Wa(r,o.config))return o;throw Li.create("duplicate-app",{appName:i})}const s=new eF(i);for(const c of Of.values())s.addComponent(c);const u=new aF(n,r,s);return Ja.set(i,u),u}function Jj(t,e){if(zG()&&!WU())throw Li.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!0);let n;sF(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=f=>[...f].reduce((h,y)=>Math.imul(31,h)+y.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Li.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(r)),s=kf.get(o);if(s)return s.incRefCount(e.releaseOnDeref),s;const u=new eF(o);for(const f of Of.values())u.addComponent(f);const c=new Yj(n,e,o,u);return kf.set(o,c),c}function Qj(t=Ya){const e=Ja.get(t);if(!e&&t===Ya&&jU())return TI();if(!e)throw Li.create("no-app",{appName:t});return e}function Xj(){return Array.from(Ja.values())}async function EI(t){let e=!1;const n=t.name;Ja.has(n)?(e=!0,Ja.delete(n)):kf.has(n)&&t.decRefCount()<=0&&(kf.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function ro(t,e,n){var r;let i=(r=jj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&u.push("and"),s&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(u.join(" "));return}Qa(new Go(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function lF(t,e){if(t!==null&&typeof t!="function")throw Li.create("invalid-log-argument");ij(t,e)}function uF(t){rj(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="firebase-heartbeat-database",e8=1,Wm="firebase-heartbeat-store";let mb=null;function cF(){return mb||(mb=hj(Zj,e8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wm)}catch(n){console.warn(n)}}}}).catch(t=>{throw Li.create("idb-open",{originalErrorMessage:t.message})})),mb}async function t8(t){try{const n=(await cF()).transaction(Wm),r=await n.objectStore(Wm).get(fF(t));return await n.done,r}catch(e){if(e instanceof Dr)Ds.warn(e.message);else{const n=Li.create("idb-get",{originalErrorMessage:e?.message});Ds.warn(n.message)}}}async function mD(t,e){try{const r=(await cF()).transaction(Wm,"readwrite");await r.objectStore(Wm).put(e,fF(t)),await r.done}catch(n){if(n instanceof Dr)Ds.warn(n.message);else{const r=Li.create("idb-set",{originalErrorMessage:n?.message});Ds.warn(r.message)}}}function fF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=1024,r8=30;class i8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new s8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=pD();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>r8){const s=a8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pD(),{heartbeatsToSend:r,unsentEntries:i}=o8(this._heartbeatsCache.heartbeats),o=wv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ds.warn(n),""}}}function pD(){return new Date().toISOString().substring(0,10)}function o8(t,e=n8){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),gD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class s8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hm()?GG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t8(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gD(t){return wv(JSON.stringify({version:2,heartbeats:t})).length}function a8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(t){Qa(new Go("platform-logger",e=>new gj(e),"PRIVATE")),Qa(new Go("heartbeat",e=>new i8(e),"PRIVATE")),ro(Sv,gA,t),ro(Sv,gA,"esm2017"),ro("fire-js","")}l8("");const u8=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Dr,SDK_VERSION:ll,_DEFAULT_ENTRY_NAME:Ya,_addComponent:Km,_addOrOverwriteComponent:iF,_apps:Ja,_clearComponents:Kj,_components:Of,_getProvider:oF,_isFirebaseApp:sF,_isFirebaseServerApp:Kt,_registerComponent:Qa,_removeServiceInstance:Hj,_serverApps:kf,deleteApp:EI,getApp:Qj,getApps:Xj,initializeApp:TI,initializeServerApp:Jj,onLog:lF,registerVersion:ro,setLogLevel:uF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e,n){this._delegate=e,this.firebase=n,Km(e,new Go("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),EI(this._delegate)))}_getService(e,n=Ya){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ya){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Km(this._delegate,e)}_addOrOverwriteComponent(e){iF(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},yD=new Yu("app-compat","Firebase",f8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:ro,setLogLevel:uF,onLog:lF,apps:null,SDK_VERSION:ll,INTERNAL:{registerComponent:u,removeApp:r,useAsService:c,modularAPIs:u8}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(f){delete e[f]}function i(f){if(f=f||Ya,!lD(e,f))throw yD.create("no-app",{appName:f});return e[f]}i.App=t;function o(f,h={}){const y=TI(f,h);if(lD(e,y.name))return e[y.name];const _=new t(y,n);return e[y.name]=_,_}function s(){return Object.keys(e).map(f=>e[f])}function u(f){const h=f.name,y=h.replace("-compat","");if(Qa(f)&&f.type==="PUBLIC"){const _=(E=i())=>{if(typeof E[y]!="function")throw yD.create("invalid-app-argument",{appName:h});return E[y]()};f.serviceProps!==void 0&&Av(_,f.serviceProps),n[y]=_,t.prototype[y]=function(...E){return this._getService.bind(this,h).apply(this,f.multipleInstances?E:[])}}return f.type==="PUBLIC"?n[y]:null}function c(f,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(){const t=d8(c8);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:dF,extendNamespace:e,createSubscribe:ZU,ErrorFactory:Yu,deepExtend:Av});function e(n){Av(t,n)}return t}const h8=dF();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new U_("@firebase/app-compat"),m8="@firebase/app-compat",p8="0.4.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){ro(m8,p8,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=pI();if(t.firebase!==void 0){vD.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&vD.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const jo=h8;g8();var y8="firebase",v8="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jo.registerVersion(y8,v8,"app-compat");var st=(t=>(t.Present="present",t.Absent="absent",t.HalfDay="halfday",t))(st||{}),dn=(t=>(t.Dashboard="DASHBOARD",t.Attendance="ATTENDANCE",t.AddMember="ADD_MEMBER",t.MemberDetails="MEMBER_DETAILS",t))(dn||{}),_D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qa,hF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function V(){}V.prototype=N.prototype,D.D=N.prototype,D.prototype=new V,D.prototype.constructor=D,D.C=function(q,B,G){for(var z=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)z[Ve-2]=arguments[Ve];return N.prototype[B].apply(q,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,N,V){V||(V=0);var q=Array(16);if(typeof N=="string")for(var B=0;16>B;++B)q[B]=N.charCodeAt(V++)|N.charCodeAt(V++)<<8|N.charCodeAt(V++)<<16|N.charCodeAt(V++)<<24;else for(B=0;16>B;++B)q[B]=N[V++]|N[V++]<<8|N[V++]<<16|N[V++]<<24;N=D.g[0],V=D.g[1],B=D.g[2];var G=D.g[3],z=N+(G^V&(B^G))+q[0]+3614090360&4294967295;N=V+(z<<7&4294967295|z>>>25),z=G+(B^N&(V^B))+q[1]+3905402710&4294967295,G=N+(z<<12&4294967295|z>>>20),z=B+(V^G&(N^V))+q[2]+606105819&4294967295,B=G+(z<<17&4294967295|z>>>15),z=V+(N^B&(G^N))+q[3]+3250441966&4294967295,V=B+(z<<22&4294967295|z>>>10),z=N+(G^V&(B^G))+q[4]+4118548399&4294967295,N=V+(z<<7&4294967295|z>>>25),z=G+(B^N&(V^B))+q[5]+1200080426&4294967295,G=N+(z<<12&4294967295|z>>>20),z=B+(V^G&(N^V))+q[6]+2821735955&4294967295,B=G+(z<<17&4294967295|z>>>15),z=V+(N^B&(G^N))+q[7]+4249261313&4294967295,V=B+(z<<22&4294967295|z>>>10),z=N+(G^V&(B^G))+q[8]+1770035416&4294967295,N=V+(z<<7&4294967295|z>>>25),z=G+(B^N&(V^B))+q[9]+2336552879&4294967295,G=N+(z<<12&4294967295|z>>>20),z=B+(V^G&(N^V))+q[10]+4294925233&4294967295,B=G+(z<<17&4294967295|z>>>15),z=V+(N^B&(G^N))+q[11]+2304563134&4294967295,V=B+(z<<22&4294967295|z>>>10),z=N+(G^V&(B^G))+q[12]+1804603682&4294967295,N=V+(z<<7&4294967295|z>>>25),z=G+(B^N&(V^B))+q[13]+4254626195&4294967295,G=N+(z<<12&4294967295|z>>>20),z=B+(V^G&(N^V))+q[14]+2792965006&4294967295,B=G+(z<<17&4294967295|z>>>15),z=V+(N^B&(G^N))+q[15]+1236535329&4294967295,V=B+(z<<22&4294967295|z>>>10),z=N+(B^G&(V^B))+q[1]+4129170786&4294967295,N=V+(z<<5&4294967295|z>>>27),z=G+(V^B&(N^V))+q[6]+3225465664&4294967295,G=N+(z<<9&4294967295|z>>>23),z=B+(N^V&(G^N))+q[11]+643717713&4294967295,B=G+(z<<14&4294967295|z>>>18),z=V+(G^N&(B^G))+q[0]+3921069994&4294967295,V=B+(z<<20&4294967295|z>>>12),z=N+(B^G&(V^B))+q[5]+3593408605&4294967295,N=V+(z<<5&4294967295|z>>>27),z=G+(V^B&(N^V))+q[10]+38016083&4294967295,G=N+(z<<9&4294967295|z>>>23),z=B+(N^V&(G^N))+q[15]+3634488961&4294967295,B=G+(z<<14&4294967295|z>>>18),z=V+(G^N&(B^G))+q[4]+3889429448&4294967295,V=B+(z<<20&4294967295|z>>>12),z=N+(B^G&(V^B))+q[9]+568446438&4294967295,N=V+(z<<5&4294967295|z>>>27),z=G+(V^B&(N^V))+q[14]+3275163606&4294967295,G=N+(z<<9&4294967295|z>>>23),z=B+(N^V&(G^N))+q[3]+4107603335&4294967295,B=G+(z<<14&4294967295|z>>>18),z=V+(G^N&(B^G))+q[8]+1163531501&4294967295,V=B+(z<<20&4294967295|z>>>12),z=N+(B^G&(V^B))+q[13]+2850285829&4294967295,N=V+(z<<5&4294967295|z>>>27),z=G+(V^B&(N^V))+q[2]+4243563512&4294967295,G=N+(z<<9&4294967295|z>>>23),z=B+(N^V&(G^N))+q[7]+1735328473&4294967295,B=G+(z<<14&4294967295|z>>>18),z=V+(G^N&(B^G))+q[12]+2368359562&4294967295,V=B+(z<<20&4294967295|z>>>12),z=N+(V^B^G)+q[5]+4294588738&4294967295,N=V+(z<<4&4294967295|z>>>28),z=G+(N^V^B)+q[8]+2272392833&4294967295,G=N+(z<<11&4294967295|z>>>21),z=B+(G^N^V)+q[11]+1839030562&4294967295,B=G+(z<<16&4294967295|z>>>16),z=V+(B^G^N)+q[14]+4259657740&4294967295,V=B+(z<<23&4294967295|z>>>9),z=N+(V^B^G)+q[1]+2763975236&4294967295,N=V+(z<<4&4294967295|z>>>28),z=G+(N^V^B)+q[4]+1272893353&4294967295,G=N+(z<<11&4294967295|z>>>21),z=B+(G^N^V)+q[7]+4139469664&4294967295,B=G+(z<<16&4294967295|z>>>16),z=V+(B^G^N)+q[10]+3200236656&4294967295,V=B+(z<<23&4294967295|z>>>9),z=N+(V^B^G)+q[13]+681279174&4294967295,N=V+(z<<4&4294967295|z>>>28),z=G+(N^V^B)+q[0]+3936430074&4294967295,G=N+(z<<11&4294967295|z>>>21),z=B+(G^N^V)+q[3]+3572445317&4294967295,B=G+(z<<16&4294967295|z>>>16),z=V+(B^G^N)+q[6]+76029189&4294967295,V=B+(z<<23&4294967295|z>>>9),z=N+(V^B^G)+q[9]+3654602809&4294967295,N=V+(z<<4&4294967295|z>>>28),z=G+(N^V^B)+q[12]+3873151461&4294967295,G=N+(z<<11&4294967295|z>>>21),z=B+(G^N^V)+q[15]+530742520&4294967295,B=G+(z<<16&4294967295|z>>>16),z=V+(B^G^N)+q[2]+3299628645&4294967295,V=B+(z<<23&4294967295|z>>>9),z=N+(B^(V|~G))+q[0]+4096336452&4294967295,N=V+(z<<6&4294967295|z>>>26),z=G+(V^(N|~B))+q[7]+1126891415&4294967295,G=N+(z<<10&4294967295|z>>>22),z=B+(N^(G|~V))+q[14]+2878612391&4294967295,B=G+(z<<15&4294967295|z>>>17),z=V+(G^(B|~N))+q[5]+4237533241&4294967295,V=B+(z<<21&4294967295|z>>>11),z=N+(B^(V|~G))+q[12]+1700485571&4294967295,N=V+(z<<6&4294967295|z>>>26),z=G+(V^(N|~B))+q[3]+2399980690&4294967295,G=N+(z<<10&4294967295|z>>>22),z=B+(N^(G|~V))+q[10]+4293915773&4294967295,B=G+(z<<15&4294967295|z>>>17),z=V+(G^(B|~N))+q[1]+2240044497&4294967295,V=B+(z<<21&4294967295|z>>>11),z=N+(B^(V|~G))+q[8]+1873313359&4294967295,N=V+(z<<6&4294967295|z>>>26),z=G+(V^(N|~B))+q[15]+4264355552&4294967295,G=N+(z<<10&4294967295|z>>>22),z=B+(N^(G|~V))+q[6]+2734768916&4294967295,B=G+(z<<15&4294967295|z>>>17),z=V+(G^(B|~N))+q[13]+1309151649&4294967295,V=B+(z<<21&4294967295|z>>>11),z=N+(B^(V|~G))+q[4]+4149444226&4294967295,N=V+(z<<6&4294967295|z>>>26),z=G+(V^(N|~B))+q[11]+3174756917&4294967295,G=N+(z<<10&4294967295|z>>>22),z=B+(N^(G|~V))+q[2]+718787259&4294967295,B=G+(z<<15&4294967295|z>>>17),z=V+(G^(B|~N))+q[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(B+(z<<21&4294967295|z>>>11))&4294967295,D.g[2]=D.g[2]+B&4294967295,D.g[3]=D.g[3]+G&4294967295}r.prototype.u=function(D,N){N===void 0&&(N=D.length);for(var V=N-this.blockSize,q=this.B,B=this.h,G=0;G<N;){if(B==0)for(;G<=V;)i(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<N;)if(q[B++]=D.charCodeAt(G++),B==this.blockSize){i(this,q),B=0;break}}else for(;G<N;)if(q[B++]=D[G++],B==this.blockSize){i(this,q),B=0;break}}this.h=B,this.o+=N},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;var V=8*this.o;for(N=D.length-8;N<D.length;++N)D[N]=V&255,V/=256;for(this.u(D),D=Array(16),N=V=0;4>N;++N)for(var q=0;32>q;q+=8)D[V++]=this.g[N]>>>q&255;return D};function o(D,N){var V=u;return Object.prototype.hasOwnProperty.call(V,D)?V[D]:V[D]=N(D)}function s(D,N){this.h=N;for(var V=[],q=!0,B=D.length-1;0<=B;B--){var G=D[B]|0;q&&G==N||(V[B]=G,q=!1)}this.g=V}var u={};function c(D){return-128<=D&&128>D?o(D,function(N){return new s([N|0],0>N?-1:0)}):new s([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return I(f(-D));for(var N=[],V=1,q=0;D>=V;q++)N[q]=D/V|0,V*=4294967296;return new s(N,0)}function h(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return I(h(D.substring(1),N));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=f(Math.pow(N,8)),q=y,B=0;B<D.length;B+=8){var G=Math.min(8,D.length-B),z=parseInt(D.substring(B,B+G),N);8>G?(G=f(Math.pow(N,G)),q=q.j(G).add(f(z))):(q=q.j(V),q=q.add(f(z)))}return q}var y=c(0),_=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(A(this))return-I(this).m();for(var D=0,N=1,V=0;V<this.g.length;V++){var q=this.i(V);D+=(0<=q?q:4294967296+q)*N,N*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(A(this))return"-"+I(this).toString(D);for(var N=f(Math.pow(D,6)),V=this,q="";;){var B=F(V,N).g;V=R(V,B.j(N));var G=((0<V.g.length?V.g[0]:V.h)>>>0).toString(D);if(V=B,w(V))return G+q;for(;6>G.length;)G="0"+G;q=G+q}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function A(D){return D.h==-1}t.l=function(D){return D=R(this,D),A(D)?-1:w(D)?0:1};function I(D){for(var N=D.g.length,V=[],q=0;q<N;q++)V[q]=~D.g[q];return new s(V,~D.h).add(_)}t.abs=function(){return A(this)?I(this):this},t.add=function(D){for(var N=Math.max(this.g.length,D.g.length),V=[],q=0,B=0;B<=N;B++){var G=q+(this.i(B)&65535)+(D.i(B)&65535),z=(G>>>16)+(this.i(B)>>>16)+(D.i(B)>>>16);q=z>>>16,G&=65535,z&=65535,V[B]=z<<16|G}return new s(V,V[V.length-1]&-2147483648?-1:0)};function R(D,N){return D.add(I(N))}t.j=function(D){if(w(this)||w(D))return y;if(A(this))return A(D)?I(this).j(I(D)):I(I(this).j(D));if(A(D))return I(this.j(I(D)));if(0>this.l(E)&&0>D.l(E))return f(this.m()*D.m());for(var N=this.g.length+D.g.length,V=[],q=0;q<2*N;q++)V[q]=0;for(q=0;q<this.g.length;q++)for(var B=0;B<D.g.length;B++){var G=this.i(q)>>>16,z=this.i(q)&65535,Ve=D.i(B)>>>16,Pe=D.i(B)&65535;V[2*q+2*B]+=z*Pe,M(V,2*q+2*B),V[2*q+2*B+1]+=G*Pe,M(V,2*q+2*B+1),V[2*q+2*B+1]+=z*Ve,M(V,2*q+2*B+1),V[2*q+2*B+2]+=G*Ve,M(V,2*q+2*B+2)}for(q=0;q<N;q++)V[q]=V[2*q+1]<<16|V[2*q];for(q=N;q<2*N;q++)V[q]=0;return new s(V,0)};function M(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function P(D,N){this.g=D,this.h=N}function F(D,N){if(w(N))throw Error("division by zero");if(w(D))return new P(y,y);if(A(D))return N=F(I(D),N),new P(I(N.g),I(N.h));if(A(N))return N=F(D,I(N)),new P(I(N.g),N.h);if(30<D.g.length){if(A(D)||A(N))throw Error("slowDivide_ only works with positive integers.");for(var V=_,q=N;0>=q.l(D);)V=U(V),q=U(q);var B=$(V,1),G=$(q,1);for(q=$(q,2),V=$(V,2);!w(q);){var z=G.add(q);0>=z.l(D)&&(B=B.add(V),G=z),q=$(q,1),V=$(V,1)}return N=R(D,B.j(N)),new P(B,N)}for(B=y;0<=D.l(N);){for(V=Math.max(1,Math.floor(D.m()/N.m())),q=Math.ceil(Math.log(V)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),G=f(V),z=G.j(N);A(z)||0<z.l(D);)V-=q,G=f(V),z=G.j(N);w(G)&&(G=_),B=B.add(G),D=R(D,z)}return new P(B,D)}t.A=function(D){return F(this,D).h},t.and=function(D){for(var N=Math.max(this.g.length,D.g.length),V=[],q=0;q<N;q++)V[q]=this.i(q)&D.i(q);return new s(V,this.h&D.h)},t.or=function(D){for(var N=Math.max(this.g.length,D.g.length),V=[],q=0;q<N;q++)V[q]=this.i(q)|D.i(q);return new s(V,this.h|D.h)},t.xor=function(D){for(var N=Math.max(this.g.length,D.g.length),V=[],q=0;q<N;q++)V[q]=this.i(q)^D.i(q);return new s(V,this.h^D.h)};function U(D){for(var N=D.g.length+1,V=[],q=0;q<N;q++)V[q]=D.i(q)<<1|D.i(q-1)>>>31;return new s(V,D.h)}function $(D,N){var V=N>>5;N%=32;for(var q=D.g.length-V,B=[],G=0;G<q;G++)B[G]=0<N?D.i(G+V)>>>N|D.i(G+V+1)<<32-N:D.i(G+V);return new s(B,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hF=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,qa=s}).apply(typeof _D<"u"?_D:typeof self<"u"?self:typeof window<"u"?window:{});var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mF,vm,pF,iv,yA,gF,yF,vF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,S,C){return v==Array.prototype||v==Object.prototype||(v[S]=C.value),v};function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ny=="object"&&Ny];for(var S=0;S<v.length;++S){var C=v[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(v,S){if(S)e:{var C=r;v=v.split(".");for(var L=0;L<v.length-1;L++){var J=v[L];if(!(J in C))break e;C=C[J]}v=v[v.length-1],L=C[v],S=S(L),S!=L&&S!=null&&e(C,v,{configurable:!0,writable:!0,value:S})}}function o(v,S){v instanceof String&&(v+="");var C=0,L=!1,J={next:function(){if(!L&&C<v.length){var ie=C++;return{value:S(ie,v[ie]),done:!1}}return L=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(v){return v||function(){return o(this,function(S,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},u=this||self;function c(v){var S=typeof v;return S=S!="object"?S:v?Array.isArray(v)?"array":S:"null",S=="array"||S=="object"&&typeof v.length=="number"}function f(v){var S=typeof v;return S=="object"&&v!=null||S=="function"}function h(v,S,C){return v.call.apply(v.bind,arguments)}function y(v,S,C){if(!v)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,L),v.apply(S,J)}}return function(){return v.apply(S,arguments)}}function _(v,S,C){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:y,_.apply(null,arguments)}function E(v,S){var C=Array.prototype.slice.call(arguments,1);return function(){var L=C.slice();return L.push.apply(L,arguments),v.apply(this,L)}}function w(v,S){function C(){}C.prototype=S.prototype,v.aa=S.prototype,v.prototype=new C,v.prototype.constructor=v,v.Qb=function(L,J,ie){for(var ve=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ve[ut-2]=arguments[ut];return S.prototype[J].apply(L,ve)}}function A(v){const S=v.length;if(0<S){const C=Array(S);for(let L=0;L<S;L++)C[L]=v[L];return C}return[]}function I(v,S){for(let C=1;C<arguments.length;C++){const L=arguments[C];if(c(L)){const J=v.length||0,ie=L.length||0;v.length=J+ie;for(let ve=0;ve<ie;ve++)v[J+ve]=L[ve]}else v.push(L)}}class R{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function M(v){return/^[\s\xa0]*$/.test(v)}function P(){var v=u.navigator;return v&&(v=v.userAgent)?v:""}function F(v){return F[" "](v),v}F[" "]=function(){};var U=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function $(v,S,C){for(const L in v)S.call(C,v[L],L,v)}function D(v,S){for(const C in v)S.call(void 0,v[C],C,v)}function N(v){const S={};for(const C in v)S[C]=v[C];return S}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(v,S){let C,L;for(let J=1;J<arguments.length;J++){L=arguments[J];for(C in L)v[C]=L[C];for(let ie=0;ie<V.length;ie++)C=V[ie],Object.prototype.hasOwnProperty.call(L,C)&&(v[C]=L[C])}}function B(v){var S=1;v=v.split(":");const C=[];for(;0<S&&v.length;)C.push(v.shift()),S--;return v.length&&C.push(v.join(":")),C}function G(v){u.setTimeout(()=>{throw v},0)}function z(){var v=qe;let S=null;return v.g&&(S=v.g,v.g=v.g.next,v.g||(v.h=null),S.next=null),S}class Ve{constructor(){this.h=this.g=null}add(S,C){const L=Pe.get();L.set(S,C),this.h?this.h.next=L:this.g=L,this.h=L}}var Pe=new R(()=>new ne,v=>v.reset());class ne{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let me,Ae=!1,qe=new Ve,K=()=>{const v=u.Promise.resolve(void 0);me=()=>{v.then(ue)}};var ue=()=>{for(var v;v=z();){try{v.h.call(v.g)}catch(C){G(C)}var S=Pe;S.j(v),100>S.h&&(S.h++,v.next=S.g,S.g=v)}Ae=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(v,S){this.type=v,this.g=this.target=S,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Me=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var v=!1,S=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const C=()=>{};u.addEventListener("test",C,S),u.removeEventListener("test",C,S)}catch{}return v}();function Fe(v,S){if(de.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var C=this.type=v.type,L=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=S,S=v.relatedTarget){if(U){e:{try{F(S.nodeName);var J=!0;break e}catch{}J=!1}J||(S=null)}}else C=="mouseover"?S=v.fromElement:C=="mouseout"&&(S=v.toElement);this.relatedTarget=S,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Ge[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Fe.aa.h.call(this)}}w(Fe,de);var Ge={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var yn="closure_listenable_"+(1e6*Math.random()|0),Ct=0;function Ee(v,S,C,L,J){this.listener=v,this.proxy=null,this.src=S,this.type=C,this.capture=!!L,this.ha=J,this.key=++Ct,this.da=this.fa=!1}function Ke(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Ye(v){this.src=v,this.g={},this.h=0}Ye.prototype.add=function(v,S,C,L,J){var ie=v.toString();v=this.g[ie],v||(v=this.g[ie]=[],this.h++);var ve=tn(v,S,L,J);return-1<ve?(S=v[ve],C||(S.fa=!1)):(S=new Ee(S,this.src,ie,!!L,J),S.fa=C,v.push(S)),S};function pe(v,S){var C=S.type;if(C in v.g){var L=v.g[C],J=Array.prototype.indexOf.call(L,S,void 0),ie;(ie=0<=J)&&Array.prototype.splice.call(L,J,1),ie&&(Ke(S),v.g[C].length==0&&(delete v.g[C],v.h--))}}function tn(v,S,C,L){for(var J=0;J<v.length;++J){var ie=v[J];if(!ie.da&&ie.listener==S&&ie.capture==!!C&&ie.ha==L)return J}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),Mn={};function qn(v,S,C,L,J){if(Array.isArray(S)){for(var ie=0;ie<S.length;ie++)qn(v,S[ie],C,L,J);return null}return C=cg(C),v&&v[yn]?v.K(S,C,f(L)?!!L.capture:!1,J):vn(v,S,C,!1,L,J)}function vn(v,S,C,L,J,ie){if(!S)throw Error("Invalid event type");var ve=f(J)?!!J.capture:!!J,ut=cc(v);if(ut||(v[lt]=ut=new Ye(v)),C=ut.add(S,C,L,ve,ie),C.proxy)return C;if(L=lc(),C.proxy=L,L.src=v,L.listener=C,v.addEventListener)Me||(J=ve),J===void 0&&(J=!1),v.addEventListener(S.toString(),L,J);else if(v.attachEvent)v.attachEvent(Tl(S.toString()),L);else if(v.addListener&&v.removeListener)v.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return C}function lc(){function v(C){return S.call(v.src,v.listener,C)}const S=oT;return v}function Gd(v,S,C,L,J){if(Array.isArray(S))for(var ie=0;ie<S.length;ie++)Gd(v,S[ie],C,L,J);else L=f(L)?!!L.capture:!!L,C=cg(C),v&&v[yn]?(v=v.i,S=String(S).toString(),S in v.g&&(ie=v.g[S],C=tn(ie,C,L,J),-1<C&&(Ke(ie[C]),Array.prototype.splice.call(ie,C,1),ie.length==0&&(delete v.g[S],v.h--)))):v&&(v=cc(v))&&(S=v.g[S.toString()],v=-1,S&&(v=tn(S,C,L,J)),(C=-1<v?S[v]:null)&&uc(C))}function uc(v){if(typeof v!="number"&&v&&!v.da){var S=v.src;if(S&&S[yn])pe(S.i,v);else{var C=v.type,L=v.proxy;S.removeEventListener?S.removeEventListener(C,L,v.capture):S.detachEvent?S.detachEvent(Tl(C),L):S.addListener&&S.removeListener&&S.removeListener(L),(C=cc(S))?(pe(C,v),C.h==0&&(C.src=null,S[lt]=null)):Ke(v)}}}function Tl(v){return v in Mn?Mn[v]:Mn[v]="on"+v}function oT(v,S){if(v.da)v=!0;else{S=new Fe(S,this);var C=v.listener,L=v.ha||v.src;v.fa&&uc(v),v=C.call(L,S)}return v}function cc(v){return v=v[lt],v instanceof Ye?v:null}var jd="__closure_events_fn_"+(1e9*Math.random()>>>0);function cg(v){return typeof v=="function"?v:(v[jd]||(v[jd]=function(S){return v.handleEvent(S)}),v[jd])}function nn(){se.call(this),this.i=new Ye(this),this.M=this,this.F=null}w(nn,se),nn.prototype[yn]=!0,nn.prototype.removeEventListener=function(v,S,C,L){Gd(this,v,S,C,L)};function Et(v,S){var C,L=v.F;if(L)for(C=[];L;L=L.F)C.push(L);if(v=v.M,L=S.type||S,typeof S=="string")S=new de(S,v);else if(S instanceof de)S.target=S.target||v;else{var J=S;S=new de(L,v),q(S,J)}if(J=!0,C)for(var ie=C.length-1;0<=ie;ie--){var ve=S.g=C[ie];J=Hr(ve,L,!0,S)&&J}if(ve=S.g=v,J=Hr(ve,L,!0,S)&&J,J=Hr(ve,L,!1,S)&&J,C)for(ie=0;ie<C.length;ie++)ve=S.g=C[ie],J=Hr(ve,L,!1,S)&&J}nn.prototype.N=function(){if(nn.aa.N.call(this),this.i){var v=this.i,S;for(S in v.g){for(var C=v.g[S],L=0;L<C.length;L++)Ke(C[L]);delete v.g[S],v.h--}}this.F=null},nn.prototype.K=function(v,S,C,L){return this.i.add(String(v),S,!1,C,L)},nn.prototype.L=function(v,S,C,L){return this.i.add(String(v),S,!0,C,L)};function Hr(v,S,C,L){if(S=v.i.g[String(S)],!S)return!0;S=S.concat();for(var J=!0,ie=0;ie<S.length;++ie){var ve=S[ie];if(ve&&!ve.da&&ve.capture==C){var ut=ve.listener,Nn=ve.ha||ve.src;ve.fa&&pe(v.i,ve),J=ut.call(Nn,L)!==!1&&J}}return J&&!L.defaultPrevented}function hr(v,S,C){if(typeof v=="function")C&&(v=_(v,C));else if(v&&typeof v.handleEvent=="function")v=_(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:u.setTimeout(v,S||0)}function fg(v){v.g=hr(()=>{v.g=null,v.i&&(v.i=!1,fg(v))},v.l);const S=v.h;v.h=null,v.m.apply(null,S)}class sT extends se{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:fg(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function El(v){se.call(this),this.h=v,this.g={}}w(El,se);var bl=[];function wl(v){$(v.g,function(S,C){this.g.hasOwnProperty(C)&&uc(S)},v),v.g={}}El.prototype.N=function(){El.aa.N.call(this),wl(this)},El.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ki=u.JSON.stringify,fc=u.JSON.parse,Al=class{stringify(v){return u.JSON.stringify(v,void 0)}parse(v){return u.JSON.parse(v,void 0)}};function Hd(){}Hd.prototype.h=null;function Kd(v){return v.h||(v.h=v.i())}function Wd(){}var Xo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zo(){de.call(this,"d")}w(Zo,de);function Yd(){de.call(this,"c")}w(Yd,de);var co={},Jd=null;function Xs(){return Jd=Jd||new nn}co.La="serverreachability";function dc(v){de.call(this,co.La,v)}w(dc,de);function Zs(v){const S=Xs();Et(S,new dc(S))}co.STAT_EVENT="statevent";function dg(v,S){de.call(this,co.STAT_EVENT,v),this.stat=S}w(dg,de);function Gt(v){const S=Xs();Et(S,new dg(S,v))}co.Ma="timingevent";function Dn(v,S){de.call(this,co.Ma,v),this.size=S}w(Dn,de);function _n(v,S){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){v()},S)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function Qd(v,S,C,L,J,ie){v.info(function(){if(v.g)if(ie)for(var ve="",ut=ie.split("&"),Nn=0;Nn<ut.length;Nn++){var ct=ut[Nn].split("=");if(1<ct.length){var $n=ct[0];ct=ct[1];var kn=$n.split("_");ve=2<=kn.length&&kn[1]=="type"?ve+($n+"="+ct+"&"):ve+($n+"=redacted&")}}else ve=null;else ve=ie;return"XMLHTTP REQ ("+L+") [attempt "+J+"]: "+S+`
`+C+`
`+ve})}function aT(v,S,C,L,J,ie,ve){v.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+J+"]: "+S+`
`+C+`
`+ie+" "+ve})}function ea(v,S,C,L){v.info(function(){return"XMLHTTP TEXT ("+S+"): "+Sl(v,C)+(L?" "+L:"")})}function hg(v,S){v.info(function(){return"TIMEOUT: "+S})}vi.prototype.info=function(){};function Sl(v,S){if(!v.g)return S;if(!S)return null;try{var C=JSON.parse(S);if(C){for(v=0;v<C.length;v++)if(Array.isArray(C[v])){var L=C[v];if(!(2>L.length)){var J=L[1];if(Array.isArray(J)&&!(1>J.length)){var ie=J[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ve=1;ve<J.length;ve++)J[ve]=""}}}}return Ki(C)}catch{return S}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},es={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fo;function ho(){}w(ho,Hd),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},fo=new ho;function Sr(v,S,C,L){this.j=v,this.i=S,this.l=C,this.R=L||1,this.U=new El(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var Xd={},hc={};function Wi(v,S,C){v.L=1,v.v=Pl(Kr(S)),v.m=C,v.P=!0,ts(v,null)}function ts(v,S){v.F=Date.now(),Il(v),v.A=Kr(v.v);var C=v.A,L=v.R;Array.isArray(L)||(L=[String(L)]),ih(C.i,"t",L),v.C=0,C=v.j.J,v.h=new un,v.g=Rg(v.j,C?S:null,!v.m),0<v.O&&(v.M=new sT(_(v.Y,v,v.g),v.O)),S=v.U,C=v.g,L=v.ca;var J="readystatechange";Array.isArray(J)||(J&&(bl[0]=J.toString()),J=bl);for(var ie=0;ie<J.length;ie++){var ve=qn(C,J[ie],L||S.handleEvent,!1,S.h||S);if(!ve)break;S.g[ve.key]=ve}S=v.H?N(v.H):{},v.m?(v.u||(v.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,S)):(v.u="GET",v.g.ea(v.A,v.u,null,S)),Zs(),Qd(v.i,v.u,v.A,v.l,v.R,v.m)}Sr.prototype.ca=function(v){v=v.target;const S=this.M;S&&bi(v)==3?S.j():this.Y(v)},Sr.prototype.Y=function(v){try{if(v==this.g)e:{const kn=bi(this.g);var S=this.g.Ba();const us=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||Eg(this.g)))){this.J||kn!=4||S==7||(S==8||0>=us?Zs(3):Zs(2)),na(this);var C=this.g.Z();this.X=C;t:if(mg(this)){var L=Eg(this.g);v="";var J=L.length,ie=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),mo(this);var ve="";break t}this.h.i=new u.TextDecoder}for(S=0;S<J;S++)this.h.h=!0,v+=this.h.i.decode(L[S],{stream:!(ie&&S==J-1)});L.length=0,this.h.g+=v,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=C==200,aT(this.i,this.u,this.A,this.l,this.R,kn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Nn=this.g;if((ut=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ut)){var ct=ut;break t}}ct=null}if(C=ct)ea(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cl(this,C);else{this.o=!1,this.s=3,Gt(12),er(this),mo(this);break e}}if(this.P){C=!0;let tr;for(;!this.J&&this.C<ve.length;)if(tr=pg(this,ve),tr==hc){kn==4&&(this.s=4,Gt(14),C=!1),ea(this.i,this.l,null,"[Incomplete Response]");break}else if(tr==Xd){this.s=4,Gt(15),ea(this.i,this.l,ve,"[Invalid Chunk]"),C=!1;break}else ea(this.i,this.l,tr,null),Cl(this,tr);if(mg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||ve.length!=0||this.h.h||(this.s=1,Gt(16),C=!1),this.o=this.o&&C,!C)ea(this.i,this.l,ve,"[Invalid Chunked Response]"),er(this),mo(this);else if(0<ve.length&&!this.W){this.W=!0;var $n=this.j;$n.g==this&&$n.ba&&!$n.M&&($n.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Ul($n),$n.M=!0,Gt(11))}}else ea(this.i,this.l,ve,null),Cl(this,ve);kn==4&&er(this),this.o&&!this.J&&(kn==4?Ig(this.j,this):(this.o=!1,Il(this)))}else dT(this.g),C==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),er(this),mo(this)}}}catch{}finally{}};function mg(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function pg(v,S){var C=v.C,L=S.indexOf(`
`,C);return L==-1?hc:(C=Number(S.substring(C,L)),isNaN(C)?Xd:(L+=1,L+C>S.length?hc:(S=S.slice(L,L+C),v.C=L+C,S)))}Sr.prototype.cancel=function(){this.J=!0,er(this)};function Il(v){v.S=Date.now()+v.I,gg(v,v.I)}function gg(v,S){if(v.B!=null)throw Error("WatchDog timer not null");v.B=_n(_(v.ba,v),S)}function na(v){v.B&&(u.clearTimeout(v.B),v.B=null)}Sr.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(hg(this.i,this.A),this.L!=2&&(Zs(),Gt(17)),er(this),this.s=2,mo(this)):gg(this,this.S-v)};function mo(v){v.j.G==0||v.J||Ig(v.j,v)}function er(v){na(v);var S=v.M;S&&typeof S.ma=="function"&&S.ma(),v.M=null,wl(v.U),v.g&&(S=v.g,v.g=null,S.abort(),S.ma())}function Cl(v,S){try{var C=v.j;if(C.G!=0&&(C.g==v||Zd(C.h,v))){if(!v.K&&Zd(C.h,v)&&C.G==3){try{var L=C.Da.g.parse(S)}catch{L=null}if(Array.isArray(L)&&L.length==3){var J=L;if(J[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<v.F)Sc(C),wc(C);else break e;uh(C),Gt(18)}}else C.za=J[1],0<C.za-C.T&&37500>J[2]&&C.F&&C.v==0&&!C.C&&(C.C=_n(_(C.Za,C),6e3));if(1>=pc(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ls(C,11)}else if((v.K||C.g==v)&&Sc(C),!M(S))for(J=C.Da.g.parse(S),S=0;S<J.length;S++){let ct=J[S];if(C.T=ct[0],ct=ct[1],C.G==2)if(ct[0]=="c"){C.K=ct[1],C.ia=ct[2];const $n=ct[3];$n!=null&&(C.la=$n,C.j.info("VER="+C.la));const kn=ct[4];kn!=null&&(C.Aa=kn,C.j.info("SVER="+C.Aa));const us=ct[5];us!=null&&typeof us=="number"&&0<us&&(L=1.5*us,C.L=L,C.j.info("backChannelRequestTimeoutMs_="+L)),L=C;const tr=v.g;if(tr){const Eo=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var ie=L.h;ie.g||Eo.indexOf("spdy")==-1&&Eo.indexOf("quic")==-1&&Eo.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(gc(ie,ie.h),ie.h=null))}if(L.D){const fh=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(L.ya=fh,xt(L.I,L.D,fh))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-v.F,C.j.info("Handshake RTT: "+C.R+"ms")),L=C;var ve=v;if(L.qa=xg(L,L.J?L.ia:null,L.W),ve.K){Ir(L.h,ve);var ut=ve,Nn=L.L;Nn&&(ut.I=Nn),ut.B&&(na(ut),Il(ut)),L.g=ve}else Ag(L);0<C.i.length&&Ac(C)}else ct[0]!="stop"&&ct[0]!="close"||ls(C,7);else C.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ls(C,7):ah(C):ct[0]!="noop"&&C.l&&C.l.ta(ct),C.v=0)}}Zs(4)}catch{}}var yg=class{constructor(v,S){this.g=v,this.map=S}};function ns(v){this.l=v||10,u.PerformanceNavigationTiming?(v=u.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function pc(v){return v.h?1:v.g?v.g.size:0}function Zd(v,S){return v.h?v.h==S:v.g?v.g.has(S):!1}function gc(v,S){v.g?v.g.add(S):v.h=S}function Ir(v,S){v.h&&v.h==S?v.h=null:v.g&&v.g.has(S)&&v.g.delete(S)}ns.prototype.cancel=function(){if(this.i=eh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function eh(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let S=v.i;for(const C of v.g.values())S=S.concat(C.D);return S}return A(v.i)}function lT(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(c(v)){for(var S=[],C=v.length,L=0;L<C;L++)S.push(v[L]);return S}S=[],C=0;for(L in v)S[C++]=v[L];return S}function yc(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(c(v)||typeof v=="string"){var S=[];v=v.length;for(var C=0;C<v;C++)S.push(C);return S}S=[],C=0;for(const L in v)S[C++]=L;return S}}}function th(v,S){if(v.forEach&&typeof v.forEach=="function")v.forEach(S,void 0);else if(c(v)||typeof v=="string")Array.prototype.forEach.call(v,S,void 0);else for(var C=yc(v),L=lT(v),J=L.length,ie=0;ie<J;ie++)S.call(void 0,L[ie],C&&C[ie],v)}var xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uT(v,S){if(v){v=v.split("&");for(var C=0;C<v.length;C++){var L=v[C].indexOf("="),J=null;if(0<=L){var ie=v[C].substring(0,L);J=v[C].substring(L+1)}else ie=v[C];S(ie,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Tn(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Tn){this.h=v.h,Rl(this,v.j),this.o=v.o,this.g=v.g,ra(this,v.s),this.l=v.l;var S=v.i,C=new is;C.i=S.i,S.g&&(C.g=new Map(S.g),C.h=S.h),rs(this,C),this.m=v.m}else v&&(S=String(v).match(xl))?(this.h=!1,Rl(this,S[1]||"",!0),this.o=_i(S[2]||""),this.g=_i(S[3]||"",!0),ra(this,S[4]),this.l=_i(S[5]||"",!0),rs(this,S[6]||"",!0),this.m=_i(S[7]||"")):(this.h=!1,this.i=new is(null,this.h))}Tn.prototype.toString=function(){var v=[],S=this.j;S&&v.push(Ml(S,nh,!0),":");var C=this.g;return(C||S=="file")&&(v.push("//"),(S=this.o)&&v.push(Ml(S,nh,!0),"@"),v.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&v.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&v.push("/"),v.push(Ml(C,C.charAt(0)=="/"?cT:rh,!0))),(C=this.i.toString())&&v.push("?",C),(C=this.m)&&v.push("#",Ml(C,vc)),v.join("")};function Kr(v){return new Tn(v)}function Rl(v,S,C){v.j=C?_i(S,!0):S,v.j&&(v.j=v.j.replace(/:$/,""))}function ra(v,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);v.s=S}else v.s=null}function rs(v,S,C){S instanceof is?(v.i=S,_g(v.i,v.h)):(C||(S=Ml(S,fT)),v.i=new is(S,v.h))}function xt(v,S,C){v.i.set(S,C)}function Pl(v){return xt(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function _i(v,S){return v?S?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Ml(v,S,C){return typeof v=="string"?(v=encodeURI(v).replace(S,vg),C&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function vg(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var nh=/[#\/\?@]/g,rh=/[#\?:]/g,cT=/[#\?]/g,fT=/[#\?@]/g,vc=/#/g;function is(v,S){this.h=this.g=null,this.i=v||null,this.j=!!S}function Ti(v){v.g||(v.g=new Map,v.h=0,v.i&&uT(v.i,function(S,C){v.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=is.prototype,t.add=function(v,S){Ti(this),this.i=null,v=po(this,v);var C=this.g.get(v);return C||this.g.set(v,C=[]),C.push(S),this.h+=1,this};function os(v,S){Ti(v),S=po(v,S),v.g.has(S)&&(v.i=null,v.h-=v.g.get(S).length,v.g.delete(S))}function ss(v,S){return Ti(v),S=po(v,S),v.g.has(S)}t.forEach=function(v,S){Ti(this),this.g.forEach(function(C,L){C.forEach(function(J){v.call(S,J,L,this)},this)},this)},t.na=function(){Ti(this);const v=Array.from(this.g.values()),S=Array.from(this.g.keys()),C=[];for(let L=0;L<S.length;L++){const J=v[L];for(let ie=0;ie<J.length;ie++)C.push(S[L])}return C},t.V=function(v){Ti(this);let S=[];if(typeof v=="string")ss(this,v)&&(S=S.concat(this.g.get(po(this,v))));else{v=Array.from(this.g.values());for(let C=0;C<v.length;C++)S=S.concat(v[C])}return S},t.set=function(v,S){return Ti(this),this.i=null,v=po(this,v),ss(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[S]),this.h+=1,this},t.get=function(v,S){return v?(v=this.V(v),0<v.length?String(v[0]):S):S};function ih(v,S,C){os(v,S),0<C.length&&(v.i=null,v.g.set(po(v,S),A(C)),v.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],S=Array.from(this.g.keys());for(var C=0;C<S.length;C++){var L=S[C];const ie=encodeURIComponent(String(L)),ve=this.V(L);for(L=0;L<ve.length;L++){var J=ie;ve[L]!==""&&(J+="="+encodeURIComponent(String(ve[L]))),v.push(J)}}return this.i=v.join("&")};function po(v,S){return S=String(S),v.j&&(S=S.toLowerCase()),S}function _g(v,S){S&&!v.j&&(Ti(v),v.i=null,v.g.forEach(function(C,L){var J=L.toLowerCase();L!=J&&(os(this,L),ih(this,J,C))},v)),v.j=S}function Dl(v,S){const C=new vi;if(u.Image){const L=new Image;L.onload=E(Ei,C,"TestLoadImage: loaded",!0,S,L),L.onerror=E(Ei,C,"TestLoadImage: error",!1,S,L),L.onabort=E(Ei,C,"TestLoadImage: abort",!1,S,L),L.ontimeout=E(Ei,C,"TestLoadImage: timeout",!1,S,L),u.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=v}else S(!1)}function Yi(v,S){const C=new vi,L=new AbortController,J=setTimeout(()=>{L.abort(),Ei(C,"TestPingServer: timeout",!1,S)},1e4);fetch(v,{signal:L.signal}).then(ie=>{clearTimeout(J),ie.ok?Ei(C,"TestPingServer: ok",!0,S):Ei(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(J),Ei(C,"TestPingServer: error",!1,S)})}function Ei(v,S,C,L,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),L(C)}catch{}}function Nl(){this.g=new Al}function go(v,S,C){const L=C||"";try{th(v,function(J,ie){let ve=J;f(J)&&(ve=Ki(J)),S.push(L+ie+"="+encodeURIComponent(ve))})}catch(J){throw S.push(L+"type="+encodeURIComponent("_badmap")),J}}function ia(v){this.l=v.Ub||null,this.j=v.eb||!1}w(ia,Hd),ia.prototype.g=function(){return new as(this.l,this.j)},ia.prototype.i=function(v){return function(){return v}}({});function as(v,S){nn.call(this),this.D=v,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(as,nn),t=as.prototype,t.open=function(v,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=S,this.readyState=1,vo(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(S.body=v),(this.D||u).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oh(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function oh(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var S=v.value?v.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!v.done}))&&(this.response=this.responseText+=S)}v.done?yo(this):vo(this),this.readyState==3&&oh(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,yo(this))},t.Qa=function(v){this.g&&(this.response=v,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,vo(v)}t.setRequestHeader=function(v,S){this.u.append(v,S)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,v.push(C[0]+": "+C[1]),C=S.next();return v.join(`\r
`)};function vo(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(as.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function sh(v){let S="";return $(v,function(C,L){S+=L,S+=":",S+=C,S+=`\r
`}),S}function zn(v,S,C){e:{for(L in C){var L=!1;break e}L=!0}L||(C=sh(C),typeof v=="string"?C!=null&&encodeURIComponent(String(C)):xt(v,S,C))}function vt(v){nn.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(vt,nn);var _c=/^https?$/i,kl=["POST","PUT"];t=vt.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,S,C,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);S=S?S.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fo.g(),this.v=this.o?Kd(this.o):Kd(fo),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(S,String(v),!0),this.B=!1}catch(ie){Tg(this,ie);return}if(v=C||"",C=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var J in L)C.set(J,L[J]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ie of L.keys())C.set(ie,L.get(ie));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=u.FormData&&v instanceof u.FormData,!(0<=Array.prototype.indexOf.call(kl,S,void 0))||L||J||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ve]of C)this.g.setRequestHeader(ie,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ol(this),this.u=!0,this.g.send(v),this.u=!1}catch(ie){Tg(this,ie)}};function Tg(v,S){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=S,v.m=5,Tc(v),_o(v)}function Tc(v){v.A||(v.A=!0,Et(v,"complete"),Et(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Et(this,"complete"),Et(this,"abort"),_o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ec(this):this.bb())},t.bb=function(){Ec(this)};function Ec(v){if(v.h&&typeof s<"u"&&(!v.v[1]||bi(v)!=4||v.Z()!=2)){if(v.u&&bi(v)==4)hr(v.Ea,0,v);else if(Et(v,"readystatechange"),bi(v)==4){v.h=!1;try{const ve=v.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var L;if(L=ve===0){var J=String(v.D).match(xl)[1]||null;!J&&u.self&&u.self.location&&(J=u.self.location.protocol.slice(0,-1)),L=!_c.test(J?J.toLowerCase():"")}C=L}if(C)Et(v,"complete"),Et(v,"success");else{v.m=6;try{var ie=2<bi(v)?v.g.statusText:""}catch{ie=""}v.l=ie+" ["+v.Z()+"]",Tc(v)}}finally{_o(v)}}}}function _o(v,S){if(v.g){Ol(v);const C=v.g,L=v.v[0]?()=>{}:null;v.g=null,v.v=null,S||Et(v,"ready");try{C.onreadystatechange=L}catch{}}}function Ol(v){v.I&&(u.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function bi(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var S=this.g.responseText;return v&&S.indexOf(v)==0&&(S=S.substring(v.length)),fc(S)}};function Eg(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function dT(v){const S={};v=(v.g&&2<=bi(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<v.length;L++){if(M(v[L]))continue;var C=B(v[L]);const J=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=S[J]||[];S[J]=ie,ie.push(C)}D(S,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vl(v,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[v]||S}function bc(v){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vl("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vl("baseRetryDelayMs",5e3,v),this.cb=Vl("retryDelaySeedMs",1e4,v),this.Wa=Vl("forwardChannelMaxRetries",2,v),this.wa=Vl("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(v&&v.concurrentRequestLimit),this.Da=new Nl,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bc.prototype,t.la=8,t.G=1,t.connect=function(v,S,C,L){Gt(0),this.W=v,this.H=S||{},C&&L!==void 0&&(this.H.OSID=C,this.H.OAID=L),this.F=this.X,this.I=xg(this,null,this.W),Ac(this)};function ah(v){if(bg(v),v.G==3){var S=v.U++,C=Kr(v.I);if(xt(C,"SID",v.K),xt(C,"RID",S),xt(C,"TYPE","terminate"),Ll(v,C),S=new Sr(v,v.j,S),S.L=2,S.v=Pl(Kr(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(S.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=S.v,C=!0),C||(S.g=Rg(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Il(S)}Cg(v)}function wc(v){v.g&&(Ul(v),v.g.cancel(),v.g=null)}function bg(v){wc(v),v.u&&(u.clearTimeout(v.u),v.u=null),Sc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&u.clearTimeout(v.s),v.s=null)}function Ac(v){if(!mc(v.h)&&!v.s){v.s=!0;var S=v.Ga;me||K(),Ae||(me(),Ae=!0),qe.add(S,v),v.B=0}}function hT(v,S){return pc(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=S.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=_n(_(v.Ga,v,S),ch(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const J=new Sr(this,this.j,v);let ie=this.o;if(this.S&&(ie?(ie=N(ie),q(ie,this.S)):ie=this.S),this.m!==null||this.O||(J.H=ie,ie=null),this.P)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var L=this.i[C];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(S+=L,4096<S){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=wg(this,J,S),C=Kr(this.I),xt(C,"RID",v),xt(C,"CVER",22),this.D&&xt(C,"X-HTTP-Session-Id",this.D),Ll(this,C),ie&&(this.O?S="headers="+encodeURIComponent(String(sh(ie)))+"&"+S:this.m&&zn(C,this.m,ie)),gc(this.h,J),this.Ua&&xt(C,"TYPE","init"),this.P?(xt(C,"$req",S),xt(C,"SID","null"),J.T=!0,Wi(J,C,null)):Wi(J,C,S),this.G=2}}else this.G==3&&(v?lh(this,v):this.i.length==0||mc(this.h)||lh(this))};function lh(v,S){var C;S?C=S.l:C=v.U++;const L=Kr(v.I);xt(L,"SID",v.K),xt(L,"RID",C),xt(L,"AID",v.T),Ll(v,L),v.m&&v.o&&zn(L,v.m,v.o),C=new Sr(v,v.j,C,v.B+1),v.m===null&&(C.H=v.o),S&&(v.i=S.D.concat(v.i)),S=wg(v,C,1e3),C.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),gc(v.h,C),Wi(C,L,S)}function Ll(v,S){v.H&&$(v.H,function(C,L){xt(S,L,C)}),v.l&&th({},function(C,L){xt(S,L,C)})}function wg(v,S,C){C=Math.min(v.i.length,C);var L=v.l?_(v.l.Na,v.l,v):null;e:{var J=v.i;let ie=-1;for(;;){const ve=["count="+C];ie==-1?0<C?(ie=J[0].g,ve.push("ofs="+ie)):ie=0:ve.push("ofs="+ie);let ut=!0;for(let Nn=0;Nn<C;Nn++){let ct=J[Nn].g;const $n=J[Nn].map;if(ct-=ie,0>ct)ie=Math.max(0,J[Nn].g-100),ut=!1;else try{go($n,ve,"req"+ct+"_")}catch{L&&L($n)}}if(ut){L=ve.join("&");break e}}}return v=v.i.splice(0,C),S.D=v,L}function Ag(v){if(!v.g&&!v.u){v.Y=1;var S=v.Fa;me||K(),Ae||(me(),Ae=!0),qe.add(S,v),v.v=0}}function uh(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=_n(_(v.Fa,v),ch(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,Sg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=_n(_(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),wc(this),Sg(this))};function Ul(v){v.A!=null&&(u.clearTimeout(v.A),v.A=null)}function Sg(v){v.g=new Sr(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var S=Kr(v.qa);xt(S,"RID","rpc"),xt(S,"SID",v.K),xt(S,"AID",v.T),xt(S,"CI",v.F?"0":"1"),!v.F&&v.ja&&xt(S,"TO",v.ja),xt(S,"TYPE","xmlhttp"),Ll(v,S),v.m&&v.o&&zn(S,v.m,v.o),v.L&&(v.g.I=v.L);var C=v.g;v=v.ia,C.L=1,C.v=Pl(Kr(S)),C.m=null,C.P=!0,ts(C,v)}t.Za=function(){this.C!=null&&(this.C=null,wc(this),uh(this),Gt(19))};function Sc(v){v.C!=null&&(u.clearTimeout(v.C),v.C=null)}function Ig(v,S){var C=null;if(v.g==S){Sc(v),Ul(v),v.g=null;var L=2}else if(Zd(v.h,S))C=S.D,Ir(v.h,S),L=1;else return;if(v.G!=0){if(S.o)if(L==1){C=S.m?S.m.length:0,S=Date.now()-S.F;var J=v.B;L=Xs(),Et(L,new Dn(L,C)),Ac(v)}else Ag(v);else if(J=S.s,J==3||J==0&&0<S.X||!(L==1&&hT(v,S)||L==2&&uh(v)))switch(C&&0<C.length&&(S=v.h,S.i=S.i.concat(C)),J){case 1:ls(v,5);break;case 4:ls(v,10);break;case 3:ls(v,6);break;default:ls(v,2)}}}function ch(v,S){let C=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(C*=2),C*S}function ls(v,S){if(v.j.info("Error code "+S),S==2){var C=_(v.fb,v),L=v.Xa;const J=!L;L=new Tn(L||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Rl(L,"https"),Pl(L),J?Dl(L.toString(),C):Yi(L.toString(),C)}else Gt(2);v.G=0,v.l&&v.l.sa(S),Cg(v),bg(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Cg(v){if(v.G=0,v.ka=[],v.l){const S=eh(v.h);(S.length!=0||v.i.length!=0)&&(I(v.ka,S),I(v.ka,v.i),v.h.i.length=0,A(v.i),v.i.length=0),v.l.ra()}}function xg(v,S,C){var L=C instanceof Tn?Kr(C):new Tn(C);if(L.g!="")S&&(L.g=S+"."+L.g),ra(L,L.s);else{var J=u.location;L=J.protocol,S=S?S+"."+J.hostname:J.hostname,J=+J.port;var ie=new Tn(null);L&&Rl(ie,L),S&&(ie.g=S),J&&ra(ie,J),C&&(ie.l=C),L=ie}return C=v.D,S=v.ya,C&&S&&xt(L,C,S),xt(L,"VER",v.la),Ll(v,L),L}function Rg(v,S,C){if(S&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=v.Ca&&!v.pa?new vt(new ia({eb:C})):new vt(v.pa),S.Ha(v.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pg(){}t=Pg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ic(){}Ic.prototype.g=function(v,S){return new Cr(v,S)};function Cr(v,S){nn.call(this),this.g=new bc(S),this.l=v,this.h=S&&S.messageUrlParams||null,v=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(v?v["X-WebChannel-Content-Type"]=S.messageContentType:v={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(v?v["X-WebChannel-Client-Profile"]=S.va:v={"X-WebChannel-Client-Profile":S.va}),this.g.S=v,(v=S&&S.Sb)&&!M(v)&&(this.g.m=v),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!M(S)&&(this.g.D=S,v=this.h,v!==null&&S in v&&(v=this.h,S in v&&delete v[S])),this.j=new To(this)}w(Cr,nn),Cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cr.prototype.close=function(){ah(this.g)},Cr.prototype.o=function(v){var S=this.g;if(typeof v=="string"){var C={};C.__data__=v,v=C}else this.u&&(C={},C.__data__=Ki(v),v=C);S.i.push(new yg(S.Ya++,v)),S.G==3&&Ac(S)},Cr.prototype.N=function(){this.g.l=null,delete this.j,ah(this.g),delete this.g,Cr.aa.N.call(this)};function Mg(v){Zo.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var S=v.__sm__;if(S){e:{for(const C in S){v=C;break e}v=void 0}(this.i=v)&&(v=this.i,S=S!==null&&v in S?S[v]:void 0),this.data=S}else this.data=v}w(Mg,Zo);function Dg(){Yd.call(this),this.status=1}w(Dg,Yd);function To(v){this.g=v}w(To,Pg),To.prototype.ua=function(){Et(this.g,"a")},To.prototype.ta=function(v){Et(this.g,new Mg(v))},To.prototype.sa=function(v){Et(this.g,new Dg)},To.prototype.ra=function(){Et(this.g,"b")},Ic.prototype.createWebChannel=Ic.prototype.g,Cr.prototype.send=Cr.prototype.o,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,vF=function(){return new Ic},yF=function(){return Xs()},gF=co,yA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,iv=ta,es.COMPLETE="complete",pF=es,Wd.EventType=Xo,Xo.OPEN="a",Xo.CLOSE="b",Xo.ERROR="c",Xo.MESSAGE="d",nn.prototype.listen=nn.prototype.K,vm=Wd,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,mF=vt}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});const TD="@firebase/firestore",ED="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new U_("@firebase/firestore");function mf(){return Xa.logLevel}function _8(t){Xa.setLogLevel(t)}function he(t,...e){if(Xa.logLevel<=rt.DEBUG){const n=e.map(bI);Xa.debug(`Firestore (${Td}): ${t}`,...n)}}function hn(t,...e){if(Xa.logLevel<=rt.ERROR){const n=e.map(bI);Xa.error(`Firestore (${Td}): ${t}`,...n)}}function di(t,...e){if(Xa.logLevel<=rt.WARN){const n=e.map(bI);Xa.warn(`Firestore (${Td}): ${t}`,...n)}}function bI(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_F(t,r,n)}function _F(t,e,n){let r=`FIRESTORE (${Td}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hn(r),new Error(r)}function xe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||_F(e,i,r)}function T8(t,e){t||we(57014,e)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yn.UNAUTHENTICATED))}shutdown(){}}class b8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class w8{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new TF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class A8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new A8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,he("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bD(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=C8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function vA(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return $e(r,i);{const o=wI(),s=x8(o.encode(wD(t,n)),o.encode(wD(e,n)));return s!==0?s:$e(r,i)}}n+=r>65535?2:1}return $e(t.length,e.length)}function wD(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function x8(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $e(t[n],e[n]);return $e(t.length,e.length)}function Vf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function EF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="__name__";class Co{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Co.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return $e(e.length,n.length)}static compareSegments(e,n){const r=Co.isNumericId(e),i=Co.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Co.extractNumericId(e).compare(Co.extractNumericId(n)):vA(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qa.fromString(e.substring(4,e.length-2))}}class it extends Co{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const R8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Co{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return R8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AD}static keyField(){return new Wt([AD])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(it.fromString(e))}static fromName(e){return new _e(it.fromString(e).popFirst(5))}static empty(){return new _e(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e,n){if(!n)throw new fe(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bF(t,e,n,r){if(e===!0&&r===!0)throw new fe(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SD(t){if(!_e.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ID(t){if(_e.isDocumentKey(t))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wF(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function F_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=F_(t);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function AF(t,e){if(e<=0)throw new fe(re.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Pp(t,e){if(!wF(t))throw new fe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new fe(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=-62135596800,xD=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xD);return new Tt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<CD)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xD}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pp(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:xn("string",Tt._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Tt(0,0))}static max(){return new De(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=-1;class Iv{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function _A(t){return t.fields.find(e=>e.kind===2)}function ru(t){return t.fields.filter(e=>e.kind!==2)}Iv.UNKNOWN_ID=-1;class ov{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ym{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ym(0,hi.min())}}function SF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new hi(i,_e.empty(),e)}function IF(t){return new hi(t.readTime,t.key,Lf)}class hi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hi(De.min(),_e.empty(),Lf)}static max(){return new hi(De.max(),_e.empty(),Lf)}}function II(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==CF)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,o=0,s=!1;e.forEach(u=>{++i,u.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const o=e.length,s=new Array(o);let u=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next(h=>{s[f]=h,++u,u===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new Q((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="SimpleDb";class B_{static open(e,n,r,i){try{return new B_(n,e.transaction(i,r))}catch(o){throw new Rm(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new cr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Rm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=CI(r.target.error);this.S.reject(new Rm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(he(ri,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new M8(n)}}class Fo{static delete(e){return he(ri,"Removing database:",e),lu(pI().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Hm())return!1;if(Fo.F())return!0;const e=Zt(),n=Fo.M(e),r=0<n&&n<10,i=RF(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.B=r,this.L=null,Fo.M(Zt())===12.2&&hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(he(ri,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new Rm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new fe(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new fe(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Rm(e,s))},i.onupgradeneeded=o=>{he(ri,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{he(ri,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const r=n.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",n=>{var r;n.newVersion===null&&(di('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.k(e);const u=B_.open(this.db,e,o?"readonly":"readwrite",r),c=i(u).next(f=>(u.v(),f)).catch(f=>(u.abort(f),Q.reject(f))).toPromise();return c.catch(()=>{}),await u.D,c}catch(u){const c=u,f=c.name!=="FirebaseError"&&s<3;if(he(ri,"Transaction failed with error:",c.message,"Retrying:",f),this.close(),!f)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function RF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class P8{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return lu(this.$.delete())}}class Rm extends fe{constructor(e,n){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function cl(t){return t.name==="IndexedDbTransactionError"}class M8{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(he(ri,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(he(ri,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lu(r)}add(e){return he(ri,"ADD",this.store.name,e,e),lu(this.store.add(e))}get(e){return lu(this.store.get(e)).next(n=>(n===void 0&&(n=null),he(ri,"GET",this.store.name,e,n),n))}delete(e){return he(ri,"DELETE",this.store.name,e),lu(this.store.delete(e))}count(){return he(ri,"COUNT",this.store.name),lu(this.store.count())}j(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new Q((s,u)=>{o.onerror=c=>{u(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{const o=this.cursor(r),s=[];return this.J(o,(u,c)=>{s.push(c)}).next(()=>s)}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Q((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,n){he(ri,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.J(i,(o,s,u)=>u.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}ee(e){const n=this.cursor({});return new Q((r,i)=>{n.onerror=o=>{const s=CI(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(u=>{u?s.continue():r()}):r()}})}J(e,n){const r=[];return new Q((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const u=s.target.result;if(!u)return void i();const c=new P8(u),f=n(u.primaryKey,u.value,c);if(f instanceof Q){const h=f.catch(y=>(c.done(),Q.reject(y)));r.push(h)}c.isDone?i():c.W===null?u.continue():u.continue(c.W)}}).next(()=>Q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function lu(t){return new Q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=CI(r.target.error);n(i)}})}let RD=!1;function CI(t){const e=Fo.M(Zt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RD||(RD=!0,setTimeout(()=>{throw r},0)),r}}return t}const Pm="IndexBackfiller";class D8{constructor(e,n){this.asyncQueue=e,this.te=n,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){he(Pm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.te.re();he(Pm,`Documents written: ${n}`)}catch(n){cl(n)?he(Pm,"Ignoring IndexedDB error during index backfill: ",n):await ul(n)}await this.ne(6e4)})}}class N8{constructor(e,n){this.localStore=e,this.persistence=n}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ie(n,e))}ie(e,n){const r=new Set;let i=n,o=!0;return Q.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return he(Pm,`Processing collection: ${s}`),this.se(e,s,i).next(u=>{i-=u,r.add(s)});o=!1})).next(()=>n-i)}se(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(u=>(he(Pm,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>s.size)}))}oe(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=IF(o);II(s,r)>0&&(r=s)}),new hi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}qr.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=-1;function Mp(t){return t==null}function Jm(t){return t===0&&1/t==-1/0}function PF(t){return typeof t=="number"&&Number.isInteger(t)&&!Jm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="";function br(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=PD(e)),e=k8(t.get(n),e);return PD(e)}function k8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case Cv:n+="";break;default:n+=o}}return n}function PD(t){return t+Cv+""}function No(t){const e=t.length;if(xe(e>=2,64408,{path:t}),e===2)return xe(t.charAt(0)===Cv&&t.charAt(1)==="",56145,{path:t}),it.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf(Cv,o);switch((s<0||s>n)&&we(50515,{path:t}),t.charAt(s+1)){case"":const u=t.substring(o,s);let c;i.length===0?c=u:(i+=u,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:we(61167,{path:t})}o=s+2}return new it(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="remoteDocuments",Dp="owner",tf="owner",Qm="mutationQueues",O8="userId",Zi="mutations",MD="batchId",hu="userMutationsIndex",DD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e){return[t,br(e)]}function MF(t,e,n){return[t,br(e),n]}const V8={},Uf="documentMutations",xv="remoteDocumentsV14",L8=["prefixPath","collectionGroup","readTime","documentId"],av="documentKeyIndex",U8=["prefixPath","collectionGroup","documentId"],DF="collectionGroupIndex",F8=["collectionGroup","readTime","prefixPath","documentId"],Xm="remoteDocumentGlobal",TA="remoteDocumentGlobalKey",Ff="targets",NF="queryTargetsIndex",B8=["canonicalId","targetId"],Bf="targetDocuments",q8=["targetId","path"],xI="documentTargetsIndex",z8=["path","targetId"],Rv="targetGlobalKey",Eu="targetGlobal",Zm="collectionParents",$8=["collectionId","parent"],qf="clientMetadata",G8="clientId",q_="bundles",j8="bundleId",z_="namedQueries",H8="name",RI="indexConfiguration",K8="indexId",EA="collectionGroupIndex",W8="collectionGroup",Mm="indexState",Y8=["indexId","uid"],kF="sequenceNumberIndex",J8=["uid","sequenceNumber"],Dm="indexEntries",Q8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OF="documentKeyIndex",X8=["indexId","uid","orderedDocumentKey"],$_="documentOverlays",Z8=["userId","collectionPath","documentId"],bA="collectionPathOverlayIndex",eH=["userId","collectionPath","largestBatchId"],VF="collectionGroupOverlayIndex",tH=["userId","collectionGroup","largestBatchId"],PI="globals",nH="name",LF=[Qm,Zi,Uf,iu,Ff,Dp,Eu,Bf,qf,Xm,Zm,q_,z_],rH=[...LF,$_],UF=[Qm,Zi,Uf,xv,Ff,Dp,Eu,Bf,qf,Xm,Zm,q_,z_,$_],FF=UF,MI=[...FF,RI,Mm,Dm],iH=MI,BF=[...MI,PI],oH=BF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends xF{constructor(e,n){super(),this.ce=e,this.currentSequenceNumber=n}}function Fn(t,e){const n=Te(t);return Fo.N(n.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.comparator=e,this.root=n||sr.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ky(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ky(this.root,e,this.comparator,!1)}getReverseIterator(){return new ky(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ky(this.root,e,this.comparator,!0)}}class ky{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??sr.RED,this.left=i??sr.EMPTY,this.right=o??sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new sr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return sr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kD(this.data.getIterator())}getIteratorFrom(e){return new kD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class kD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nf(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new zr([])}unionWith(e){let n=new St(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zF("Invalid base64 string: "+o):o}}(e);return new sn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const aH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=aH.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="server_timestamp",GF="__type__",jF="__previous_value__",HF="__local_write_time__";function G_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[GF])===null||n===void 0?void 0:n.stringValue)===$F}function j_(t){const e=t.mapValue.fields[jF];return G_(e)?j_(e):e}function ep(t){const e=Ns(t.mapValue.fields[HF].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n,r,i,o,s,u,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const AA="(default)";class Za{constructor(e,n){this.projectId=e,this.database=n||AA}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===AA}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="__type__",KF="__max__",La={mapValue:{fields:{__type__:{stringValue:KF}}}},NI="__vector__",zf="value",lv={nullValue:"NULL_VALUE"};function el(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G_(t)?4:WF(t)?9007199254740991:H_(t)?10:11:we(28295,{value:t})}function Ho(t,e){if(t===e)return!0;const n=el(t);if(n!==el(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ep(t).isEqual(ep(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ns(i.timestampValue),u=Ns(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ks(i.bytesValue).isEqual(ks(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ht(i.geoPointValue.latitude)===Ht(o.geoPointValue.latitude)&&Ht(i.geoPointValue.longitude)===Ht(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ht(i.integerValue)===Ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ht(i.doubleValue),u=Ht(o.doubleValue);return s===u?Jm(s)===Jm(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return Vf(t.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(ND(s)!==ND(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!Ho(s[c],u[c])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function tp(t,e){return(t.values||[]).find(n=>Ho(n,e))!==void 0}function tl(t,e){if(t===e)return 0;const n=el(t),r=el(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(o,s){const u=Ht(o.integerValue||o.doubleValue),c=Ht(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return OD(t.timestampValue,e.timestampValue);case 4:return OD(ep(t),ep(e));case 5:return vA(t.stringValue,e.stringValue);case 6:return function(o,s){const u=ks(o),c=ks(s);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const u=o.split("/"),c=s.split("/");for(let f=0;f<u.length&&f<c.length;f++){const h=$e(u[f],c[f]);if(h!==0)return h}return $e(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const u=$e(Ht(o.latitude),Ht(s.latitude));return u!==0?u:$e(Ht(o.longitude),Ht(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return VD(t.arrayValue,e.arrayValue);case 10:return function(o,s){var u,c,f,h;const y=o.fields||{},_=s.fields||{},E=(u=y[zf])===null||u===void 0?void 0:u.arrayValue,w=(c=_[zf])===null||c===void 0?void 0:c.arrayValue,A=$e(((f=E?.values)===null||f===void 0?void 0:f.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:VD(E,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===La.mapValue&&s===La.mapValue)return 0;if(o===La.mapValue)return 1;if(s===La.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let y=0;y<c.length&&y<h.length;++y){const _=vA(c[y],h[y]);if(_!==0)return _;const E=tl(u[c[y]],f[h[y]]);if(E!==0)return E}return $e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw we(23264,{le:n})}}function OD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=Ns(t),r=Ns(e),i=$e(n.seconds,r.seconds);return i!==0?i:$e(n.nanos,r.nanos)}function VD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=tl(n[i],r[i]);if(o)return o}return $e(n.length,r.length)}function $f(t){return SA(t)}function SA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=SA(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${SA(n.fields[s])}`;return i+"}"}(t.mapValue):we(61005,{value:t})}function uv(t){switch(el(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=j_(t);return e?16+uv(e):16;case 5:return 2*t.stringValue.length;case 6:return ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+uv(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return fl(r.fields,(o,s)=>{i+=o.length+uv(s)}),i}(t.mapValue);default:throw we(13486,{value:t})}}function Ru(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function IA(t){return!!t&&"integerValue"in t}function np(t){return!!t&&"arrayValue"in t}function LD(t){return!!t&&"nullValue"in t}function UD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cv(t){return!!t&&"mapValue"in t}function H_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DI])===null||n===void 0?void 0:n.stringValue)===NI}function Nm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===KF}const YF={mapValue:{fields:{[DI]:{stringValue:NI},[zf]:{arrayValue:{}}}}};function uH(t){return"nullValue"in t?lv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ru(Za.empty(),_e.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?H_(t)?YF:{mapValue:{}}:we(35942,{value:t})}function cH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ru(Za.empty(),_e.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?YF:"mapValue"in t?H_(t)?{mapValue:{}}:La:we(61959,{value:t})}function FD(t,e){const n=tl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function BD(t,e){const n=tl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.value=e}static empty(){return new lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nm(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((s,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}s?r[u.lastSegment()]=Nm(s):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());cv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fl(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new lr(Nm(this.value))}}function JF(t){const e=[];return fl(t.fields,(n,r)=>{const i=new Wt([n]);if(cv(r)){const o=JF(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,i,o,s,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new $t(e,0,De.min(),De.min(),De.min(),lr.empty(),0)}static newFoundDocument(e,n,r,i){return new $t(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new $t(e,2,n,De.min(),De.min(),lr.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,De.min(),De.min(),lr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.position=e,this.inclusive=n}}function qD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(s.referenceValue),n.key):r=tl(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ho(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n="asc"){this.field=e,this.dir=n}}function fH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{}class ot extends QF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dH(e,n,r):n==="array-contains"?new pH(e,r):n==="in"?new rB(e,r):n==="not-in"?new gH(e,r):n==="array-contains-any"?new yH(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hH(e,r):new mH(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tl(n,this.value)):n!==null&&el(this.value)===el(n)&&this.matchesComparison(tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends QF{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new At(e,n)}matches(e){return Gf(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Gf(t){return t.op==="and"}function CA(t){return t.op==="or"}function kI(t){return XF(t)&&Gf(t)}function XF(t){for(const e of t.filters)if(e instanceof At)return!1;return!0}function xA(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+$f(t.value);if(kI(t))return t.filters.map(e=>xA(e)).join(",");{const e=t.filters.map(n=>xA(n)).join(",");return`${t.op}(${e})`}}function ZF(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&Ho(r.value,i.value)}(t,e):t instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,u)=>o&&ZF(s,i.filters[u]),!0):!1}(t,e):void we(19439)}function eB(t,e){const n=t.filters.concat(e);return At.create(n,t.op)}function tB(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${$f(n.value)}`}(t):t instanceof At?function(n){return n.op.toString()+" {"+n.getFilters().map(tB).join(" ,")+"}"}(t):"Filter"}class dH extends ot{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class hH extends ot{constructor(e,n){super(e,"in",n),this.keys=nB("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mH extends ot{constructor(e,n){super(e,"not-in",n),this.keys=nB("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nB(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>_e.fromName(r.referenceValue))}class pH extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return np(n)&&tp(n.arrayValue,this.value)}}class rB extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tp(this.value.arrayValue,n)}}class gH extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tp(this.value.arrayValue,n)}}class yH extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e,n=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.Pe=null}}function RA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new vH(t,e,n,r,i,o,s)}function Pu(t){const e=Te(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xA(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Mp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$f(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$f(r)).join(",")),e.Pe=n}return e.Pe}function Np(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zD(t.startAt,e.startAt)&&zD(t.endAt,e.endAt)}function Pv(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mv(t,e){return t.filters.filter(n=>n instanceof ot&&n.field.isEqual(e))}function $D(t,e,n){let r=lv,i=!0;for(const o of Mv(t,e)){let s=lv,u=!0;switch(o.op){case"<":case"<=":s=uH(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,u=!1;break;case"!=":case"not-in":s=lv}FD({value:r,inclusive:i},{value:s,inclusive:u})<0&&(r=s,i=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];FD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function GD(t,e,n){let r=La,i=!0;for(const o of Mv(t,e)){let s=La,u=!0;switch(o.op){case">=":case">":s=cH(o.value),u=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,u=!1;break;case"!=":case"not-in":s=La}BD({value:r,inclusive:i},{value:s,inclusive:u})>0&&(r=s,i=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];BD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function iB(t,e,n,r,i,o,s,u){return new qs(t,e,n,r,i,o,s,u)}function Ed(t){return new qs(t)}function jD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OI(t){return t.collectionGroup!==null}function Af(t){const e=Te(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new St(Wt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new rp(o,r))}),n.has(Wt.keyField().canonicalString())||e.Te.push(new rp(Wt.keyField(),r))}return e.Te}function Nr(t){const e=Te(t);return e.Ie||(e.Ie=_H(e,Af(t))),e.Ie}function _H(t,e){if(t.limitType==="F")return RA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new rp(i.field,o)});const n=t.endAt?new nl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nl(t.startAt.position,t.startAt.inclusive):null;return RA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function PA(t,e){const n=t.filters.concat([e]);return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dv(t,e,n){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kp(t,e){return Np(Nr(t),Nr(e))&&t.limitType===e.limitType}function oB(t){return`${Pu(Nr(t))}|lt:${t.limitType}`}function pf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>tB(i)).join(", ")}]`),Mp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$f(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$f(i)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function Op(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Af(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,u,c){const f=qD(s,u,c);return s.inclusive?f<=0:f<0}(r.startAt,Af(r),i)||r.endAt&&!function(s,u,c){const f=qD(s,u,c);return s.inclusive?f>=0:f>0}(r.endAt,Af(r),i))}(t,e)}function sB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aB(t){return(e,n)=>{let r=!1;for(const i of Af(t)){const o=TH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function TH(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(o,s,u){const c=s.data.field(o),f=u.data.field(o);return c!==null&&f!==null?tl(c,f):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fl(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return qF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=new Bt(_e.comparator);function $r(){return EH}const lB=new Bt(_e.comparator);function _m(...t){let e=lB;for(const n of t)e=e.insert(n.key,n);return e}function uB(t){let e=lB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ko(){return km()}function cB(){return km()}function km(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const bH=new Bt(_e.comparator),wH=new St(_e.comparator);function Je(...t){let e=wH;for(const n of t)e=e.add(n);return e}const AH=new St($e);function VI(){return AH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jm(e)?"-0":e}}function fB(t){return{integerValue:""+t}}function dB(t,e){return PF(e)?fB(e):LI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this._=void 0}}function SH(t,e,n){return t instanceof jf?function(i,o){const s={fields:{[GF]:{stringValue:$F},[HF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&G_(o)&&(o=j_(o)),o&&(s.fields[jF]=o),{mapValue:s}}(n,e):t instanceof Mu?mB(t,e):t instanceof Du?pB(t,e):function(i,o){const s=hB(i,o),u=HD(s)+HD(i.Ee);return IA(s)&&IA(i.Ee)?fB(u):LI(i.serializer,u)}(t,e)}function IH(t,e,n){return t instanceof Mu?mB(t,e):t instanceof Du?pB(t,e):n}function hB(t,e){return t instanceof Hf?function(r){return IA(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class jf extends K_{}class Mu extends K_{constructor(e){super(),this.elements=e}}function mB(t,e){const n=gB(e);for(const r of t.elements)n.some(i=>Ho(i,r))||n.push(r);return{arrayValue:{values:n}}}class Du extends K_{constructor(e){super(),this.elements=e}}function pB(t,e){let n=gB(e);for(const r of t.elements)n=n.filter(i=>!Ho(i,r));return{arrayValue:{values:n}}}class Hf extends K_{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function HD(t){return Ht(t.integerValue||t.doubleValue)}function gB(t){return np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.field=e,this.transform=n}}function CH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Mu&&i instanceof Mu||r instanceof Du&&i instanceof Du?Vf(r.elements,i.elements,Ho):r instanceof Hf&&i instanceof Hf?Ho(r.Ee,i.Ee):r instanceof jf&&i instanceof jf}(t.transform,e.transform)}class xH{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class W_{}function yB(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wd(t.key,Yt.none()):new bd(t.key,t.data,Yt.none());{const n=t.data,r=lr.empty();let i=new St(Wt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new $s(t.key,r,new zr(i.toArray()),Yt.none())}}function RH(t,e,n){t instanceof bd?function(i,o,s){const u=i.value.clone(),c=WD(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):t instanceof $s?function(i,o,s){if(!fv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const u=WD(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(vB(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Om(t,e,n,r){return t instanceof bd?function(o,s,u,c){if(!fv(o.precondition,s))return u;const f=o.value.clone(),h=YD(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof $s?function(o,s,u,c){if(!fv(o.precondition,s))return u;const f=YD(o.fieldTransforms,c,s),h=s.data;return h.setAll(vB(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,s,u){return fv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(t,e,n)}function PH(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=hB(r.transform,i||null);o!=null&&(n===null&&(n=lr.empty()),n.set(r.field,o))}return n||null}function KD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vf(r,i,(o,s)=>CH(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bd extends W_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $s extends W_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function vB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function WD(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,IH(s,u,n[i]))}return r}function YD(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,SH(o,s,e))}return r}class wd extends W_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UI extends W_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&RH(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Om(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Om(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cB();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let u=this.applyToLocalView(s,o.mutatedFields);u=n.has(i.key)?null:u;const c=yB(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&Vf(this.mutations,e.mutations,(n,r)=>KD(n,r))&&Vf(this.baseMutations,e.baseMutations,(n,r)=>KD(n,r))}}class BI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return bH}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new BI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,dt;function _B(t){switch(t){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function TB(t){if(t===void 0)return hn("GRPC error has no .code"),re.UNKNOWN;switch(t){case An.OK:return re.OK;case An.CANCELLED:return re.CANCELLED;case An.UNKNOWN:return re.UNKNOWN;case An.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case An.INTERNAL:return re.INTERNAL;case An.UNAVAILABLE:return re.UNAVAILABLE;case An.UNAUTHENTICATED:return re.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case An.NOT_FOUND:return re.NOT_FOUND;case An.ALREADY_EXISTS:return re.ALREADY_EXISTS;case An.PERMISSION_DENIED:return re.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case An.ABORTED:return re.ABORTED;case An.OUT_OF_RANGE:return re.OUT_OF_RANGE;case An.UNIMPLEMENTED:return re.UNIMPLEMENTED;case An.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:t})}}(dt=An||(An={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH=new qa([4294967295,4294967295],0);function JD(t){const e=wI().encode(t),n=new hF;return n.update(e),new Uint8Array(n.digest())}function QD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qa([n,r],0),new qa([i,o],0)]}class zI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tm(`Invalid padding: ${n}`);if(r<0)throw new Tm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Tm(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=qa.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(qa.fromNumber(r)));return i.compare(DH)===1&&(i=new qa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=JD(e),[r,i]=QD(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new zI(o,i,n);return r.forEach(u=>s.insert(u)),s}insert(e){if(this.fe===0)return;const n=JD(e),[r,i]=QD(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Tm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Up.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lp(De.min(),i,new Bt($e),$r(),Je())}}class Up{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Up(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class EB{constructor(e,n){this.targetId=e,this.De=n}}class bB{constructor(e,n,r=sn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class XD{constructor(){this.ve=0,this.Ce=ZD(),this.Fe=sn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Je(),n=Je(),r=Je();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:o})}}),new Up(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=ZD()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class NH{constructor(e){this.We=e,this.Ge=new Map,this.ze=$r(),this.je=Oy(),this.Je=Oy(),this.He=new Bt($e)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(Pv(o))if(r===0){const s=new _e(o.path);this.Xe(n,s,$t.newNoDocument(s,De.min()))}else xe(r===1,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const u=this._t(e),c=u?this.ut(u,e,s):1;if(c!==0){this.rt(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,u;try{s=ks(r).toUint8Array()}catch(c){if(c instanceof zF)return di("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new zI(s,i,o)}catch(c){return di(c instanceof Tm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const u=this.st(s);if(u){if(o.current&&Pv(u.target)){const c=new _e(u.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,$t.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=Je();this.Je.forEach((o,s)=>{let u=!0;s.forEachWhile(c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new Lp(e,n,this.He,this.ze,r);return this.ze=$r(),this.je=Oy(),this.Je=Oy(),this.He=new Bt($e),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new XD,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new St($e),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new St($e),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new XD),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Oy(){return new Bt(_e.comparator)}function ZD(){return new Bt(_e.comparator)}const kH={asc:"ASCENDING",desc:"DESCENDING"},OH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VH={and:"AND",or:"OR"};class LH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function MA(t,e){return t.useProto3Json||Mp(e)?e:{value:e}}function Kf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wB(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UH(t,e){return Kf(t,e.toTimestamp())}function mn(t){return xe(!!t,49232),De.fromTimestamp(function(n){const r=Ns(n);return new Tt(r.seconds,r.nanos)}(t))}function $I(t,e){return DA(t,e).canonicalString()}function DA(t,e){const n=function(i){return new it(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AB(t){const e=it.fromString(t);return xe(kB(e),10190,{key:e.toString()}),e}function ip(t,e){return $I(t.databaseId,e.path)}function Bo(t,e){const n=AB(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(CB(n))}function SB(t,e){return $I(t.databaseId,e)}function IB(t){const e=AB(t);return e.length===4?it.emptyPath():CB(e)}function NA(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CB(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function eN(t,e,n){return{name:ip(t,e),fields:n.value.mapValue.fields}}function xB(t,e,n){const r=Bo(t,e.name),i=mn(e.updateTime),o=e.createTime?mn(e.createTime):De.min(),s=new lr({mapValue:{fields:e.fields}}),u=$t.newFoundDocument(r,i,o,s);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function FH(t,e){return"found"in e?function(r,i){xe(!!i.found,43571),i.found.name,i.found.updateTime;const o=Bo(r,i.found.name),s=mn(i.found.updateTime),u=i.found.createTime?mn(i.found.createTime):De.min(),c=new lr({mapValue:{fields:i.found.fields}});return $t.newFoundDocument(o,s,u,c)}(t,e):"missing"in e?function(r,i){xe(!!i.missing,3894),xe(!!i.readTime,22933);const o=Bo(r,i.missing),s=mn(i.readTime);return $t.newNoDocument(o,s)}(t,e):we(7234,{result:e})}function BH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:we(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,h){return f.useProto3Json?(xe(h===void 0||typeof h=="string",58123),sn.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),sn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(f){const h=f.code===void 0?re.UNKNOWN:TB(f.code);return new fe(h,f.message||"")}(s);n=new bB(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bo(t,r.document.name),o=mn(r.document.updateTime),s=r.document.createTime?mn(r.document.createTime):De.min(),u=new lr({mapValue:{fields:r.document.fields}}),c=$t.newFoundDocument(i,o,s,u),f=r.targetIds||[],h=r.removedTargetIds||[];n=new dv(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bo(t,r.document),o=r.readTime?mn(r.readTime):De.min(),s=$t.newNoDocument(i,o),u=r.removedTargetIds||[];n=new dv([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bo(t,r.document),o=r.removedTargetIds||[];n=new dv([],o,i,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new MH(i,o),u=r.targetId;n=new EB(u,s)}}return n}function op(t,e){let n;if(e instanceof bd)n={update:eN(t,e.key,e.value)};else if(e instanceof wd)n={delete:ip(t,e.key)};else if(e instanceof $s)n={update:eN(t,e.key,e.data),updateMask:HH(e.fieldMask)};else{if(!(e instanceof UI))return we(16599,{Rt:e.type});n={verify:ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const u=s.transform;if(u instanceof jf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Mu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Du)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hf)return{fieldPath:s.field.canonicalString(),increment:u.Ee};throw we(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:UH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function kA(t,e){const n=e.currentDocument?function(o){return o.updateTime!==void 0?Yt.updateTime(mn(o.updateTime)):o.exists!==void 0?Yt.exists(o.exists):Yt.none()}(e.currentDocument):Yt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let c=null;if("setToServerValue"in u)xe(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),c=new jf;else if("appendMissingElements"in u){const h=u.appendMissingElements.values||[];c=new Mu(h)}else if("removeAllFromArray"in u){const h=u.removeAllFromArray.values||[];c=new Du(h)}else"increment"in u?c=new Hf(s,u.increment):we(16584,{proto:u});const f=Wt.fromServerFormat(u.fieldPath);return new Vp(f,c)}(t,i)):[];if(e.update){e.update.name;const i=Bo(t,e.update.name),o=new lr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=function(c){const f=c.fieldPaths||[];return new zr(f.map(h=>Wt.fromServerFormat(h)))}(e.updateMask);return new $s(i,o,s,n,r)}return new bd(i,o,n,r)}if(e.delete){const i=Bo(t,e.delete);return new wd(i,n)}if(e.verify){const i=Bo(t,e.verify);return new UI(i,n)}return we(1463,{proto:e})}function qH(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?mn(i.updateTime):mn(o);return s.isEqual(De.min())&&(s=mn(o)),new xH(s,i.transformResults||[])}(n,e))):[]}function RB(t,e){return{documents:[SB(t,e.path)]}}function PB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SB(t,i);const o=function(f){if(f.length!==0)return NB(At.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(f){if(f.length!==0)return f.map(h=>function(_){return{field:gf(_.field),direction:$H(_.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const u=MA(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:i}}function MB(t){let e=IB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(y){const _=DB(y);return _ instanceof At&&kI(_)?_.getFilters():[_]}(n.where));let s=[];n.orderBy&&(s=function(y){return y.map(_=>function(w){return new rp(yf(w.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(y){let _;return _=typeof y=="object"?y.value:y,Mp(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(y){const _=!!y.before,E=y.values||[];return new nl(E,_)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const _=!y.before,E=y.values||[];return new nl(E,_)}(n.endAt)),iB(e,i,s,o,u,"F",c,f)}function zH(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DB(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yf(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yf(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yf(n.unaryFilter.field);return ot.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=yf(n.unaryFilter.field);return ot.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return ot.create(yf(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return At.create(n.compositeFilter.filters.map(r=>DB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function $H(t){return kH[t]}function GH(t){return OH[t]}function jH(t){return VH[t]}function gf(t){return{fieldPath:t.canonicalString()}}function yf(t){return Wt.fromServerFormat(t.fieldPath)}function NB(t){return t instanceof ot?function(n){if(n.op==="=="){if(UD(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NAN"}};if(LD(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UD(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NOT_NAN"}};if(LD(n.value))return{unaryFilter:{field:gf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gf(n.field),op:GH(n.op),value:n.value}}}(t):t instanceof At?function(n){const r=n.getFilters().map(i=>NB(i));return r.length===1?r[0]:{compositeFilter:{op:jH(n.op),filters:r}}}(t):we(54877,{filter:t})}function HH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kB(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r,i,o=De.min(),s=De.min(),u=sn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e){this.gt=e}}function KH(t,e){let n;if(e.document)n=xB(t.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),i=ku(e.noDocument.readTime);n=$t.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const r=_e.fromSegments(e.unknownDocument.path),i=ku(e.unknownDocument.version);n=$t.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new Tt(i[0],i[1]);return De.fromTimestamp(o)}(e.readTime)),n}function tN(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Nv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ip(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Kf(o,s.version.toTimestamp()),createTime:Kf(o,s.createTime.toTimestamp())}}(t.gt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Nu(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Nu(e.version)}}return r}function Nv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Nu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ku(t){const e=new Tt(t.seconds,t.nanoseconds);return De.fromTimestamp(e)}function uu(t,e){const n=(e.baseMutations||[]).map(o=>kA(t.gt,o));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];s.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>kA(t.gt,o)),i=Tt.fromMillis(e.localWriteTimeMs);return new FI(e.batchId,i,n,r)}function Em(t){const e=ku(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ku(t.lastLimboFreeSnapshotVersion):De.min();let r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){const s=o.documents.length;return xe(s===1,1966,{count:s}),Nr(Ed(IB(o.documents[0])))}(t.query):function(o){return Nr(MB(o))}(t.query),new Ss(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,sn.fromBase64String(t.resumeToken))}function VB(t,e){const n=Nu(e.snapshotVersion),r=Nu(e.lastLimboFreeSnapshotVersion);let i;i=Pv(e.target)?RB(t.gt,e.target):PB(t.gt,e.target).Vt;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pu(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function GI(t){const e=MB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dv(e,e.limit,"L"):e}function pb(t,e){return new qI(e.largestBatchId,kA(t.gt,e.overlayMutation))}function nN(t,e){const n=e.path.lastSegment();return[t,br(e.path.popLast()),n]}function rN(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Nu(r.readTime),documentKey:br(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{getBundleMetadata(e,n){return iN(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:ku(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return iN(e).put(function(i){return{bundleId:i.id,createTime:Nu(mn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return oN(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:GI(o.bundledQuery),readTime:ku(o.readTime)}}(r)})}saveNamedQuery(e,n){return oN(e).put(function(i){return{name:i.name,readTime:Nu(mn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function iN(t){return Fn(t,q_)}function oN(t){return Fn(t,z_)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.serializer=e,this.userId=n}static yt(e,n){const r=n.uid||"";return new Y_(e,r)}getOverlay(e,n){return Zh(e).get(nN(this.userId,n)).next(r=>r?pb(this.serializer,r):null)}getOverlays(e,n){const r=ko();return Q.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const u=new qI(n,s);i.push(this.wt(e,u))}),Q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(br(s.getCollectionPath())));const o=[];return i.forEach(s=>{const u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Zh(e).Y(bA,u))}),Q.waitFor(o)}getOverlaysForCollection(e,n,r){const i=ko(),o=br(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Zh(e).j(bA,s).next(u=>{for(const c of u){const f=pb(this.serializer,c);i.set(f.getKey(),f)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=ko();let s;const u=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Zh(e).X({index:VF,range:u},(c,f,h)=>{const y=pb(this.serializer,f);o.size()<i||y.largestBatchId===s?(o.set(y.getKey(),y),s=y.largestBatchId):h.done()}).next(()=>o)}wt(e,n){return Zh(e).put(function(i,o,s){const[u,c,f]=nN(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:op(i.gt,s.mutation)}}(this.serializer,this.userId,n))}}function Zh(t){return Fn(t,$_)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{St(e){return Fn(e,PI)}getSessionToken(e){return this.St(e).get("sessionToken").next(n=>{const r=n?.value;return r?sn.fromUint8Array(r):sn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ht(e.integerValue));else if("doubleValue"in e){const r=Ht(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Jm(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Ns(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(ks(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?WF(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):H_(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):we(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const o=e.fields||{};this.Ct(n,53);const s=zf,u=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ht(u)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),_e.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}cu.Ut=new cu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=255;function JH(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function sN(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=JH(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}class QH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Wt(r.value),r=n.next();this.Gt()}zt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.jt(r.value),r=n.next();this.Jt()}Ht(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const i=n.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const i=n.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){const n=this.Xt(e),r=sN(n);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}tn(e){const n=this.Xt(e),r=sN(n);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}nn(){this.rn(rf),this.rn(255)}sn(){this._n(rf),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Wt(e){const n=255&e;n===0?(this.rn(0),this.rn(255)):n===rf?(this.rn(rf),this.rn(0)):this.rn(n)}jt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===rf?(this._n(rf),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class XH{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class ZH{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class em{constructor(){this.un=new QH,this.cn=new XH(this.un),this.ln=new ZH(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r,i){this.Pn=e,this.Tn=n,this.In=r,this.dn=i}En(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new fu(this.Pn,this.Tn,this.In,r)}An(e,n,r){return{indexId:this.Pn,uid:e,arrayValue:hv(this.In),directionalValue:hv(this.dn),orderedDocumentKey:hv(n),documentKey:r.path.toArray()}}Rn(e,n,r){const i=this.An(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ia(t,e){let n=t.Pn-e.Pn;return n!==0?n:(n=aN(t.In,e.In),n!==0?n:(n=aN(t.dn,e.dn),n!==0?n:_e.comparator(t.Tn,e.Tn)))}function aN(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function hv(t){return XU()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function lN(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class uN{constructor(e){this.Vn=new St((n,r)=>Wt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(xe(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const n=_A(e);if(n!==void 0&&!this.yn(n))return!1;const r=ru(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){const u=this.Vn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const c=r[o];if(!this.wn(u,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){const u=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],u))return!1}return!0}bn(){if(this.gn)return null;let e=new St(Wt.comparator);const n=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ov(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ov(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ov(r.field,r.dir==="asc"?0:1)));return new Iv(Iv.UNKNOWN_ID,this.collectionId,n,Ym.empty())}yn(e){for(const n of this.fn)if(this.wn(n,e))return!0;return!1}wn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(t){var e,n;if(xe(t instanceof ot||t instanceof At,20012),t instanceof ot){if(t instanceof rB){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ot.create(t.field,"==",o)))||[];return At.create(i,"or")}return t}const r=t.filters.map(i=>LB(i));return At.create(r,t.op)}function e7(t){if(t.getFilters().length===0)return[];const e=LA(LB(t));return xe(UB(e),7391),OA(e)||VA(e)?[e]:e.getFilters()}function OA(t){return t instanceof ot}function VA(t){return t instanceof At&&kI(t)}function UB(t){return OA(t)||VA(t)||function(n){if(n instanceof At&&CA(n)){for(const r of n.getFilters())if(!OA(r)&&!VA(r))return!1;return!0}return!1}(t)}function LA(t){if(xe(t instanceof ot||t instanceof At,34018),t instanceof ot)return t;if(t.filters.length===1)return LA(t.filters[0]);const e=t.filters.map(r=>LA(r));let n=At.create(e,t.op);return n=kv(n),UB(n)?n:(xe(n instanceof At,64498),xe(Gf(n),40251),xe(n.filters.length>1,57927),n.filters.reduce((r,i)=>jI(r,i)))}function jI(t,e){let n;return xe(t instanceof ot||t instanceof At,38388),xe(e instanceof ot||e instanceof At,25473),n=t instanceof ot?e instanceof ot?function(i,o){return At.create([i,o],"and")}(t,e):cN(t,e):e instanceof ot?cN(e,t):function(i,o){if(xe(i.filters.length>0&&o.filters.length>0,48005),Gf(i)&&Gf(o))return eB(i,o.getFilters());const s=CA(i)?i:o,u=CA(i)?o:i,c=s.filters.map(f=>jI(f,u));return At.create(c,"or")}(t,e),kv(n)}function cN(t,e){if(Gf(e))return eB(e,t.getFilters());{const n=e.filters.map(r=>jI(t,r));return At.create(n,"or")}}function kv(t){if(xe(t instanceof ot||t instanceof At,11850),t instanceof ot)return t;const e=t.getFilters();if(e.length===1)return kv(e[0]);if(XF(t))return t;const n=e.map(i=>kv(i)),r=[];return n.forEach(i=>{i instanceof ot?r.push(i):i instanceof At&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:At.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.Dn=new HI}addToCollectionParentIndex(e,n){return this.Dn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(hi.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class HI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new St(it.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="IndexedDbIndexManager",Vy=new Uint8Array(0);class n7{constructor(e,n){this.databaseId=n,this.vn=new HI,this.Cn=new zs(r=>Pu(r),(r,i)=>Np(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const o={collectionId:r,parent:br(i)};return dN(e).put(o)}return Q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[EF(n),""],!1,!0);return dN(e).j(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(No(s.parent))}return r})}addFieldIndex(e,n){const r=tm(e),i=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=sf(e);return o.next(u=>{s.put(rN(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=tm(e),i=sf(e),o=of(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=tm(e),r=of(e),i=sf(e);return n.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,n){return Q.forEach(this.Fn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new uN(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=of(e);let i=!0;const o=new Map;return Q.forEach(this.Fn(n),s=>this.Mn(e,s).next(u=>{i&&(i=!!u),o.set(s,u)})).next(()=>{if(i){let s=Je();const u=[];return Q.forEach(o,(c,f)=>{he(fN,`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(c)} to execute ${Pu(n)}`);const h=function(P,F){const U=_A(F);if(U===void 0)return null;for(const $ of Mv(P,U.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(f,c),y=function(P,F){const U=new Map;for(const $ of ru(F))for(const D of Mv(P,$.fieldPath))switch(D.op){case"==":case"in":U.set($.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return U.set($.fieldPath.canonicalString(),D.value),Array.from(U.values())}return null}(f,c),_=function(P,F){const U=[];let $=!0;for(const D of ru(F)){const N=D.kind===0?$D(P,D.fieldPath,P.startAt):GD(P,D.fieldPath,P.startAt);U.push(N.value),$&&($=N.inclusive)}return new nl(U,$)}(f,c),E=function(P,F){const U=[];let $=!0;for(const D of ru(F)){const N=D.kind===0?GD(P,D.fieldPath,P.endAt):$D(P,D.fieldPath,P.endAt);U.push(N.value),$&&($=N.inclusive)}return new nl(U,$)}(f,c),w=this.xn(c,f,_),A=this.xn(c,f,E),I=this.On(c,f,y),R=this.Nn(c.indexId,h,w,_.inclusive,A,E.inclusive,I);return Q.forEach(R,M=>r.H(M,n.limit).next(P=>{P.forEach(F=>{const U=_e.fromSegments(F.documentKey);s.has(U)||(s=s.add(U),u.push(U))})}))}).next(()=>u)}return Q.resolve(null)})}Fn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=e7(At.create(e.filters,"and")).map(r=>RA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,n),n)}Nn(e,n,r,i,o,s,u){const c=(n!=null?n.length:1)*Math.max(r.length,o.length),f=c/(n!=null?n.length:1),h=[];for(let y=0;y<c;++y){const _=n?this.Bn(n[y/f]):Vy,E=this.Ln(e,_,r[y%f],i),w=this.kn(e,_,o[y%f],s),A=u.map(I=>this.Ln(e,_,I,!0));h.push(...this.createRange(E,w,A))}return h}Ln(e,n,r,i){const o=new fu(e,_e.empty(),n,r);return i?o:o.En()}kn(e,n,r,i){const o=new fu(e,_e.empty(),n,r);return i?o.En():o}Mn(e,n){const r=new uN(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const u of o)r.pn(u)&&(!s||u.fields.length>s.fields.length)&&(s=u);return s})}getIndexType(e,n){let r=2;const i=this.Fn(n);return Q.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let f=new St(Wt.comparator),h=!1;for(const y of c.filters)for(const _ of y.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?h=!0:f=f.add(_.field));for(const y of c.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}qn(e,n){const r=new em;for(const i of ru(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.hn(i.kind);cu.Ut.bt(o,s)}return r.an()}Bn(e){const n=new em;return cu.Ut.bt(e,n.hn(0)),n.an()}Qn(e,n){const r=new em;return cu.Ut.bt(Ru(this.databaseId,n),r.hn(function(o){const s=ru(o);return s.length===0?0:s[s.length-1].kind}(e))),r.an()}On(e,n,r){if(r===null)return[];let i=[];i.push(new em);let o=0;for(const s of ru(e)){const u=r[o++];for(const c of i)if(this.$n(n,s.fieldPath)&&np(u))i=this.Un(i,s,u);else{const f=c.hn(s.kind);cu.Ut.bt(u,f)}}return this.Kn(i)}xn(e,n,r){return this.On(e,n,r.position)}Kn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].an();return n}Un(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const u of i){const c=new em;c.seed(u.an()),cu.Ut.bt(s,c.hn(n.kind)),o.push(c)}return o}$n(e,n){return!!e.filters.find(r=>r instanceof ot&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=tm(e),i=sf(e);return(n?r.j(EA,IDBKeyRange.bound(n,n)):r.j()).next(o=>{const s=[];return Q.forEach(o,u=>i.get([u.indexId,this.uid]).next(c=>{s.push(function(h,y){const _=y?new Ym(y.sequenceNumber,new hi(ku(y.readTime),new _e(No(y.documentKey)),y.largestBatchId)):Ym.empty(),E=h.fields.map(([w,A])=>new ov(Wt.fromServerFormat(w),A));return new Iv(h.indexId,h.collectionGroup,E,_)}(u,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:$e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=tm(e),o=sf(e);return this.Wn(e).next(s=>i.j(EA,IDBKeyRange.bound(n,n)).next(u=>Q.forEach(u,c=>o.put(rN(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return Q.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?Q.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(u=>(r.set(i.collectionGroup,u),Q.forEach(u,c=>this.Gn(e,i,c).next(f=>{const h=this.zn(o,c);return f.isEqual(h)?Q.resolve():this.jn(e,o,c,f,h)}))))})}Jn(e,n,r,i){return of(e).put(i.An(this.uid,this.Qn(r,n.key),n.key))}Hn(e,n,r,i){return of(e).delete(i.Rn(this.uid,this.Qn(r,n.key),n.key))}Gn(e,n,r){const i=of(e);let o=new St(Ia);return i.X({index:OF,range:IDBKeyRange.only([r.indexId,this.uid,hv(this.Qn(r,n))])},(s,u)=>{o=o.add(new fu(r.indexId,n,lN(u.arrayValue),lN(u.directionalValue)))}).next(()=>o)}zn(e,n){let r=new St(Ia);const i=this.qn(n,e);if(i==null)return r;const o=_A(n);if(o!=null){const s=e.data.field(o.fieldPath);if(np(s))for(const u of s.arrayValue.values||[])r=r.add(new fu(n.indexId,e.key,this.Bn(u),i))}else r=r.add(new fu(n.indexId,e.key,Vy,i));return r}jn(e,n,r,i,o){he(fN,"Updating index entries for document '%s'",n.key);const s=[];return function(c,f,h,y,_){const E=c.getIterator(),w=f.getIterator();let A=nf(E),I=nf(w);for(;A||I;){let R=!1,M=!1;if(A&&I){const P=h(A,I);P<0?M=!0:P>0&&(R=!0)}else A!=null?M=!0:R=!0;R?(y(I),I=nf(w)):M?(_(A),A=nf(E)):(A=nf(E),I=nf(w))}}(i,o,Ia,u=>{s.push(this.Jn(e,n,r,u))},u=>{s.push(this.Hn(e,n,r,u))}),Q.waitFor(s)}Wn(e){let n=1;return sf(e).X({index:kF,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,u)=>Ia(s,u)).filter((s,u,c)=>!u||Ia(s,c[u-1])!==0);const i=[];i.push(e);for(const s of r){const u=Ia(s,e),c=Ia(s,n);if(u===0)i[0]=e.En();else if(u>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];const u=i[s].Rn(this.uid,Vy,_e.empty()),c=i[s+1].Rn(this.uid,Vy,_e.empty());o.push(IDBKeyRange.bound(u,c))}return o}Yn(e,n){return Ia(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(hN)}getMinOffset(e,n){return Q.mapArray(this.Fn(n),r=>this.Mn(e,r).next(i=>i||we(44426))).next(hN)}}function dN(t){return Fn(t,Zm)}function of(t){return Fn(t,Dm)}function tm(t){return Fn(t,RI)}function sf(t){return Fn(t,Mm)}function hN(t){xe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;II(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FB=41943040;class vr{static withCacheSize(e){return new vr(e,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t,e,n){const r=t.store(Zi),i=t.store(Uf),o=[],s=IDBKeyRange.only(n.batchId);let u=0;const c=r.X({range:s},(h,y,_)=>(u++,_.delete()));o.push(c.next(()=>{xe(u===1,47070,{batchId:n.batchId})}));const f=[];for(const h of n.mutations){const y=MF(e,h.key.path,n.batchId);o.push(i.delete(y)),f.push(h.key)}return Q.waitFor(o).next(()=>f)}function Ov(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw we(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr.DEFAULT_COLLECTION_PERCENTILE=10,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vr.DEFAULT=new vr(FB,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vr.DISABLED=new vr(-1,0,0);class J_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,n,r,i){xe(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new J_(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).X({index:hu,range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=vf(e),s=Ca(e);return s.add({}).next(u=>{xe(typeof u=="number",49019);const c=new FI(u,n,r,i),f=function(E,w,A){const I=A.baseMutations.map(M=>op(E.gt,M)),R=A.mutations.map(M=>op(E.gt,M));return{userId:w,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:I,mutations:R}}(this.serializer,this.userId,c),h=[];let y=new St((_,E)=>$e(_.canonicalString(),E.canonicalString()));for(const _ of i){const E=MF(this.userId,_.key.path,u);y=y.add(_.key.path.popLast()),h.push(s.put(f)),h.push(o.put(E,V8))}return y.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Zn[u]=c.keys()}),Q.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return Ca(e).get(n).next(r=>r?(xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),uu(this.serializer,r)):null)}Xn(e,n){return this.Zn[n]?Q.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ca(e).X({index:hu,range:i},(s,u,c)=>{u.userId===this.userId&&(xe(u.batchId>=r,47524,{er:r}),o=uu(this.serializer,u)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=za;return Ca(e).X({index:hu,range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,za],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).j(hu,n).next(r=>r.map(i=>uu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=sv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return vf(e).X({range:i},(s,u,c)=>{const[f,h,y]=s,_=No(h);if(f===this.userId&&n.path.isEqual(_))return Ca(e).get(y).next(E=>{if(!E)throw we(61480,{tr:s,batchId:y});xe(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:y}),o.push(uu(this.serializer,E))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St($e);const i=[];return n.forEach(o=>{const s=sv(this.userId,o.path),u=IDBKeyRange.lowerBound(s),c=vf(e).X({range:u},(f,h,y)=>{const[_,E,w]=f,A=No(E);_===this.userId&&o.path.isEqual(A)?r=r.add(w):y.done()});i.push(c)}),Q.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=sv(this.userId,r),s=IDBKeyRange.lowerBound(o);let u=new St($e);return vf(e).X({range:s},(c,f,h)=>{const[y,_,E]=c,w=No(_);y===this.userId&&r.isPrefixOf(w)?w.length===i&&(u=u.add(E)):h.done()}).next(()=>this.nr(e,u))}nr(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Ca(e).get(o).next(s=>{if(s===null)throw we(35274,{batchId:o});xe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(uu(this.serializer,s))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return BB(e.ce,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.rr(n.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Q.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return vf(e).X({range:r},(o,s,u)=>{if(o[0]===this.userId){const c=No(o[1]);i.push(c)}else u.done()}).next(()=>{xe(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,n){return qB(e,this.userId,n)}sr(e){return zB(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:za,lastStreamToken:""})}}function qB(t,e,n){const r=sv(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return vf(t).X({range:o,Z:!0},(u,c,f)=>{const[h,y,_]=u;h===e&&y===i&&(s=!0),f.done()}).next(()=>s)}function Ca(t){return Fn(t,Zi)}function vf(t){return Fn(t,Uf)}function zB(t){return Fn(t,Qm)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ou(0)}static ur(){return new Ou(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.cr(e).next(n=>{const r=new Ou(n.highestTargetId);return n.highestTargetId=r.next(),this.lr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(n=>De.fromTimestamp(new Tt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.lr(e,i)))}addTargetData(e,n){return this.hr(e,n).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(n,r),this.lr(e,r))))}updateTargetData(e,n){return this.hr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>af(e).delete(n.targetId)).next(()=>this.cr(e)).next(r=>(xe(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return af(e).X((s,u)=>{const c=Em(u);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>Q.waitFor(o)).next(()=>i)}forEachTarget(e,n){return af(e).X((r,i)=>{const o=Em(i);n(o)})}cr(e){return pN(e).get(Rv).next(n=>(xe(n!==null,2888),n))}lr(e,n){return pN(e).put(Rv,n)}hr(e,n){return af(e).put(VB(this.serializer,n))}Pr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Pu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return af(e).X({range:i,index:NF},(s,u,c)=>{const f=Em(u);Np(n,f.target)&&(o=f,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=Oa(e);return n.forEach(s=>{const u=br(s.path);i.push(o.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,s))}),Q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Oa(e);return Q.forEach(n,o=>{const s=br(o.path);return Q.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=Oa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Oa(e);let o=Je();return i.X({range:r,Z:!0},(s,u,c)=>{const f=No(s[1]),h=new _e(f);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=br(n.path),i=IDBKeyRange.bound([r],[EF(r)],!1,!0);let o=0;return Oa(e).X({index:xI,Z:!0,range:i},([s,u],c,f)=>{s!==0&&(o++,f.done())}).next(()=>o>0)}Et(e,n){return af(e).get(n).next(r=>r?Em(r):null)}}function af(t){return Fn(t,Ff)}function pN(t){return Fn(t,Eu)}function Oa(t){return Fn(t,Bf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="LruGarbageCollector",i7=1048576;function yN([t,e],[n,r]){const i=$e(t,n);return i===0?$e(e,r):i}class o7{constructor(e){this.Tr=e,this.buffer=new St(yN),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $B{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(gN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cl(n)?he(gN,"Ignoring IndexedDB error during garbage collection: ",n):await ul(n)}await this.Rr(3e5)})}}class s7{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(qr.ue);const r=new o7(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(mN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,u,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,s=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),mf()<=rt.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(u-s)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${y} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function GB(t,e){return new s7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e,n){this.db=e,this.garbageCollector=GB(this,n)}mr(e){const n=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}gr(e,n){return this.wr(e,(r,i)=>n(i))}addReference(e,n,r){return Ly(e,r)}removeReference(e,n,r){return Ly(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ly(e,n)}Sr(e,n){return function(i,o){let s=!1;return zB(i).ee(u=>qB(i,u,o).next(c=>(c&&(s=!0),Q.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.wr(e,(s,u)=>{if(u<=n){const c=this.Sr(e,s).next(f=>{if(!f)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,De.min()),Oa(e).delete(function(y){return[0,br(y.path)]}(s))))});i.push(c)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ly(e,n)}wr(e,n){const r=Oa(e);let i,o=qr.ue;return r.X({index:xI},([s,u],{path:c,sequenceNumber:f})=>{s===0?(o!==qr.ue&&n(new _e(No(i)),o),o=f,i=c):o=qr.ue}).next(()=>{o!==qr.ue&&n(new _e(No(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ly(t,e){return Oa(t).put(function(r,i){return{targetId:0,path:br(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return eu(e).put(r)}removeEntry(e,n,r){return eu(e).delete(function(o,s){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Nv(s),u[u.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.br(e,r)))}getEntry(e,n){let r=$t.newInvalidDocument(n);return eu(e).X({index:av,range:IDBKeyRange.only(nm(n))},(i,o)=>{r=this.Dr(n,o)}).next(()=>r)}vr(e,n){let r={size:0,document:$t.newInvalidDocument(n)};return eu(e).X({index:av,range:IDBKeyRange.only(nm(n))},(i,o)=>{r={document:this.Dr(n,o),size:Ov(o)}}).next(()=>r)}getEntries(e,n){let r=$r();return this.Cr(e,n,(i,o)=>{const s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,n){let r=$r(),i=new Bt(_e.comparator);return this.Cr(e,n,(o,s)=>{const u=this.Dr(o,s);r=r.insert(o,u),i=i.insert(o,Ov(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,n,r){if(n.isEmpty())return Q.resolve();let i=new St(TN);n.forEach(c=>i=i.add(c));const o=IDBKeyRange.bound(nm(i.first()),nm(i.last())),s=i.getIterator();let u=s.getNext();return eu(e).X({index:av,range:o},(c,f,h)=>{const y=_e.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&TN(u,y)<0;)r(u,null),u=s.getNext();u&&u.isEqual(y)&&(r(u,f),u=s.hasNext()?s.getNext():null),u?h.G(nm(u)):h.done()}).next(()=>{for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,u=[s.popLast().toArray(),s.lastSegment(),Nv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eu(e).j(IDBKeyRange.bound(u,c,!0)).next(f=>{o?.incrementDocumentReadCount(f.length);let h=$r();for(const y of f){const _=this.Dr(_e.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);_.isFoundDocument()&&(Op(n,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=$r();const s=_N(n,r),u=_N(n,hi.max());return eu(e).X({index:DF,range:IDBKeyRange.bound(s,u,!0)},(c,f,h)=>{const y=this.Dr(_e.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new u7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return vN(e).get(TA).next(n=>(xe(!!n,20021),n))}br(e,n){return vN(e).put(TA,n)}Dr(e,n){if(n){const r=KH(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(De.min())))return r}return $t.newInvalidDocument(e)}}function HB(t){return new l7(t)}class u7 extends jB{constructor(e,n){super(),this.Or=e,this.trackRemovals=n,this.Nr=new zs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new St((o,s)=>$e(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const u=this.Nr.get(o);if(n.push(this.Or.removeEntry(e,o,u.readTime)),s.isValidDocument()){const c=tN(this.Or.serializer,s);i=i.add(o.path.popLast());const f=Ov(c);r+=f-u.size,n.push(this.Or.addEntry(e,o,c))}else if(r-=u.size,this.trackRemovals){const c=tN(this.Or.serializer,s.convertToNoDocument(De.min()));n.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.Or.updateMetadata(e,r)),Q.waitFor(n)}getFromCache(e,n){return this.Or.vr(e,n).next(r=>(this.Nr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Or.Fr(e,n).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function vN(t){return Fn(t,Xm)}function eu(t){return Fn(t,xv)}function nm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _N(t,e){const n=e.documentKey.path.toArray();return[t,Nv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function TN(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=$e(n[o],r[o]),i)return i;return i=$e(n.length,r.length),i||(i=$e(n[n.length-2],r[r.length-2]),i||$e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Om(r.mutation,i,zr.empty(),Tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const i=ko();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=_m();return o.forEach((u,c)=>{s=s.insert(u,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=ko();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,u)=>{n.set(s,u)})})}computeViews(e,n,r,i){let o=$r();const s=km(),u=function(){return km()}();return n.forEach((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof $s)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),Om(h.mutation,f,h.mutation.getFieldMask(),Tt.now())):s.set(f.key,zr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((f,h)=>s.set(f,h)),n.forEach((f,h)=>{var y;return u.set(f,new c7(h,(y=s.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=km();let i=new Bt((s,u)=>s-u),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const u of s)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||zr.empty();h=u.applyToLocalView(f,h),r.set(c,h);const y=(i.get(u.batchId)||Je()).add(c);i=i.insert(u.batchId,y)})}).next(()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,h=c.value,y=cB();h.forEach(_=>{if(!o.has(_)){const E=yB(n.get(_),r.get(_));E!==null&&y.set(_,E),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Q.resolve(ko());let u=Lf,c=o;return s.next(f=>Q.forEach(f,(h,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,c,f,Je())).next(h=>({batchId:u,changes:uB(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let i=_m();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=_m();return this.indexManager.getCollectionParents(e,o).next(u=>Q.forEach(u,c=>{const f=function(y,_){return new qs(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((y,_)=>{s=s.insert(y,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,$t.newInvalidDocument(h)))});let u=_m();return s.forEach((c,f)=>{const h=o.get(c);h!==void 0&&Om(h.mutation,f,zr.empty(),Tt.now()),Op(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:mn(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:GI(i.bundledQuery),readTime:mn(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(){this.overlays=new Bt(_e.comparator),this.kr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ko();return Q.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=ko(),o=n.length+1,s=new _e(n.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Bt((f,h)=>f-h);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=ko(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const u=ko(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,h)=>u.set(f,h)),!(u.size()>=i)););return Q.resolve(u)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new qI(n,r));let o=this.kr.get(n);o===void 0&&(o=Je(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.qr=new St(Kn.Qr),this.$r=new St(Kn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Kn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new _e(new it([])),r=new Kn(n,e),i=new Kn(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new _e(new it([])),r=new Kn(n,e),i=new Kn(n,e+1);let o=Je();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Kn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return _e.comparator(e.key,n.key)||$e(e.Hr,n.Hr)}static Ur(e,n){return $e(e.Hr,n.Hr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new St(Kn.Qr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new FI(o,n,r,i);this.mutationQueue.push(s);for(const u of i)this.Yr=this.Yr.add(new Kn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,n){return Q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?za:this.er-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),i=new Kn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const u=this.Zr(s.Hr);o.push(u)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St($e);return n.forEach(i=>{const o=new Kn(i,0),s=new Kn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],u=>{r=r.add(u.Hr)})}),Q.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const s=new Kn(new _e(o),0);let u=new St($e);return this.Yr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.Hr)),!0)},s),Q.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Q.forEach(n.mutations,i=>{const o=new Kn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Kn(n,0),i=this.Yr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e){this.ni=e,this.docs=function(){return new Bt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():$t.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=$r();const s=n.path,u=new _e(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||II(IF(h),r)<=0||(i.has(h.key)||Op(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,r,i){we(9500)}ri(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new g7(this)}getSize(e){return Q.resolve(this.size)}}class g7 extends jB{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e){this.persistence=e,this.ii=new zs(n=>Pu(n),Np),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new KI,this.targetCount=0,this._i=Ou.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Q.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ou(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.hr(n),Q.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Q.waitFor(o).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.ai={},this.overlays={},this.ui=new qr(0),this.ci=!1,this.ci=!0,this.li=new h7,this.referenceDelegate=e(this),this.hi=new y7(this),this.indexManager=new t7,this.remoteDocumentCache=function(i){return new p7(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new OB(n),this.Ti=new f7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new m7(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new v7(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return Q.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class v7 extends xF{constructor(e){super(),this.currentSequenceNumber=e}}class Q_{constructor(e){this.persistence=e,this.Ai=new KI,this.Ri=null}static Vi(e){return new Q_(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.mi,r=>{const i=_e.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,De.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Q.or([()=>Q.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Vv{constructor(e,n){this.persistence=e,this.gi=new zs(r=>br(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=GB(this,n)}static Vi(e,n){return new Vv(e,n)}Ii(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Q.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(u=>{u||(r++,o.removeEntry(s,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Q.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uv(e.data.value)),n}Sr(e,n,r){return Q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e){this.serializer=e}q(e,n,r,i){const o=new B_("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore(Dp)}(e),function(c){c.createObjectStore(Qm,{keyPath:O8}),c.createObjectStore(Zi,{keyPath:MD,autoIncrement:!0}).createIndex(hu,DD,{unique:!0}),c.createObjectStore(Uf)}(e),EN(e),function(c){c.createObjectStore(iu)}(e));let s=Q.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(Bf),c.deleteObjectStore(Ff),c.deleteObjectStore(Eu)}(e),EN(e)),s=s.next(()=>function(c){const f=c.store(Eu),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:De.min().toTimestamp(),targetCount:0};return f.put(Rv,h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,f){return f.store(Zi).j().next(y=>{c.deleteObjectStore(Zi),c.createObjectStore(Zi,{keyPath:MD,autoIncrement:!0}).createIndex(hu,DD,{unique:!0});const _=f.store(Zi),E=y.map(w=>_.put(w));return Q.waitFor(E)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(qf,{keyPath:G8})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(Xm)}(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(q_,{keyPath:j8})})(e),function(c){c.createObjectStore(z_,{keyPath:H8})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){const f=c.createObjectStore($_,{keyPath:Z8});f.createIndex(bA,eH,{unique:!1}),f.createIndex(VF,tH,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){const f=c.createObjectStore(xv,{keyPath:L8});f.createIndex(av,U8),f.createIndex(DF,F8)}(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(iu))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore(RI,{keyPath:K8,autoIncrement:!0}).createIndex(EA,W8,{unique:!1}),c.createObjectStore(Mm,{keyPath:Y8}).createIndex(kF,J8,{unique:!1}),c.createObjectStore(Dm,{keyPath:Q8}).createIndex(OF,X8,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore(Mm).clear()}).next(()=>{n.objectStore(Dm).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(PI,{keyPath:nH})})(e)})),r<18&&i>=18&&XU()&&(s=s.next(()=>{n.objectStore(Mm).clear()}).next(()=>{n.objectStore(Dm).clear()})),s}yi(e){let n=0;return e.store(iu).X((r,i)=>{n+=Ov(i)}).next(()=>{const r={byteSize:n};return e.store(Xm).put(TA,r)})}pi(e){const n=e.store(Qm),r=e.store(Zi);return n.j().next(i=>Q.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,za],[o.userId,o.lastAcknowledgedBatchId]);return r.j(hu,s).next(u=>Q.forEach(u,c=>{xe(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const f=uu(this.serializer,c);return BB(e,o.userId,f).next(()=>{})}))}))}wi(e){const n=e.store(Bf),r=e.store(iu);return e.store(Eu).get(Rv).next(i=>{const o=[];return r.X((s,u)=>{const c=new it(s),f=function(y){return[0,br(y)]}(c);o.push(n.get(f).next(h=>h?Q.resolve():(y=>n.put({targetId:0,path:br(y),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>Q.waitFor(o))})}Si(e,n){e.createObjectStore(Zm,{keyPath:$8});const r=n.store(Zm),i=new HI,o=s=>{if(i.add(s)){const u=s.lastSegment(),c=s.popLast();return r.put({collectionId:u,parent:br(c)})}};return n.store(iu).X({Z:!0},(s,u)=>{const c=new it(s);return o(c.popLast())}).next(()=>n.store(Uf).X({Z:!0},([s,u,c],f)=>{const h=No(u);return o(h.popLast())}))}bi(e){const n=e.store(Ff);return n.X((r,i)=>{const o=Em(i),s=VB(this.serializer,o);return n.put(s)})}Di(e,n){const r=n.store(iu),i=[];return r.X((o,s)=>{const u=n.store(xv),c=function(y){return y.document?new _e(it.fromString(y.document.name).popFirst(5)):y.noDocument?_e.fromSegments(y.noDocument.path):y.unknownDocument?_e.fromSegments(y.unknownDocument.path):we(36783)}(s).path.toArray(),f={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(u.put(f))}).next(()=>Q.waitFor(i))}Ci(e,n){const r=n.store(Zi),i=HB(this.serializer),o=new WI(Q_.Vi,this.serializer.gt);return r.j().next(s=>{const u=new Map;return s.forEach(c=>{var f;let h=(f=u.get(c.userId))!==null&&f!==void 0?f:Je();uu(this.serializer,c).keys().forEach(y=>h=h.add(y)),u.set(c.userId,h)}),Q.forEach(u,(c,f)=>{const h=new Yn(f),y=Y_.yt(this.serializer,h),_=o.getIndexManager(h),E=J_.yt(h,this.serializer,_,o.referenceDelegate);return new KB(i,E,y,_).recalculateAndSaveOverlaysForDocumentKeys(new wA(n,qr.ue),c).next()})})}}function EN(t){t.createObjectStore(Bf,{keyPath:q8}).createIndex(xI,z8,{unique:!0}),t.createObjectStore(Ff,{keyPath:"targetId"}).createIndex(NF,B8,{unique:!0}),t.createObjectStore(Eu)}const xa="IndexedDbPersistence",gb=18e5,yb=5e3,vb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",WB="main";class YI{constructor(e,n,r,i,o,s,u,c,f,h,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fi=o,this.window=s,this.document=u,this.Mi=f,this.xi=h,this.Oi=y,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=_=>Promise.resolve(),!YI.C())throw new fe(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new a7(this,i),this.Qi=n+WB,this.serializer=new OB(c),this.$i=new Fo(this.Qi,this.Oi,new _7(this.serializer)),this.li=new YH,this.hi=new r7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HB(this.serializer),this.Ti=new WH,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&hn(xa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(re.FAILED_PRECONDITION,vb);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new qr(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(n=>{n||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(n=>this.isPrimary&&!n?this.Yi(e).next(()=>!1):!!n&&this.Zi(e).next(()=>!0))).catch(e=>{if(cl(e))return he(xa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he(xa,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return rm(e).get(tf).next(n=>Q.resolve(this.Xi(n)))}es(e){return Uy(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,gb)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Fn(n,qf);return r.j().next(i=>{const o=this.rs(i,gb),s=i.filter(u=>o.indexOf(u)===-1);return Q.forEach(s,u=>r.delete(u.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(const n of e)this.Ui.removeItem(this.ss(n.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?Q.resolve(!0):rm(e).get(tf).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,yb)&&!this._s(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new fe(re.FAILED_PRECONDITION,vb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uy(e).j().next(r=>this.rs(r,yb).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(o||s&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&he(xa,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Dp,qf],e=>{const n=new wA(e,qr.ue);return this.Yi(n).next(()=>this.es(n))}),this.$i.close(),this.hs()}rs(e,n){return e.filter(r=>this.ns(r.updateTimeMs,n)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Uy(e).j().next(n=>this.rs(n,gb).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,n){return J_.yt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new n7(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Y_.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,n,r){he(xa,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===18?oH:c===17?BF:c===16?iH:c===15?MI:c===14?FF:c===13?UF:c===12?rH:c===11?LF:void we(60245)}(this.Oi);let s;return this.$i.runTransaction(e,i,o,u=>(s=new wA(u,this.ui?this.ui.next():qr.ue),n==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new fe(re.FAILED_PRECONDITION,CF);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(u=>(s.raiseOnCommittedEvent(),u))}Ts(e){return rm(e).get(tf).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,yb)&&!this._s(n.ownerId)&&!this.Xi(n)&&!(this.xi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new fe(re.FAILED_PRECONDITION,vb)})}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rm(e).put(tf,n)}static C(){return Fo.C()}Yi(e){const n=rm(e);return n.get(tf).next(r=>this.Xi(r)?(he(xa,"Releasing primary lease."),n.delete(tf)):Q.resolve())}ns(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(hn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const n=/(?:Version|Mobile)\/1[456]/;QU()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var n;try{const r=((n=this.Ui)===null||n===void 0?void 0:n.getItem(this.ss(e)))!==null;return he(xa,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hn(xa,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){hn("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rm(t){return Fn(t,Dp)}function Uy(t){return Fn(t,qf)}function JI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Je(),i=Je();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new QI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return QU()?8:RF(Zt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new T7;return this.ws(e,n,s).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,n,s,u.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(mf()<=rt.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",pf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(mf()<=rt.DEBUG&&he("QueryEngine","Query:",pf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(mf()<=rt.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",pf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):Q.resolve())}ps(e,n){if(jD(n))return Q.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dv(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Je(...o);return this.gs.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.bs(n,u);return this.Ds(n,f,s,c.readTime)?this.ps(e,Dv(n,null,"F")):this.vs(e,f,n,c)}))})))}ys(e,n,r,i){return jD(n)||i.isEqual(De.min())?Q.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?Q.resolve(null):(mf()<=rt.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pf(n)),this.vs(e,s,n,SF(i,Lf)).next(u=>u))})}bs(e,n){let r=new St(aB(e));return n.forEach((i,o)=>{Op(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return mf()<=rt.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",pf(n)),this.gs.getDocumentsMatchingQuery(e,n,hi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="LocalStore",E7=3e8;class b7{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Bt($e),this.Ms=new zs(o=>Pu(o),Np),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KB(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function JB(t,e,n,r){return new b7(t,e,n,r)}async function QB(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],u=[];let c=Je();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){u.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(f=>({Bs:f,removedBatchIds:s,addedBatchIds:u}))})})}function w7(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,c,f,h){const y=f.batch,_=y.keys();let E=Q.resolve();return _.forEach(w=>{E=E.next(()=>h.getEntry(c,w)).next(A=>{const I=f.docVersions.get(w);xe(I!==null,48541),A.version.compareTo(I)<0&&(y.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),h.addEntry(A)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=Je();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XB(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function A7(t,e){const n=Te(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];e.targetChanges.forEach((h,y)=>{const _=i.get(y);if(!_)return;u.push(n.hi.removeMatchingKeys(o,h.removedDocuments,y).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,y)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(sn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(y,E),function(A,I,R){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=E7?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(_,E,h)&&u.push(n.hi.updateTargetData(o,E))});let c=$r(),f=Je();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),u.push(ZB(o,s,e.documentUpdates).next(h=>{c=h.Ls,f=h.ks})),!r.isEqual(De.min())){const h=n.hi.getLastRemoteSnapshotVersion(o).next(y=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(h)}return Q.waitFor(u).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,f)).next(()=>c)}).then(o=>(n.Fs=i,o))}function ZB(t,e,n){let r=Je(),i=Je();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=$r();return n.forEach((u,c)=>{const f=o.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):he(XI,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function S7(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=za),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wf(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,Q.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ss(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Yf(t,e,n){const r=Te(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!cl(s))throw s;he(XI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Lv(t,e,n){const r=Te(t);let i=De.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,f,h){const y=Te(c),_=y.Ms.get(h);return _!==void 0?Q.resolve(y.Fs.get(_)):y.hi.getTargetData(f,h)}(r,s,Nr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,u.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:De.min(),n?o:Je())).next(u=>(n4(r,sB(e),u),{documents:u,qs:o})))}function e4(t,e){const n=Te(t),r=Te(n.hi),i=n.Fs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function t4(t,e){const n=Te(t),r=n.xs.get(e)||De.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Os.getAllFromCollectionGroup(i,e,SF(r,Lf),Number.MAX_SAFE_INTEGER)).then(i=>(n4(n,e,i),i))}function n4(t,e,n){let r=t.xs.get(e)||De.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}async function I7(t,e,n,r){const i=Te(t);let o=Je(),s=$r();for(const f of n){const h=e.Qs(f.metadata.name);f.document&&(o=o.add(h));const y=e.$s(f);y.setReadTime(e.Us(f.metadata.readTime)),s=s.insert(h,y)}const u=i.Os.newChangeBuffer({trackRemovals:!0}),c=await Wf(i,function(h){return Nr(Ed(it.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",f=>ZB(f,u,s).next(h=>(u.apply(f),h)).next(h=>i.hi.removeMatchingKeysForTargetId(f,c.targetId).next(()=>i.hi.addMatchingKeys(f,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(f,h.Ls,h.ks)).next(()=>h.Ls)))}async function C7(t,e,n=Je()){const r=await Wf(t,Nr(GI(e.bundledQuery))),i=Te(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=mn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ti.saveNamedQuery(o,e);const u=r.withResumeToken(sn.EMPTY_BYTE_STRING,s);return i.Fs=i.Fs.insert(u.targetId,u),i.hi.updateTargetData(o,u).next(()=>i.hi.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.hi.addMatchingKeys(o,n,r.targetId)).next(()=>i.Ti.saveNamedQuery(o,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="firestore_clients";function bN(t,e){return`${r4}_${t}_${e}`}const i4="firestore_mutations";function wN(t,e,n){let r=`${i4}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const o4="firestore_targets";function _b(t,e){return`${o4}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="SharedClientState";class Uv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ks(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new fe(i.error.code,i.error.message))),s?new Uv(e,n,i.state,o):(hn(xo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vm{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ks(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new fe(r.error.code,r.error.message))),o?new Vm(e,r.state,i):(hn(xo,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ks(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=VI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=PF(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new Fv(e,o):(hn(xo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class ZI{constructor(e,n){this.clientId=e,this.onlineState=n}static Ks(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ZI(n.clientId,n.onlineState):(hn(xo,`Failed to parse online state: ${e}`),null)}}class UA{constructor(){this.activeTargetIds=VI()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tb{constructor(e,n,r,i,o){this.window=e,this.Fi=n,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Bt($e),this.started=!1,this.Zs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=bN(this.persistenceKey,this.js),this.eo=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new UA),this.no=new RegExp(`^${r4}_${s}_([^_]*)$`),this.ro=new RegExp(`^${i4}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${o4}_${s}_(\\d+)$`),this.so=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.oo=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const r of e){if(r===this.js)continue;const i=this.getItem(bN(this.persistenceKey,r));if(i){const o=Fv.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();const n=this.storage.getItem(this.so);if(n){const r=this.ao(n);r&&this.uo(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let n=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,n,r){this.lo(e,n,r),this.ho(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(_b(this.persistenceKey,e));if(i){const o=Vm.Ks(e,i);o&&(r=o.state)}}return n&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_b(this.persistenceKey,e))}updateQueryState(e,n,r){this.To(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return he(xo,"READ",e,n),n}setItem(e,n){he(xo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){he(xo,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(he(xo,"EVENT",n.key,n.newValue),n.key===this.Xs)return void hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.no.test(n.key)){if(n.newValue==null){const r=this.Ao(n.key);return this.Ro(r,null)}{const r=this.Vo(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.mo(n.key,n.newValue);if(r)return this.fo(r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.po(n.key,n.newValue);if(r)return this.yo(r)}}else if(n.key===this.so){if(n.newValue!==null){const r=this.ao(n.newValue);if(r)return this.uo(r)}}else if(n.key===this.eo){const r=function(o){let s=qr.ue;if(o!=null)try{const u=JSON.parse(o);xe(typeof u=="number",30636,{wo:o}),s=u}catch(u){hn(xo,"Failed to read sequence number from WebStorage",u)}return s}(n.newValue);r!==qr.ue&&this.sequenceNumberHandler(r)}else if(n.key===this.oo){const r=this.So(n.newValue);await Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(n)})}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,n,r){const i=new Uv(this.currentUser,e,n,r),o=wN(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){const n=wN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Io(e){const n={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(n))}To(e,n,r){const i=_b(this.persistenceKey,e),o=new Vm(e,n,r);this.setItem(i,o.Ws())}Eo(e){const n=JSON.stringify(Array.from(e));this.setItem(this.oo,n)}Ao(e){const n=this.no.exec(e);return n?n[1]:null}Vo(e,n){const r=this.Ao(e);return Fv.Ks(r,n)}mo(e,n){const r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Uv.Ks(new Yn(o),i,n)}po(e,n){const r=this.io.exec(e),i=Number(r[1]);return Vm.Ks(i,n)}ao(e){return ZI.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);he(xo,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Ys.insert(e,n):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],u=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||u.push(c)}),this.syncEngine.Co(s,u).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let n=VI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class s4{constructor(){this.Fo=new UA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new UA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="ConnectivityMonitor";class SN{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(AN,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(AN,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy=null;function FA(){return Fy===null?Fy=function(){return 268435456+Math.round(2147483648*Math.random())}():Fy++,"0x"+Fy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="RestConnection",R7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P7{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===AA?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=FA(),u=this.Go(e,n.toUriEncodedString());he(Eb,`Sending RPC '${e}' ${s}:`,u,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);const{host:f}=new URL(u),h=vd(f);return this.jo(e,u,c,r,h).then(y=>(he(Eb,`Received RPC '${e}' ${s}: `,y),y),y=>{throw di(Eb,`RPC '${e}' ${s} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Td}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){const r=R7[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="WebChannelConnection";class D7 extends P7{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=FA();return new Promise((u,c)=>{const f=new mF;f.setWithCredentials(!0),f.listenOnce(pF.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case iv.NO_ERROR:const y=f.getResponseJson();he(gr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),u(y);break;case iv.TIMEOUT:he(gr,`RPC '${e}' ${s} timed out`),c(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case iv.HTTP_ERROR:const _=f.getStatus();if(he(gr,`RPC '${e}' ${s} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const w=E?.error;if(w&&w.status&&w.message){const A=function(R){const M=R.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(M)>=0?M:re.UNKNOWN}(w.status);c(new fe(A,w.message))}else c(new fe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new fe(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:s,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{he(gr,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);he(gr,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)})}P_(e,n,r){const i=FA(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vF(),u=yF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");he(gr,`Creating RPC '${e}' stream ${i}: ${h}`,c);const y=s.createWebChannel(h,c);this.T_(y);let _=!1,E=!1;const w=new M7({Ho:I=>{E?he(gr,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(_||(he(gr,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),he(gr,`RPC '${e}' stream ${i} sending:`,I),y.send(I))},Yo:()=>y.close()}),A=(I,R,M)=>{I.listen(R,P=>{try{M(P)}catch(F){setTimeout(()=>{throw F},0)}})};return A(y,vm.EventType.OPEN,()=>{E||(he(gr,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),A(y,vm.EventType.CLOSE,()=>{E||(E=!0,he(gr,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(y))}),A(y,vm.EventType.ERROR,I=>{E||(E=!0,di(gr,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),w.__(new fe(re.UNAVAILABLE,"The operation could not be completed")))}),A(y,vm.EventType.MESSAGE,I=>{var R;if(!E){const M=I.data[0];xe(!!M,16349);const P=M,F=P?.error||((R=P[0])===null||R===void 0?void 0:R.error);if(F){he(gr,`RPC '${e}' stream ${i} received error:`,F);const U=F.status;let $=function(V){const q=An[V];if(q!==void 0)return TB(q)}(U),D=F.message;$===void 0&&($=re.INTERNAL,D="Unknown error status: "+U+" with message "+F.message),E=!0,w.__(new fe($,D)),y.close()}else he(gr,`RPC '${e}' stream ${i} received:`,M),w.a_(M)}}),A(u,gF.STAT_EVENT,I=>{I.stat===yA.PROXY?he(gr,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===yA.NOPROXY&&he(gr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return typeof window<"u"?window:null}function mv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){return new LH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="PersistentStream";class l4{constructor(e,n,r,i,o,s,u,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new eC(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(hn(n.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new fe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return he(IN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(he(IN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N7 extends l4{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=BH(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?De.min():s.readTime?mn(s.readTime):De.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=NA(this.serializer),n.addTarget=function(o,s){let u;const c=s.target;if(u=Pv(c)?{documents:RB(o,c)}:{query:PB(o,c).Vt},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=wB(o,s.resumeToken);const f=MA(o,s.expectedCount);f!==null&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(De.min())>0){u.readTime=Kf(o,s.snapshotVersion.toTimestamp());const f=MA(o,s.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=zH(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=NA(this.serializer),n.removeTarget=e,this.k_(n)}}class k7 extends l4{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=qH(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=NA(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>op(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{}class V7 extends O7{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,DA(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(re.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Jo(e,DA(n,r),i,s,u,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(re.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class L7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(hn(n),this._a=!1):he("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="RemoteStore";class U7{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{dl(this)&&(he(Vu,"Restarting streams for network reachability change."),await async function(c){const f=Te(c);f.Ia.add(4),await Ad(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Bp(f)}(this))})}),this.Aa=new L7(r,i)}}async function Bp(t){if(dl(t))for(const e of t.da)await e(!0)}async function Ad(t){for(const e of t.da)await e(!1)}function X_(t,e){const n=Te(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),rC(n)?nC(n):Id(n).x_()&&tC(n,e))}function Jf(t,e){const n=Te(t),r=Id(n);n.Ta.delete(e),r.x_()&&u4(n,e),n.Ta.size===0&&(r.x_()?r.B_():dl(n)&&n.Aa.set("Unknown"))}function tC(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Id(t).H_(e)}function u4(t,e){t.Ra.$e(e),Id(t).Y_(e)}function nC(t){t.Ra=new NH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Id(t).start(),t.Aa.aa()}function rC(t){return dl(t)&&!Id(t).M_()&&t.Ta.size>0}function dl(t){return Te(t).Ia.size===0}function c4(t){t.Ra=void 0}async function F7(t){t.Aa.set("Online")}async function B7(t){t.Ta.forEach((e,n)=>{tC(t,e)})}async function q7(t,e){c4(t),rC(t)?(t.Aa.la(e),nC(t)):t.Aa.set("Unknown")}async function z7(t,e,n){if(t.Aa.set("Online"),e instanceof bB&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const u of o.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.Ta.delete(u),i.Ra.removeTarget(u))}(t,e)}catch(r){he(Vu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bv(t,r)}else if(e instanceof dv?t.Ra.Ye(e):e instanceof EB?t.Ra.it(e):t.Ra.et(e),!n.isEqual(De.min()))try{const r=await XB(t.localStore);n.compareTo(r)>=0&&await function(o,s){const u=o.Ra.Pt(s);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ta.get(f);h&&o.Ta.set(f,h.withResumeToken(c.resumeToken,s))}}),u.targetMismatches.forEach((c,f)=>{const h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(sn.EMPTY_BYTE_STRING,h.snapshotVersion)),u4(o,c);const y=new Ss(h.target,c,f,h.sequenceNumber);tC(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){he(Vu,"Failed to raise snapshot:",r),await Bv(t,r)}}async function Bv(t,e,n){if(!cl(e))throw e;t.Ia.add(1),await Ad(t),t.Aa.set("Offline"),n||(n=()=>XB(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he(Vu,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Bp(t)})}function f4(t,e){return e().catch(n=>Bv(t,n,e))}async function Sd(t){const e=Te(t),n=rl(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:za;for(;$7(e);)try{const i=await S7(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,G7(e,i)}catch(i){await Bv(e,i)}d4(e)&&h4(e)}function $7(t){return dl(t)&&t.Pa.length<10}function G7(t,e){t.Pa.push(e);const n=rl(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function d4(t){return dl(t)&&!rl(t).M_()&&t.Pa.length>0}function h4(t){rl(t).start()}async function j7(t){rl(t).na()}async function H7(t){const e=rl(t);for(const n of t.Pa)e.X_(n.mutations)}async function K7(t,e,n){const r=t.Pa.shift(),i=BI.from(r,e,n);await f4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Sd(t)}async function W7(t,e){e&&rl(t).Z_&&await async function(r,i){if(function(s){return _B(s)&&s!==re.ABORTED}(i.code)){const o=r.Pa.shift();rl(r).N_(),await f4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Sd(r)}}(t,e),d4(t)&&h4(t)}async function CN(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),he(Vu,"RemoteStore received new credentials");const r=dl(n);n.Ia.add(3),await Ad(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Bp(n)}async function BA(t,e){const n=Te(t);e?(n.Ia.delete(2),await Bp(n)):e||(n.Ia.add(2),await Ad(n),n.Aa.set("Unknown"))}function Id(t){return t.Va||(t.Va=function(n,r,i){const o=Te(n);return o.ia(),new N7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:F7.bind(null,t),e_:B7.bind(null,t),n_:q7.bind(null,t),J_:z7.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),rC(t)?nC(t):t.Aa.set("Unknown")):(await t.Va.stop(),c4(t))})),t.Va}function rl(t){return t.ma||(t.ma=function(n,r,i){const o=Te(n);return o.ia(),new k7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:j7.bind(null,t),n_:W7.bind(null,t),ea:H7.bind(null,t),ta:K7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Sd(t)):(await t.ma.stop(),t.Pa.length>0&&(he(Vu,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,u=new iC(e,n,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cd(t,e){if(hn("AsyncQueue",`${e}: ${t}`),cl(t))return new fe(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{static emptySet(e){return new Sf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=_m(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Sf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.fa=new Bt(_e.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qf{constructor(e,n,r,i,o,s,u,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(u=>{s.push({type:0,doc:u})}),new Qf(e,n,Sf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class J7{constructor(){this.queries=RN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Te(n),o=i.queries;i.queries=RN(),o.forEach((s,u)=>{for(const c of u.wa)c.onError(r)})})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function RN(){return new zs(t=>oB(t),kp)}async function oC(t,e){const n=Te(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Y7,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const u=Cd(s,`Initialization of query '${pf(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&aC(n)}async function sC(t,e){const n=Te(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q7(t,e){const n=Te(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const u of s.wa)u.Ca(i)&&(r=!0);s.ya=i}}r&&aC(n)}function X7(t,e,n){const r=Te(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function aC(t){t.Da.forEach(e=>{e.next()})}var qA,PN;(PN=qA||(qA={})).Fa="default",PN.Cache="cache";class lC{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Qf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==qA.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e,n){this.qa=e,this.byteLength=n}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.serializer=e}Qs(e){return Bo(this.serializer,e)}$s(e){return e.metadata.exists?xB(this.serializer,e.document,!1):$t.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return mn(e)}}class eK{constructor(e,n){this.$a=e,this.serializer=n,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=m4(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=it.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Ga(e){const n=new Map,r=new MN(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Qs(i.metadata.name);for(const s of i.metadata.queries){const u=(n.get(s)||Je()).add(o);n.set(s,u)}}return n}async za(e){const n=await I7(e,new MN(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(const i of this.Ua)await C7(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:n}}}function m4(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.key=e}}class g4{constructor(e){this.key=e}}class y4{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Je(),this.mutatedKeys=Je(),this.Xa=aB(e),this.eu=new Sf(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new xN,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,y)=>{const _=i.get(h),E=Op(this.query,y)?y:null,w=!!_&&this.mutatedKeys.has(_.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let I=!1;_&&E?_.data.isEqual(E.data)?w!==A&&(r.track({type:3,doc:E}),I=!0):this.iu(_,E)||(r.track({type:2,doc:E}),I=!0,(c&&this.Xa(E,c)>0||f&&this.Xa(E,f)<0)&&(u=!0)):!_&&E?(r.track({type:0,doc:E}),I=!0):_&&!E&&(r.track({type:1,doc:_}),I=!0,(c||f)&&(u=!0)),I&&(E?(s=s.add(E),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:u,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((h,y)=>function(E,w){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:I})}};return A(E)-A(w)}(h.type,y.type)||this.Xa(h.doc,y.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,f=c!==this.Ya;return this.Ya=c,s.length!==0||f?{snapshot:new Qf(this.query,e.eu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new xN,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Je(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new g4(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new p4(r))}),n}uu(e){this.Ha=e.qs,this.Za=Je();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Qf.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const hl="SyncEngine";class tK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nK{constructor(e){this.key=e,this.lu=!1}}class rK{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new zs(u=>oB(u),kp),this.Tu=new Map,this.Iu=new Set,this.du=new Bt(_e.comparator),this.Eu=new Map,this.Au=new KI,this.Ru={},this.Vu=new Map,this.mu=Ou.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function iK(t,e,n=!0){const r=Z_(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await v4(r,e,n,!0),i}async function oK(t,e){const n=Z_(t);await v4(n,e,!0,!1)}async function v4(t,e,n,r){const i=await Wf(t.localStore,Nr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await uC(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&X_(t.remoteStore,i),u}async function uC(t,e,n,r,i){t.gu=(y,_,E)=>async function(A,I,R,M){let P=I.view.nu(R);P.Ds&&(P=await Lv(A.localStore,I.query,!1).then(({documents:D})=>I.view.nu(D,P)));const F=M&&M.targetChanges.get(I.targetId),U=M&&M.targetMismatches.get(I.targetId)!=null,$=I.view.applyChanges(P,A.isPrimaryClient,F,U);return zA(A,I.targetId,$._u),$.snapshot}(t,y,_,E);const o=await Lv(t.localStore,e,!0),s=new y4(e,o.qs),u=s.nu(o.documents),c=Up.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(u,t.isPrimaryClient,c);zA(t,n,f._u);const h=new tK(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function sK(t,e,n){const r=Te(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!kp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Yf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Jf(r.remoteStore,i.targetId),Xf(r,i.targetId)}).catch(ul)):(Xf(r,i.targetId),await Yf(r.localStore,i.targetId,!0))}async function aK(t,e){const n=Te(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jf(n.remoteStore,r.targetId))}async function lK(t,e,n){const r=hC(t);try{const i=await function(s,u){const c=Te(s),f=Tt.now(),h=u.reduce((E,w)=>E.add(w.key),Je());let y,_;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let w=$r(),A=Je();return c.Os.getEntries(E,h).next(I=>{w=I,w.forEach((R,M)=>{M.isValidDocument()||(A=A.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,w)).next(I=>{y=I;const R=[];for(const M of u){const P=PH(M,y.get(M.key).overlayedDocument);P!=null&&R.push(new $s(M.key,P,JF(P.value.mapValue),Yt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,f,R,u)}).next(I=>{_=I;const R=I.applyToLocalDocumentSet(y,A);return c.documentOverlayCache.saveOverlays(E,I.batchId,R)})}).then(()=>({batchId:_.batchId,changes:uB(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,c){let f=s.Ru[s.currentUser.toKey()];f||(f=new Bt($e)),f=f.insert(u,c),s.Ru[s.currentUser.toKey()]=f}(r,i.batchId,n),await Gs(r,i.changes),await Sd(r.remoteStore)}catch(i){const o=Cd(i,"Failed to persist write");n.reject(o)}}async function _4(t,e){const n=Te(t);try{const r=await A7(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?xe(s.lu,14607):i.removedDocuments.size>0&&(xe(s.lu,42227),s.lu=!1))}),await Gs(n,r,e)}catch(r){await ul(r)}}function DN(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((o,s)=>{const u=s.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(s,u){const c=Te(s);c.onlineState=u;let f=!1;c.queries.forEach((h,y)=>{for(const _ of y.wa)_.va(u)&&(f=!0)}),f&&aC(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uK(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Bt(_e.comparator);s=s.insert(o,$t.newNoDocument(o,De.min()));const u=Je().add(o),c=new Lp(De.min(),new Map,new Bt($e),s,u);await _4(r,c),r.du=r.du.remove(o),r.Eu.delete(e),dC(r)}else await Yf(r.localStore,e,!1).then(()=>Xf(r,e,n)).catch(ul)}async function cK(t,e){const n=Te(t),r=e.batch.batchId;try{const i=await w7(n.localStore,e);fC(n,r,null),cC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gs(n,i)}catch(i){await ul(i)}}async function fK(t,e,n){const r=Te(t);try{const i=await function(s,u){const c=Te(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return c.mutationQueue.lookupMutationBatch(f,u).next(y=>(xe(y!==null,37113),h=y.keys(),c.mutationQueue.removeMutationBatch(f,y))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>c.localDocuments.getDocuments(f,h))})}(r.localStore,e);fC(r,e,n),cC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gs(r,i)}catch(i){await ul(i)}}async function dK(t,e){const n=Te(t);dl(n.remoteStore)||he(hl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const u=Te(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===za)return void e.resolve();const i=n.Vu.get(r)||[];i.push(e),n.Vu.set(r,i)}catch(r){const i=Cd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function cC(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function fC(t,e,n){const r=Te(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Xf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||T4(t,r)})}function T4(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Jf(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),dC(t))}function zA(t,e,n){for(const r of n)r instanceof p4?(t.Au.addReference(r.key,e),hK(t,r)):r instanceof g4?(he(hl,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||T4(t,r.key)):we(19791,{yu:r})}function hK(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(he(hl,"New document in limbo: "+n),t.Iu.add(r),dC(t))}function dC(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new _e(it.fromString(e)),r=t.mu.next();t.Eu.set(r,new nK(n)),t.du=t.du.insert(n,r),X_(t.remoteStore,new Ss(Nr(Ed(n.path)),r,"TargetPurposeLimboResolution",qr.ue))}}async function Gs(t,e,n){const r=Te(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((u,c)=>{s.push(r.gu(c,e,n).then(f=>{var h;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,y?"current":"not-current")}if(f){i.push(f);const y=QI.Es(c.targetId,f);o.push(y)}}))}),await Promise.all(s),r.hu.J_(i),await async function(c,f){const h=Te(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Q.forEach(f,_=>Q.forEach(_.Is,E=>h.persistence.referenceDelegate.addReference(y,_.targetId,E)).next(()=>Q.forEach(_.ds,E=>h.persistence.referenceDelegate.removeReference(y,_.targetId,E)))))}catch(y){if(!cl(y))throw y;he(XI,"Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const E=h.Fs.get(_),w=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(_,A)}}}(r.localStore,o))}async function mK(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){he(hl,"User change. New user:",e.toKey());const r=await QB(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(u=>{u.forEach(c=>{c.reject(new fe(re.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gs(n,r.Bs)}}function pK(t,e){const n=Te(t),r=n.Eu.get(e);if(r&&r.lu)return Je().add(r.key);{let i=Je();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const u=n.Pu.get(s);i=i.unionWith(u.view.tu)}return i}}async function gK(t,e){const n=Te(t),r=await Lv(n.localStore,e.query,!0),i=e.view.uu(r);return n.isPrimaryClient&&zA(n,e.targetId,i._u),i}async function yK(t,e){const n=Te(t);return t4(n.localStore,e).then(r=>Gs(n,r))}async function vK(t,e,n,r){const i=Te(t),o=await function(u,c){const f=Te(u),h=Te(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",y=>h.Xn(y,c).next(_=>_?f.localDocuments.getDocuments(y,_):Q.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?await Sd(i.remoteStore):n==="acknowledged"||n==="rejected"?(fC(i,e,r||null),cC(i,e),function(u,c){Te(Te(u).mutationQueue).rr(c)}(i.localStore,e)):we(6720,"Unknown batchState",{wu:n}),await Gs(i,o)):he(hl,"Cannot apply mutation batch with id: "+e)}async function _K(t,e){const n=Te(t);if(Z_(n),hC(n),e===!0&&n.fu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await NN(n,r.toArray());n.fu=!0,await BA(n.remoteStore,!0);for(const o of i)X_(n.remoteStore,o)}else if(e===!1&&n.fu!==!1){const r=[];let i=Promise.resolve();n.Tu.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Xf(n,s),Yf(n.localStore,s,!0))),Jf(n.remoteStore,s)}),await i,await NN(n,r),function(s){const u=Te(s);u.Eu.forEach((c,f)=>{Jf(u.remoteStore,f)}),u.Au.jr(),u.Eu=new Map,u.du=new Bt(_e.comparator)}(n),n.fu=!1,await BA(n.remoteStore,!1)}}async function NN(t,e,n){const r=Te(t),i=[],o=[];for(const s of e){let u;const c=r.Tu.get(s);if(c&&c.length!==0){u=await Wf(r.localStore,Nr(c[0]));for(const f of c){const h=r.Pu.get(f),y=await gK(r,h);y.snapshot&&o.push(y.snapshot)}}else{const f=await e4(r.localStore,s);u=await Wf(r.localStore,f),await uC(r,E4(f),s,!1,u.resumeToken)}i.push(u)}return r.hu.J_(o),i}function E4(t){return iB(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function TK(t){return function(n){return Te(Te(n).persistence).Ps()}(Te(t).localStore)}async function EK(t,e,n,r){const i=Te(t);if(i.fu)return void he(hl,"Ignoring unexpected query state notification.");const o=i.Tu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await t4(i.localStore,sB(o[0])),u=Lp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",sn.EMPTY_BYTE_STRING);await Gs(i,s,u);break}case"rejected":await Yf(i.localStore,e,!0),Xf(i,e,r);break;default:we(64155,n)}}async function bK(t,e,n){const r=Z_(t);if(r.fu){for(const i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){he(hl,"Adding an already active target "+i);continue}const o=await e4(r.localStore,i),s=await Wf(r.localStore,o);await uC(r,E4(o),s.targetId,!1,s.resumeToken),X_(r.remoteStore,s)}for(const i of n)r.Tu.has(i)&&await Yf(r.localStore,i,!1).then(()=>{Jf(r.remoteStore,i),Xf(r,i)}).catch(ul)}}function Z_(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uK.bind(null,e),e.hu.J_=Q7.bind(null,e.eventManager),e.hu.pu=X7.bind(null,e.eventManager),e}function hC(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fK.bind(null,e),e}function wK(t,e,n){const r=Te(t);(async function(o,s,u){try{const c=await s.getMetadata();if(await function(E,w){const A=Te(E),I=mn(w.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",R=>A.Ti.getBundleMetadata(R,w.id)).then(R=>!!R&&R.createTime.compareTo(I)>=0)}(o.localStore,c))return await s.close(),u._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(m4(c));const f=new eK(c,s.serializer);let h=await s.Su();for(;h;){const _=await f.Wa(h);_&&u._updateProgress(_),h=await s.Su()}const y=await f.za(o.localStore);return await Gs(o,y.Ja,void 0),await function(E,w){const A=Te(E);return A.persistence.runTransaction("Save bundle","readwrite",I=>A.Ti.saveBundleMetadata(I,w))}(o.localStore,c),u._completeWith(y.progress),Promise.resolve(y.ja)}catch(c){return di(hl,`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class sp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return JB(this.persistence,new YB,e.initialUser,this.serializer)}Du(e){return new WI(Q_.Vi,this.serializer)}bu(e){return new s4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sp.provider={build:()=>new sp};class AK extends sp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){xe(this.persistence.referenceDelegate instanceof Vv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $B(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new WI(r=>Vv.Vi(r,n),this.serializer)}}class b4 extends sp{constructor(e,n,r){super(),this.Mu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await hC(this.Mu.syncEngine),await Sd(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return JB(this.persistence,new YB,e.initialUser,this.serializer)}Cu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new $B(r,e.asyncQueue,n)}Fu(e,n){const r=new N8(n,this.persistence);return new D8(e.asyncQueue,r)}Du(e){const n=JI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new YI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,a4(),mv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new s4}}class SK extends b4{constructor(e,n){super(e,n,!1),this.Mu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Mu.syncEngine;this.sharedClientState instanceof Tb&&(this.sharedClientState.syncEngine={Do:vK.bind(null,n),vo:EK.bind(null,n),Co:bK.bind(null,n),Ps:TK.bind(null,n),bo:yK.bind(null,n)},await this.sharedClientState.start()),await this.persistence.ji(async r=>{await _K(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}bu(e){const n=a4();if(!Tb.C(n))throw new fe(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=JI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tb(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mK.bind(null,this.syncEngine),await BA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new J7}()}createDatastore(e){const n=Fp(e.databaseInfo.databaseId),r=function(o){return new D7(o)}(e.databaseInfo);return function(o,s,u,c){return new V7(o,s,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,u){return new U7(r,i,o,s,u)}(this.localStore,this.datastore,e.asyncQueue,n=>DN(this.syncEngine,n,0),function(){return SN.C()?new SN:new x7}())}createSyncEngine(e,n){return function(i,o,s,u,c,f,h){const y=new rK(i,o,s,u,c,f);return h&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Te(i);he(Vu,"RemoteStore shutting down."),o.Ia.add(5),await Ad(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ap.provider={build:()=>new ap};function kN(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):hn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK{constructor(e,n){this.Nu=e,this.serializer=n,this.metadata=new cr,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const n=this.Bu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const i=await this.Qu(r);return new Z7(JSON.parse(i),e.length+r)}$u(){return this.buffer.findIndex(e=>e===123)}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new fe(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,o){const s=Te(i),u={documents:o.map(y=>ip(s.serializer,y))},c=await s.Jo("BatchGetDocuments",s.serializer.databaseId,it.emptyPath(),u,o.length),f=new Map;c.forEach(y=>{const _=FH(s.serializer,y);f.set(_.key.toString(),_)});const h=[];return o.forEach(y=>{const _=f.get(y.toString());xe(!!_,55234,{key:y}),h.push(_)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=_e.fromPath(r);this.mutations.push(new UI(i,this.precondition(i)))}),await async function(r,i){const o=Te(r),s={writes:i.map(u=>op(o.serializer,u))};await o.Wo("Commit",o.serializer.databaseId,it.emptyPath(),s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw we(50498,{Wu:e.constructor.name});n=De.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new fe(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(De.min())?Yt.exists(!1):Yt.updateTime(n):Yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(De.min()))throw new fe(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(n)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new eC(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new CK(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!Mp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!_B(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="FirestoreClient";class RK{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yn.UNAUTHENTICATED,this.clientId=AI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{he(il,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(he(il,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bb(t,e){t.asyncQueue.verifyOperationInProgress(),he(il,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await QB(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{di("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{di("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function ON(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mC(t);he(il,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>CN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>CN(e.remoteStore,i)),t._onlineComponents=e}async function mC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(il,"Using user provided OfflineComponentProvider");try{await bb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;di("Error using user provided cache. Falling back to memory cache: "+n),await bb(t,new sp)}}else he(il,"Using default OfflineComponentProvider"),await bb(t,new AK(void 0));return t._offlineComponents}async function t0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(il,"Using user provided OnlineComponentProvider"),await ON(t,t._uninitializedComponentsProvider._online)):(he(il,"Using default OnlineComponentProvider"),await ON(t,new ap))),t._onlineComponents}function w4(t){return mC(t).then(e=>e.persistence)}function pC(t){return mC(t).then(e=>e.localStore)}function A4(t){return t0(t).then(e=>e.remoteStore)}function gC(t){return t0(t).then(e=>e.syncEngine)}function PK(t){return t0(t).then(e=>e.datastore)}async function Zf(t){const e=await t0(t),n=e.eventManager;return n.onListen=iK.bind(null,e.syncEngine),n.onUnlisten=sK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aK.bind(null,e.syncEngine),n}function MK(t){return t.asyncQueue.enqueue(async()=>{const e=await w4(t),n=await A4(t);return e.setNetworkEnabled(!0),function(i){const o=Te(i);return o.Ia.delete(0),Bp(o)}(n)})}function DK(t){return t.asyncQueue.enqueue(async()=>{const e=await w4(t),n=await A4(t);return e.setNetworkEnabled(!1),async function(i){const o=Te(i);o.Ia.add(0),await Ad(o),o.Aa.set("Offline")}(n)})}function NK(t,e){const n=new cr;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,s){try{const u=await function(f,h){const y=Te(f);return y.persistence.runTransaction("read document","readonly",_=>y.localDocuments.getDocument(_,h))}(i,o);u.isFoundDocument()?s.resolve(u):u.isNoDocument()?s.resolve(null):s.reject(new fe(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=Cd(u,`Failed to get document '${o} from cache`);s.reject(c)}}(await pC(t),e,n)),n.promise}function S4(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,u,c,f){const h=new e0({next:_=>{h.Ou(),s.enqueueAndForget(()=>sC(o,y));const E=_.docs.has(u);!E&&_.fromCache?f.reject(new fe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&c&&c.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new lC(Ed(u.path),h,{includeMetadataChanges:!0,ka:!0});return oC(o,y)}(await Zf(t),t.asyncQueue,e,n,r)),r.promise}function kK(t,e){const n=new cr;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,s){try{const u=await Lv(i,o,!0),c=new y4(o,u.qs),f=c.nu(u.documents),h=c.applyChanges(f,!1);s.resolve(h.snapshot)}catch(u){const c=Cd(u,`Failed to execute query '${o} against cache`);s.reject(c)}}(await pC(t),e,n)),n.promise}function I4(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,u,c,f){const h=new e0({next:_=>{h.Ou(),s.enqueueAndForget(()=>sC(o,y)),_.fromCache&&c.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new lC(u,h,{includeMetadataChanges:!0,ka:!0});return oC(o,y)}(await Zf(t),t.asyncQueue,e,n,r)),r.promise}function OK(t,e){const n=new e0(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,o){Te(i).Da.add(o),o.next()}(await Zf(t),n)),()=>{n.Ou(),t.asyncQueue.enqueueAndForget(async()=>function(i,o){Te(i).Da.delete(o)}(await Zf(t),n))}}function VK(t,e,n,r){const i=function(s,u){let c;return c=typeof s=="string"?wI().encode(s):s,function(h,y){return new IK(h,y)}(function(h,y){if(h instanceof Uint8Array)return kN(h,y);if(h instanceof ArrayBuffer)return kN(new Uint8Array(h),y);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,Fp(e));t.asyncQueue.enqueueAndForget(async()=>{wK(await gC(t),i,r)})}function LK(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const o=Te(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))}(await pC(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firestore.googleapis.com",LN=!0;class UN{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x4,this.ssl=LN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:LN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FB;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i7)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new E8;switch(r.type){case"firstParty":return new S8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=VN.get(n);r&&(he("ComponentProvider","Removing Datastore"),VN.delete(n),r.terminate())}(this),Promise.resolve()}}function UK(t,e,n,r={}){var i;t=pt(t,qp);const o=vd(e),s=t._getSettings(),u=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(HU(`https://${c}`),KU("Firestore",!0)),s.host!==x4&&s.host!==c&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Wa(f,u)&&(t._setSettings(f),r.mockUserToken)){let h,y;if(typeof r.mockUserToken=="string")h=r.mockUserToken,y=Yn.MOCK_USER;else{h=UG(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new fe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Yn(_)}t._authCredentials=new b8(new TF(h,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kr=class R4{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new R4(this.firestore,e,this._query)}},Ft=class bm{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bm(this.firestore,e,this._key)}toJSON(){return{type:bm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Pp(n,bm._jsonSchema))return new bm(e,r||null,new _e(it.fromString(n.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:xn("string",Ft._jsonSchemaVersion),referencePath:xn("string")};let $a=class P4 extends kr{constructor(e,n,r){super(e,n,Ed(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new _e(e))}withConverter(e){return new P4(this.firestore,e,this._path)}};function M4(t,e,...n){if(t=Ue(t),SI("collection","path",e),t instanceof qp){const r=it.fromString(e,...n);return ID(r),new $a(t,null,r)}{if(!(t instanceof Ft||t instanceof $a))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return ID(r),new $a(t.firestore,null,r)}}function FK(t,e){if(t=pt(t,qp),SI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kr(t,null,function(r){return new qs(it.emptyPath(),r)}(e))}function qv(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=AI.newId()),SI("doc","path",e),t instanceof qp){const r=it.fromString(e,...n);return SD(r),new Ft(t,null,new _e(r))}{if(!(t instanceof Ft||t instanceof $a))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return SD(r),new Ft(t.firestore,t instanceof $a?t.converter:null,new _e(r))}}function D4(t,e){return t=Ue(t),e=Ue(e),(t instanceof Ft||t instanceof $a)&&(e instanceof Ft||e instanceof $a)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function N4(t,e){return t=Ue(t),e=Ue(e),t instanceof kr&&e instanceof kr&&t.firestore===e.firestore&&kp(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="AsyncQueue";class BN{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new eC(this,"async_queue_retry"),this.oc=()=>{const r=mv();r&&he(FN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=mv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=mv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new cr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cl(e))throw e;he(FN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,hn("INTERNAL UNHANDLED ERROR: ",qN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=iC.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&we(47125,{hc:qN(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function qN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class BK{constructor(){this._progressObserver={},this._taskCompletionResolver=new cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK=-1;let pn=class extends qp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new BN,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BN(e),this._firestoreClient=void 0,await e}}};function wr(t){if(t._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||k4(t),t._firestoreClient}function k4(t){var e,n,r;const i=t._freezeSettings(),o=function(u,c,f,h){return new lH(u,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,C4(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new RK(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u?._online.build();return{_offline:u?._offline.build(c),_online:c}}(t._componentsProvider))}function zK(t,e){di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return O4(t,ap.provider,{build:r=>new b4(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function $K(t){di("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();O4(t,ap.provider,{build:n=>new SK(n,e.cacheSizeBytes)})}function O4(t,e,n){if((t=pt(t,pn))._firestoreClient||t._terminated)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new fe(re.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},k4(t)}function GK(t){if(t._initialized&&!t._terminated)throw new fe(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new cr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Fo.C())return Promise.resolve();const i=r+WB;await Fo.delete(i)}(JI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function jK(t){return function(n){const r=new cr;return n.asyncQueue.enqueueAndForget(async()=>dK(await gC(n),r)),r.promise}(wr(t=pt(t,pn)))}function HK(t){return MK(wr(t=pt(t,pn)))}function KK(t){return DK(wr(t=pt(t,pn)))}function WK(t,e){const n=wr(t=pt(t,pn)),r=new BK;return VK(n,t._databaseId,e,r),r}function YK(t,e){return LK(wr(t=pt(t,pn)),e).then(n=>n?new kr(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(sn.fromBase64String(e))}catch(n){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pp(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:xn("string",Tr._jsonSchemaVersion),bytes:xn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:io._jsonSchemaVersion}}static fromJSON(e){if(Pp(e,io._jsonSchema))return new io(e.latitude,e.longitude)}}io._jsonSchemaVersion="firestore/geoPoint/1.0",io._jsonSchema={type:xn("string",io._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pp(e,qo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new qo(e.vectorValues);throw new fe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qo._jsonSchemaVersion="firestore/vectorValue/1.0",qo._jsonSchema={type:xn("string",qo._jsonSchemaVersion),vectorValues:xn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=/^__.*__$/;class QK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $s(e,this.data,this.fieldMask,n,this.fieldTransforms):new bd(e,this.data,n,this.fieldTransforms)}}class V4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function L4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:t})}}class n0{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return zv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(L4(this.Ec)&&JK.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class XK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fp(e)}Dc(e,n,r,i=!1){return new n0({Ec:e,methodName:n,bc:r,path:Wt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qu(t){const e=t._freezeSettings(),n=Fp(t._databaseId);return new XK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function r0(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);wC("Data must be an object, but it was:",s,r);const u=B4(r,s);let c,f;if(o.merge)c=new zr(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const y of o.mergeFields){const _=GA(e,y,n);if(!s.contains(_))throw new fe(re.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);z4(h,_)||h.push(_)}c=new zr(h),f=s.fieldTransforms.filter(y=>c.covers(y.field))}else c=null,f=s.fieldTransforms;return new QK(new lr(u),c,f)}class zp extends Ju{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zp}}function U4(t,e,n){return new n0({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class yC extends Ju{_toFieldTransform(e){return new Vp(e.path,new jf)}isEqual(e){return e instanceof yC}}class vC extends Ju{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=U4(this,e,!0),r=this.vc.map(o=>Xu(o,n)),i=new Mu(r);return new Vp(e.path,i)}isEqual(e){return e instanceof vC&&Wa(this.vc,e.vc)}}class _C extends Ju{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=U4(this,e,!0),r=this.vc.map(o=>Xu(o,n)),i=new Du(r);return new Vp(e.path,i)}isEqual(e){return e instanceof _C&&Wa(this.vc,e.vc)}}class TC extends Ju{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new Hf(e.serializer,dB(e.serializer,this.Cc));return new Vp(e.path,n)}isEqual(e){return e instanceof TC&&this.Cc===e.Cc}}function EC(t,e,n,r){const i=t.Dc(1,e,n);wC("Data must be an object, but it was:",i,r);const o=[],s=lr.empty();fl(r,(c,f)=>{const h=AC(e,c,n);f=Ue(f);const y=i.gc(h);if(f instanceof zp)o.push(h);else{const _=Xu(f,y);_!=null&&(o.push(h),s.set(h,_))}});const u=new zr(o);return new V4(s,u,i.fieldTransforms)}function bC(t,e,n,r,i,o){const s=t.Dc(1,e,n),u=[GA(e,r,n)],c=[i];if(o.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(GA(e,o[_])),c.push(o[_+1]);const f=[],h=lr.empty();for(let _=u.length-1;_>=0;--_)if(!z4(f,u[_])){const E=u[_];let w=c[_];w=Ue(w);const A=s.gc(E);if(w instanceof zp)f.push(E);else{const I=Xu(w,A);I!=null&&(f.push(E),h.set(E,I))}}const y=new zr(f);return new V4(h,y,s.fieldTransforms)}function F4(t,e,n,r=!1){return Xu(n,t.Dc(r?4:3,e))}function Xu(t,e){if(q4(t=Ue(t)))return wC("Unsupported field value:",e,t),B4(t,e);if(t instanceof Ju)return function(r,i){if(!L4(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const u of r){let c=Xu(u,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Tt.fromDate(r);return{timestampValue:Kf(i.serializer,o)}}if(r instanceof Tt){const o=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kf(i.serializer,o)}}if(r instanceof io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tr)return{bytesValue:wB(i.serializer,r._byteString)};if(r instanceof Ft){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$I(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qo)return function(s,u){return{mapValue:{fields:{[DI]:{stringValue:NI},[zf]:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return LI(u.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${F_(r)}`)}(t,e)}function B4(t,e){const n={};return qF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fl(t,(r,i)=>{const o=Xu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function q4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof io||t instanceof Tr||t instanceof Ft||t instanceof Ju||t instanceof qo)}function wC(t,e,n){if(!q4(n)||!wF(n)){const r=F_(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function GA(t,e,n){if((e=Ue(e))instanceof ol)return e._internalPath;if(typeof e=="string")return AC(t,e);throw zv("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZK=new RegExp("[~\\*/\\[\\]]");function AC(t,e,n){if(e.search(ZK)>=0)throw zv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ol(...e.split("."))._internalPath}catch{throw zv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zv(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new fe(re.INVALID_ARGUMENT,u+t+c)}function z4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(i0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eW extends lp{data(){return super.data()}}function i0(t,e){return typeof e=="string"?AC(t,e):e instanceof ol?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SC{}class $p extends SC{}function Ra(t,e,...n){let r=[];e instanceof SC&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof IC).length,u=o.filter(c=>c instanceof o0).length;if(s>1||s>0&&u>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class o0 extends $p{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new o0(e,n,r)}_apply(e){const n=this._parse(e);return j4(e._query,n),new kr(e.firestore,e.converter,PA(e._query,n))}_parse(e){const n=Qu(e.firestore);return function(o,s,u,c,f,h,y){let _;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$N(y,h);const w=[];for(const A of y)w.push(zN(c,o,A));_={arrayValue:{values:w}}}else _=zN(c,o,y)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$N(y,h),_=F4(u,s,y,h==="in"||h==="not-in");return ot.create(f,h,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tW(t,e,n){const r=e,i=i0("where",t);return o0._create(i,r,n)}class IC extends SC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new IC(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:At.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const u=o.getFlattenedFilters();for(const c of u)j4(s,c),s=PA(s,c)}(e._query,n),new kr(e.firestore,e.converter,PA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class CC extends $p{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new CC(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rp(o,s)}(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new qs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function nW(t,e="asc"){const n=e,r=i0("orderBy",t);return CC._create(r,n)}class s0 extends $p{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new s0(e,n,r)}_apply(e){return new kr(e.firestore,e.converter,Dv(e._query,this._limit,this._limitType))}}function rW(t){return AF("limit",t),s0._create("limit",t,"F")}function iW(t){return AF("limitToLast",t),s0._create("limitToLast",t,"L")}class a0 extends $p{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new a0(e,n,r)}_apply(e){const n=G4(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,function(i,o){return new qs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}}function oW(...t){return a0._create("startAt",t,!0)}function sW(...t){return a0._create("startAfter",t,!1)}class l0 extends $p{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new l0(e,n,r)}_apply(e){const n=G4(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,function(i,o){return new qs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}}function aW(...t){return l0._create("endBefore",t,!1)}function lW(...t){return l0._create("endAt",t,!0)}function G4(t,e,n,r){if(n[0]=Ue(n[0]),n[0]instanceof lp)return function(o,s,u,c,f){if(!c)throw new fe(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const h=[];for(const y of Af(o))if(y.field.isKeyField())h.push(Ru(s,c.key));else{const _=c.data.field(y.field);if(G_(_))throw new fe(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const E=y.field.canonicalString();throw new fe(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(_)}return new nl(h,f)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Qu(t.firestore);return function(s,u,c,f,h,y){const _=s.explicitOrderBy;if(h.length>_.length)throw new fe(re.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let w=0;w<h.length;w++){const A=h[w];if(_[w].field.isKeyField()){if(typeof A!="string")throw new fe(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof A}`);if(!OI(s)&&A.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${A}' contains a slash.`);const I=s.path.child(it.fromString(A));if(!_e.isDocumentKey(I))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const R=new _e(I);E.push(Ru(u,R))}else{const I=F4(c,f,A);E.push(I)}}return new nl(E,y)}(t._query,t.firestore._databaseId,i,e,n,r)}}function zN(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OI(e)&&n.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!_e.isDocumentKey(r))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ru(t,new _e(r))}if(n instanceof Ft)return Ru(t,n._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${F_(n)}.`)}function $N(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j4(t,e){const n=function(i,o){for(const s of i)for(const u of s.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xC{convertValue(e,n="none"){switch(el(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fl(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[zf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ht(s.doubleValue));return new qo(o)}convertGeoPoint(e){return new io(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=j_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);xe(kB(r),9688,{name:e});const i=new Za(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return i.isEqual(n)||hn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uW extends xC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}class mu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ui=class H4 extends lp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(i0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=H4._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ui._jsonSchema={type:xn("string",Ui._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};let Lm=class extends Ui{data(e={}){return super.data(e)}},oo=class K4{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new mu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lm(this._firestore,this._userDataWriter,r.key,r,new mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>{const c=new Lm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Lm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return u.type!==0&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),h=s.indexOf(u.doc.key)),{type:cW(u.type),doc:c,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=K4._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=AI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function cW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}function W4(t,e){return t instanceof Ui&&e instanceof Ui?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof oo&&e instanceof oo&&t._firestore===e._firestore&&N4(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fW(t){t=pt(t,Ft);const e=pt(t.firestore,pn);return S4(wr(e),t._key).then(n=>RC(e,t,n))}oo._jsonSchemaVersion="firestore/querySnapshot/1.0",oo._jsonSchema={type:xn("string",oo._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};class Zu extends xC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function dW(t){t=pt(t,Ft);const e=pt(t.firestore,pn),n=wr(e),r=new Zu(e);return NK(n,t._key).then(i=>new Ui(e,r,t._key,i,new mu(i!==null&&i.hasLocalMutations,!0),t.converter))}function hW(t){t=pt(t,Ft);const e=pt(t.firestore,pn);return S4(wr(e),t._key,{source:"server"}).then(n=>RC(e,t,n))}function mW(t){t=pt(t,kr);const e=pt(t.firestore,pn),n=wr(e),r=new Zu(e);return $4(t._query),I4(n,t._query).then(i=>new oo(e,r,t,i))}function pW(t){t=pt(t,kr);const e=pt(t.firestore,pn),n=wr(e),r=new Zu(e);return kK(n,t._query).then(i=>new oo(e,r,t,i))}function gW(t){t=pt(t,kr);const e=pt(t.firestore,pn),n=wr(e),r=new Zu(e);return I4(n,t._query,{source:"server"}).then(i=>new oo(e,r,t,i))}function GN(t,e,n){t=pt(t,Ft);const r=pt(t.firestore,pn),i=u0(t.converter,e,n);return Gp(r,[r0(Qu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yt.none())])}function jN(t,e,n,...r){t=pt(t,Ft);const i=pt(t.firestore,pn),o=Qu(i);let s;return s=typeof(e=Ue(e))=="string"||e instanceof ol?bC(o,"updateDoc",t._key,e,n,r):EC(o,"updateDoc",t._key,e),Gp(i,[s.toMutation(t._key,Yt.exists(!0))])}function yW(t){return Gp(pt(t.firestore,pn),[new wd(t._key,Yt.none())])}function vW(t,e){const n=pt(t.firestore,pn),r=qv(t),i=u0(t.converter,e);return Gp(n,[r0(Qu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yt.exists(!1))]).then(()=>r)}function Y4(t,...e){var n,r,i;t=Ue(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$A(e[s])||(o=e[s++]);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if($A(e[s])){const y=e[s];e[s]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[s+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[s+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let c,f,h;if(t instanceof Ft)f=pt(t.firestore,pn),h=Ed(t._key.path),c={next:y=>{e[s]&&e[s](RC(f,t,y))},error:e[s+1],complete:e[s+2]};else{const y=pt(t,kr);f=pt(y.firestore,pn),h=y._query;const _=new Zu(f);c={next:E=>{e[s]&&e[s](new oo(f,_,y,E))},error:e[s+1],complete:e[s+2]},$4(t._query)}return function(_,E,w,A){const I=new e0(A),R=new lC(E,I,w);return _.asyncQueue.enqueueAndForget(async()=>oC(await Zf(_),R)),()=>{I.Ou(),_.asyncQueue.enqueueAndForget(async()=>sC(await Zf(_),R))}}(wr(f),h,u,c)}function _W(t,e){return OK(wr(t=pt(t,pn)),$A(e)?e:{next:e})}function Gp(t,e){return function(r,i){const o=new cr;return r.asyncQueue.enqueueAndForget(async()=>lK(await gC(r),i,o)),o.promise}(wr(t),e)}function RC(t,e,n){const r=n.docs.get(e._key),i=new Zu(t);return new Ui(t,i,e._key,r,new mu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EW=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qu(e)}set(e,n,r){this._verifyNotCommitted();const i=Ua(e,this._firestore),o=u0(i.converter,n,r),s=r0(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Yt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=Ua(e,this._firestore);let s;return s=typeof(n=Ue(n))=="string"||n instanceof ol?bC(this._dataReader,"WriteBatch.update",o._key,n,r,i):EC(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ua(e,this._firestore);return this._mutations=this._mutations.concat(new wd(n._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ua(t,e){if((t=Ue(t)).firestore!==e)throw new fe(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Qu(e)}get(e){const n=Ua(e,this._firestore),r=new uW(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return we(24041);const o=i[0];if(o.isFoundDocument())return new lp(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new lp(this._firestore,r,n._key,null,n.converter);throw we(18433,{doc:o})})}set(e,n,r){const i=Ua(e,this._firestore),o=u0(i.converter,n,r),s=r0(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const o=Ua(e,this._firestore);let s;return s=typeof(n=Ue(n))=="string"||n instanceof ol?bC(this._dataReader,"Transaction.update",o._key,n,r,i):EC(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){const n=Ua(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wW=class extends bW{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ua(e,this._firestore),r=new Zu(this._firestore);return super.get(e).then(i=>new Ui(this._firestore,r,n._key,i._document,new mu(!1,!1),n.converter))}};function AW(t,e,n){t=pt(t,pn);const r=Object.assign(Object.assign({},TW),n);return function(o){if(o.maxAttempts<1)throw new fe(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,u){const c=new cr;return o.asyncQueue.enqueueAndForget(async()=>{const f=await PK(o);new xK(o.asyncQueue,f,u,s,c).zu()}),c.promise}(wr(t),i=>e(new wW(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(){return new zp("deleteField")}function IW(){return new yC("serverTimestamp")}function CW(...t){return new vC("arrayUnion",t)}function xW(...t){return new _C("arrayRemove",t)}function RW(t){return new TC("increment",t)}(function(e,n=!0){(function(i){Td=i})(ll),Qa(new Go("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),u=new pn(new w8(r.getProvider("auth-internal")),new I8(s,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(f.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ro(TD,ED,e),ro(TD,ED,"esm2017")})();const PW="@firebase/firestore-compat",MW="0.3.53";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new fe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(){if(typeof Uint8Array>"u")throw new fe("unimplemented","Uint8Arrays are not available in this environment.")}function KN(){if(!sH())throw new fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let J4=class jA{constructor(e){this._delegate=e}static fromBase64String(e){return KN(),new jA(Tr.fromBase64String(e))}static fromUint8Array(e){return HN(),new jA(Tr.fromUint8Array(e))}toBase64(){return KN(),this._delegate.toBase64()}toUint8Array(){return HN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){return DW(t,["next","error","complete"])}function DW(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{enableIndexedDbPersistence(e,n){return zK(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return $K(e._delegate)}clearIndexedDbPersistence(e){return GK(e._delegate)}}class Q4{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&di("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){UK(this._delegate,e,n,r)}enableNetwork(){return HK(this._delegate)}disableNetwork(){return KK(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return jK(this._delegate)}onSnapshotsInSync(e){return _W(this._delegate,e)}get app(){if(!this._appCompat)throw new fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ed(this,M4(this._delegate,e))}catch(n){throw Pr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Oi(this,qv(this._delegate,e))}catch(n){throw Pr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rr(this,FK(this._delegate,e))}catch(n){throw Pr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return AW(this._delegate,n=>e(new X4(this,n)))}batch(){return wr(this._delegate),new Z4(new EW(this._delegate,e=>Gp(this._delegate,e)))}loadBundle(e){return WK(this._delegate,e)}namedQuery(e){return YK(this._delegate,e).then(n=>n?new Rr(this,n):null)}}class c0 extends xC{constructor(e){super(),this.firestore=e}convertBytes(e){return new J4(new Tr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Oi.forKey(n,this.firestore,null)}}function kW(t){_8(t)}class X4{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new c0(e)}get(e){const n=pu(e);return this._delegate.get(n).then(r=>new up(this._firestore,new Ui(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=pu(e);return r?(PC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=pu(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=pu(e);return this._delegate.delete(n),this}}class Z4{constructor(e){this._delegate=e}set(e,n,r){const i=pu(e);return r?(PC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=pu(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=pu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Lu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Lm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Lu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new Lu(e,new c0(e),n),i.set(n,o)),o}}Lu.INSTANCES=new WeakMap;class Oi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new c0(e)}static forPath(e,n,r){if(e.length%2!==0)throw new fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Oi(n,new Ft(n._delegate,r,new _e(e)))}static forKey(e,n,r){return new Oi(n,new Ft(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ed(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ed(this.firestore,M4(this._delegate,e))}catch(n){throw Pr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ue(e),e instanceof Ft?D4(this._delegate,e):!1}set(e,n){n=PC("DocumentReference.set",n);try{return n?GN(this._delegate,e,n):GN(this._delegate,e)}catch(r){throw Pr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?jN(this._delegate,e):jN(this._delegate,e,n,...r)}catch(i){throw Pr(i,"updateDoc()","DocumentReference.update()")}}delete(){return yW(this._delegate)}onSnapshot(...e){const n=eq(e),r=tq(e,i=>new up(this.firestore,new Ui(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Y4(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=dW(this._delegate):e?.source==="server"?n=hW(this._delegate):n=fW(this._delegate),n.then(r=>new up(this.firestore,new Ui(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Oi(this.firestore,e?this._delegate.withConverter(Lu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Pr(t,e,n){return t.message=t.message.replace(e,n),t}function eq(t){for(const e of t)if(typeof e=="object"&&!HA(e))return e;return{}}function tq(t,e){var n,r;let i;return HA(t[0])?i=t[0]:HA(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class up{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Oi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return W4(this._delegate,e._delegate)}}class cp extends up{data(e){const n=this._delegate.data(e);return this._delegate._converter||T8(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Rr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new c0(e)}where(e,n,r){try{return new Rr(this.firestore,Ra(this._delegate,tW(e,n,r)))}catch(i){throw Pr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Rr(this.firestore,Ra(this._delegate,nW(e,n)))}catch(r){throw Pr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rr(this.firestore,Ra(this._delegate,rW(e)))}catch(n){throw Pr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Rr(this.firestore,Ra(this._delegate,iW(e)))}catch(n){throw Pr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rr(this.firestore,Ra(this._delegate,oW(...e)))}catch(n){throw Pr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rr(this.firestore,Ra(this._delegate,sW(...e)))}catch(n){throw Pr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rr(this.firestore,Ra(this._delegate,aW(...e)))}catch(n){throw Pr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rr(this.firestore,Ra(this._delegate,lW(...e)))}catch(n){throw Pr(n,"endAt()","Query.endAt()")}}isEqual(e){return N4(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=pW(this._delegate):e?.source==="server"?n=gW(this._delegate):n=mW(this._delegate),n.then(r=>new KA(this.firestore,new oo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=eq(e),r=tq(e,i=>new KA(this.firestore,new oo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Y4(this._delegate,n,r)}withConverter(e){return new Rr(this.firestore,e?this._delegate.withConverter(Lu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class OW{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new cp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Rr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new OW(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new cp(this._firestore,r))})}isEqual(e){return W4(this._delegate,e._delegate)}}class ed extends Rr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Oi(this.firestore,e):null}doc(e){try{return e===void 0?new Oi(this.firestore,qv(this._delegate)):new Oi(this.firestore,qv(this._delegate,e))}catch(n){throw Pr(n,"doc()","CollectionReference.doc()")}}add(e){return vW(this._delegate,e).then(n=>new Oi(this.firestore,n))}isEqual(e){return D4(this._delegate,e._delegate)}withConverter(e){return new ed(this.firestore,e?this._delegate.withConverter(Lu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pu(t){return pt(t,Ft)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(...e){this._delegate=new ol(...e)}static documentId(){return new MC(Wt.keyField().canonicalString())}isEqual(e){return e=Ue(e),e instanceof ol?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{static serverTimestamp(){const e=IW();return e._methodName="FieldValue.serverTimestamp",new du(e)}static delete(){const e=SW();return e._methodName="FieldValue.delete",new du(e)}static arrayUnion(...e){const n=CW(...e);return n._methodName="FieldValue.arrayUnion",new du(n)}static arrayRemove(...e){const n=xW(...e);return n._methodName="FieldValue.arrayRemove",new du(n)}static increment(e){const n=RW(e);return n._methodName="FieldValue.increment",new du(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VW={Firestore:Q4,GeoPoint:io,Timestamp:Tt,Blob:J4,Transaction:X4,WriteBatch:Z4,DocumentReference:Oi,DocumentSnapshot:up,Query:Rr,QueryDocumentSnapshot:cp,QuerySnapshot:KA,CollectionReference:ed,FieldPath:MC,FieldValue:du,setLogLevel:kW,CACHE_SIZE_UNLIMITED:qK};function LW(t,e){t.INTERNAL.registerComponent(new Go("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},VW)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t){LW(t,(e,n)=>new Q4(e,n,new NW)),t.registerVersion(PW,MW)}UW(jo);function DC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const im={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},lf={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FW(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function nq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BW=FW,qW=nq,rq=new Yu("auth","Firebase",nq());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new U_("@firebase/auth");function zW(t,...e){$v.logLevel<=rt.WARN&&$v.warn(`Auth (${ll}): ${t}`,...e)}function pv(t,...e){$v.logLevel<=rt.ERROR&&$v.error(`Auth (${ll}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,...e){throw kC(t,...e)}function Un(t,...e){return kC(t,...e)}function NC(t,e,n){const r=Object.assign(Object.assign({},qW()),{[e]:n});return new Yu("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return NC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xd(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fr(t,"argument-error"),NC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kC(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rq.create(t,...e)}function ge(t,e,...n){if(!t)throw kC(e,...n)}function Oo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pv(e),new Error(e)}function so(t,e){t||Oo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OC(){return WN()==="http:"||WN()==="https:"}function WN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OC()||YU()||"connection"in navigator)?navigator.onLine:!0}function GW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.shortDelay=e,this.longDelay=n,so(n>e,"Short delay should be less than long delay!"),this.isMobile=qG()||yI()}get(){return $W()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e){so(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KW=new jp(3e4,6e4);function an(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ln(t,e,n,r,i={}){return oq(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=_d(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:c},o);return $G()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&vd(t.emulatorConfig.host)&&(f.credentials="include"),iq.fetch()(await sq(t,t.config.apiHost,n,u),f)})}async function oq(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},jW),e);try{const i=new YW(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw wm(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wm(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw wm(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw wm(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw NC(t,h,f);fr(t,h)}}catch(i){if(i instanceof Dr)throw i;fr(t,"network-request-failed",{message:String(i)})}}async function js(t,e,n,r,i={}){const o=await ln(t,e,n,r,i);return"mfaPendingCredential"in o&&fr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function sq(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?VC(t.config,i):`${t.config.apiScheme}://${i}`;return HW.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function WW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Un(this.auth,"network-request-failed")),KW.get())})}}function wm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Un(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){return t!==void 0&&t.getResponse!==void 0}function JN(t){return t!==void 0&&t.enterprise!==void 0}class aq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JW(t){return(await ln(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function lq(t,e){return ln(t,"GET","/v2/recaptchaConfig",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QW(t,e){return ln(t,"POST","/v1/accounts:delete",e)}async function XW(t,e){return ln(t,"POST","/v1/accounts:update",e)}async function Gv(t,e){return ln(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZW(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),i=f0(r);ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Um(wb(i.auth_time)),issuedAtTime:Um(wb(i.iat)),expirationTime:Um(wb(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function wb(t){return Number(t)*1e3}function f0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pv("JWT malformed, contained fewer than 3 sections"),null;try{const i=mI(n);return i?JSON.parse(i):(pv("Failed to decode base64 JWT payload"),null)}catch(i){return pv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function QN(t){const e=f0(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dr&&eY(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Um(this.lastLoginAt),this.creationTime=Um(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Os(t,Gv(n,{idToken:r}));ge(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?uq(o.providerUserInfo):[],u=rY(t.providerData,s),c=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!u?.length,h=c?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new WA(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,y)}async function nY(t){const e=Ue(t);await dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rY(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uq(t){return t.map(e=>{var{providerId:n}=e,r=DC(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iY(t,e){const n=await oq(t,{},async()=>{const r=_d({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await sq(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return t.emulatorConfig&&vd(t.emulatorConfig.host)&&(c.credentials="include"),iq.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oY(t,e){return ln(t,"POST","/v2/accounts:revokeToken",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=QN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await iY(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new If;return r&&(ge(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new If,this.toJSON())}_performRefresh(){return Oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class no{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=DC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new WA(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Os(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZW(this,e)}reload(){return nY(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new no(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(Jn(this.auth));const e=await this.getIdToken();return await Os(this,QW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,u,c,f,h;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,A=(u=n.tenantId)!==null&&u!==void 0?u:void 0,I=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,R=(f=n.createdAt)!==null&&f!==void 0?f:void 0,M=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:P,emailVerified:F,isAnonymous:U,providerData:$,stsTokenManager:D}=n;ge(P&&D,e,"internal-error");const N=If.fromJSON(this.name,D);ge(typeof P=="string",e,"internal-error"),Pa(y,e.name),Pa(_,e.name),ge(typeof F=="boolean",e,"internal-error"),ge(typeof U=="boolean",e,"internal-error"),Pa(E,e.name),Pa(w,e.name),Pa(A,e.name),Pa(I,e.name),Pa(R,e.name),Pa(M,e.name);const V=new no({uid:P,auth:e,email:_,emailVerified:F,displayName:y,isAnonymous:U,photoURL:w,phoneNumber:E,tenantId:A,stsTokenManager:N,createdAt:R,lastLoginAt:M});return $&&Array.isArray($)&&(V.providerData=$.map(q=>Object.assign({},q))),I&&(V._redirectEventId=I),V}static async _fromIdTokenResponse(e,n,r=!1){const i=new If;i.updateFromServerResponse(n);const o=new no({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await dp(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ge(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?uq(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,u=new If;u.updateFromIdToken(r);const c=new no({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new WA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Map;function li(t){so(t instanceof Function,"Expected a class definition");let e=XN.get(t);return e?(so(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cq.type="NONE";const td=cq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class Cf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=bu(this.userKey,i.apiKey,o),this.fullPersistenceKey=bu("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gv(this.auth,{idToken:e}).catch(()=>{});return n?no._fromGetAccountInfoResponse(this.auth,n,e):null}return no._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Cf(li(td),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||li(td);const s=bu(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const h=await f._get(s);if(h){let y;if(typeof h=="string"){const _=await Gv(e,{idToken:h}).catch(()=>{});if(!_)break;y=await no._fromGetAccountInfoResponse(e,_,h)}else y=no._fromJSON(e,h);f!==o&&(u=y),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Cf(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Cf(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mq(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fq(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pq(e))return"Blackberry";if(gq(e))return"Webos";if(dq(e))return"Safari";if((e.includes("chrome/")||hq(e))&&!e.includes("edge/"))return"Chrome";if(Hp(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function fq(t=Zt()){return/firefox\//i.test(t)}function dq(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hq(t=Zt()){return/crios\//i.test(t)}function mq(t=Zt()){return/iemobile/i.test(t)}function Hp(t=Zt()){return/android/i.test(t)}function pq(t=Zt()){return/blackberry/i.test(t)}function gq(t=Zt()){return/webos/i.test(t)}function Kp(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sY(t=Zt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function aY(t=Zt()){var e;return Kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lY(){return JU()&&document.documentMode===10}function yq(t=Zt()){return Kp(t)||Hp(t)||gq(t)||pq(t)||/windows phone/i.test(t)||mq(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t,e=[]){let n;switch(t){case"Browser":n=ZN(Zt());break;case"Worker":n=`${ZN(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ll}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cY(t,e={}){return ln(t,"GET","/v2/passwordPolicy",an(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY=6;class dY{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:fY,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ek(this),this.idTokenSubscription=new ek(this),this.beforeStateQueue=new uY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=li(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Cf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gv(this,{idToken:e}),r=await no._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(Jn(this));const n=e?Ue(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(Jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(Jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cY(this),n=new dY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oY(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&li(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Cf.create(this,[li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&zW(`Error while retrieving App Check token: ${n.error}`),n?.token}}function en(t){return Ue(t)}class ek{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZU(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mY(t){Wp=t}function LC(t){return Wp.loadJS(t)}function pY(){return Wp.recaptchaV2Script}function gY(){return Wp.recaptchaEnterpriseScript}function yY(){return Wp.gapiScript}function _q(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vY=500,_Y=6e4,By=1e12;class TY{constructor(e){this.auth=e,this.counter=By,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new wY(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||By;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||By;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||By;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class EY{constructor(){this.enterprise=new bY}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bY{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wY{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ge(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=AY(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},_Y)},vY))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function AY(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const SY="recaptcha-enterprise",Fm="NO_RECAPTCHA";class Tq{constructor(e){this.type=SY,this.auth=en(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,u)=>{lq(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new aq(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(c=>{u(c)})})}function i(o,s,u){const c=window.grecaptcha;JN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(Fm)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EY().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(u=>{if(!n&&JN(window.grecaptcha))i(u,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=gY();c.length!==0&&(c+=u),LC(c).then(()=>{i(u,o,s)}).catch(f=>{s(f)})}}).catch(u=>{s(u)})})}}async function om(t,e,n,r=!1,i=!1){const o=new Tq(t);let s;if(i)s=Fm;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:s}):Object.assign(u,{captchaResponse:s}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ga(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await om(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await om(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(u)});else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){const u=await om(t,e,n);return r(t,u).catch(async c=>{var f;if(((f=t._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await om(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const u=await om(t,e,n,!1,!0);return r(t,u)}else return Promise.reject(i+" provider is not supported.")}async function IY(t){const e=en(t),n=await lq(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new aq(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new Tq(e).verify()}function CY(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(li);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function xY(t,e,n){const r=en(t);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=Eq(e),{host:s,port:u}=RY(e),c=u===null?"":`:${u}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(Wa(f,r.config.emulator)&&Wa(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,vd(s)?(HU(`${o}//${s}${c}`),KU("Auth",!0)):i||PY()}function Eq(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RY(t){const e=Eq(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:tk(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:tk(s)}}}function tk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oo("not implemented")}_getIdTokenResponse(e){return Oo("not implemented")}_linkToIdToken(e,n){return Oo("not implemented")}_getReauthenticationResolver(e){return Oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bq(t,e){return ln(t,"POST","/v1/accounts:resetPassword",an(t,e))}async function MY(t,e){return ln(t,"POST","/v1/accounts:update",e)}async function DY(t,e){return ln(t,"POST","/v1/accounts:signUp",e)}async function NY(t,e){return ln(t,"POST","/v1/accounts:update",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kY(t,e){return js(t,"POST","/v1/accounts:signInWithPassword",an(t,e))}async function d0(t,e){return ln(t,"POST","/v1/accounts:sendOobCode",an(t,e))}async function OY(t,e){return d0(t,e)}async function VY(t,e){return d0(t,e)}async function LY(t,e){return d0(t,e)}async function UY(t,e){return d0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FY(t,e){return js(t,"POST","/v1/accounts:signInWithEmailLink",an(t,e))}async function BY(t,e){return js(t,"POST","/v1/accounts:signInWithEmailLink",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends Rd{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new hp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ga(e,n,"signInWithPassword",kY,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return FY(e,{email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ga(e,r,"signUpPassword",DY,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return BY(e,{idToken:n,email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t,e){return js(t,"POST","/v1/accounts:signInWithIdp",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qY="http://localhost";class Ko extends Rd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=DC(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Ko(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Ps(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ps(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ps(e,n)}buildRequest(){const e={requestUri:qY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_d(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e){return ln(t,"POST","/v1/accounts:sendVerificationCode",an(t,e))}async function zY(t,e){return js(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,e))}async function $Y(t,e){const n=await js(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,e));if(n.temporaryProof)throw wm(t,"account-exists-with-different-credential",n);return n}const GY={USER_NOT_FOUND:"user-not-found"};async function jY(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return js(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,n),GY)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Rd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new wu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new wu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return zY(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return $Y(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return jY(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new wu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KY(t){const e=Tf(ym(t)).link,n=e?Tf(ym(e)).deep_link_id:null,r=Tf(ym(t)).deep_link_id;return(r?Tf(ym(r)).link:null)||r||n||e||t}class h0{constructor(e){var n,r,i,o,s,u;const c=Tf(ym(e)),f=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,y=HY((i=c.mode)!==null&&i!==void 0?i:null);ge(f&&h&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=KY(e);try{return new h0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,n){return hp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=h0.parseLink(n);return ge(r,"argument-error"),hp._fromEmailAndCode(e,r.code,r.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xf extends Pd{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ge("providerId"in n&&"signInMethod"in n,"argument-error"),Ko._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ge(e.idToken||e.accessToken,"argument-error"),Ko._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:u}=e;if(!r&&!i&&!n&&!o||!u)return null;try{return new xf(u)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Pd{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ro.credential(e.oauthAccessToken)}catch{return null}}}Ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Pd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Po.credential(n,r)}catch{return null}}}Po.GOOGLE_SIGN_IN_METHOD="google.com";Po.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Pd{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.GITHUB_SIGN_IN_METHOD="github.com";Mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WY="http://localhost";class nd extends Rd{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ps(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ps(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ps(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new nd(r,o)}static _create(e,n){return new nd(e,n)}buildRequest(){return{requestUri:WY,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YY="saml.";class jv extends Hs{constructor(e){ge(e.startsWith(YY),"argument-error"),super(e)}static credentialFromResult(e){return jv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return jv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=nd.fromJSON(e);return ge(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return nd._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Pd{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Do.credential(n,r)}catch{return null}}}Do.TWITTER_SIGN_IN_METHOD="twitter.com";Do.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wq(t,e){return js(t,"POST","/v1/accounts:signUp",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await no._fromIdTokenResponse(e,r,i),s=rk(r);return new Bi({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=rk(r);return new Bi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function rk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JY(t){var e;if(Kt(t.app))return Promise.reject(Jn(t));const n=en(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Bi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await wq(n,{returnSecureToken:!0}),i=await Bi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends Dr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hv.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hv(e,n,r,i)}}function Aq(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Hv._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QY(t,e){const n=Ue(t);await m0(!0,n,e);const{providerUserInfo:r}=await XW(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=Sq(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function UC(t,e,n=!1){const r=await Os(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bi._forOperation(t,"link",r)}async function m0(t,e,n){await dp(e);const r=Sq(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";ge(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq(t,e,n=!1){const{auth:r}=t;if(Kt(r.app))return Promise.reject(Jn(r));const i="reauthenticate";try{const o=await Os(t,Aq(r,i,e,t),n);ge(o.idToken,r,"internal-error");const s=f0(o.idToken);ge(s,r,"internal-error");const{sub:u}=s;return ge(t.uid===u,r,"user-mismatch"),Bi._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&fr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cq(t,e,n=!1){if(Kt(t.app))return Promise.reject(Jn(t));const r="signIn",i=await Aq(t,r,e),o=await Bi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function p0(t,e){return Cq(en(t),e)}async function xq(t,e){const n=Ue(t);return await m0(!1,n,e.providerId),UC(n,e)}async function Rq(t,e){return Iq(Ue(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XY(t,e){return js(t,"POST","/v1/accounts:signInWithCustomToken",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZY(t,e){if(Kt(t.app))return Promise.reject(Jn(t));const n=en(t),r=await XY(n,{token:e,returnSecureToken:!0}),i=await Bi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?FC._fromServerResponse(e,n):"totpInfo"in n?BC._fromServerResponse(e,n):fr(e,"internal-error")}}class FC extends Yp{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new FC(n)}}class BC extends Yp{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new BC(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t,e,n){var r;ge(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ge(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ge(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ge(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ge(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t){const e=en(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eJ(t,e,n){const r=en(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&g0(r,i,n),await Ga(r,i,"getOobCode",VY,"EMAIL_PASSWORD_PROVIDER")}async function tJ(t,e,n){await bq(Ue(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qC(t),r})}async function nJ(t,e){await NY(Ue(t),{oobCode:e})}async function Pq(t,e){const n=Ue(t),r=await bq(n,{oobCode:e}),i=r.requestType;switch(ge(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ge(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ge(r.mfaInfo,n,"internal-error");default:ge(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Yp._fromServerResponse(en(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function rJ(t,e){const{data:n}=await Pq(Ue(t),e);return n.email}async function iJ(t,e,n){if(Kt(t.app))return Promise.reject(Jn(t));const r=en(t),s=await Ga(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wq,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&qC(t),c}),u=await Bi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(u.user),u}function oJ(t,e,n){return Kt(t.app)?Promise.reject(Jn(t)):p0(Ue(t),ml.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sJ(t,e,n){const r=en(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,u){ge(u.handleCodeInApp,r,"argument-error"),u&&g0(r,s,u)}o(i,n),await Ga(r,i,"getOobCode",LY,"EMAIL_PASSWORD_PROVIDER")}function aJ(t,e){const n=h0.parseLink(e);return n?.operation==="EMAIL_SIGNIN"}async function lJ(t,e,n){if(Kt(t.app))return Promise.reject(Jn(t));const r=Ue(t),i=ml.credentialWithLink(e,n||fp());return ge(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),p0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uJ(t,e){return ln(t,"POST","/v1/accounts:createAuthUri",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cJ(t,e){const n=OC()?fp():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await uJ(Ue(t),r);return i||[]}async function fJ(t,e){const n=Ue(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&g0(n.auth,i,e);const{email:o}=await OY(n.auth,i);o!==t.email&&await t.reload()}async function dJ(t,e,n){const r=Ue(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&g0(r.auth,o,n);const{email:s}=await UY(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hJ(t,e){return ln(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mJ(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ue(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Os(r,hJ(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function pJ(t,e){const n=Ue(t);return Kt(n.auth.app)?Promise.reject(Jn(n.auth)):Mq(n,e,null)}function gJ(t,e){return Mq(Ue(t),null,e)}async function Mq(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await Os(t,MY(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yJ(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&t?.idToken){const s=(n=(e=f0(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(s){const u=s!=="anonymous"&&s!=="custom"?s:null;return new Rf(o,u)}}if(!r)return null;switch(r){case"facebook.com":return new vJ(o,i);case"github.com":return new _J(o,i);case"google.com":return new TJ(o,i);case"twitter.com":return new EJ(o,i,t.screenName||null);case"custom":case"anonymous":return new Rf(o,null);default:return new Rf(o,r,i)}}class Rf{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class Dq extends Rf{constructor(e,n,r,i){super(e,n,r),this.username=i}}class vJ extends Rf{constructor(e,n){super(e,"facebook.com",n)}}class _J extends Dq{constructor(e,n){super(e,"github.com",n,typeof n?.login=="string"?n?.login:null)}}class TJ extends Rf{constructor(e,n){super(e,"google.com",n)}}class EJ extends Dq{constructor(e,n,r){super(e,"twitter.com",n,r)}}function bJ(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:yJ(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new gu("enroll",e,n)}static _fromMfaPendingCredential(e){return new gu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e?.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return gu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return gu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=en(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(u=>Yp._fromServerResponse(r,u));ge(i.mfaPendingCredential,r,"internal-error");const s=gu._fromMfaPendingCredential(i.mfaPendingCredential);return new zC(s,o,async u=>{const c=await u._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const f=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const h=await Bi._fromIdTokenResponse(r,n.operationType,f);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return ge(n.user,r,"internal-error"),Bi._forOperation(n.user,n.operationType,f);default:fr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function wJ(t,e){var n;const r=Ue(t),i=e;return ge(e.customData.operationType,r,"argument-error"),ge((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),zC._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t,e){return ln(t,"POST","/v2/accounts/mfaEnrollment:start",an(t,e))}function AJ(t,e){return ln(t,"POST","/v2/accounts/mfaEnrollment:finalize",an(t,e))}function SJ(t,e){return ln(t,"POST","/v2/accounts/mfaEnrollment:withdraw",an(t,e))}class $C{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Yp._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new $C(e)}async getSession(){return gu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await Os(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Os(this.user,SJ(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Ab=new WeakMap;function IJ(t){const e=Ue(t);return Ab.has(e)||Ab.set(e,$C._fromUser(e)),Ab.get(e)}const Kv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kv,"1"),this.storage.removeItem(Kv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CJ=1e3,xJ=10;class kq extends Nq{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yq(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);lY()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xJ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kq.type="LOCAL";const GC=kq;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq extends Nq{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Oq.type="SESSION";const Uu=Oq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new y0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async f=>f(n.origin,o)),c=await RJ(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}y0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const f=Jp("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(y){const _=y;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function MJ(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function DJ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NJ(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kJ(){return jC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq="firebaseLocalStorageDb",OJ=1,Wv="firebaseLocalStorage",Lq="fbase_key";class Qp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function v0(t,e){return t.transaction([Wv],e?"readwrite":"readonly").objectStore(Wv)}function VJ(){const t=indexedDB.deleteDatabase(Vq);return new Qp(t).toPromise()}function YA(){const t=indexedDB.open(Vq,OJ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wv,{keyPath:Lq})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wv)?e(r):(r.close(),await VJ(),e(await YA()))})})}async function ok(t,e,n){const r=v0(t,!0).put({[Lq]:e,value:n});return new Qp(r).toPromise()}async function LJ(t,e){const n=v0(t,!1).get(e),r=await new Qp(n).toPromise();return r===void 0?null:r.value}function sk(t,e){const n=v0(t,!0).delete(e);return new Qp(n).toPromise()}const UJ=800,FJ=3;class Uq{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await YA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FJ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=y0._getInstance(kJ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DJ(),!this.activeServiceWorker)return;this.sender=new PJ(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await YA();return await ok(e,Kv,"1"),await sk(e,Kv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ok(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LJ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=v0(i,!1).getAll();return new Qp(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uq.type="LOCAL";const mp=Uq;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t,e){return ln(t,"POST","/v2/accounts/mfaSignIn:start",an(t,e))}function BJ(t,e){return ln(t,"POST","/v2/accounts/mfaSignIn:finalize",an(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=_q("rcb"),qJ=new jp(3e4,6e4);class zJ{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=In().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ge($J(n),e,"argument-error"),this.shouldResolveImmediately(n)&&YN(In().grecaptcha)?Promise.resolve(In().grecaptcha):new Promise((r,i)=>{const o=In().setTimeout(()=>{i(Un(e,"network-request-failed"))},qJ.get());In()[Sb]=()=>{In().clearTimeout(o),delete In()[Sb];const u=In().grecaptcha;if(!u||!YN(u)){i(Un(e,"internal-error"));return}const c=u.render;u.render=(f,h)=>{const y=c(f,h);return this.counter++,y},this.hostLanguage=n,r(u)};const s=`${pY()}?${_d({onload:Sb,render:"explicit",hl:n})}`;LC(s).catch(()=>{clearTimeout(o),i(Un(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=In().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function $J(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class GJ{async load(e){return new TY(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="recaptcha",jJ={theme:"light",type:"image"};let HJ=class{constructor(e,n,r=Object.assign({},jJ)){this.parameters=r,this.type=Bm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=en(e),this.isInvisible=this.parameters.size==="invisible",ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;ge(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GJ:new zJ,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=In()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ge(OC()&&!jC(),this.auth,"internal-error"),await KJ(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await JW(this.auth);ge(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function KJ(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=wu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function WJ(t,e,n){if(Kt(t.app))return Promise.reject(Jn(t));const r=en(t),i=await _0(r,e,Ue(n));return new HC(i,o=>p0(r,o))}async function YJ(t,e,n){const r=Ue(t);await m0(!1,r,"phone");const i=await _0(r.auth,e,Ue(n));return new HC(i,o=>xq(r,o))}async function JJ(t,e,n){const r=Ue(t);if(Kt(r.auth.app))return Promise.reject(Jn(r.auth));const i=await _0(r.auth,e,Ue(n));return new HC(i,o=>Rq(r,o))}async function _0(t,e,n){var r;if(!t._getRecaptchaConfig())try{await IY(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){ge(o.type==="enroll",t,"internal-error");const s={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ga(t,s,"mfaSmsEnrollment",async(h,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===Fm){ge(n?.type===Bm,h,"argument-error");const _=await Ib(h,y,n);return ik(h,_)}return ik(h,y)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{ge(o.type==="signin",t,"internal-error");const s=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;ge(s,t,"missing-multi-factor-info");const u={mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ga(t,u,"mfaSmsSignIn",async(y,_)=>{if(_.phoneSignInInfo.captchaResponse===Fm){ge(n?.type===Bm,y,"argument-error");const E=await Ib(y,_,n);return ak(y,E)}return ak(y,_)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ga(t,o,"sendVerificationCode",async(f,h)=>{if(h.captchaResponse===Fm){ge(n?.type===Bm,f,"argument-error");const y=await Ib(f,h,n);return nk(f,y)}return nk(f,h)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{n?._reset()}}async function QJ(t,e){const n=Ue(t);if(Kt(n.auth.app))return Promise.reject(Jn(n.auth));await UC(n,e)}async function Ib(t,e,n){ge(n.type===Bm,t,"argument-error");const r=await n.verify();ge(typeof r=="string",t,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,u=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:u,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,u=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:u}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu=class gv{constructor(e){this.providerId=gv.PROVIDER_ID,this.auth=en(e)}verifyPhoneNumber(e,n){return _0(this.auth,e,Ue(n))}static credential(e,n){return wu._fromVerification(e,n)}static credentialFromResult(e){const n=e;return gv.credentialFromTaggedObject(n)}static credentialFromError(e){return gv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?wu._fromTokenResponse(n,r):null}};Fu.PROVIDER_ID="phone";Fu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e){return e?li(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC extends Rd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ps(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ps(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ps(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XJ(t){return Cq(t.auth,new KC(t),t.bypassAuthState)}function ZJ(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),Iq(n,new KC(t),t.bypassAuthState)}async function eQ(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),UC(n,new KC(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XJ;case"linkViaPopup":case"linkViaRedirect":return eQ;case"reauthViaPopup":case"reauthViaRedirect":return ZJ;default:fr(this.auth,"internal-error")}}resolve(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQ=new jp(2e3,1e4);async function nQ(t,e,n){if(Kt(t.app))return Promise.reject(Un(t,"operation-not-supported-in-this-environment"));const r=en(t);xd(t,e,Hs);const i=ec(r,n);return new Is(r,"signInViaPopup",e,i).executeNotNull()}async function rQ(t,e,n){const r=Ue(t);if(Kt(r.auth.app))return Promise.reject(Un(r.auth,"operation-not-supported-in-this-environment"));xd(r.auth,e,Hs);const i=ec(r.auth,n);return new Is(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function iQ(t,e,n){const r=Ue(t);xd(r.auth,e,Hs);const i=ec(r.auth,n);return new Is(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Is extends Fq{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Is.currentPopupAction&&Is.currentPopupAction.cancel(),Is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){so(this.filter.length===1,"Popup operations only handle one event");const e=Jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tQ.get())};e()}}Is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQ="pendingRedirect",qm=new Map;class sQ extends Fq{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qm.get(this.auth._key());if(!e){try{const r=await aQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qm.set(this.auth._key(),e)}return this.bypassAuthState||qm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aQ(t,e){const n=qq(e),r=Bq(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function WC(t,e){return Bq(t)._set(qq(e),"true")}function lQ(){qm.clear()}function YC(t,e){qm.set(t._key(),e)}function Bq(t){return li(t._redirectPersistence)}function qq(t){return bu(oQ,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uQ(t,e,n){return cQ(t,e,n)}async function cQ(t,e,n){if(Kt(t.app))return Promise.reject(Jn(t));const r=en(t);xd(t,e,Hs),await r._initializationPromise;const i=ec(r,n);return await WC(i,r),i._openRedirect(r,e,"signInViaRedirect")}function fQ(t,e,n){return dQ(t,e,n)}async function dQ(t,e,n){const r=Ue(t);if(xd(r.auth,e,Hs),Kt(r.auth.app))return Promise.reject(Jn(r.auth));await r.auth._initializationPromise;const i=ec(r.auth,n);await WC(i,r.auth);const o=await zq(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function hQ(t,e,n){return mQ(t,e,n)}async function mQ(t,e,n){const r=Ue(t);xd(r.auth,e,Hs),await r.auth._initializationPromise;const i=ec(r.auth,n);await m0(!1,r,e.providerId),await WC(i,r.auth);const o=await zq(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function pQ(t,e){return await en(t)._initializationPromise,T0(t,e,!1)}async function T0(t,e,n=!1){if(Kt(t.app))return Promise.reject(Jn(t));const r=en(t),i=ec(r,e),s=await new sQ(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function zq(t){const e=Jp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ=10*60*1e3;class $q{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yQ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Gq(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(lk(e))}saveEventToCache(e){this.cachedEventUids.add(lk(e)),this.lastProcessedEventTime=Date.now()}}function lk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gq({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function yQ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gq(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jq(t,e={}){return ln(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_Q=/^https?/;async function TQ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jq(t);for(const n of e)try{if(EQ(n))return}catch{}fr(t,"unauthorized-domain")}function EQ(t){const e=fp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!_Q.test(n))return!1;if(vQ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ=new jp(3e4,6e4);function uk(){const t=In().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wQ(t){return new Promise((e,n)=>{var r,i,o;function s(){uk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uk(),n(Un(t,"network-request-failed"))},timeout:bQ.get()})}if(!((i=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=In().gapi)===null||o===void 0)&&o.load)s();else{const u=_q("iframefcb");return In()[u]=()=>{gapi.load?s():n(Un(t,"network-request-failed"))},LC(`${yY()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw yv=null,e})}let yv=null;function AQ(t){return yv=yv||wQ(t),yv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ=new jp(5e3,15e3),IQ="__/auth/iframe",CQ="emulator/auth/iframe",xQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PQ(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?VC(e,CQ):`https://${t.config.authDomain}/${IQ}`,r={apiKey:e.apiKey,appName:t.name,v:ll},i=RQ.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${_d(r).slice(1)}`}async function MQ(t){const e=await AQ(t),n=In().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:PQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xQ,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Un(t,"network-request-failed"),u=In().setTimeout(()=>{o(s)},SQ.get());function c(){In().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NQ=500,kQ=600,OQ="_blank",VQ="http://localhost";class ck{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LQ(t,e,n,r=NQ,i=kQ){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},DQ),{width:r.toString(),height:i.toString(),top:o,left:s}),f=Zt().toLowerCase();n&&(u=hq(f)?OQ:n),fq(f)&&(e=e||VQ,c.scrollbars="yes");const h=Object.entries(c).reduce((_,[E,w])=>`${_}${E}=${w},`,"");if(aY(f)&&u!=="_self")return UQ(e||"",u),new ck(null);const y=window.open(e||"",u,h);ge(y,t,"popup-blocked");try{y.focus()}catch{}return new ck(y)}function UQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FQ="__/auth/handler",BQ="emulator/auth/handler",qQ=encodeURIComponent("fac");async function JA(t,e,n,r,i,o){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ll,eventId:i};if(e instanceof Hs){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",WG(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,y]of Object.entries(o||{}))s[h]=y}if(e instanceof Pd){const h=e.getScopes().filter(y=>y!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const u=s;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const c=await t._getAppCheckToken(),f=c?`#${qQ}=${encodeURIComponent(c)}`:"";return`${zQ(t)}?${_d(u).slice(1)}${f}`}function zQ({config:t}){return t.emulator?VC(t,BQ):`https://${t.authDomain}/${FQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="webStorageSupport";class $Q{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uu,this._completeRedirectFn=T0,this._overrideRedirectResult=YC}async _openPopup(e,n,r,i){var o;so((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await JA(e,n,r,fp(),i);return LQ(e,s,Jp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await JA(e,n,r,fp(),i);return MJ(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(so(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MQ(e),r=new $q(e);return n.register("authEvent",i=>(ge(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cb,{type:Cb},i=>{var o;const s=(o=i?.[0])===null||o===void 0?void 0:o[Cb];s!==void 0&&n(!!s),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TQ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yq()||dq()||Kp()}}const GQ=$Q;class jQ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Oo("unexpected MultiFactorSessionType")}}}class JC extends jQ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new JC(e)}_finalizeEnroll(e,n,r){return AJ(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return BJ(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Hq{constructor(){}static assertion(e){return JC._fromCredential(e)}}Hq.FACTOR_ID="phone";var fk="@firebase/auth",dk="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WQ(t){Qa(new Go("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;ge(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vq(t)},f=new hY(r,i,o,c);return CY(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qa(new Go("auth-internal",e=>{const n=en(e.getProvider("auth").getImmediate());return(r=>new HQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(fk,dk,KQ(t)),ro(fk,dk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ=5*60;VG("authIdTokenMaxAge");function JQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mY({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Un("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",JQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WQ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=2e3;async function XQ(t,e,n){var r;const{BuildInfo:i}=Bu();so(e.sessionId,"AuthEvent did not contain a session ID");const o=await rX(e.sessionId),s={};return Kp()?s.ibi=i.packageName:Hp()?s.apn=i.packageName:fr(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,JA(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,s)}async function ZQ(t){const{BuildInfo:e}=Bu(),n={};Kp()?n.iosBundleId=e.packageName:Hp()?n.androidPackageName=e.packageName:fr(t,"operation-not-supported-in-this-environment"),await jq(t,n)}function eX(t){const{cordova:e}=Bu();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,sY()?"_blank":"_system","location=yes"),n(i)})})}async function tX(t,e,n){const{cordova:r}=Bu();let i=()=>{};try{await new Promise((o,s)=>{let u=null;function c(){var y;o();const _=(y=r.plugins.browsertab)===null||y===void 0?void 0:y.close;typeof _=="function"&&_(),typeof n?.close=="function"&&n.close()}function f(){u||(u=window.setTimeout(()=>{s(Un(t,"redirect-cancelled-by-user"))},QQ))}function h(){document?.visibilityState==="visible"&&f()}e.addPassiveListener(c),document.addEventListener("resume",f,!1),Hp()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",h,!1),u&&window.clearTimeout(u)}})}finally{i()}}function nX(t){var e,n,r,i,o,s,u,c,f,h;const y=Bu();ge(typeof((e=y?.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ge(typeof((n=y?.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ge(typeof((o=(i=(r=y?.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ge(typeof((c=(u=(s=y?.cordova)===null||s===void 0?void 0:s.plugins)===null||u===void 0?void 0:u.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ge(typeof((h=(f=y?.cordova)===null||f===void 0?void 0:f.InAppBrowser)===null||h===void 0?void 0:h.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function rX(t){const e=iX(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function iX(t){if(so(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oX=20;class sX extends $q{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function aX(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:cX(),postBody:null,tenantId:t.tenantId,error:Un(t,"no-auth-event")}}function lX(t,e){return QA()._set(XA(t),e)}async function hk(t){const e=await QA()._get(XA(t));return e&&await QA()._remove(XA(t)),e}function uX(t,e){var n,r;const i=dX(e);if(i.includes("/__/auth/callback")){const o=vv(i),s=o.firebaseError?fX(decodeURIComponent(o.firebaseError)):null,u=(r=(n=s?.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],c=u?Un(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function cX(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<oX;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function QA(){return li(GC)}function XA(t){return bu("authEvent",t.config.apiKey,t.name)}function fX(t){try{return JSON.parse(t)}catch{return null}}function dX(t){const e=vv(t),n=e.link?decodeURIComponent(e.link):void 0,r=vv(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return vv(i).link||i||r||n||t}function vv(t){if(!t?.includes("?"))return{};const[e,...n]=t.split("?");return Tf(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hX=500;class mX{constructor(){this._redirectPersistence=Uu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=T0,this._overrideRedirectResult=YC}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new sX(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){fr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){nX(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),lQ(),await this._originValidation(e);const s=aX(e,r,i);await lX(e,s);const u=await XQ(e,s,n),c=await eX(u);return tX(e,o,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZQ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=Bu(),s=setTimeout(async()=>{await hk(e),n.onEvent(mk())},hX),u=async h=>{clearTimeout(s);const y=await hk(e);let _=null;y&&h?.url&&(_=uX(y,h.url)),n.onEvent(_||mk())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,u);const c=i,f=`${o.packageName.toLowerCase()}://`;Bu().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(f)&&u({url:h}),typeof c=="function")try{c(h)}catch(y){console.error(y)}}}}const pX=mX;function mk(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Un("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gX(t,e){en(t)._logFramework(e)}var yX="@firebase/auth-compat",vX="0.5.28";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _X=1e3;function zm(){var t;return((t=self?.location)===null||t===void 0?void 0:t.protocol)||null}function TX(){return zm()==="http:"||zm()==="https:"}function Kq(t=Zt()){return!!((zm()==="file:"||zm()==="ionic:"||zm()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function EX(){return yI()||L_()}function bX(){return JU()&&document?.documentMode===11}function wX(t=Zt()){return/Edge\/\d+/.test(t)}function AX(t=Zt()){return bX()||wX(t)}function Wq(){try{const t=self.localStorage,e=Jp();if(t)return t.setItem(e,"1"),t.removeItem(e),AX()?Hm():!0}catch{return QC()&&Hm()}return!1}function QC(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xb(){return(TX()||YU()||Kq())&&!EX()&&Wq()&&!QC()}function Yq(){return Kq()&&typeof document<"u"}async function SX(){return Yq()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},_X);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function IX(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi={LOCAL:"local",NONE:"none",SESSION:"session"},sm=ge,Jq="persistence";function CX(t,e){if(sm(Object.values(oi).includes(e),t,"invalid-persistence-type"),yI()){sm(e!==oi.SESSION,t,"unsupported-persistence-type");return}if(L_()){sm(e===oi.NONE,t,"unsupported-persistence-type");return}if(QC()){sm(e===oi.NONE||e===oi.LOCAL&&Hm(),t,"unsupported-persistence-type");return}sm(e===oi.NONE||Wq(),t,"unsupported-persistence-type")}async function ZA(t){await t._initializationPromise;const e=Qq(),n=bu(Jq,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function xX(t,e){const n=Qq();if(!n)return[];const r=bu(Jq,t,e);switch(n.getItem(r)){case oi.NONE:return[td];case oi.LOCAL:return[mp,Uu];case oi.SESSION:return[Uu];default:return[]}}function Qq(){var t;try{return((t=IX())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX=ge;class Fa{constructor(){this.browserResolver=li(GQ),this.cordovaResolver=li(pX),this.underlyingResolver=null,this._redirectPersistence=Uu,this._completeRedirectFn=T0,this._overrideRedirectResult=YC}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Yq()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return RX(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await SX();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t){return t.unwrap()}function PX(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MX(t){return Zq(t)}function DX(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const i=e;i.resolver=new NX(t,wJ(t,e))}else if(r){const i=Zq(e),o=e;i&&(o.credential=i,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function Zq(t){const{_tokenResponse:e}=t instanceof Dr?t.customData:t;if(!e)return null;if(!(t instanceof Dr)&&"temporaryProof"in e&&"phoneNumber"in e)return Fu.credentialFromResult(t);const n=e.providerId;if(!n||n===im.PASSWORD)return null;let r;switch(n){case im.GOOGLE:r=Po;break;case im.FACEBOOK:r=Ro;break;case im.GITHUB:r=Mo;break;case im.TWITTER:r=Do;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:u,nonce:c}=e;return!o&&!s&&!i&&!u?null:u?n.startsWith("saml.")?nd._create(n,u):Ko._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:i,accessToken:o}):new xf(n).credential({idToken:i,accessToken:o,rawNonce:c})}return t instanceof Dr?r.credentialFromError(t):r.credentialFromResult(t)}function Br(t,e){return e.catch(n=>{throw n instanceof Dr&&DX(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:MX(n),additionalUserInfo:bJ(n),user:Cs.getOrCreate(i)}})}async function eS(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Br(t,n.confirm(r))}}class NX{constructor(e,n){this.resolver=n,this.auth=PX(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Br(Xq(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._delegate=e,this.multiFactor=IJ(e)}static getOrCreate(e){return Cs.USER_MAP.has(e)||Cs.USER_MAP.set(e,new Cs(e)),Cs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Br(this.auth,xq(this._delegate,e))}async linkWithPhoneNumber(e,n){return eS(this.auth,YJ(this._delegate,e,n))}async linkWithPopup(e){return Br(this.auth,iQ(this._delegate,e,Fa))}async linkWithRedirect(e){return await ZA(en(this.auth)),hQ(this._delegate,e,Fa)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Br(this.auth,Rq(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return eS(this.auth,JJ(this._delegate,e,n))}reauthenticateWithPopup(e){return Br(this.auth,rQ(this._delegate,e,Fa))}async reauthenticateWithRedirect(e){return await ZA(en(this.auth)),fQ(this._delegate,e,Fa)}sendEmailVerification(e){return fJ(this._delegate,e)}async unlink(e){return await QY(this._delegate,e),this}updateEmail(e){return pJ(this._delegate,e)}updatePassword(e){return gJ(this._delegate,e)}updatePhoneNumber(e){return QJ(this._delegate,e)}updateProfile(e){return mJ(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return dJ(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cs.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=ge;class tS{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;am(r,"invalid-api-key",{appName:e.name}),am(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Fa:void 0;this._delegate=n.initialize({options:{persistence:kX(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(BW),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){xY(this._delegate,e,n)}applyActionCode(e){return nJ(this._delegate,e)}checkActionCode(e){return Pq(this._delegate,e)}confirmPasswordReset(e,n){return tJ(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Br(this._delegate,iJ(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return cJ(this._delegate,e)}isSignInWithEmailLink(e){return aJ(this._delegate,e)}async getRedirectResult(){am(xb(),this._delegate,"operation-not-supported-in-this-environment");const e=await pQ(this._delegate,Fa);return e?Br(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){gX(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=pk(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=pk(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return sJ(this._delegate,e,n)}sendPasswordResetEmail(e,n){return eJ(this._delegate,e,n||void 0)}async setPersistence(e){CX(this._delegate,e);let n;switch(e){case oi.SESSION:n=Uu;break;case oi.LOCAL:n=await li(mp)._isAvailable()?mp:GC;break;case oi.NONE:n=td;break;default:return fr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Br(this._delegate,JY(this._delegate))}signInWithCredential(e){return Br(this._delegate,p0(this._delegate,e))}signInWithCustomToken(e){return Br(this._delegate,ZY(this._delegate,e))}signInWithEmailAndPassword(e,n){return Br(this._delegate,oJ(this._delegate,e,n))}signInWithEmailLink(e,n){return Br(this._delegate,lJ(this._delegate,e,n))}signInWithPhoneNumber(e,n){return eS(this._delegate,WJ(this._delegate,e,n))}async signInWithPopup(e){return am(xb(),this._delegate,"operation-not-supported-in-this-environment"),Br(this._delegate,nQ(this._delegate,e,Fa))}async signInWithRedirect(e){return am(xb(),this._delegate,"operation-not-supported-in-this-environment"),await ZA(this._delegate),uQ(this._delegate,e,Fa)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return rJ(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}tS.Persistence=oi;function pk(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&Cs.getOrCreate(s)),error:e,complete:n}}function kX(t,e){const n=xX(t,e);if(typeof self<"u"&&!n.includes(mp)&&n.push(mp),typeof window<"u")for(const r of[GC,Uu])n.includes(r)||n.push(r);return n.includes(td)||n.push(td),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{static credential(e,n){return Fu.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Fu(Xq(jo.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}XC.PHONE_SIGN_IN_METHOD=Fu.PHONE_SIGN_IN_METHOD;XC.PROVIDER_ID=Fu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX=ge;class VX{constructor(e,n,r=jo.app()){var i;OX((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new HJ(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX="auth-compat";function UX(t){t.INTERNAL.registerComponent(new Go(LX,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new tS(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lf.EMAIL_SIGNIN,PASSWORD_RESET:lf.PASSWORD_RESET,RECOVER_EMAIL:lf.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:lf.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:lf.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:lf.VERIFY_EMAIL}},EmailAuthProvider:ml,FacebookAuthProvider:Ro,GithubAuthProvider:Mo,GoogleAuthProvider:Po,OAuthProvider:xf,SAMLAuthProvider:jv,PhoneAuthProvider:XC,PhoneMultiFactorGenerator:Hq,RecaptchaVerifier:VX,TwitterAuthProvider:Do,Auth:tS,AuthCredential:Rd,Error:Dr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(yX,vX)}UX(jo);const e3={apiKey:"AIzaSyCm1a_eHsMFF7a3c_eUqVrDUK9KzJjn6X8",authDomain:"attendance-app-7d7bc.firebaseapp.com",projectId:"attendance-app-7d7bc",storageBucket:"attendance-app-7d7bc.firebasestorage.app",messagingSenderId:"424371442032",appId:"1:424371442032:web:b304c2be002d7f1c41ffb5",measurementId:"G-TDH0WSCN8L"};e3.projectId==="your-project-id"&&console.warn("Firebase configuration is using placeholder values. Please replace them in services/firebase.ts with your actual project credentials.");jo.apps.length||jo.initializeApp(e3);const uf=jo.firestore(),nS=jo.auth(),gk=()=>new Date().toISOString().split("T")[0],FX=()=>{const[t,e]=O.useState(!0),[n,r]=O.useState([]),[i,o]=O.useState({});O.useEffect(()=>{e(!0);const I=uf.collection("members").orderBy("createdAt","desc").onSnapshot(R=>{const M=[];R.forEach(P=>{const F=P.data(),U=F.createdAt?.toDate().toISOString()??new Date().toISOString();M.push({id:P.id,...F,createdAt:U})}),r(M),R.empty&&e(!1)},R=>{console.error("Error fetching members:",R),e(!1)});return()=>I()},[]),O.useEffect(()=>{if(n.length===0){o({}),t&&e(!1);return}const w=new Date;w.setDate(w.getDate()-30);const A=w.toISOString().split("T")[0],M=uf.collection("attendance").where("date",">=",A).onSnapshot(P=>{const F={};n.forEach(U=>F[U.id]={}),P.forEach(U=>{const $=U.data();if($.memberId&&F.hasOwnProperty($.memberId)){let D=$.status;D==="leave"&&(D=st.HalfDay),F[$.memberId][$.date]=D}}),o(F),e(!1)},P=>{console.error("Error fetching attendance:",P),e(!1)});return()=>M()},[n]);const s=O.useCallback(async(w,A)=>{await uf.collection("members").add({name:w,instrument:A,createdAt:jo.firestore.FieldValue.serverTimestamp()})},[]),u=O.useCallback(async(w,A,I)=>{await uf.collection("members").doc(w).update({name:A,instrument:I})},[]),c=O.useCallback(async w=>{const A=gk(),I=uf.collection("attendance"),R=uf.batch(),M=Object.entries(w).map(async([P,F])=>{const $=await I.where("memberId","==",P).where("date","==",A).get();if($.empty){const D=I.doc();R.set(D,{memberId:P,date:A,status:F})}else{const D=$.docs[0].ref;R.update(D,{status:F})}});await Promise.all(M),await R.commit()},[]),f=O.useCallback(w=>n.find(A=>A.id===w),[n]),h=O.useCallback(w=>i[w]||{},[i]),y=O.useCallback(()=>{const w=[],A=new Date;for(let I=6;I>=0;I--){const R=new Date(A);R.setDate(A.getDate()-I);const M=R.toISOString().split("T")[0],P=R.toLocaleDateString("en-US",{weekday:"short"});let F=0,U=0;n.forEach(D=>{const N=i[D.id]?.[M];N===st.Present?F++:N===st.HalfDay&&U++});const $=n.length-F-U;w.push({name:P,present:F,absent:$,halfDay:U})}return w},[n,i]),_=O.useCallback(()=>{const w=gk();let A=0,I=0;const R=n.length;n.forEach(P=>{const F=i[P.id]?.[w];F===st.Present?A++:F===st.HalfDay&&I++});const M=R-A-I;return{present:A,absent:M,onHalfDay:I,total:R}},[n,i]),E=O.useCallback(w=>{const A={[st.Present]:"P",[st.Absent]:"A",[st.HalfDay]:"H"},I=["Member Name","Instrument"],R=[],M=new Date;for(let F=w-1;F>=0;F--){const U=new Date(M);U.setDate(M.getDate()-F),R.push(U.toISOString().split("T")[0])}I.push(...R);const P=n.map(F=>{const U=[F.name,F.instrument],$=i[F.id]||{};return R.forEach(D=>{const N=$[D]||st.Absent,V=A[N]||"A";U.push(V)}),U.map(D=>`"${String(D).replace(/"/g,'""')}"`).join(",")});return[I.join(","),...P].join(`
`)},[n,i]);return{loading:t,members:n,attendance:i,addMember:s,updateMember:u,markBatchAttendance:c,getMemberById:f,getAttendanceByMember:h,getWeeklySummary:y,getTodaySummary:_,generateCsvReport:E}};function t3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=t3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ut(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=t3(t))&&(r&&(r+=" "),r+=e);return r}var Rb={},Pb={},yk;function BX(){return yk||(yk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e}(Pb)),Pb}var Mb={},vk;function n3(){return vk||(vk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e}(Mb)),Mb}var Db={},_k;function r3(){return _k||(_k=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e}(Db)),Db}var Nb={},Tk;function ZC(){return Tk||(Tk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let o=0,s="",u="",c=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const f=n[o];u?f==="\\"&&o+1<i?(o++,s+=n[o]):f===u?u="":s+=f:c?f==='"'||f==="'"?u=f:f==="]"?(c=!1,r.push(s),s=""):s+=f:f==="["?(c=!0,s&&(r.push(s),s="")):f==="."?s&&(r.push(s),s=""):s+=f,o++}return s&&r.push(s),r}t.toPath=e}(Nb)),Nb}var Ek;function ex(){return Ek||(Ek=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BX(),n=n3(),r=r3(),i=ZC();function o(u,c,f){if(u==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const h=u[c];return h===void 0?n.isDeepKey(c)?o(u,i.toPath(c),f):f:h}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const h=u[c];return h===void 0?f:h}default:{if(Array.isArray(c))return s(u,c,f);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const h=u[c];return h===void 0?f:h}}}function s(u,c,f){if(c.length===0)return f;let h=u;for(let y=0;y<c.length;y++){if(h==null||e.isUnsafeProperty(c[y]))return f;h=h[c[y]]}return h===void 0?f:h}t.get=o}(Rb)),Rb}var kb,bk;function qX(){return bk||(bk=1,kb=ex().get),kb}var zX=qX();const qu=lo(zX);var Ob={exports:{}},Dt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wk;function $X(){if(wk)return Dt;wk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),E=Symbol.for("react.client.reference");function w(A){if(typeof A=="object"&&A!==null){var I=A.$$typeof;switch(I){case t:switch(A=A.type,A){case n:case i:case r:case c:case f:case _:return A;default:switch(A=A&&A.$$typeof,A){case s:case u:case y:case h:return A;case o:return A;default:return I}}case e:return I}}}return Dt.ContextConsumer=o,Dt.ContextProvider=s,Dt.Element=t,Dt.ForwardRef=u,Dt.Fragment=n,Dt.Lazy=y,Dt.Memo=h,Dt.Portal=e,Dt.Profiler=i,Dt.StrictMode=r,Dt.Suspense=c,Dt.SuspenseList=f,Dt.isContextConsumer=function(A){return w(A)===o},Dt.isContextProvider=function(A){return w(A)===s},Dt.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},Dt.isForwardRef=function(A){return w(A)===u},Dt.isFragment=function(A){return w(A)===n},Dt.isLazy=function(A){return w(A)===y},Dt.isMemo=function(A){return w(A)===h},Dt.isPortal=function(A){return w(A)===e},Dt.isProfiler=function(A){return w(A)===i},Dt.isStrictMode=function(A){return w(A)===r},Dt.isSuspense=function(A){return w(A)===c},Dt.isSuspenseList=function(A){return w(A)===f},Dt.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===c||A===f||typeof A=="object"&&A!==null&&(A.$$typeof===y||A.$$typeof===h||A.$$typeof===s||A.$$typeof===o||A.$$typeof===u||A.$$typeof===E||A.getModuleId!==void 0)},Dt.typeOf=w,Dt}var Ak;function GX(){return Ak||(Ak=1,Ob.exports=$X()),Ob.exports}var jX=GX(),ui=t=>t===0?0:t>0?1:-1,qi=t=>typeof t=="number"&&t!=+t,yu=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Oe=t=>(typeof t=="number"||t instanceof Number)&&!qi(t),Wo=t=>Oe(t)||typeof t=="string",HX=0,pp=t=>{var e=++HX;return"".concat(t||"").concat(e)},ao=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Oe(e)&&typeof e!="string")return r;var o;if(yu(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return qi(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},i3=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1},cf=(t,e)=>Oe(t)&&Oe(e)?n=>t+n*(e-t):()=>e;function KX(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):qu(r,e))===n)}var Rn=t=>t===null||typeof t>"u",Xp=t=>Rn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),WX=["viewBox","children"],YX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Sk=["points","pathLength"],Vb={svg:WX,polygon:Sk,polyline:Sk},tx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],JX=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(O.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{tx.includes(i)&&(r[i]=o=>n[i](n,o))}),r},QX=(t,e,n)=>r=>(t(e,n,r),null),E0=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];tx.includes(i)&&typeof o=="function"&&(r||(r={}),r[i]=QX(o,e,n))}),r},Ik=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",Ck=null,Lb=null,o3=t=>{if(t===Ck&&Array.isArray(Lb))return Lb;var e=[];return O.Children.forEach(t,n=>{Rn(n)||(jX.isFragment(n)?e=e.concat(o3(n.props.children)):e.push(n))}),Lb=e,Ck=t,e};function nx(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>Ik(i)):r=[Ik(e)],o3(t).forEach(i=>{var o=qu(i,"type.displayName")||qu(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var XX=(t,e,n,r)=>{var i,o=(i=r&&Vb?.[r])!==null&&i!==void 0?i:[];return e.startsWith("data-")||typeof t!="function"&&(r&&o.includes(e)||YX.includes(e))||n&&tx.includes(e)},Xt=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(O.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var s;XX((s=r)===null||s===void 0?void 0:s[o],o,e,n)&&(i[o]=r[o])}),i},ZX=["children","width","height","viewBox","className","style","title","desc"];function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(null,arguments)}function eZ(t,e){if(t==null)return{};var n,r,i=tZ(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rx=O.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:u,title:c,desc:f}=t,h=eZ(t,ZX),y=o||{width:r,height:i,x:0,y:0},_=Ut("recharts-surface",s);return O.createElement("svg",rS({},Xt(h,!0,"svg"),{className:_,width:r,height:i,style:u,viewBox:"".concat(y.x," ").concat(y.y," ").concat(y.width," ").concat(y.height),ref:e}),O.createElement("title",null,c),O.createElement("desc",null,f),n)}),nZ=["children","className"];function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iS.apply(null,arguments)}function rZ(t,e){if(t==null)return{};var n,r,i=iZ(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function iZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yo=O.forwardRef((t,e)=>{var{children:n,className:r}=t,i=rZ(t,nZ),o=Ut("recharts-layer",r);return O.createElement("g",iS({className:o},Xt(i,!0),{ref:e}),n)}),s3=zU(),a3=O.createContext(null),oZ=()=>O.useContext(a3);function Lt(t){return function(){return t}}const l3=Math.cos,Yv=Math.sin,uo=Math.sqrt,Jv=Math.PI,b0=2*Jv,oS=Math.PI,sS=2*oS,ou=1e-6,sZ=sS-ou;function u3(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function aZ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return u3;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class lZ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?u3:aZ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,u=this._y1,c=r-e,f=i-n,h=s-e,y=u-n,_=h*h+y*y;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(_>ou)if(!(Math.abs(y*c-f*h)>ou)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let E=r-s,w=i-u,A=c*c+f*f,I=E*E+w*w,R=Math.sqrt(A),M=Math.sqrt(_),P=o*Math.tan((oS-Math.acos((A+_-I)/(2*R*M)))/2),F=P/M,U=P/R;Math.abs(F-1)>ou&&this._append`L${e+F*h},${n+F*y}`,this._append`A${o},${o},0,0,${+(y*E>h*w)},${this._x1=e+U*c},${this._y1=n+U*f}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),c=r*Math.sin(i),f=e+u,h=n+c,y=1^s,_=s?i-o:o-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>ou||Math.abs(this._y1-h)>ou)&&this._append`L${f},${h}`,r&&(_<0&&(_=_%sS+sS),_>sZ?this._append`A${r},${r},0,1,${y},${e-u},${n-c}A${r},${r},0,1,${y},${this._x1=f},${this._y1=h}`:_>ou&&this._append`A${r},${r},0,${+(_>=oS)},${y},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ix(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new lZ(e)}function ox(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function c3(t){this._context=t}c3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function w0(t){return new c3(t)}function f3(t){return t[0]}function d3(t){return t[1]}function h3(t,e){var n=Lt(!0),r=null,i=w0,o=null,s=ix(u);t=typeof t=="function"?t:t===void 0?f3:Lt(t),e=typeof e=="function"?e:e===void 0?d3:Lt(e);function u(c){var f,h=(c=ox(c)).length,y,_=!1,E;for(r==null&&(o=i(E=s())),f=0;f<=h;++f)!(f<h&&n(y=c[f],f,c))===_&&((_=!_)?o.lineStart():o.lineEnd()),_&&o.point(+t(y,f,c),+e(y,f,c));if(E)return o=null,E+""||null}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:Lt(+c),u):t},u.y=function(c){return arguments.length?(e=typeof c=="function"?c:Lt(+c),u):e},u.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Lt(!!c),u):n},u.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),u):i},u.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),u):r},u}function qy(t,e,n){var r=null,i=Lt(!0),o=null,s=w0,u=null,c=ix(f);t=typeof t=="function"?t:t===void 0?f3:Lt(+t),e=typeof e=="function"?e:Lt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?d3:Lt(+n);function f(y){var _,E,w,A=(y=ox(y)).length,I,R=!1,M,P=new Array(A),F=new Array(A);for(o==null&&(u=s(M=c())),_=0;_<=A;++_){if(!(_<A&&i(I=y[_],_,y))===R)if(R=!R)E=_,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=_-1;w>=E;--w)u.point(P[w],F[w]);u.lineEnd(),u.areaEnd()}R&&(P[_]=+t(I,_,y),F[_]=+e(I,_,y),u.point(r?+r(I,_,y):P[_],n?+n(I,_,y):F[_]))}if(M)return u=null,M+""||null}function h(){return h3().defined(i).curve(s).context(o)}return f.x=function(y){return arguments.length?(t=typeof y=="function"?y:Lt(+y),r=null,f):t},f.x0=function(y){return arguments.length?(t=typeof y=="function"?y:Lt(+y),f):t},f.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Lt(+y),f):r},f.y=function(y){return arguments.length?(e=typeof y=="function"?y:Lt(+y),n=null,f):e},f.y0=function(y){return arguments.length?(e=typeof y=="function"?y:Lt(+y),f):e},f.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Lt(+y),f):n},f.lineX0=f.lineY0=function(){return h().x(t).y(e)},f.lineY1=function(){return h().x(t).y(n)},f.lineX1=function(){return h().x(r).y(e)},f.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Lt(!!y),f):i},f.curve=function(y){return arguments.length?(s=y,o!=null&&(u=s(o)),f):s},f.context=function(y){return arguments.length?(y==null?o=u=null:u=s(o=y),f):o},f}class m3{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function uZ(t){return new m3(t,!0)}function cZ(t){return new m3(t,!1)}const sx={draw(t,e){const n=uo(e/Jv);t.moveTo(n,0),t.arc(0,0,n,0,b0)}},fZ={draw(t,e){const n=uo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},p3=uo(1/3),dZ=p3*2,hZ={draw(t,e){const n=uo(e/dZ),r=n*p3;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},mZ={draw(t,e){const n=uo(e),r=-n/2;t.rect(r,r,n,n)}},pZ=.8908130915292852,g3=Yv(Jv/10)/Yv(7*Jv/10),gZ=Yv(b0/10)*g3,yZ=-l3(b0/10)*g3,vZ={draw(t,e){const n=uo(e*pZ),r=gZ*n,i=yZ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=b0*o/5,u=l3(s),c=Yv(s);t.lineTo(c*n,-u*n),t.lineTo(u*r-c*i,c*r+u*i)}t.closePath()}},Ub=uo(3),_Z={draw(t,e){const n=-uo(e/(Ub*3));t.moveTo(0,n*2),t.lineTo(-Ub*n,-n),t.lineTo(Ub*n,-n),t.closePath()}},Pi=-.5,Mi=uo(3)/2,aS=1/uo(12),TZ=(aS/2+1)*3,EZ={draw(t,e){const n=uo(e/TZ),r=n/2,i=n*aS,o=r,s=n*aS+n,u=-o,c=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(u,c),t.lineTo(Pi*r-Mi*i,Mi*r+Pi*i),t.lineTo(Pi*o-Mi*s,Mi*o+Pi*s),t.lineTo(Pi*u-Mi*c,Mi*u+Pi*c),t.lineTo(Pi*r+Mi*i,Pi*i-Mi*r),t.lineTo(Pi*o+Mi*s,Pi*s-Mi*o),t.lineTo(Pi*u+Mi*c,Pi*c-Mi*u),t.closePath()}};function bZ(t,e){let n=null,r=ix(i);t=typeof t=="function"?t:Lt(t||sx),e=typeof e=="function"?e:Lt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Lt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Lt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Qv(){}function Xv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function y3(t){this._context=t}y3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wZ(t){return new y3(t)}function v3(t){this._context=t}v3.prototype={areaStart:Qv,areaEnd:Qv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function AZ(t){return new v3(t)}function _3(t){this._context=t}_3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function SZ(t){return new _3(t)}function T3(t){this._context=t}T3.prototype={areaStart:Qv,areaEnd:Qv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function IZ(t){return new T3(t)}function xk(t){return t<0?-1:1}function Rk(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),u=(o*i+s*r)/(r+i);return(xk(o)+xk(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(u))||0}function Pk(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Fb(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,s-u*n,o,s)}function Zv(t){this._context=t}Zv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fb(this,this._t0,Pk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Fb(this,Pk(this,n=Rk(this,t,e)),n);break;default:Fb(this,this._t0,n=Rk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function E3(t){this._context=new b3(t)}(E3.prototype=Object.create(Zv.prototype)).point=function(t,e){Zv.prototype.point.call(this,e,t)};function b3(t){this._context=t}b3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function CZ(t){return new Zv(t)}function xZ(t){return new E3(t)}function w3(t){this._context=t}w3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Mk(t),i=Mk(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Mk(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function RZ(t){return new w3(t)}function A0(t,e){this._context=t,this._t=e}A0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function PZ(t){return new A0(t,.5)}function MZ(t){return new A0(t,0)}function DZ(t){return new A0(t,1)}function rd(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,u=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function lS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function NZ(t,e){return t[e]}function kZ(t){const e=[];return e.key=t,e}function OZ(){var t=Lt([]),e=lS,n=rd,r=NZ;function i(o){var s=Array.from(t.apply(this,arguments),kZ),u,c=s.length,f=-1,h;for(const y of o)for(u=0,++f;u<c;++u)(s[u][f]=[0,+r(y,s[u].key,f,o)]).data=y;for(u=0,h=ox(e(s));u<c;++u)s[h[u]].index=u;return n(s,h),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Lt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Lt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?lS:typeof o=="function"?o:Lt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??rd,i):n},i}function VZ(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}rd(t,e)}}function LZ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,u=0;s<i;++s)u+=t[s][n][1]||0;r[n][1]+=r[n][0]=-u/2}rd(t,e)}}function UZ(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var u=0,c=0,f=0;u<s;++u){for(var h=t[e[u]],y=h[r][1]||0,_=h[r-1][1]||0,E=(y-_)/2,w=0;w<u;++w){var A=t[e[w]],I=A[r][1]||0,R=A[r-1][1]||0;E+=I-R}c+=y,f+=E*y}i[r-1][1]+=i[r-1][0]=n,c&&(n-=f/c)}i[r-1][1]+=i[r-1][0]=n,rd(t,e)}}var FZ=["type","size","sizeType"];function uS(){return uS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uS.apply(null,arguments)}function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){BZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BZ(t,e,n){return(e=qZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qZ(t){var e=zZ(t,"string");return typeof e=="symbol"?e:e+""}function zZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Z(t,e){if(t==null)return{};var n,r,i=GZ(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var A3={symbolCircle:sx,symbolCross:fZ,symbolDiamond:hZ,symbolSquare:mZ,symbolStar:vZ,symbolTriangle:_Z,symbolWye:EZ},jZ=Math.PI/180,HZ=t=>{var e="symbol".concat(Xp(t));return A3[e]||sx},KZ=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*jZ;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},WZ=(t,e)=>{A3["symbol".concat(Xp(t))]=e},ax=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=$Z(t,FZ),o=Nk(Nk({},i),{},{type:e,size:n,sizeType:r}),s=()=>{var y=HZ(e),_=bZ().type(y).size(KZ(n,r,e));return _()},{className:u,cx:c,cy:f}=o,h=Xt(o,!0);return c===+c&&f===+f&&n===+n?O.createElement("path",uS({},h,{className:Ut("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(f,")"),d:s()})):null};ax.registerSymbol=WZ;function cS(){return cS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cS.apply(null,arguments)}function kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(n),!0).forEach(function(r){lx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lx(t,e,n){return(e=JZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JZ(t){var e=QZ(t,"string");return typeof e=="symbol"?e:e+""}function QZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Di=32;class ux extends O.PureComponent{renderIcon(e,n){var{inactiveColor:r}=this.props,i=Di/2,o=Di/6,s=Di/3,u=e.inactive?r:e.color,c=n??e.type;if(c==="none")return null;if(c==="plainline")return O.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:Di,y2:i,className:"recharts-legend-icon"});if(c==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Di,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return O.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Di/8,"h").concat(Di,"v").concat(Di*3/4,"h").concat(-Di,"z"),className:"recharts-legend-icon"});if(O.isValidElement(e.legendIcon)){var f=YZ({},e);return delete f.legendIcon,O.cloneElement(e.legendIcon,f)}return O.createElement(ax,{fill:u,cx:i,cy:i,size:Di,sizeType:"diameter",type:c})}renderItems(){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:o,iconType:s}=this.props,u={x:0,y:0,width:Di,height:Di},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,y)=>{var _=h.formatter||i,E=Ut({"recharts-legend-item":!0,["legend-item-".concat(y)]:!0,inactive:h.inactive});if(h.type==="none")return null;var w=h.inactive?o:h.color,A=_?_(h.value,h,y):h.value;return O.createElement("li",cS({className:E,style:c,key:"legend-item-".concat(y)},E0(this.props,h,y)),O.createElement(rx,{width:n,height:n,viewBox:u,style:f,"aria-label":"".concat(A," legend icon")},this.renderIcon(h,s)),O.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},A))})}render(){var{payload:e,layout:n,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}lx(ux,"displayName","Legend");lx(ux,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Bb={},qb={},Ok;function XZ(){return Ok||(Ok=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],u=r(s);i.has(u)||i.set(u,s)}return Array.from(i.values())}t.uniqBy=e}(qb)),qb}var zb={},Vk;function S3(){return Vk||(Vk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e}(zb)),zb}var $b={},Gb={},jb={},Lk;function ZZ(){return Lk||(Lk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e}(jb)),jb}var Uk;function cx(){return Uk||(Uk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZZ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n}(Gb)),Gb}var Hb={},Fk;function eee(){return Fk||(Fk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e}(Hb)),Hb}var Bk;function tee(){return Bk||(Bk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cx(),n=eee();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r}($b)),$b}var Kb={},Wb={},qk;function nee(){return qk||(qk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ex();function n(r){return function(i){return e.get(i,r)}}t.property=n}(Wb)),Wb}var Yb={},Jb={},Qb={},Xb={},zk;function I3(){return zk||(zk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e}(Xb)),Xb}var Zb={},$k;function C3(){return $k||($k=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e}(Zb)),Zb}var ew={},Gk;function fx(){return Gk||(Gk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e}(ew)),ew}var jk;function ree(){return jk||(jk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dx(),n=I3(),r=C3(),i=fx();function o(y,_,E){return typeof E!="function"?e.isMatch(y,_):s(y,_,function w(A,I,R,M,P,F){const U=E(A,I,R,M,P,F);return U!==void 0?!!U:s(A,I,w,F)},new Map)}function s(y,_,E,w){if(_===y)return!0;switch(typeof _){case"object":return u(y,_,E,w);case"function":return Object.keys(_).length>0?s(y,{..._},E,w):i.eq(y,_);default:return n.isObject(y)?typeof _=="string"?_==="":!0:i.eq(y,_)}}function u(y,_,E,w){if(_==null)return!0;if(Array.isArray(_))return f(y,_,E,w);if(_ instanceof Map)return c(y,_,E,w);if(_ instanceof Set)return h(y,_,E,w);const A=Object.keys(_);if(y==null)return A.length===0;if(A.length===0)return!0;if(w&&w.has(_))return w.get(_)===y;w&&w.set(_,y);try{for(let I=0;I<A.length;I++){const R=A[I];if(!r.isPrimitive(y)&&!(R in y)||_[R]===void 0&&y[R]!==void 0||_[R]===null&&y[R]!==null||!E(y[R],_[R],R,y,_,w))return!1}return!0}finally{w&&w.delete(_)}}function c(y,_,E,w){if(_.size===0)return!0;if(!(y instanceof Map))return!1;for(const[A,I]of _.entries()){const R=y.get(A);if(E(R,I,A,y,_,w)===!1)return!1}return!0}function f(y,_,E,w){if(_.length===0)return!0;if(!Array.isArray(y))return!1;const A=new Set;for(let I=0;I<_.length;I++){const R=_[I];let M=!1;for(let P=0;P<y.length;P++){if(A.has(P))continue;const F=y[P];let U=!1;if(E(F,R,I,y,_,w)&&(U=!0),U){A.add(P),M=!0;break}}if(!M)return!1}return!0}function h(y,_,E,w){return _.size===0?!0:y instanceof Set?f([...y],[..._],E,w):!1}t.isMatchWith=o,t.isSetMatch=h}(Qb)),Qb}var Hk;function dx(){return Hk||(Hk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ree();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n}(Jb)),Jb}var tw={},nw={},rw={},Kk;function x3(){return Kk||(Kk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e}(rw)),rw}var iw={},Wk;function hx(){return Wk||(Wk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e}(iw)),iw}var ow={},Yk;function mx(){return Yk||(Yk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",u="[object Date]",c="[object Map]",f="[object Set]",h="[object Array]",y="[object Function]",_="[object ArrayBuffer]",E="[object Object]",w="[object Error]",A="[object DataView]",I="[object Uint8Array]",R="[object Uint8ClampedArray]",M="[object Uint16Array]",P="[object Uint32Array]",F="[object BigUint64Array]",U="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",N="[object BigInt64Array]",V="[object Float32Array]",q="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=_,t.arrayTag=h,t.bigInt64ArrayTag=N,t.bigUint64ArrayTag=F,t.booleanTag=i,t.dataViewTag=A,t.dateTag=u,t.errorTag=w,t.float32ArrayTag=V,t.float64ArrayTag=q,t.functionTag=y,t.int16ArrayTag=$,t.int32ArrayTag=D,t.int8ArrayTag=U,t.mapTag=c,t.numberTag=r,t.objectTag=E,t.regexpTag=e,t.setTag=f,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=M,t.uint32ArrayTag=P,t.uint8ArrayTag=I,t.uint8ClampedArrayTag=R}(ow)),ow}var sw={},Jk;function iee(){return Jk||(Jk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e}(sw)),sw}var Qk;function R3(){return Qk||(Qk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x3(),n=hx(),r=mx(),i=C3(),o=iee();function s(h,y){return u(h,void 0,h,new Map,y)}function u(h,y,_,E=new Map,w=void 0){const A=w?.(h,y,_,E);if(A!=null)return A;if(i.isPrimitive(h))return h;if(E.has(h))return E.get(h);if(Array.isArray(h)){const I=new Array(h.length);E.set(h,I);for(let R=0;R<h.length;R++)I[R]=u(h[R],R,_,E,w);return Object.hasOwn(h,"index")&&(I.index=h.index),Object.hasOwn(h,"input")&&(I.input=h.input),I}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const I=new RegExp(h.source,h.flags);return I.lastIndex=h.lastIndex,I}if(h instanceof Map){const I=new Map;E.set(h,I);for(const[R,M]of h)I.set(R,u(M,R,_,E,w));return I}if(h instanceof Set){const I=new Set;E.set(h,I);for(const R of h)I.add(u(R,void 0,_,E,w));return I}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const I=new(Object.getPrototypeOf(h)).constructor(h.length);E.set(h,I);for(let R=0;R<h.length;R++)I[R]=u(h[R],R,_,E,w);return I}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const I=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return E.set(h,I),c(I,h,_,E,w),I}if(typeof File<"u"&&h instanceof File){const I=new File([h],h.name,{type:h.type});return E.set(h,I),c(I,h,_,E,w),I}if(h instanceof Blob){const I=new Blob([h],{type:h.type});return E.set(h,I),c(I,h,_,E,w),I}if(h instanceof Error){const I=new h.constructor;return E.set(h,I),I.message=h.message,I.name=h.name,I.stack=h.stack,I.cause=h.cause,c(I,h,_,E,w),I}if(typeof h=="object"&&f(h)){const I=Object.create(Object.getPrototypeOf(h));return E.set(h,I),c(I,h,_,E,w),I}return h}function c(h,y,_=h,E,w){const A=[...Object.keys(y),...e.getSymbols(y)];for(let I=0;I<A.length;I++){const R=A[I],M=Object.getOwnPropertyDescriptor(h,R);(M==null||M.writable)&&(h[R]=u(y[R],R,_,E,w))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=u,t.copyProperties=c}(nw)),nw}var Xk;function oee(){return Xk||(Xk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R3();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n}(tw)),tw}var Zk;function see(){return Zk||(Zk=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dx(),n=oee();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r}(Yb)),Yb}var aw={},lw={},uw={},eO;function aee(){return eO||(eO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R3(),n=mx();function r(i,o){return e.cloneDeepWith(i,(s,u,c,f)=>{const h=o?.(s,u,c,f);if(h!=null)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const y=new i.constructor(i?.valueOf());return e.copyProperties(y,i),y}case n.argumentsTag:{const y={};return e.copyProperties(y,i),y.length=i.length,y[Symbol.iterator]=i[Symbol.iterator],y}default:return}})}t.cloneDeepWith=r}(uw)),uw}var tO;function lee(){return tO||(tO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aee();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n}(lw)),lw}var cw={},fw={},nO;function P3(){return nO||(nO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n}(fw)),fw}var dw={},rO;function uee(){return rO||(rO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hx();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n}(dw)),dw}var iO;function cee(){return iO||(iO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n3(),n=P3(),r=uee(),i=ZC();function o(s,u){let c;if(Array.isArray(u)?c=u:typeof u=="string"&&e.isDeepKey(u)&&s?.[u]==null?c=i.toPath(u):c=[u],c.length===0)return!1;let f=s;for(let h=0;h<c.length;h++){const y=c[h];if((f==null||!Object.hasOwn(f,y))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(y)&&y<f.length))return!1;f=f[y]}return!0}t.has=o}(cw)),cw}var oO;function fee(){return oO||(oO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dx(),n=r3(),r=lee(),i=ex(),o=cee();function s(u,c){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return c=r.cloneDeep(c),function(f){const h=i.get(f,u);return h===void 0?o.has(f,u):c===void 0?h===void 0:e.isMatch(h,c)}}t.matchesProperty=s}(aw)),aw}var sO;function dee(){return sO||(sO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S3(),n=nee(),r=see(),i=fee();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o}(Kb)),Kb}var aO;function hee(){return aO||(aO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XZ(),n=S3(),r=tee(),i=dee();function o(s,u=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(u)):[]}t.uniqBy=o}(Bb)),Bb}var hw,lO;function mee(){return lO||(lO=1,hw=hee().uniqBy),hw}var pee=mee();const uO=lo(pee);function M3(t,e,n){return e===!0?uO(t,n):typeof e=="function"?uO(t,e):t}var mw={exports:{}},pw={},gw={exports:{}},yw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cO;function gee(){if(cO)return yw;cO=1;var t=yd();function e(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function u(y,_){var E=_(),w=r({inst:{value:E,getSnapshot:_}}),A=w[0].inst,I=w[1];return o(function(){A.value=E,A.getSnapshot=_,c(A)&&I({inst:A})},[y,E,_]),i(function(){return c(A)&&I({inst:A}),y(function(){c(A)&&I({inst:A})})},[y]),s(E),E}function c(y){var _=y.getSnapshot;y=y.value;try{var E=_();return!n(y,E)}catch{return!0}}function f(y,_){return _()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return yw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,yw}var fO;function yee(){return fO||(fO=1,gw.exports=gee()),gw.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dO;function vee(){if(dO)return pw;dO=1;var t=yd(),e=yee();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,u=t.useMemo,c=t.useDebugValue;return pw.useSyncExternalStoreWithSelector=function(f,h,y,_,E){var w=o(null);if(w.current===null){var A={hasValue:!1,value:null};w.current=A}else A=w.current;w=u(function(){function R($){if(!M){if(M=!0,P=$,$=_($),E!==void 0&&A.hasValue){var D=A.value;if(E(D,$))return F=D}return F=$}if(D=F,r(P,$))return D;var N=_($);return E!==void 0&&E(D,N)?(P=$,D):(P=$,F=N)}var M=!1,P,F,U=y===void 0?null:y;return[function(){return R(h())},U===null?void 0:function(){return R(U())}]},[h,y,_,E]);var I=i(f,w[0],w[1]);return s(function(){A.hasValue=!0,A.value=I},[I]),c(I),I},pw}var hO;function _ee(){return hO||(hO=1,mw.exports=vee()),mw.exports}var Tee=_ee(),px=O.createContext(null),Eee=t=>t,gn=()=>{var t=O.useContext(px);return t?t.store.dispatch:Eee},_v=()=>{},bee=()=>_v,wee=(t,e)=>t===e;function Le(t){var e=O.useContext(px);return Tee.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:bee,e?e.store.getState:_v,e?e.store.getState:_v,e?t:_v,wee)}function Aee(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function See(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Iee(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var mO=t=>Array.isArray(t)?t:[t];function Cee(t){const e=Array.isArray(t[0])?t[0]:t;return Iee(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function xee(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Ree=class{constructor(t){this.value=t}deref(){return this.value}},Pee=typeof WeakRef<"u"?WeakRef:Ree,Mee=0,pO=1;function zy(){return{s:Mee,v:void 0,o:null,p:null}}function D3(t,e={}){let n=zy();const{resultEqualityCheck:r}=e;let i,o=0;function s(){let u=n;const{length:c}=arguments;for(let y=0,_=c;y<_;y++){const E=arguments[y];if(typeof E=="function"||typeof E=="object"&&E!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const A=w.get(E);A===void 0?(u=zy(),w.set(E,u)):u=A}else{let w=u.p;w===null&&(u.p=w=new Map);const A=w.get(E);A===void 0?(u=zy(),w.set(E,u)):u=A}}const f=u;let h;if(u.s===pO)h=u.v;else if(h=t.apply(null,arguments),o++,r){const y=i?.deref?.()??i;y!=null&&r(y,h)&&(h=y,o!==0&&o--),i=typeof h=="object"&&h!==null||typeof h=="function"?new Pee(h):h}return f.s=pO,f.v=h,h}return s.clearCache=()=>{n=zy(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function Dee(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,u,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),Aee(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...c},{memoize:y,memoizeOptions:_=[],argsMemoize:E=D3,argsMemoizeOptions:w=[]}=h,A=mO(_),I=mO(w),R=Cee(i),M=y(function(){return o++,f.apply(null,arguments)},...A),P=E(function(){s++;const U=xee(R,arguments);return u=M.apply(null,U),u},...I);return Object.assign(P,{resultFunc:f,memoizedResultFunc:M,dependencies:R,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>u,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:E})};return Object.assign(r,{withTypes:()=>r}),r}var ae=Dee(D3),Nee=Object.assign((t,e=ae)=>{See(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,u,c)=>(s[n[c]]=u,s),{}))},{withTypes:()=>Nee}),vw={},_w={},Tw={},gO;function kee(){return gO||(gO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),u=e(i);if(s===u&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?u-s:s-u}return 0};t.compareValues=n}(Tw)),Tw}var Ew={},bw={},yO;function N3(){return yO||(yO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e}(bw)),bw}var vO;function Oee(){return vO||(vO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N3(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i}(Ew)),Ew}var _O;function Vee(){return _O||(_O=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kee(),n=Oee(),r=ZC();function i(o,s,u,c){if(o==null)return[];u=c?void 0:u,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(E=>String(E));const f=(E,w)=>{let A=E;for(let I=0;I<w.length&&A!=null;++I)A=A[w[I]];return A},h=(E,w)=>w==null||E==null?w:typeof E=="object"&&"key"in E?Object.hasOwn(w,E.key)?w[E.key]:f(w,E.path):typeof E=="function"?E(w):Array.isArray(E)?f(w,E):typeof w=="object"?w[E]:w,y=s.map(E=>(Array.isArray(E)&&E.length===1&&(E=E[0]),E==null||typeof E=="function"||Array.isArray(E)||n.isKey(E)?E:{key:E,path:r.toPath(E)}));return o.map(E=>({original:E,criteria:y.map(w=>h(w,E))})).slice().sort((E,w)=>{for(let A=0;A<y.length;A++){const I=e.compareValues(E.criteria[A],w.criteria[A],u[A]);if(I!==0)return I}return 0}).map(E=>E.original)}t.orderBy=i}(_w)),_w}var ww={},TO;function Lee(){return TO||(TO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(u,c)=>{for(let f=0;f<u.length;f++){const h=u[f];Array.isArray(h)&&c<o?s(h,c+1):i.push(h)}};return s(n,0),i}t.flatten=e}(ww)),ww}var Aw={},EO;function k3(){return EO||(EO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P3(),n=cx(),r=I3(),i=fx();function o(s,u,c){return r.isObject(c)&&(typeof u=="number"&&n.isArrayLike(c)&&e.isIndex(u)&&u<c.length||typeof u=="string"&&u in c)?i.eq(c[u],s):!1}t.isIterateeCall=o}(Aw)),Aw}var bO;function Uee(){return bO||(bO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vee(),n=Lee(),r=k3();function i(o,...s){const u=s.length;return u>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:u>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i}(vw)),vw}var Sw,wO;function Fee(){return wO||(wO=1,Sw=Uee().sortBy),Sw}var Bee=Fee();const S0=lo(Bee);var O3=t=>t.legend.settings,qee=t=>t.legend.size,zee=t=>t.legend.payload,$ee=ae([zee,O3],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?S0(r,n):r});function Gee(){return Le($ee)}var $y=1;function V3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=O.useState({height:0,left:0,top:0,width:0}),r=O.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>$y||Math.abs(s.left-e.left)>$y||Math.abs(s.top-e.top)>$y||Math.abs(s.width-e.width)>$y)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function or(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var jee=typeof Symbol=="function"&&Symbol.observable||"@@observable",AO=jee,Iw=()=>Math.random().toString(36).substring(7).split("").join("."),Hee={INIT:`@@redux/INIT${Iw()}`,REPLACE:`@@redux/REPLACE${Iw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Iw()}`},e_=Hee;function gx(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function L3(t,e,n){if(typeof t!="function")throw new Error(or(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(or(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(or(1));return n(L3)(t,e)}let r=t,i=e,o=new Map,s=o,u=0,c=!1;function f(){s===o&&(s=new Map,o.forEach((I,R)=>{s.set(R,I)}))}function h(){if(c)throw new Error(or(3));return i}function y(I){if(typeof I!="function")throw new Error(or(4));if(c)throw new Error(or(5));let R=!0;f();const M=u++;return s.set(M,I),function(){if(R){if(c)throw new Error(or(6));R=!1,f(),s.delete(M),o=null}}}function _(I){if(!gx(I))throw new Error(or(7));if(typeof I.type>"u")throw new Error(or(8));if(typeof I.type!="string")throw new Error(or(17));if(c)throw new Error(or(9));try{c=!0,i=r(i,I)}finally{c=!1}return(o=s).forEach(M=>{M()}),I}function E(I){if(typeof I!="function")throw new Error(or(10));r=I,_({type:e_.REPLACE})}function w(){const I=y;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(or(11));function M(){const F=R;F.next&&F.next(h())}return M(),{unsubscribe:I(M)}},[AO](){return this}}}return _({type:e_.INIT}),{dispatch:_,subscribe:y,getState:h,replaceReducer:E,[AO]:w}}function Kee(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:e_.INIT})>"u")throw new Error(or(12));if(typeof n(void 0,{type:e_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(or(13))})}function U3(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Kee(n)}catch(o){i=o}return function(s={},u){if(i)throw i;let c=!1;const f={};for(let h=0;h<r.length;h++){const y=r[h],_=n[y],E=s[y],w=_(E,u);if(typeof w>"u")throw u&&u.type,new Error(or(14));f[y]=w,c=c||w!==E}return c=c||r.length!==Object.keys(s).length,c?f:s}}function t_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Wee(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(or(15))};const s={getState:i.getState,dispatch:(c,...f)=>o(c,...f)},u=t.map(c=>c(s));return o=t_(...u)(i.dispatch),{...i,dispatch:o}}}function F3(t){return gx(t)&&"type"in t&&typeof t.type=="string"}var B3=Symbol.for("immer-nothing"),SO=Symbol.for("immer-draftable"),mi=Symbol.for("immer-state");function eo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var id=Object.getPrototypeOf;function zu(t){return!!t&&!!t[mi]}function Vs(t){return t?q3(t)||Array.isArray(t)||!!t[SO]||!!t.constructor?.[SO]||C0(t)||x0(t):!1}var Yee=Object.prototype.constructor.toString();function q3(t){if(!t||typeof t!="object")return!1;const e=id(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Yee}function n_(t,e){I0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function I0(t){const e=t[mi];return e?e.type_:Array.isArray(t)?1:C0(t)?2:x0(t)?3:0}function fS(t,e){return I0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function z3(t,e,n){const r=I0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Jee(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function C0(t){return t instanceof Map}function x0(t){return t instanceof Set}function su(t){return t.copy_||t.base_}function dS(t,e){if(C0(t))return new Map(t);if(x0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=q3(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[mi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],u=r[s];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[s]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[s]})}return Object.create(id(t),r)}else{const r=id(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function yx(t,e=!1){return R0(t)||zu(t)||!Vs(t)||(I0(t)>1&&(t.set=t.add=t.clear=t.delete=Qee),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>yx(r,!0))),t}function Qee(){eo(2)}function R0(t){return Object.isFrozen(t)}var Xee={};function $u(t){const e=Xee[t];return e||eo(0,t),e}var gp;function $3(){return gp}function Zee(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IO(t,e){e&&($u("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function hS(t){mS(t),t.drafts_.forEach(ete),t.drafts_=null}function mS(t){t===gp&&(gp=t.parent_)}function CO(t){return gp=Zee(gp,t)}function ete(t){const e=t[mi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function xO(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[mi].modified_&&(hS(e),eo(4)),Vs(t)&&(t=r_(e,t),e.parent_||i_(e,t)),e.patches_&&$u("Patches").generateReplacementPatches_(n[mi].base_,t,e.patches_,e.inversePatches_)):t=r_(e,n,[]),hS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==B3?t:void 0}function r_(t,e,n){if(R0(e))return e;const r=e[mi];if(!r)return n_(e,(i,o)=>RO(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return i_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),n_(o,(u,c)=>RO(t,r,i,u,c,n,s)),i_(t,i,!1),n&&t.patches_&&$u("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function RO(t,e,n,r,i,o,s){if(zu(i)){const u=o&&e&&e.type_!==3&&!fS(e.assigned_,r)?o.concat(r):void 0,c=r_(t,i,u);if(z3(n,r,c),zu(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Vs(i)&&!R0(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;r_(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&i_(t,i)}}function i_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&yx(e,n)}function tte(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:$3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=vx;n&&(i=[r],o=yp);const{revoke:s,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=s,u}var vx={get(t,e){if(e===mi)return t;const n=su(t);if(!fS(n,e))return nte(t,n,e);const r=n[e];return t.finalized_||!Vs(r)?r:r===Cw(t.base_,e)?(xw(t),t.copy_[e]=gS(r,t)):r},has(t,e){return e in su(t)},ownKeys(t){return Reflect.ownKeys(su(t))},set(t,e,n){const r=G3(su(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Cw(su(t),e),o=i?.[mi];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Jee(n,i)&&(n!==void 0||fS(t.base_,e)))return!0;xw(t),pS(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Cw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,xw(t),pS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=su(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){eo(11)},getPrototypeOf(t){return id(t.base_)},setPrototypeOf(){eo(12)}},yp={};n_(vx,(t,e)=>{yp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});yp.deleteProperty=function(t,e){return yp.set.call(this,t,e,void 0)};yp.set=function(t,e,n){return vx.set.call(this,t[0],e,n,t[0])};function Cw(t,e){const n=t[mi];return(n?su(n):t)[e]}function nte(t,e,n){const r=G3(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function G3(t,e){if(!(e in t))return;let n=id(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=id(n)}}function pS(t){t.modified_||(t.modified_=!0,t.parent_&&pS(t.parent_))}function xw(t){t.copy_||(t.copy_=dS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var rte=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(c=o,...f){return s.produce(c,h=>n.call(this,h,...f))}}typeof n!="function"&&eo(6),r!==void 0&&typeof r!="function"&&eo(7);let i;if(Vs(e)){const o=CO(this),s=gS(e,void 0);let u=!0;try{i=n(s),u=!1}finally{u?hS(o):mS(o)}return IO(o,r),xO(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===B3&&(i=void 0),this.autoFreeze_&&yx(i,!0),r){const o=[],s=[];$u("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else eo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...u)=>this.produceWithPatches(s,c=>e(c,...u));let r,i;return[this.produce(e,n,(s,u)=>{r=s,i=u}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Vs(t)||eo(8),zu(t)&&(t=ja(t));const e=CO(this),n=gS(t,void 0);return n[mi].isManual_=!0,mS(e),n}finishDraft(t,e){const n=t&&t[mi];(!n||!n.isManual_)&&eo(9);const{scope_:r}=n;return IO(r,e),xO(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=$u("Patches").applyPatches_;return zu(t)?r(t,e):this.produce(t,i=>r(i,e))}};function gS(t,e){const n=C0(t)?$u("MapSet").proxyMap_(t,e):x0(t)?$u("MapSet").proxySet_(t,e):tte(t,e);return(e?e.scope_:$3()).drafts_.push(n),n}function ja(t){return zu(t)||eo(10,t),j3(t)}function j3(t){if(!Vs(t)||R0(t))return t;const e=t[mi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=dS(t,e.scope_.immer_.useStrictShallowCopy_)}else n=dS(t,!0);return n_(n,(r,i)=>{z3(n,r,j3(i))}),e&&(e.finalized_=!1),n}var pi=new rte,H3=pi.produce;pi.produceWithPatches.bind(pi);pi.setAutoFreeze.bind(pi);pi.setUseStrictShallowCopy.bind(pi);pi.applyPatches.bind(pi);pi.createDraft.bind(pi);pi.finishDraft.bind(pi);function K3(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var ite=K3(),ote=K3,ste=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?t_:t_.apply(null,arguments)};function zi(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ci(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>F3(r)&&r.type===t,n}var W3=class Am extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Am.prototype)}static get[Symbol.species](){return Am}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Am(...e[0].concat(this)):new Am(...e.concat(this))}};function PO(t){return Vs(t)?H3(t,()=>{}):t}function Gy(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function ate(t){return typeof t=="boolean"}var lte=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new W3;return n&&(ate(n)?s.push(ite):s.push(ote(n.extraArgument))),s},ute="RTK_autoBatch",MO=t=>e=>{setTimeout(e,t)},cte=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const u=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:MO(10):t.type==="callback"?t.queueNotification:MO(t.timeout),f=()=>{s=!1,o&&(o=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const y=()=>i&&h(),_=r.subscribe(y);return u.add(h),()=>{_(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[ute],o=!i,o&&(s||(s=!0,c(f))),r.dispatch(h)}finally{i=!0}}})},fte=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new W3(t);return r&&i.push(cte(typeof r=="object"?r:void 0)),i};function dte(t){const e=lte(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(gx(n))u=U3(n);else throw new Error(ci(1));let c;typeof r=="function"?c=r(e):c=e();let f=t_;i&&(f=ste({trace:!1,...typeof i=="object"&&i}));const h=Wee(...c),y=fte(h);let _=typeof s=="function"?s(y):y();const E=f(..._);return L3(u,o,E)}function Y3(t){const e={},n=[];let r;const i={addCase(o,s){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(ci(28));if(u in e)throw new Error(ci(29));return e[u]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function hte(t){return typeof t=="function"}function mte(t,e){let[n,r,i]=Y3(e),o;if(hte(t))o=()=>PO(t());else{const u=PO(t);o=()=>u}function s(u=o(),c){let f=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,y)=>{if(y)if(zu(h)){const E=y(h,c);return E===void 0?h:E}else{if(Vs(h))return H3(h,_=>y(_,c));{const _=y(h,c);if(_===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return h},u)}return s.getInitialState=o,s}var pte="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",gte=(t=21)=>{let e="",n=t;for(;n--;)e+=pte[Math.random()*64|0];return e},yte=Symbol.for("rtk-slice-createasyncthunk");function vte(t,e){return`${t}/${e}`}function _te({creators:t}={}){const e=t?.asyncThunk?.[yte];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(ci(11));const s=(typeof r.reducers=="function"?r.reducers(Ete()):r.reducers)||{},u=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(P,F){const U=typeof P=="string"?P:P.type;if(!U)throw new Error(ci(12));if(U in c.sliceCaseReducersByType)throw new Error(ci(13));return c.sliceCaseReducersByType[U]=F,f},addMatcher(P,F){return c.sliceMatchers.push({matcher:P,reducer:F}),f},exposeAction(P,F){return c.actionCreators[P]=F,f},exposeCaseReducer(P,F){return c.sliceCaseReducersByName[P]=F,f}};u.forEach(P=>{const F=s[P],U={reducerName:P,type:vte(i,P),createNotation:typeof r.reducers=="function"};wte(F)?Ste(U,F,f,e):bte(U,F,f)});function h(){const[P={},F=[],U=void 0]=typeof r.extraReducers=="function"?Y3(r.extraReducers):[r.extraReducers],$={...P,...c.sliceCaseReducersByType};return mte(r.initialState,D=>{for(let N in $)D.addCase(N,$[N]);for(let N of c.sliceMatchers)D.addMatcher(N.matcher,N.reducer);for(let N of F)D.addMatcher(N.matcher,N.reducer);U&&D.addDefaultCase(U)})}const y=P=>P,_=new Map,E=new WeakMap;let w;function A(P,F){return w||(w=h()),w(P,F)}function I(){return w||(w=h()),w.getInitialState()}function R(P,F=!1){function U(D){let N=D[P];return typeof N>"u"&&F&&(N=Gy(E,U,I)),N}function $(D=y){const N=Gy(_,F,()=>new WeakMap);return Gy(N,D,()=>{const V={};for(const[q,B]of Object.entries(r.selectors??{}))V[q]=Tte(B,D,()=>Gy(E,D,I),F);return V})}return{reducerPath:P,getSelectors:$,get selectors(){return $(U)},selectSlice:U}}const M={name:i,reducer:A,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:I,...R(o),injectInto(P,{reducerPath:F,...U}={}){const $=F??o;return P.inject({reducerPath:$,reducer:A},U),{...M,...R($,!0)}}};return M}}function Tte(t,e,n,r){function i(o,...s){let u=e(o);return typeof u>"u"&&r&&(u=n()),t(u,...s)}return i.unwrapped=t,i}var Gi=_te();function Ete(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function bte({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!Ate(r))throw new Error(ci(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?zi(t,s):zi(t))}function wte(t){return t._reducerDefinitionType==="asyncThunk"}function Ate(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Ste({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ci(18));const{payloadCreator:o,fulfilled:s,pending:u,rejected:c,settled:f,options:h}=n,y=i(t,o,h);r.exposeAction(e,y),s&&r.addCase(y.fulfilled,s),u&&r.addCase(y.pending,u),c&&r.addCase(y.rejected,c),f&&r.addMatcher(y.settled,f),r.exposeCaseReducer(e,{fulfilled:s||jy,pending:u||jy,rejected:c||jy,settled:f||jy})}function jy(){}var Ite="task",J3="listener",Q3="completed",_x="cancelled",Cte=`task-${_x}`,xte=`task-${Q3}`,yS=`${J3}-${_x}`,Rte=`${J3}-${Q3}`,P0=class{constructor(t){this.code=t,this.message=`${Ite} ${_x} (reason: ${t})`}name="TaskAbortError";message},Tx=(t,e)=>{if(typeof t!="function")throw new TypeError(ci(32))},o_=()=>{},X3=(t,e=o_)=>(t.catch(e),t),Z3=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Au=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Su=t=>{if(t.aborted){const{reason:e}=t;throw new P0(e)}};function e6(t,e){let n=o_;return new Promise((r,i)=>{const o=()=>i(new P0(t.reason));if(t.aborted){o();return}n=Z3(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=o_})}var Pte=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof P0?"cancelled":"rejected",error:n}}finally{e?.()}},s_=t=>e=>X3(e6(t,e).then(n=>(Su(t),n))),t6=t=>{const e=s_(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Pf}=Object,DO={},M0="listenerMiddleware",Mte=(t,e)=>{const n=r=>Z3(t,()=>Au(r,t.reason));return(r,i)=>{Tx(r);const o=new AbortController;n(o);const s=Pte(async()=>{Su(t),Su(o.signal);const u=await r({pause:s_(o.signal),delay:t6(o.signal),signal:o.signal});return Su(o.signal),u},()=>Au(o,xte));return i?.autoJoin&&e.push(s.catch(o_)),{result:s_(t)(s),cancel(){Au(o,Cte)}}}},Dte=(t,e)=>{const n=async(r,i)=>{Su(e);let o=()=>{};const u=[new Promise((c,f)=>{let h=t({predicate:r,effect:(y,_)=>{_.unsubscribe(),c([y,_.getState(),_.getOriginalState()])}});o=()=>{h(),f()}})];i!=null&&u.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await e6(e,Promise.race(u));return Su(e),c}finally{o()}};return(r,i)=>X3(n(r,i))},n6=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=zi(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ci(21));return Tx(o),{predicate:i,type:e,effect:o}},r6=Pf(t=>{const{type:e,predicate:n,effect:r}=n6(t);return{id:gte(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ci(22))}}},{withTypes:()=>r6}),NO=(t,e)=>{const{type:n,effect:r,predicate:i}=n6(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},vS=t=>{t.pending.forEach(e=>{Au(e,yS)})},Nte=t=>()=>{t.forEach(vS),t.clear()},kO=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},i6=Pf(zi(`${M0}/add`),{withTypes:()=>i6}),kte=zi(`${M0}/removeAll`),o6=Pf(zi(`${M0}/remove`),{withTypes:()=>o6}),Ote=(...t)=>{console.error(`${M0}/error`,...t)},Zp=(t={})=>{const e=new Map,{extra:n,onError:r=Ote}=t;Tx(r);const i=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),y=>{h.unsubscribe(),y?.cancelActive&&vS(h)}),o=h=>{const y=NO(e,h)??r6(h);return i(y)};Pf(o,{withTypes:()=>o});const s=h=>{const y=NO(e,h);return y&&(y.unsubscribe(),h.cancelActive&&vS(y)),!!y};Pf(s,{withTypes:()=>s});const u=async(h,y,_,E)=>{const w=new AbortController,A=Dte(o,w.signal),I=[];try{h.pending.add(w),await Promise.resolve(h.effect(y,Pf({},_,{getOriginalState:E,condition:(R,M)=>A(R,M).then(Boolean),take:A,delay:t6(w.signal),pause:s_(w.signal),extra:n,signal:w.signal,fork:Mte(w.signal,I),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((R,M,P)=>{R!==w&&(Au(R,yS),P.delete(R))})},cancel:()=>{Au(w,yS),h.pending.delete(w)},throwIfCancelled:()=>{Su(w.signal)}})))}catch(R){R instanceof P0||kO(r,R,{raisedBy:"effect"})}finally{await Promise.all(I),Au(w,Rte),h.pending.delete(w)}},c=Nte(e);return{middleware:h=>y=>_=>{if(!F3(_))return y(_);if(i6.match(_))return o(_.payload);if(kte.match(_)){c();return}if(o6.match(_))return s(_.payload);let E=h.getState();const w=()=>{if(E===DO)throw new Error(ci(23));return E};let A;try{if(A=y(_),e.size>0){const I=h.getState(),R=Array.from(e.values());for(const M of R){let P=!1;try{P=M.predicate(_,I,E)}catch(F){P=!1,kO(r,F,{raisedBy:"predicate"})}P&&u(M,_,h,w)}}}finally{E=DO}return A},startListening:o,stopListening:s,clearListeners:c}};function ci(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Vte={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},s6=Gi({name:"chartLayout",initialState:Vte,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){t.margin.top=e.payload.top,t.margin.right=e.payload.right,t.margin.bottom=e.payload.bottom,t.margin.left=e.payload.left},setScale(t,e){t.scale=e.payload}}}),{setMargin:Lte,setLayout:Ute,setChartSize:Fte,setScale:Bte}=s6.actions,qte=s6.reducer;function OO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OO(Object(n),!0).forEach(function(r){zte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zte(t,e,n){return(e=$te(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $te(t){var e=Gte(t,"string");return typeof e=="symbol"?e:e+""}function Gte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a_=Math.PI/180,jte=t=>t*180/Math.PI,ur=(t,e,n,r)=>({x:t+Math.cos(-a_*r)*n,y:e+Math.sin(-a_*r)*n}),Hte=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Kte=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},Wte=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=Kte({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var u=(n-i)/s,c=Math.acos(u);return r>o&&(c=2*Math.PI-c),{radius:s,angle:jte(c),angleInRadian:c}},Yte=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},Jte=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},Qte=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:o}=Wte({x:n,y:r},e),{innerRadius:s,outerRadius:u}=e;if(i<s||i>u||i===0)return null;var{startAngle:c,endAngle:f}=Yte(e),h=o,y;if(c<=f){for(;h>f;)h-=360;for(;h<c;)h+=360;y=h>=c&&h<=f}else{for(;h>c;)h-=360;for(;h<f;)h+=360;y=h>=f&&h<=c}return y?VO(VO({},e),{},{radius:i,angle:Jte(h,e)}):null};function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(r){Xte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xte(t,e,n){return(e=Zte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zte(t){var e=ene(t,"string");return typeof e=="symbol"?e:e+""}function ene(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fi(t,e,n){return Rn(t)||Rn(e)?n:Wo(e)?qu(t,e,n):typeof e=="function"?e(t):n}var tne=(t,e,n,r,i)=>{var o,s=-1,u=(o=e?.length)!==null&&o!==void 0?o:0;if(u<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<u;c++){var f=c>0?n[c-1].coordinate:n[u-1].coordinate,h=n[c].coordinate,y=c>=u-1?n[0].coordinate:n[c+1].coordinate,_=void 0;if(ui(h-f)!==ui(y-h)){var E=[];if(ui(y-h)===ui(i[1]-i[0])){_=y;var w=h+i[1]-i[0];E[0]=Math.min(w,(w+f)/2),E[1]=Math.max(w,(w+f)/2)}else{_=f;var A=y+i[1]-i[0];E[0]=Math.min(h,(A+h)/2),E[1]=Math.max(h,(A+h)/2)}var I=[Math.min(h,(_+h)/2),Math.max(h,(_+h)/2)];if(t>I[0]&&t<=I[1]||t>=E[0]&&t<=E[1]){({index:s}=n[c]);break}}else{var R=Math.min(f,y),M=Math.max(f,y);if(t>(R+h)/2&&t<=(M+h)/2){({index:s}=n[c]);break}}}else if(e){for(var P=0;P<u;P++)if(P===0&&t<=(e[P].coordinate+e[P+1].coordinate)/2||P>0&&P<u-1&&t>(e[P].coordinate+e[P-1].coordinate)/2&&t<=(e[P].coordinate+e[P+1].coordinate)/2||P===u-1&&t>(e[P].coordinate+e[P-1].coordinate)/2){({index:s}=e[P]);break}}return s},nne=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:u}=e;if((u==="vertical"||u==="horizontal"&&s==="middle")&&o!=="center"&&Oe(t[o]))return ki(ki({},t),{},{[o]:t[o]+(r||0)});if((u==="horizontal"||u==="vertical"&&o==="center")&&s!=="middle"&&Oe(t[s]))return ki(ki({},t),{},{[s]:t[s]+(i||0)})}return t},tc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",UO=1e-4,rne=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-UO,o=Math.max(r[0],r[1])+UO,s=t(e[0]),u=t(e[n-1]);(s<i||s>o||u<i||u>o)&&t.domain([e[0],e[n-1]])}},ine=(t,e)=>{if(!e||e.length!==2||!Oe(e[0])||!Oe(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Oe(t[0])||t[0]<n)&&(i[0]=n),(!Oe(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},one=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,s=0;s<e;++s){var u=qi(t[s][n][1])?t[s][n][0]:t[s][n][1];u>=0?(t[s][n][0]=i,t[s][n][1]=i+u,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+u,o=t[s][n][1])}},sne=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var s=qi(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},ane={sign:one,expand:VZ,none:rd,silhouette:LZ,wiggle:UZ,positive:sne},lne=(t,e,n)=>{var r=ane[n],i=OZ().keys(e).value((o,s)=>+fi(o,s,0)).order(lS).offset(r);return i(t)};function a6(t){return t==null?void 0:String(t)}var FO=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var u=fi(o,e.dataKey,e.scale.domain()[s]);return Rn(u)?null:e.scale(u)-i/2+r},une=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},cne=t=>{var e=t.flat(2).filter(Oe);return[Math.min(...e),Math.max(...e)]},fne=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],dne=(t,e,n)=>{if(t!=null)return fne(Object.keys(t).reduce((r,i)=>{var o=t[i],{stackedData:s}=o,u=s.reduce((c,f)=>{var h=cne(f.slice(e,n+1));return[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},BO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ex=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=S0(e,h=>h.coordinate),o=1/0,s=1,u=i.length;s<u;s++){var c=i[s],f=i[s-1];o=Math.min((c.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function zO(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return ki(ki({},e),{},{dataKey:n,payload:r,value:i,name:o})}function l6(t,e){if(t)return String(t);if(typeof e=="string")return e}function hne(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var o=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return o?{x:t,y:e}:null}return r?Qte({x:t,y:e},r):null}var mne=(t,e,n,r)=>{var i=e.find(f=>f&&f.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,{radius:s}=r;return ki(ki(ki({},r),ur(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var u=i.coordinate,{angle:c}=r;return ki(ki(ki({},r),ur(r.cx,r.cy,u,c)),{},{angle:c,radius:u})}return{x:0,y:0}},pne=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,pl=t=>t.layout.width,gl=t=>t.layout.height,gne=t=>t.layout.scale,u6=t=>t.layout.margin,bx=ae(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),wx=ae(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),yne="data-recharts-item-index",vne="data-recharts-item-data-key",D0=60;function $O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ma(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(n),!0).forEach(function(r){_ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ne(t,e,n){return(e=Tne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tne(t){var e=Ene(t,"string");return typeof e=="symbol"?e:e+""}function Ene(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bne=t=>t.brush.height,dr=ae([pl,gl,u6,bne,bx,wx,O3,qee],(t,e,n,r,i,o,s,u)=>{var c=o.reduce((w,A)=>{var{orientation:I}=A;if(!A.mirror&&!A.hide){var R=typeof A.width=="number"?A.width:D0;return Ma(Ma({},w),{},{[I]:w[I]+R})}return w},{left:n.left||0,right:n.right||0}),f=i.reduce((w,A)=>{var{orientation:I}=A;return!A.mirror&&!A.hide?Ma(Ma({},w),{},{[I]:qu(w,"".concat(I))+A.height}):w},{top:n.top||0,bottom:n.bottom||0}),h=Ma(Ma({},f),c),y=h.bottom;h.bottom+=r,h=nne(h,s,u);var _=t-h.left-h.right,E=e-h.top-h.bottom;return Ma(Ma({brushBottom:y},h),{},{width:Math.max(_,0),height:Math.max(E,0)})}),wne=ae(dr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),c6=ae(pl,gl,(t,e)=>({x:0,y:0,width:t,height:e})),Ane=O.createContext(null),yi=()=>O.useContext(Ane)!=null,N0=t=>t.brush,k0=ae([N0,dr,u6],(t,e,n)=>({height:t.height,x:Oe(t.x)?t.x:e.left,y:Oe(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Oe(t.width)?t.width:e.width})),Ax=()=>{var t,e=yi(),n=Le(wne),r=Le(k0),i=(t=Le(N0))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Sne={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Sx=()=>{var t;return(t=Le(dr))!==null&&t!==void 0?t:Sne},f6=()=>Le(pl),d6=()=>Le(gl),Ine={top:0,right:0,bottom:0,left:0},Cne=()=>{var t;return(t=Le(e=>e.layout.margin))!==null&&t!==void 0?t:Ine},Ot=t=>t.layout.layoutType,Ix=()=>Le(Ot),xne={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},h6=Gi({name:"legend",initialState:xne,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=ja(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:GO,setLegendSettings:Rne,addLegendPayload:Pne,removeLegendPayload:Mne}=h6.actions,Dne=h6.reducer,Nne=["contextPayload"];function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_S.apply(null,arguments)}function jO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function od(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jO(Object(n),!0).forEach(function(r){Cx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cx(t,e,n){return(e=kne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kne(t){var e=One(t,"string");return typeof e=="symbol"?e:e+""}function One(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vne(t,e){if(t==null)return{};var n,r,i=Lne(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Une(t){return t.value}function Fne(t){var{contextPayload:e}=t,n=Vne(t,Nne),r=M3(e,t.payloadUniqBy,Une),i=od(od({},n),{},{payload:r});return O.isValidElement(t.content)?O.cloneElement(t.content,i):typeof t.content=="function"?O.createElement(t.content,i):O.createElement(ux,i)}function Bne(t,e,n,r,i,o){var{layout:s,align:u,verticalAlign:c}=e,f,h;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(u==="center"&&s==="vertical"?f={left:((r||0)-o.width)/2}:f=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?h={top:((i||0)-o.height)/2}:h=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),od(od({},f),h)}function qne(t){var e=gn();return O.useEffect(()=>{e(Rne(t))},[e,t]),null}function zne(t){var e=gn();return O.useEffect(()=>(e(GO(t)),()=>{e(GO({width:0,height:0}))}),[e,t]),null}function $ne(t){var e=Gee(),n=oZ(),r=Cne(),{width:i,height:o,wrapperStyle:s,portal:u}=t,[c,f]=V3([e]),h=f6(),y=d6(),_=h-(r.left||0)-(r.right||0),E=O0.getWidthOrHeight(t.layout,o,i,_),w=u?s:od(od({position:"absolute",width:E?.width||i||"auto",height:E?.height||o||"auto"},Bne(s,t,r,h,y,c)),s),A=u??n;if(A==null)return null;var I=O.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:f},O.createElement(qne,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),O.createElement(zne,{width:c.width,height:c.height}),O.createElement(Fne,_S({},t,E,{margin:r,chartWidth:h,chartHeight:y,contextPayload:e})));return s3.createPortal(I,A)}class O0 extends O.PureComponent{static getWidthOrHeight(e,n,r,i){return e==="vertical"&&Oe(n)?{height:n}:e==="horizontal"?{width:r||i}:null}render(){return O.createElement($ne,this.props)}}Cx(O0,"displayName","Legend");Cx(O0,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(null,arguments)}function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){Gne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gne(t,e,n){return(e=jne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jne(t){var e=Hne(t,"string");return typeof e=="symbol"?e:e+""}function Hne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kne(t){return Array.isArray(t)&&Wo(t[0])&&Wo(t[1])?t.join(" ~ "):t}var Wne=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:u,wrapperClassName:c,labelClassName:f,label:h,labelFormatter:y,accessibilityLayer:_=!1}=t,E=()=>{if(o&&o.length){var U={padding:0,margin:0},$=(u?S0(o,u):o).map((D,N)=>{if(D.type==="none")return null;var V=D.formatter||s||Kne,{value:q,name:B}=D,G=q,z=B;if(V){var Ve=V(q,B,D,N,o);if(Array.isArray(Ve))[G,z]=Ve;else if(Ve!=null)G=Ve;else return null}var Pe=Rw({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},r);return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:Pe},Wo(z)?O.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Wo(z)?O.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,O.createElement("span",{className:"recharts-tooltip-item-value"},G),O.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:U},$)}return null},w=Rw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=Rw({margin:0},i),I=!Rn(h),R=I?h:"",M=Ut("recharts-default-tooltip",c),P=Ut("recharts-tooltip-label",f);I&&y&&o!==void 0&&o!==null&&(R=y(h,o));var F=_?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",TS({className:M,style:w},F),O.createElement("p",{className:P,style:A},O.isValidElement(R)?R:"".concat(R)),E())},lm="recharts-tooltip-wrapper",Yne={visibility:"hidden"};function Jne(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ut(lm,{["".concat(lm,"-right")]:Oe(n)&&e&&Oe(e.x)&&n>=e.x,["".concat(lm,"-left")]:Oe(n)&&e&&Oe(e.x)&&n<e.x,["".concat(lm,"-bottom")]:Oe(r)&&e&&Oe(e.y)&&r>=e.y,["".concat(lm,"-top")]:Oe(r)&&e&&Oe(e.y)&&r<e.y})}function KO(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:u,viewBox:c,viewBoxDimension:f}=t;if(o&&Oe(o[r]))return o[r];var h=n[r]-u-(i>0?i:0),y=n[r]+i;if(e[r])return s[r]?h:y;var _=c[r];if(_==null)return 0;if(s[r]){var E=h,w=_;return E<w?Math.max(y,_):Math.max(h,_)}if(f==null)return 0;var A=y+u,I=_+f;return A>I?Math.max(h,_):Math.max(y,_)}function Qne(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Xne(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:u,viewBox:c}=t,f,h,y;return s.height>0&&s.width>0&&n?(h=KO({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),y=KO({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),f=Qne({translateX:h,translateY:y,useTranslate3d:u})):f=Yne,{cssProperties:f,cssClasses:Jne({translateX:h,translateY:y,coordinate:n})}}function WO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(n),!0).forEach(function(r){ES(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ES(t,e,n){return(e=Zne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zne(t){var e=ere(t,"string");return typeof e=="symbol"?e:e+""}function ere(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class tre extends O.PureComponent{constructor(){super(...arguments),ES(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ES(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:u,isAnimationActive:c,offset:f,position:h,reverseDirection:y,useTranslate3d:_,viewBox:E,wrapperStyle:w,lastBoundingBox:A,innerRef:I,hasPortalFromProps:R}=this.props,{cssClasses:M,cssProperties:P}=Xne({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:f,position:h,reverseDirection:y,tooltipBox:{height:A.height,width:A.width},useTranslate3d:_,viewBox:E}),F=R?{}:Hy(Hy({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&u?"visible":"hidden",position:"absolute",top:0,left:0}),U=Hy(Hy({},F),{},{visibility:!this.state.dismissed&&e&&u?"visible":"hidden"},w);return O.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:M,style:U,ref:I},o)}}var nre=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),eg={isSsr:nre()},m6=()=>Le(t=>t.rootProps.accessibilityLayer);function gi(t){return Number.isFinite(t)}function l_(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(null,arguments)}function YO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YO(Object(n),!0).forEach(function(r){rre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rre(t,e,n){return(e=ire(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ire(t){var e=ore(t,"string");return typeof e=="symbol"?e:e+""}function ore(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QO={curveBasisClosed:AZ,curveBasisOpen:SZ,curveBasis:wZ,curveBumpX:uZ,curveBumpY:cZ,curveLinearClosed:IZ,curveLinear:w0,curveMonotoneX:CZ,curveMonotoneY:xZ,curveNatural:RZ,curveStep:PZ,curveStepAfter:DZ,curveStepBefore:MZ},Ky=t=>gi(t.x)&&gi(t.y),um=t=>t.x,cm=t=>t.y,sre=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Xp(t));return(n==="curveMonotone"||n==="curveBump")&&e?QO["".concat(n).concat(e==="vertical"?"Y":"X")]:QO[n]||w0},are=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=sre(e,i),u=o?n.filter(Ky):n,c;if(Array.isArray(r)){var f=o?r.filter(y=>Ky(y)):r,h=u.map((y,_)=>JO(JO({},y),{},{base:f[_]}));return i==="vertical"?c=qy().y(cm).x1(um).x0(y=>y.base.x):c=qy().x(um).y1(cm).y0(y=>y.base.y),c.defined(Ky).curve(s),c(h)}return i==="vertical"&&Oe(r)?c=qy().y(cm).x1(um).x0(r):Oe(r)?c=qy().x(um).y1(cm).y0(r):c=h3().x(um).y(cm),c.defined(Ky).curve(s),c(u)},lre=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var o=n&&n.length?are(t):r;return O.createElement("path",bS({},Xt(t,!1),JX(t),{className:Ut("recharts-curve",e),d:o===null?void 0:o,ref:i}))},ure=["x","y","top","left","width","height","className"];function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(null,arguments)}function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(r){fre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fre(t,e,n){return(e=dre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dre(t){var e=hre(t,"string");return typeof e=="symbol"?e:e+""}function hre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mre(t,e){if(t==null)return{};var n,r,i=pre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gre=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),yre=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:u}=t,c=mre(t,ure),f=cre({x:e,y:n,top:r,left:i,width:o,height:s},c);return!Oe(e)||!Oe(n)||!Oe(o)||!Oe(s)||!Oe(r)||!Oe(i)?null:O.createElement("path",wS({},Xt(f,!0),{className:Ut("recharts-cross",u),d:gre(e,n,o,s,r,i)}))};function vre(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function ZO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(n),!0).forEach(function(r){Tre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tre(t,e,n){return(e=Ere(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ere(t){var e=bre(t,"string");return typeof e=="symbol"?e:e+""}function bre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nc(t,e){var n=_re({},t),r=e,i=Object.keys(e),o=i.reduce((s,u)=>(s[u]===void 0&&r[u]!==void 0&&(s[u]=r[u]),s),n);return o}var Pw={},Mw={},Dw={},e2;function wre(){return e2||(e2=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}t.isPlainObject=e}(Dw)),Dw}var t2;function Are(){return t2||(t2=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wre(),n=x3(),r=hx(),i=mx(),o=fx();function s(f,h,y){return u(f,h,void 0,void 0,void 0,void 0,y)}function u(f,h,y,_,E,w,A){const I=A(f,h,y,_,E,w);if(I!==void 0)return I;if(typeof f==typeof h)switch(typeof f){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return f===h;case"number":return f===h||Object.is(f,h);case"function":return f===h;case"object":return c(f,h,w,A)}return c(f,h,w,A)}function c(f,h,y,_){if(Object.is(f,h))return!0;let E=r.getTag(f),w=r.getTag(h);if(E===i.argumentsTag&&(E=i.objectTag),w===i.argumentsTag&&(w=i.objectTag),E!==w)return!1;switch(E){case i.stringTag:return f.toString()===h.toString();case i.numberTag:{const R=f.valueOf(),M=h.valueOf();return o.eq(R,M)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(f.valueOf(),h.valueOf());case i.regexpTag:return f.source===h.source&&f.flags===h.flags;case i.functionTag:return f===h}y=y??new Map;const A=y.get(f),I=y.get(h);if(A!=null&&I!=null)return A===h;y.set(f,h),y.set(h,f);try{switch(E){case i.mapTag:{if(f.size!==h.size)return!1;for(const[R,M]of f.entries())if(!h.has(R)||!u(M,h.get(R),R,f,h,y,_))return!1;return!0}case i.setTag:{if(f.size!==h.size)return!1;const R=Array.from(f.values()),M=Array.from(h.values());for(let P=0;P<R.length;P++){const F=R[P],U=M.findIndex($=>u(F,$,void 0,f,h,y,_));if(U===-1)return!1;M.splice(U,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(f)!==Buffer.isBuffer(h)||f.length!==h.length)return!1;for(let R=0;R<f.length;R++)if(!u(f[R],h[R],R,f,h,y,_))return!1;return!0}case i.arrayBufferTag:return f.byteLength!==h.byteLength?!1:c(new Uint8Array(f),new Uint8Array(h),y,_);case i.dataViewTag:return f.byteLength!==h.byteLength||f.byteOffset!==h.byteOffset?!1:c(new Uint8Array(f),new Uint8Array(h),y,_);case i.errorTag:return f.name===h.name&&f.message===h.message;case i.objectTag:{if(!(c(f.constructor,h.constructor,y,_)||e.isPlainObject(f)&&e.isPlainObject(h)))return!1;const M=[...Object.keys(f),...n.getSymbols(f)],P=[...Object.keys(h),...n.getSymbols(h)];if(M.length!==P.length)return!1;for(let F=0;F<M.length;F++){const U=M[F],$=f[U];if(!Object.hasOwn(h,U))return!1;const D=h[U];if(!u($,D,U,f,h,y,_))return!1}return!0}default:return!1}}finally{y.delete(f),y.delete(h)}}t.isEqualWith=s}(Mw)),Mw}var Nw={},n2;function Sre(){return n2||(n2=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(){}t.noop=e}(Nw)),Nw}var r2;function Ire(){return r2||(r2=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Are(),n=Sre();function r(i,o){return e.isEqualWith(i,o,n.noop)}t.isEqual=r}(Pw)),Pw}var kw,i2;function Cre(){return i2||(i2=1,kw=Ire().isEqual),kw}var xre=Cre();const Rre=lo(xre);function Pre(t){var e={},n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var u=s,[c,...f]=u;if(typeof c=="number"){i=t.setTimeout(o.bind(null,f),c);return}o(c),i=t.setTimeout(o.bind(null,f));return}typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}var u_=1e-4,p6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],g6=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),o2=(t,e)=>n=>{var r=p6(t,e);return g6(r,n)},Mre=(t,e)=>n=>{var r=p6(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return g6(i,n)},s2=function(){for(var e,n,r,i,o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];if(s.length===1)switch(s[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var c=s[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,r,n,i]=c[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else s.length===4&&([e,r,n,i]=s);var f=o2(e,n),h=o2(r,i),y=Mre(e,n),_=w=>w>1?1:w<0?0:w,E=w=>{for(var A=w>1?1:w,I=A,R=0;R<8;++R){var M=f(I)-A,P=y(I);if(Math.abs(M-A)<u_||P<u_)return h(I);I=_(I-M/P)}return h(I)};return E.isStepper=!1,E},Dre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,u,c)=>{var f=-(s-u)*n,h=c*r,y=c+(f-h)*i/1e3,_=c*i/1e3+s;return Math.abs(_-u)<u_&&Math.abs(y)<u_?[u,0]:[_,y]};return o.isStepper=!0,o.dt=i,o},Nre=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return s2(t);case"spring":return Dre();default:if(t.split("(")[0]==="cubic-bezier")return s2(t)}return typeof t=="function"?t:null};function a2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a2(Object(n),!0).forEach(function(r){kre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kre(t,e,n){return(e=Ore(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ore(t){var e=Vre(t,"string");return typeof e=="symbol"?e:e+""}function Vre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lre=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Ure=(t,e,n)=>t.map(r=>"".concat(Lre(r)," ").concat(e,"ms ").concat(n)).join(","),Fre=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),vp=(t,e)=>Object.keys(e).reduce((n,r)=>l2(l2({},n),{},{[r]:t(r,e[r])}),{});function u2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(n),!0).forEach(function(r){Bre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bre(t,e,n){return(e=qre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qre(t){var e=zre(t,"string");return typeof e=="symbol"?e:e+""}function zre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c_=(t,e,n)=>t+(e-t)*n,AS=t=>{var{from:e,to:n}=t;return e!==n},y6=(t,e,n)=>{var r=vp((i,o)=>{if(AS(o)){var[s,u]=t(o.from,o.to,o.velocity);return ar(ar({},o),{},{from:s,velocity:u})}return o},e);return n<1?vp((i,o)=>AS(o)?ar(ar({},o),{},{velocity:c_(o.velocity,r[i].velocity,n),from:c_(o.from,r[i].from,n)}):o,e):y6(t,r,n-1)};function $re(t,e,n,r,i,o){var s,u=r.reduce((_,E)=>ar(ar({},_),{},{[E]:{from:t[E],velocity:0,to:e[E]}}),{}),c=()=>vp((_,E)=>E.from,u),f=()=>!Object.values(u).filter(AS).length,h=null,y=_=>{s||(s=_);var E=_-s,w=E/n.dt;u=y6(n,u,w),i(ar(ar(ar({},t),e),c())),s=_,f()||(h=o.setTimeout(y))};return()=>(h=o.setTimeout(y),()=>{h()})}function Gre(t,e,n,r,i,o,s){var u=null,c=i.reduce((y,_)=>ar(ar({},y),{},{[_]:[t[_],e[_]]}),{}),f,h=y=>{f||(f=y);var _=(y-f)/r,E=vp((A,I)=>c_(...I,n(_)),c);if(o(ar(ar(ar({},t),e),E)),_<1)u=s.setTimeout(h);else{var w=vp((A,I)=>c_(...I,n(1)),c);o(ar(ar(ar({},t),e),w))}};return()=>(u=s.setTimeout(h),()=>{u()})}const jre=(t,e,n,r,i,o)=>{var s=Fre(t,e);return n.isStepper===!0?$re(t,e,n,s,i,o):Gre(t,e,n,r,s,i,o)};class Hre{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}var Kre=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(null,arguments)}function Wre(t,e){if(t==null)return{};var n,r,i=Yre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Yre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function c2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c2(Object(n),!0).forEach(function(r){vu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vu(t,e,n){return(e=Jre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jre(t){var e=Qre(t,"string");return typeof e=="symbol"?e:e+""}function Qre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xre(){return Pre(new Hre)}class xx extends O.PureComponent{constructor(e,n){super(e,n),vu(this,"mounted",!1),vu(this,"manager",null),vu(this,"stopJSAnimation",null),vu(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:o,to:s,children:u,duration:c,animationManager:f}=this.props;if(this.manager=f,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||c<=0){this.state={style:{}},typeof u=="function"&&(this.state={style:s});return}if(o){if(typeof u=="function"){this.state={style:o};return}this.state={style:i?{[i]:o}:o}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:n}=this.props;this.mounted=!0,!(!e||!n)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:o,to:s,from:u}=this.props,{style:c}=this.state;if(r){if(!n){var f={style:i?{[i]:s}:s};this.state&&c&&(i&&c[i]!==s||!i&&c!==s)&&this.setState(f);return}if(!(Rre(e.to,s)&&e.canBegin&&e.isActive)){var h=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=h||o?u:e.to;if(this.state&&c){var _={style:i?{[i]:y}:y};(i&&c[i]!==y||!i&&c!==y)&&this.setState(_)}this.runAnimation(Da(Da({},this.props),{},{from:y,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:n,to:r,duration:i,easing:o,begin:s,onAnimationEnd:u,onAnimationStart:c}=e,f=jre(n,r,Nre(o),i,this.changeStyle,this.manager.getTimeoutController()),h=()=>{this.stopJSAnimation=f()};this.manager.start([c,s,h,i,u])}runAnimation(e){var{begin:n,duration:r,attributeName:i,to:o,easing:s,onAnimationStart:u,onAnimationEnd:c,children:f}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof s=="function"||typeof f=="function"||s==="spring"){this.runJSAnimation(e);return}var h=i?{[i]:o}:o,y=Ure(Object.keys(h),r,s);this.manager.start([u,n,Da(Da({},h),{},{transition:y}),r,c])}render(){var e=this.props,{children:n,begin:r,duration:i,attributeName:o,easing:s,isActive:u,from:c,to:f,canBegin:h,onAnimationEnd:y,shouldReAnimate:_,onAnimationReStart:E,animationManager:w}=e,A=Wre(e,Kre),I=O.Children.count(n),R=this.state.style;if(typeof n=="function")return n(R);if(!u||I===0||i<=0)return n;var M=P=>{var{style:F={},className:U}=P.props,$=O.cloneElement(P,Da(Da({},A),{},{style:Da(Da({},F),R),className:U}));return $};return I===1?M(O.Children.only(n)):O.createElement("div",null,O.Children.map(n,P=>M(P)))}}vu(xx,"displayName","Animate");vu(xx,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var Zre=O.createContext(null);function sd(t){var e,n,r=O.useContext(Zre);return O.createElement(xx,SS({},t,{animationManager:(e=(n=t.animationManager)!==null&&n!==void 0?n:r)!==null&&e!==void 0?e:Xre()}))}function f_(){return f_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f_.apply(null,arguments)}var f2=(t,e,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,u=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],y=0,_=4;y<_;y++)h[y]=i[y]>o?o:i[y];f="M".concat(t,",").concat(e+s*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(t+u*h[0],",").concat(e)),f+="L ".concat(t+n-u*h[1],",").concat(e),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+s*h[1])),f+="L ".concat(t+n,",").concat(e+r-s*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(t+n-u*h[2],",").concat(e+r)),f+="L ".concat(t+u*h[3],",").concat(e+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-s*h[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var E=Math.min(o,i);f="M ".concat(t,",").concat(e+s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+u*E,",").concat(e,`
            L `).concat(t+n-u*E,",").concat(e,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*E,`
            L `).concat(t+n,",").concat(e+r-s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n-u*E,",").concat(e+r,`
            L `).concat(t+u*E,",").concat(e+r,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*E," Z")}else f="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},eie={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},v6=t=>{var e=nc(t,eie),n=O.useRef(null),[r,i]=O.useState(-1);O.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var R=n.current.getTotalLength();R&&i(R)}catch{}},[]);var{x:o,y:s,width:u,height:c,radius:f,className:h}=e,{animationEasing:y,animationDuration:_,animationBegin:E,isAnimationActive:w,isUpdateAnimationActive:A}=e;if(o!==+o||s!==+s||u!==+u||c!==+c||u===0||c===0)return null;var I=Ut("recharts-rectangle",h);return A?O.createElement(sd,{canBegin:r>0,from:{width:u,height:c,x:o,y:s},to:{width:u,height:c,x:o,y:s},duration:_,animationEasing:y,isActive:A},R=>{var{width:M,height:P,x:F,y:U}=R;return O.createElement(sd,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:E,duration:_,isActive:w,easing:y},O.createElement("path",f_({},Xt(e,!0),{className:I,d:f2(F,U,M,P,f),ref:n})))}):O.createElement("path",f_({},Xt(e,!0),{className:I,d:f2(o,s,u,c,f)}))};function _6(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=ur(e,n,r,i),u=ur(e,n,r,o);return{points:[s,u],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IS.apply(null,arguments)}var tie=(t,e)=>{var n=ui(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Wy=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:u,cornerIsExternal:c}=t,f=u*(s?1:-1)+r,h=Math.asin(u/f)/a_,y=c?i:i+o*h,_=ur(e,n,f,y),E=ur(e,n,r,y),w=c?i-o*h:i,A=ur(e,n,f*Math.cos(h*a_),w);return{center:_,circleTangency:E,lineTangency:A,theta:h}},T6=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,u=tie(o,s),c=o+u,f=ur(e,n,i,o),h=ur(e,n,i,c),y="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(o>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var _=ur(e,n,r,o),E=ur(e,n,r,c);y+="L ".concat(E.x,",").concat(E.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(o<=c),`,
            `).concat(_.x,",").concat(_.y," Z")}else y+="L ".concat(e,",").concat(n," Z");return y},nie=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:u,startAngle:c,endAngle:f}=t,h=ui(f-c),{circleTangency:y,lineTangency:_,theta:E}=Wy({cx:e,cy:n,radius:i,angle:c,sign:h,cornerRadius:o,cornerIsExternal:u}),{circleTangency:w,lineTangency:A,theta:I}=Wy({cx:e,cy:n,radius:i,angle:f,sign:-h,cornerRadius:o,cornerIsExternal:u}),R=u?Math.abs(c-f):Math.abs(c-f)-E-I;if(R<0)return s?"M ".concat(_.x,",").concat(_.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):T6({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:f});var M="M ".concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:P,lineTangency:F,theta:U}=Wy({cx:e,cy:n,radius:r,angle:c,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),{circleTangency:$,lineTangency:D,theta:N}=Wy({cx:e,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),V=u?Math.abs(c-f):Math.abs(c-f)-U-N;if(V<0&&o===0)return"".concat(M,"L").concat(e,",").concat(n,"Z");M+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat($.x,",").concat($.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(V>180),",").concat(+(h>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(F.x,",").concat(F.y,"Z")}else M+="L".concat(e,",").concat(n,"Z");return M},rie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},E6=t=>{var e=nc(t,rie),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:u,cornerIsExternal:c,startAngle:f,endAngle:h,className:y}=e;if(o<i||f===h)return null;var _=Ut("recharts-sector",y),E=o-i,w=ao(s,E,0,!0),A;return w>0&&Math.abs(f-h)<360?A=nie({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(w,E/2),forceCornerRadius:u,cornerIsExternal:c,startAngle:f,endAngle:h}):A=T6({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:f,endAngle:h}),O.createElement("path",IS({},Xt(e,!0),{className:_,d:A}))};function iie(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:u,cy:c,innerRadius:f,outerRadius:h,angle:y}=e,_=ur(u,c,f,y),E=ur(u,c,h,y);r=_.x,i=_.y,o=E.x,s=E.y}else return _6(e);return[{x:r,y:i},{x:o,y:s}]}var Ow={},Vw={},Lw={},d2;function oie(){return d2||(d2=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N3();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n}(Lw)),Lw}var h2;function sie(){return h2||(h2=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oie();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n}(Vw)),Vw}var m2;function aie(){return m2||(m2=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k3(),n=sie();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const u=Math.max(Math.ceil((o-i)/(s||1)),0),c=new Array(u);for(let f=0;f<u;f++)c[f]=i,i+=s;return c}t.range=r}(Ow)),Ow}var Uw,p2;function lie(){return p2||(p2=1,Uw=aie().range),Uw}var uie=lie();const b6=lo(uie);function Ha(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cie(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rx(t){let e,n,r;t.length!==2?(e=Ha,n=(u,c)=>Ha(t(u),c),r=(u,c)=>t(u)-c):(e=t===Ha||t===cie?t:fie,n=t,r=t);function i(u,c,f=0,h=u.length){if(f<h){if(e(c,c)!==0)return h;do{const y=f+h>>>1;n(u[y],c)<0?f=y+1:h=y}while(f<h)}return f}function o(u,c,f=0,h=u.length){if(f<h){if(e(c,c)!==0)return h;do{const y=f+h>>>1;n(u[y],c)<=0?f=y+1:h=y}while(f<h)}return f}function s(u,c,f=0,h=u.length){const y=i(u,c,f,h-1);return y>f&&r(u[y-1],c)>-r(u[y],c)?y-1:y}return{left:i,center:s,right:o}}function fie(){return 0}function w6(t){return t===null?NaN:+t}function*die(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const hie=Rx(Ha),tg=hie.right;Rx(w6).center;class g2 extends Map{constructor(e,n=gie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(y2(this,e))}has(e){return super.has(y2(this,e))}set(e,n){return super.set(mie(this,e),n)}delete(e){return super.delete(pie(this,e))}}function y2({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function mie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function pie({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function gie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function yie(t=Ha){if(t===Ha)return A6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function A6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const vie=Math.sqrt(50),_ie=Math.sqrt(10),Tie=Math.sqrt(2);function d_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=vie?10:o>=_ie?5:o>=Tie?2:1;let u,c,f;return i<0?(f=Math.pow(10,-i)/s,u=Math.round(t*f),c=Math.round(e*f),u/f<t&&++u,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*s,u=Math.round(t/f),c=Math.round(e/f),u*f<t&&++u,c*f>e&&--c),c<u&&.5<=n&&n<2?d_(t,e,n*2):[u,c,f]}function CS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?d_(e,t,n):d_(t,e,n);if(!(o>=i))return[];const u=o-i+1,c=new Array(u);if(r)if(s<0)for(let f=0;f<u;++f)c[f]=(o-f)/-s;else for(let f=0;f<u;++f)c[f]=(o-f)*s;else if(s<0)for(let f=0;f<u;++f)c[f]=(i+f)/-s;else for(let f=0;f<u;++f)c[f]=(i+f)*s;return c}function xS(t,e,n){return e=+e,t=+t,n=+n,d_(t,e,n)[2]}function RS(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?xS(e,t,n):xS(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function v2(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function _2(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function S6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?A6:yie(i);r>n;){if(r-n>600){const c=r-n+1,f=e-n+1,h=Math.log(c),y=.5*Math.exp(2*h/3),_=.5*Math.sqrt(h*y*(c-y)/c)*(f-c/2<0?-1:1),E=Math.max(n,Math.floor(e-f*y/c+_)),w=Math.min(r,Math.floor(e+(c-f)*y/c+_));S6(t,e,E,w,i)}const o=t[e];let s=n,u=r;for(fm(t,n,e),i(t[r],o)>0&&fm(t,n,r);s<u;){for(fm(t,s,u),++s,--u;i(t[s],o)<0;)++s;for(;i(t[u],o)>0;)--u}i(t[n],o)===0?fm(t,n,u):(++u,fm(t,u,r)),u<=e&&(n=u+1),e<=u&&(r=u-1)}return t}function fm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Eie(t,e,n){if(t=Float64Array.from(die(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return _2(t);if(e>=1)return v2(t);var r,i=(r-1)*e,o=Math.floor(i),s=v2(S6(t,o).subarray(0,o+1)),u=_2(t.subarray(o+1));return s+(u-s)*(i-o)}}function bie(t,e,n=w6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),u=+n(t[o+1],o+1,t);return s+(u-s)*(i-o)}}function wie(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function ji(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ks(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const PS=Symbol("implicit");function Px(){var t=new g2,e=[],n=[],r=PS;function i(o){let s=t.get(o);if(s===void 0){if(r!==PS)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new g2;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Px(e,n).unknown(r)},ji.apply(i,arguments),i}function Mx(){var t=Px().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,u=!1,c=0,f=0,h=.5;delete t.unknown;function y(){var _=e().length,E=i<r,w=E?i:r,A=E?r:i;o=(A-w)/Math.max(1,_-c+f*2),u&&(o=Math.floor(o)),w+=(A-w-o*(_-c))*h,s=o*(1-c),u&&(w=Math.round(w),s=Math.round(s));var I=wie(_).map(function(R){return w+o*R});return n(E?I.reverse():I)}return t.domain=function(_){return arguments.length?(e(_),y()):e()},t.range=function(_){return arguments.length?([r,i]=_,r=+r,i=+i,y()):[r,i]},t.rangeRound=function(_){return[r,i]=_,r=+r,i=+i,u=!0,y()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(_){return arguments.length?(u=!!_,y()):u},t.padding=function(_){return arguments.length?(c=Math.min(1,f=+_),y()):c},t.paddingInner=function(_){return arguments.length?(c=Math.min(1,_),y()):c},t.paddingOuter=function(_){return arguments.length?(f=+_,y()):f},t.align=function(_){return arguments.length?(h=Math.max(0,Math.min(1,_)),y()):h},t.copy=function(){return Mx(e(),[r,i]).round(u).paddingInner(c).paddingOuter(f).align(h)},ji.apply(y(),arguments)}function I6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return I6(e())},t}function Aie(){return I6(Mx.apply(null,arguments).paddingInner(1))}function Dx(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function C6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ng(){}var _p=.7,h_=1/_p,Mf="\\s*([+-]?\\d+)\\s*",Tp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sie=/^#([0-9a-f]{3,8})$/,Iie=new RegExp(`^rgb\\(${Mf},${Mf},${Mf}\\)$`),Cie=new RegExp(`^rgb\\(${zo},${zo},${zo}\\)$`),xie=new RegExp(`^rgba\\(${Mf},${Mf},${Mf},${Tp}\\)$`),Rie=new RegExp(`^rgba\\(${zo},${zo},${zo},${Tp}\\)$`),Pie=new RegExp(`^hsl\\(${Tp},${zo},${zo}\\)$`),Mie=new RegExp(`^hsla\\(${Tp},${zo},${zo},${Tp}\\)$`),T2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dx(ng,Ep,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:E2,formatHex:E2,formatHex8:Die,formatHsl:Nie,formatRgb:b2,toString:b2});function E2(){return this.rgb().formatHex()}function Die(){return this.rgb().formatHex8()}function Nie(){return x6(this).formatHsl()}function b2(){return this.rgb().formatRgb()}function Ep(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?w2(e):n===3?new Gr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Iie.exec(t))?new Gr(e[1],e[2],e[3],1):(e=Cie.exec(t))?new Gr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xie.exec(t))?Yy(e[1],e[2],e[3],e[4]):(e=Rie.exec(t))?Yy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Pie.exec(t))?I2(e[1],e[2]/100,e[3]/100,1):(e=Mie.exec(t))?I2(e[1],e[2]/100,e[3]/100,e[4]):T2.hasOwnProperty(t)?w2(T2[t]):t==="transparent"?new Gr(NaN,NaN,NaN,0):null}function w2(t){return new Gr(t>>16&255,t>>8&255,t&255,1)}function Yy(t,e,n,r){return r<=0&&(t=e=n=NaN),new Gr(t,e,n,r)}function kie(t){return t instanceof ng||(t=Ep(t)),t?(t=t.rgb(),new Gr(t.r,t.g,t.b,t.opacity)):new Gr}function MS(t,e,n,r){return arguments.length===1?kie(t):new Gr(t,e,n,r??1)}function Gr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Dx(Gr,MS,C6(ng,{brighter(t){return t=t==null?h_:Math.pow(h_,t),new Gr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_p:Math.pow(_p,t),new Gr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gr(Iu(this.r),Iu(this.g),Iu(this.b),m_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A2,formatHex:A2,formatHex8:Oie,formatRgb:S2,toString:S2}));function A2(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}`}function Oie(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}${_u((isNaN(this.opacity)?1:this.opacity)*255)}`}function S2(){const t=m_(this.opacity);return`${t===1?"rgb(":"rgba("}${Iu(this.r)}, ${Iu(this.g)}, ${Iu(this.b)}${t===1?")":`, ${t})`}`}function m_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Iu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _u(t){return t=Iu(t),(t<16?"0":"")+t.toString(16)}function I2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new to(t,e,n,r)}function x6(t){if(t instanceof to)return new to(t.h,t.s,t.l,t.opacity);if(t instanceof ng||(t=Ep(t)),!t)return new to;if(t instanceof to)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,u=o-i,c=(o+i)/2;return u?(e===o?s=(n-r)/u+(n<r)*6:n===o?s=(r-e)/u+2:s=(e-n)/u+4,u/=c<.5?o+i:2-o-i,s*=60):u=c>0&&c<1?0:s,new to(s,u,c,t.opacity)}function Vie(t,e,n,r){return arguments.length===1?x6(t):new to(t,e,n,r??1)}function to(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Dx(to,Vie,C6(ng,{brighter(t){return t=t==null?h_:Math.pow(h_,t),new to(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_p:Math.pow(_p,t),new to(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Gr(Fw(t>=240?t-240:t+120,i,r),Fw(t,i,r),Fw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new to(C2(this.h),Jy(this.s),Jy(this.l),m_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=m_(this.opacity);return`${t===1?"hsl(":"hsla("}${C2(this.h)}, ${Jy(this.s)*100}%, ${Jy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function C2(t){return t=(t||0)%360,t<0?t+360:t}function Jy(t){return Math.max(0,Math.min(1,t||0))}function Fw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Nx=t=>()=>t;function Lie(t,e){return function(n){return t+n*e}}function Uie(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Fie(t){return(t=+t)==1?R6:function(e,n){return n-e?Uie(e,n,t):Nx(isNaN(e)?n:e)}}function R6(t,e){var n=e-t;return n?Lie(t,n):Nx(isNaN(t)?e:t)}const x2=function t(e){var n=Fie(e);function r(i,o){var s=n((i=MS(i)).r,(o=MS(o)).r),u=n(i.g,o.g),c=n(i.b,o.b),f=R6(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=u(h),i.b=c(h),i.opacity=f(h),i+""}}return r.gamma=t,r}(1);function Bie(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function qie(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zie(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Md(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(u){for(s=0;s<r;++s)o[s]=i[s](u);return o}}function $ie(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function p_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Gie(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Md(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var DS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bw=new RegExp(DS.source,"g");function jie(t){return function(){return t}}function Hie(t){return function(e){return t(e)+""}}function Kie(t,e){var n=DS.lastIndex=Bw.lastIndex=0,r,i,o,s=-1,u=[],c=[];for(t=t+"",e=e+"";(r=DS.exec(t))&&(i=Bw.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),u[s]?u[s]+=o:u[++s]=o),(r=r[0])===(i=i[0])?u[s]?u[s]+=i:u[++s]=i:(u[++s]=null,c.push({i:s,x:p_(r,i)})),n=Bw.lastIndex;return n<e.length&&(o=e.slice(n),u[s]?u[s]+=o:u[++s]=o),u.length<2?c[0]?Hie(c[0].x):jie(e):(e=c.length,function(f){for(var h=0,y;h<e;++h)u[(y=c[h]).i]=y.x(f);return u.join("")})}function Md(t,e){var n=typeof e,r;return e==null||n==="boolean"?Nx(e):(n==="number"?p_:n==="string"?(r=Ep(e))?(e=r,x2):Kie:e instanceof Ep?x2:e instanceof Date?$ie:qie(e)?Bie:Array.isArray(e)?zie:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gie:p_)(t,e)}function kx(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Wie(t,e){e===void 0&&(e=t,t=Md);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var u=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[u](s-u)}}function Yie(t){return function(){return t}}function g_(t){return+t}var R2=[0,1];function Mr(t){return t}function NS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Yie(isNaN(e)?NaN:.5)}function Jie(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Qie(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=NS(i,r),o=n(s,o)):(r=NS(r,i),o=n(o,s)),function(u){return o(r(u))}}function Xie(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=NS(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(u){var c=tg(t,u,1,r)-1;return o[c](i[c](u))}}function rg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function V0(){var t=R2,e=R2,n=Md,r,i,o,s=Mr,u,c,f;function h(){var _=Math.min(t.length,e.length);return s!==Mr&&(s=Jie(t[0],t[_-1])),u=_>2?Xie:Qie,c=f=null,y}function y(_){return _==null||isNaN(_=+_)?o:(c||(c=u(t.map(r),e,n)))(r(s(_)))}return y.invert=function(_){return s(i((f||(f=u(e,t.map(r),p_)))(_)))},y.domain=function(_){return arguments.length?(t=Array.from(_,g_),h()):t.slice()},y.range=function(_){return arguments.length?(e=Array.from(_),h()):e.slice()},y.rangeRound=function(_){return e=Array.from(_),n=kx,h()},y.clamp=function(_){return arguments.length?(s=_?!0:Mr,h()):s!==Mr},y.interpolate=function(_){return arguments.length?(n=_,h()):n},y.unknown=function(_){return arguments.length?(o=_,y):o},function(_,E){return r=_,i=E,h()}}function Ox(){return V0()(Mr,Mr)}function Zie(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function y_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ad(t){return t=y_(Math.abs(t)),t?t[1]:NaN}function eoe(t,e){return function(n,r){for(var i=n.length,o=[],s=0,u=t[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=t[s=(s+1)%t.length];return o.reverse().join(e)}}function toe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var noe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bp(t){if(!(e=noe.exec(t)))throw new Error("invalid format: "+t);var e;return new Vx({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bp.prototype=Vx.prototype;function Vx(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Vx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function roe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var P6;function ioe(t,e){var n=y_(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(P6=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+y_(t,Math.max(0,e+o-1))[0]}function P2(t,e){var n=y_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const M2={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zie,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>P2(t*100,e),r:P2,s:ioe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function D2(t){return t}var N2=Array.prototype.map,k2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ooe(t){var e=t.grouping===void 0||t.thousands===void 0?D2:eoe(N2.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?D2:toe(N2.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(y){y=bp(y);var _=y.fill,E=y.align,w=y.sign,A=y.symbol,I=y.zero,R=y.width,M=y.comma,P=y.precision,F=y.trim,U=y.type;U==="n"?(M=!0,U="g"):M2[U]||(P===void 0&&(P=12),F=!0,U="g"),(I||_==="0"&&E==="=")&&(I=!0,_="0",E="=");var $=A==="$"?n:A==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",D=A==="$"?r:/[%p]/.test(U)?s:"",N=M2[U],V=/[defgprs%]/.test(U);P=P===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function q(B){var G=$,z=D,Ve,Pe,ne;if(U==="c")z=N(B)+z,B="";else{B=+B;var me=B<0||1/B<0;if(B=isNaN(B)?c:N(Math.abs(B),P),F&&(B=roe(B)),me&&+B==0&&w!=="+"&&(me=!1),G=(me?w==="("?w:u:w==="-"||w==="("?"":w)+G,z=(U==="s"?k2[8+P6/3]:"")+z+(me&&w==="("?")":""),V){for(Ve=-1,Pe=B.length;++Ve<Pe;)if(ne=B.charCodeAt(Ve),48>ne||ne>57){z=(ne===46?i+B.slice(Ve+1):B.slice(Ve))+z,B=B.slice(0,Ve);break}}}M&&!I&&(B=e(B,1/0));var Ae=G.length+B.length+z.length,qe=Ae<R?new Array(R-Ae+1).join(_):"";switch(M&&I&&(B=e(qe+B,qe.length?R-z.length:1/0),qe=""),E){case"<":B=G+B+z+qe;break;case"=":B=G+qe+B+z;break;case"^":B=qe.slice(0,Ae=qe.length>>1)+G+B+z+qe.slice(Ae);break;default:B=qe+G+B+z;break}return o(B)}return q.toString=function(){return y+""},q}function h(y,_){var E=f((y=bp(y),y.type="f",y)),w=Math.max(-8,Math.min(8,Math.floor(ad(_)/3)))*3,A=Math.pow(10,-w),I=k2[8+w/3];return function(R){return E(A*R)+I}}return{format:f,formatPrefix:h}}var Qy,Lx,M6;soe({thousands:",",grouping:[3],currency:["$",""]});function soe(t){return Qy=ooe(t),Lx=Qy.format,M6=Qy.formatPrefix,Qy}function aoe(t){return Math.max(0,-ad(Math.abs(t)))}function loe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ad(e)/3)))*3-ad(Math.abs(t)))}function uoe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ad(e)-ad(t))+1}function D6(t,e,n,r){var i=RS(t,e,n),o;switch(r=bp(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=loe(i,s))&&(r.precision=o),M6(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=uoe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=aoe(i))&&(r.precision=o-(r.type==="%")*2);break}}return Lx(r)}function yl(t){var e=t.domain;return t.ticks=function(n){var r=e();return CS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return D6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],u=r[o],c,f,h=10;for(u<s&&(f=s,s=u,u=f,f=i,i=o,o=f);h-- >0;){if(f=xS(s,u,n),f===c)return r[i]=s,r[o]=u,e(r);if(f>0)s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f;else if(f<0)s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f;else break;c=f}return t},t}function N6(){var t=Ox();return t.copy=function(){return rg(t,N6())},ji.apply(t,arguments),yl(t)}function k6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,g_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return k6(t).unknown(e)},t=arguments.length?Array.from(t,g_):[0,1],yl(n)}function O6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function O2(t){return Math.log(t)}function V2(t){return Math.exp(t)}function coe(t){return-Math.log(-t)}function foe(t){return-Math.exp(-t)}function doe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function hoe(t){return t===10?doe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function moe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function L2(t){return(e,n)=>-t(-e,n)}function Ux(t){const e=t(O2,V2),n=e.domain;let r=10,i,o;function s(){return i=moe(r),o=hoe(r),n()[0]<0?(i=L2(i),o=L2(o),t(coe,foe)):t(O2,V2),e}return e.base=function(u){return arguments.length?(r=+u,s()):r},e.domain=function(u){return arguments.length?(n(u),s()):n()},e.ticks=u=>{const c=n();let f=c[0],h=c[c.length-1];const y=h<f;y&&([f,h]=[h,f]);let _=i(f),E=i(h),w,A;const I=u==null?10:+u;let R=[];if(!(r%1)&&E-_<I){if(_=Math.floor(_),E=Math.ceil(E),f>0){for(;_<=E;++_)for(w=1;w<r;++w)if(A=_<0?w/o(-_):w*o(_),!(A<f)){if(A>h)break;R.push(A)}}else for(;_<=E;++_)for(w=r-1;w>=1;--w)if(A=_>0?w/o(-_):w*o(_),!(A<f)){if(A>h)break;R.push(A)}R.length*2<I&&(R=CS(f,h,I))}else R=CS(_,E,Math.min(E-_,I)).map(o);return y?R.reverse():R},e.tickFormat=(u,c)=>{if(u==null&&(u=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=bp(c)).precision==null&&(c.trim=!0),c=Lx(c)),u===1/0)return c;const f=Math.max(1,r*u/e.ticks().length);return h=>{let y=h/o(Math.round(i(h)));return y*r<r-.5&&(y*=r),y<=f?c(h):""}},e.nice=()=>n(O6(n(),{floor:u=>o(Math.floor(i(u))),ceil:u=>o(Math.ceil(i(u)))})),e}function V6(){const t=Ux(V0()).domain([1,10]);return t.copy=()=>rg(t,V6()).base(t.base()),ji.apply(t,arguments),t}function U2(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function F2(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Fx(t){var e=1,n=t(U2(e),F2(e));return n.constant=function(r){return arguments.length?t(U2(e=+r),F2(e)):e},yl(n)}function L6(){var t=Fx(V0());return t.copy=function(){return rg(t,L6()).constant(t.constant())},ji.apply(t,arguments)}function B2(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function poe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function goe(t){return t<0?-t*t:t*t}function Bx(t){var e=t(Mr,Mr),n=1;function r(){return n===1?t(Mr,Mr):n===.5?t(poe,goe):t(B2(n),B2(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},yl(e)}function qx(){var t=Bx(V0());return t.copy=function(){return rg(t,qx()).exponent(t.exponent())},ji.apply(t,arguments),t}function yoe(){return qx.apply(null,arguments).exponent(.5)}function q2(t){return Math.sign(t)*t*t}function voe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function U6(){var t=Ox(),e=[0,1],n=!1,r;function i(o){var s=voe(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(q2(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,g_)).map(q2)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return U6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ji.apply(i,arguments),yl(i)}function F6(){var t=[],e=[],n=[],r;function i(){var s=0,u=Math.max(1,e.length);for(n=new Array(u-1);++s<u;)n[s-1]=bie(t,s/u);return o}function o(s){return s==null||isNaN(s=+s)?r:e[tg(n,s)]}return o.invertExtent=function(s){var u=e.indexOf(s);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let u of s)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(Ha),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return F6().domain(t).range(e).unknown(r)},ji.apply(o,arguments)}function B6(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[tg(r,c,0,n)]:o}function u(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,u()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,u()):i.slice()},s.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return B6().domain([t,e]).range(i).unknown(o)},ji.apply(yl(s),arguments)}function q6(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[tg(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return q6().domain(t).range(e).unknown(n)},ji.apply(i,arguments)}const qw=new Date,zw=new Date;function Bn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),u=i.ceil(o);return o-s<u-o?s:u},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,u)=>{const c=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<s)||!(u>0))return c;let f;do c.push(f=new Date(+o)),e(o,u),t(o);while(f<o&&o<s);return c},i.filter=o=>Bn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,u)=>{if(s>=s)if(u<0)for(;++u<=0;)for(;e(s,-1),!o(s););else for(;--u>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(qw.setTime(+o),zw.setTime(+s),t(qw),t(zw),Math.floor(n(qw,zw))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const v_=Bn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);v_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Bn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):v_);v_.range;const xs=1e3,Vi=xs*60,Rs=Vi*60,Ls=Rs*24,zx=Ls*7,z2=Ls*30,$w=Ls*365,Tu=Bn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*xs)},(t,e)=>(e-t)/xs,t=>t.getUTCSeconds());Tu.range;const $x=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xs)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getMinutes());$x.range;const Gx=Bn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getUTCMinutes());Gx.range;const jx=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xs-t.getMinutes()*Vi)},(t,e)=>{t.setTime(+t+e*Rs)},(t,e)=>(e-t)/Rs,t=>t.getHours());jx.range;const Hx=Bn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Rs)},(t,e)=>(e-t)/Rs,t=>t.getUTCHours());Hx.range;const ig=Bn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vi)/Ls,t=>t.getDate()-1);ig.range;const L0=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ls,t=>t.getUTCDate()-1);L0.range;const z6=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ls,t=>Math.floor(t/Ls));z6.range;function rc(t){return Bn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Vi)/zx)}const U0=rc(0),__=rc(1),_oe=rc(2),Toe=rc(3),ld=rc(4),Eoe=rc(5),boe=rc(6);U0.range;__.range;_oe.range;Toe.range;ld.range;Eoe.range;boe.range;function ic(t){return Bn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/zx)}const F0=ic(0),T_=ic(1),woe=ic(2),Aoe=ic(3),ud=ic(4),Soe=ic(5),Ioe=ic(6);F0.range;T_.range;woe.range;Aoe.range;ud.range;Soe.range;Ioe.range;const Kx=Bn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Kx.range;const Wx=Bn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Wx.range;const Us=Bn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Us.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Us.range;const Fs=Bn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Fs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Fs.range;function $6(t,e,n,r,i,o){const s=[[Tu,1,xs],[Tu,5,5*xs],[Tu,15,15*xs],[Tu,30,30*xs],[o,1,Vi],[o,5,5*Vi],[o,15,15*Vi],[o,30,30*Vi],[i,1,Rs],[i,3,3*Rs],[i,6,6*Rs],[i,12,12*Rs],[r,1,Ls],[r,2,2*Ls],[n,1,zx],[e,1,z2],[e,3,3*z2],[t,1,$w]];function u(f,h,y){const _=h<f;_&&([f,h]=[h,f]);const E=y&&typeof y.range=="function"?y:c(f,h,y),w=E?E.range(f,+h+1):[];return _?w.reverse():w}function c(f,h,y){const _=Math.abs(h-f)/y,E=Rx(([,,I])=>I).right(s,_);if(E===s.length)return t.every(RS(f/$w,h/$w,y));if(E===0)return v_.every(Math.max(RS(f,h,y),1));const[w,A]=s[_/s[E-1][2]<s[E][2]/_?E-1:E];return w.every(A)}return[u,c]}const[Coe,xoe]=$6(Fs,Wx,F0,z6,Hx,Gx),[Roe,Poe]=$6(Us,Kx,U0,ig,jx,$x);function Gw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Moe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,u=t.months,c=t.shortMonths,f=hm(i),h=mm(i),y=hm(o),_=mm(o),E=hm(s),w=mm(s),A=hm(u),I=mm(u),R=hm(c),M=mm(c),P={a:me,A:Ae,b:qe,B:K,c:null,d:W2,e:W2,f:ese,g:cse,G:dse,H:Qoe,I:Xoe,j:Zoe,L:G6,m:tse,M:nse,p:ue,q:se,Q:Q2,s:X2,S:rse,u:ise,U:ose,V:sse,w:ase,W:lse,x:null,X:null,y:use,Y:fse,Z:hse,"%":J2},F={a:de,A:Me,b:Fe,B:Ge,c:null,d:Y2,e:Y2,f:yse,g:Cse,G:Rse,H:mse,I:pse,j:gse,L:H6,m:vse,M:_se,p:yn,q:Ct,Q:Q2,s:X2,S:Tse,u:Ese,U:bse,V:wse,w:Ase,W:Sse,x:null,X:null,y:Ise,Y:xse,Z:Pse,"%":J2},U={a:q,A:B,b:G,B:z,c:Ve,d:H2,e:H2,f:Koe,g:j2,G:G2,H:K2,I:K2,j:$oe,L:Hoe,m:zoe,M:Goe,p:V,q:qoe,Q:Yoe,s:Joe,S:joe,u:Voe,U:Loe,V:Uoe,w:Ooe,W:Foe,x:Pe,X:ne,y:j2,Y:G2,Z:Boe,"%":Woe};P.x=$(n,P),P.X=$(r,P),P.c=$(e,P),F.x=$(n,F),F.X=$(r,F),F.c=$(e,F);function $(Ee,Ke){return function(Ye){var pe=[],tn=-1,lt=0,Mn=Ee.length,qn,vn,lc;for(Ye instanceof Date||(Ye=new Date(+Ye));++tn<Mn;)Ee.charCodeAt(tn)===37&&(pe.push(Ee.slice(lt,tn)),(vn=$2[qn=Ee.charAt(++tn)])!=null?qn=Ee.charAt(++tn):vn=qn==="e"?" ":"0",(lc=Ke[qn])&&(qn=lc(Ye,vn)),pe.push(qn),lt=tn+1);return pe.push(Ee.slice(lt,tn)),pe.join("")}}function D(Ee,Ke){return function(Ye){var pe=dm(1900,void 0,1),tn=N(pe,Ee,Ye+="",0),lt,Mn;if(tn!=Ye.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(Ke&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(lt=jw(dm(pe.y,0,1)),Mn=lt.getUTCDay(),lt=Mn>4||Mn===0?T_.ceil(lt):T_(lt),lt=L0.offset(lt,(pe.V-1)*7),pe.y=lt.getUTCFullYear(),pe.m=lt.getUTCMonth(),pe.d=lt.getUTCDate()+(pe.w+6)%7):(lt=Gw(dm(pe.y,0,1)),Mn=lt.getDay(),lt=Mn>4||Mn===0?__.ceil(lt):__(lt),lt=ig.offset(lt,(pe.V-1)*7),pe.y=lt.getFullYear(),pe.m=lt.getMonth(),pe.d=lt.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),Mn="Z"in pe?jw(dm(pe.y,0,1)).getUTCDay():Gw(dm(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(Mn+5)%7:pe.w+pe.U*7-(Mn+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,jw(pe)):Gw(pe)}}function N(Ee,Ke,Ye,pe){for(var tn=0,lt=Ke.length,Mn=Ye.length,qn,vn;tn<lt;){if(pe>=Mn)return-1;if(qn=Ke.charCodeAt(tn++),qn===37){if(qn=Ke.charAt(tn++),vn=U[qn in $2?Ke.charAt(tn++):qn],!vn||(pe=vn(Ee,Ye,pe))<0)return-1}else if(qn!=Ye.charCodeAt(pe++))return-1}return pe}function V(Ee,Ke,Ye){var pe=f.exec(Ke.slice(Ye));return pe?(Ee.p=h.get(pe[0].toLowerCase()),Ye+pe[0].length):-1}function q(Ee,Ke,Ye){var pe=E.exec(Ke.slice(Ye));return pe?(Ee.w=w.get(pe[0].toLowerCase()),Ye+pe[0].length):-1}function B(Ee,Ke,Ye){var pe=y.exec(Ke.slice(Ye));return pe?(Ee.w=_.get(pe[0].toLowerCase()),Ye+pe[0].length):-1}function G(Ee,Ke,Ye){var pe=R.exec(Ke.slice(Ye));return pe?(Ee.m=M.get(pe[0].toLowerCase()),Ye+pe[0].length):-1}function z(Ee,Ke,Ye){var pe=A.exec(Ke.slice(Ye));return pe?(Ee.m=I.get(pe[0].toLowerCase()),Ye+pe[0].length):-1}function Ve(Ee,Ke,Ye){return N(Ee,e,Ke,Ye)}function Pe(Ee,Ke,Ye){return N(Ee,n,Ke,Ye)}function ne(Ee,Ke,Ye){return N(Ee,r,Ke,Ye)}function me(Ee){return s[Ee.getDay()]}function Ae(Ee){return o[Ee.getDay()]}function qe(Ee){return c[Ee.getMonth()]}function K(Ee){return u[Ee.getMonth()]}function ue(Ee){return i[+(Ee.getHours()>=12)]}function se(Ee){return 1+~~(Ee.getMonth()/3)}function de(Ee){return s[Ee.getUTCDay()]}function Me(Ee){return o[Ee.getUTCDay()]}function Fe(Ee){return c[Ee.getUTCMonth()]}function Ge(Ee){return u[Ee.getUTCMonth()]}function yn(Ee){return i[+(Ee.getUTCHours()>=12)]}function Ct(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var Ke=$(Ee+="",P);return Ke.toString=function(){return Ee},Ke},parse:function(Ee){var Ke=D(Ee+="",!1);return Ke.toString=function(){return Ee},Ke},utcFormat:function(Ee){var Ke=$(Ee+="",F);return Ke.toString=function(){return Ee},Ke},utcParse:function(Ee){var Ke=D(Ee+="",!0);return Ke.toString=function(){return Ee},Ke}}}var $2={"-":"",_:" ",0:"0"},Qn=/^\s*\d+/,Doe=/^%/,Noe=/[\\^$*+?|[\]().{}]/g;function gt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function koe(t){return t.replace(Noe,"\\$&")}function hm(t){return new RegExp("^(?:"+t.map(koe).join("|")+")","i")}function mm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Ooe(t,e,n){var r=Qn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Voe(t,e,n){var r=Qn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Loe(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Uoe(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Foe(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function G2(t,e,n){var r=Qn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function j2(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Boe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function qoe(t,e,n){var r=Qn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function zoe(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function H2(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function $oe(t,e,n){var r=Qn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function K2(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Goe(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function joe(t,e,n){var r=Qn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Hoe(t,e,n){var r=Qn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Koe(t,e,n){var r=Qn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Woe(t,e,n){var r=Doe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Yoe(t,e,n){var r=Qn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Joe(t,e,n){var r=Qn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function W2(t,e){return gt(t.getDate(),e,2)}function Qoe(t,e){return gt(t.getHours(),e,2)}function Xoe(t,e){return gt(t.getHours()%12||12,e,2)}function Zoe(t,e){return gt(1+ig.count(Us(t),t),e,3)}function G6(t,e){return gt(t.getMilliseconds(),e,3)}function ese(t,e){return G6(t,e)+"000"}function tse(t,e){return gt(t.getMonth()+1,e,2)}function nse(t,e){return gt(t.getMinutes(),e,2)}function rse(t,e){return gt(t.getSeconds(),e,2)}function ise(t){var e=t.getDay();return e===0?7:e}function ose(t,e){return gt(U0.count(Us(t)-1,t),e,2)}function j6(t){var e=t.getDay();return e>=4||e===0?ld(t):ld.ceil(t)}function sse(t,e){return t=j6(t),gt(ld.count(Us(t),t)+(Us(t).getDay()===4),e,2)}function ase(t){return t.getDay()}function lse(t,e){return gt(__.count(Us(t)-1,t),e,2)}function use(t,e){return gt(t.getFullYear()%100,e,2)}function cse(t,e){return t=j6(t),gt(t.getFullYear()%100,e,2)}function fse(t,e){return gt(t.getFullYear()%1e4,e,4)}function dse(t,e){var n=t.getDay();return t=n>=4||n===0?ld(t):ld.ceil(t),gt(t.getFullYear()%1e4,e,4)}function hse(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gt(e/60|0,"0",2)+gt(e%60,"0",2)}function Y2(t,e){return gt(t.getUTCDate(),e,2)}function mse(t,e){return gt(t.getUTCHours(),e,2)}function pse(t,e){return gt(t.getUTCHours()%12||12,e,2)}function gse(t,e){return gt(1+L0.count(Fs(t),t),e,3)}function H6(t,e){return gt(t.getUTCMilliseconds(),e,3)}function yse(t,e){return H6(t,e)+"000"}function vse(t,e){return gt(t.getUTCMonth()+1,e,2)}function _se(t,e){return gt(t.getUTCMinutes(),e,2)}function Tse(t,e){return gt(t.getUTCSeconds(),e,2)}function Ese(t){var e=t.getUTCDay();return e===0?7:e}function bse(t,e){return gt(F0.count(Fs(t)-1,t),e,2)}function K6(t){var e=t.getUTCDay();return e>=4||e===0?ud(t):ud.ceil(t)}function wse(t,e){return t=K6(t),gt(ud.count(Fs(t),t)+(Fs(t).getUTCDay()===4),e,2)}function Ase(t){return t.getUTCDay()}function Sse(t,e){return gt(T_.count(Fs(t)-1,t),e,2)}function Ise(t,e){return gt(t.getUTCFullYear()%100,e,2)}function Cse(t,e){return t=K6(t),gt(t.getUTCFullYear()%100,e,2)}function xse(t,e){return gt(t.getUTCFullYear()%1e4,e,4)}function Rse(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ud(t):ud.ceil(t),gt(t.getUTCFullYear()%1e4,e,4)}function Pse(){return"+0000"}function J2(){return"%"}function Q2(t){return+t}function X2(t){return Math.floor(+t/1e3)}var ff,W6,Y6;Mse({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Mse(t){return ff=Moe(t),W6=ff.format,ff.parse,Y6=ff.utcFormat,ff.utcParse,ff}function Dse(t){return new Date(t)}function Nse(t){return t instanceof Date?+t:+new Date(+t)}function Yx(t,e,n,r,i,o,s,u,c,f){var h=Ox(),y=h.invert,_=h.domain,E=f(".%L"),w=f(":%S"),A=f("%I:%M"),I=f("%I %p"),R=f("%a %d"),M=f("%b %d"),P=f("%B"),F=f("%Y");function U($){return(c($)<$?E:u($)<$?w:s($)<$?A:o($)<$?I:r($)<$?i($)<$?R:M:n($)<$?P:F)($)}return h.invert=function($){return new Date(y($))},h.domain=function($){return arguments.length?_(Array.from($,Nse)):_().map(Dse)},h.ticks=function($){var D=_();return t(D[0],D[D.length-1],$??10)},h.tickFormat=function($,D){return D==null?U:f(D)},h.nice=function($){var D=_();return(!$||typeof $.range!="function")&&($=e(D[0],D[D.length-1],$??10)),$?_(O6(D,$)):h},h.copy=function(){return rg(h,Yx(t,e,n,r,i,o,s,u,c,f))},h}function kse(){return ji.apply(Yx(Roe,Poe,Us,Kx,U0,ig,jx,$x,Tu,W6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ose(){return ji.apply(Yx(Coe,xoe,Fs,Wx,F0,L0,Hx,Gx,Tu,Y6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B0(){var t=0,e=1,n,r,i,o,s=Mr,u=!1,c;function f(y){return y==null||isNaN(y=+y)?c:s(i===0?.5:(y=(o(y)-n)*i,u?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([t,e]=y,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(y){return arguments.length?(u=!!y,f):u},f.interpolator=function(y){return arguments.length?(s=y,f):s};function h(y){return function(_){var E,w;return arguments.length?([E,w]=_,s=y(E,w),f):[s(0),s(1)]}}return f.range=h(Md),f.rangeRound=h(kx),f.unknown=function(y){return arguments.length?(c=y,f):c},function(y){return o=y,n=y(t),r=y(e),i=n===r?0:1/(r-n),f}}function vl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function J6(){var t=yl(B0()(Mr));return t.copy=function(){return vl(t,J6())},Ks.apply(t,arguments)}function Q6(){var t=Ux(B0()).domain([1,10]);return t.copy=function(){return vl(t,Q6()).base(t.base())},Ks.apply(t,arguments)}function X6(){var t=Fx(B0());return t.copy=function(){return vl(t,X6()).constant(t.constant())},Ks.apply(t,arguments)}function Jx(){var t=Bx(B0());return t.copy=function(){return vl(t,Jx()).exponent(t.exponent())},Ks.apply(t,arguments)}function Vse(){return Jx.apply(null,arguments).exponent(.5)}function Z6(){var t=[],e=Mr;function n(r){if(r!=null&&!isNaN(r=+r))return e((tg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ha),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Eie(t,o/r))},n.copy=function(){return Z6(e).domain(t)},Ks.apply(n,arguments)}function q0(){var t=0,e=.5,n=1,r=1,i,o,s,u,c,f=Mr,h,y=!1,_;function E(A){return isNaN(A=+A)?_:(A=.5+((A=+h(A))-o)*(r*A<r*o?u:c),f(y?Math.max(0,Math.min(1,A)):A))}E.domain=function(A){return arguments.length?([t,e,n]=A,i=h(t=+t),o=h(e=+e),s=h(n=+n),u=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E):[t,e,n]},E.clamp=function(A){return arguments.length?(y=!!A,E):y},E.interpolator=function(A){return arguments.length?(f=A,E):f};function w(A){return function(I){var R,M,P;return arguments.length?([R,M,P]=I,f=Wie(A,[R,M,P]),E):[f(0),f(.5),f(1)]}}return E.range=w(Md),E.rangeRound=w(kx),E.unknown=function(A){return arguments.length?(_=A,E):_},function(A){return h=A,i=A(t),o=A(e),s=A(n),u=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E}}function e5(){var t=yl(q0()(Mr));return t.copy=function(){return vl(t,e5())},Ks.apply(t,arguments)}function t5(){var t=Ux(q0()).domain([.1,1,10]);return t.copy=function(){return vl(t,t5()).base(t.base())},Ks.apply(t,arguments)}function n5(){var t=Fx(q0());return t.copy=function(){return vl(t,n5()).constant(t.constant())},Ks.apply(t,arguments)}function Qx(){var t=Bx(q0());return t.copy=function(){return vl(t,Qx()).exponent(t.exponent())},Ks.apply(t,arguments)}function Lse(){return Qx.apply(null,arguments).exponent(.5)}const Sm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Mx,scaleDiverging:e5,scaleDivergingLog:t5,scaleDivergingPow:Qx,scaleDivergingSqrt:Lse,scaleDivergingSymlog:n5,scaleIdentity:k6,scaleImplicit:PS,scaleLinear:N6,scaleLog:V6,scaleOrdinal:Px,scalePoint:Aie,scalePow:qx,scaleQuantile:F6,scaleQuantize:B6,scaleRadial:U6,scaleSequential:J6,scaleSequentialLog:Q6,scaleSequentialPow:Jx,scaleSequentialQuantile:Z6,scaleSequentialSqrt:Vse,scaleSequentialSymlog:X6,scaleSqrt:yoe,scaleSymlog:L6,scaleThreshold:q6,scaleTime:kse,scaleUtc:Ose,tickFormat:D6},Symbol.toStringTag,{value:"Module"}));var Dd=t=>t.chartData,Use=ae([Dd],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),r5=(t,e,n,r)=>r?Use(t):Dd(t);function cd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(gi(e)&&gi(n))return!0}return!1}function Z2(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Fse(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(gi(n))i=n;else if(typeof n=="function")return;if(gi(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(cd(s))return s}}function Bse(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(cd(r))return Z2(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,u;if(i==="auto")e!=null&&(s=Math.min(...e));else if(Oe(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&BO.test(i)){var c=BO.exec(i);if(c==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e?.[0];if(o==="auto")e!=null&&(u=Math.max(...e));else if(Oe(o))u=o;else if(typeof o=="function")try{e!=null&&(u=o(e?.[1]))}catch{}else if(typeof o=="string"&&qO.test(o)){var h=qO.exec(o);if(h==null||e==null)u=void 0;else{var y=+h[1];u=e[1]+y}}else u=e?.[1];var _=[s,u];if(cd(_))return e==null?_:Z2(_,e,n)}}}var Nd=1e9,qse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Zx,Jt=!0,$i="[DecimalError] ",Cu=$i+"Invalid argument: ",Xx=$i+"Exponent out of range: ",kd=Math.floor,au=Math.pow,zse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ai,Wn=1e7,zt=7,i5=9007199254740991,E_=kd(i5/zt),Se={};Se.absoluteValue=Se.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Se.comparedTo=Se.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Se.dividedBy=Se.div=function(t){return Ms(this,new this.constructor(t))};Se.dividedToIntegerBy=Se.idiv=function(t){var e=this,n=e.constructor;return kt(Ms(e,new n(t),0,1),n.precision)};Se.equals=Se.eq=function(t){return!this.cmp(t)};Se.exponent=function(){return Pn(this)};Se.greaterThan=Se.gt=function(t){return this.cmp(t)>0};Se.greaterThanOrEqualTo=Se.gte=function(t){return this.cmp(t)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(t){return this.cmp(t)<0};Se.lessThanOrEqualTo=Se.lte=function(t){return this.cmp(t)<1};Se.logarithm=Se.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ai))throw Error($i+"NaN");if(n.s<1)throw Error($i+(n.s?"NaN":"-Infinity"));return n.eq(ai)?new r(0):(Jt=!1,e=Ms(wp(n,o),wp(t,o),o),Jt=!0,kt(e,i))};Se.minus=Se.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?a5(e,t):o5(e,(t.s=-t.s,t))};Se.modulo=Se.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error($i+"NaN");return n.s?(Jt=!1,e=Ms(n,t,0,1).times(t),Jt=!0,n.minus(e)):kt(new r(n),i)};Se.naturalExponential=Se.exp=function(){return s5(this)};Se.naturalLogarithm=Se.ln=function(){return wp(this)};Se.negated=Se.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Se.plus=Se.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?o5(e,t):a5(e,(t.s=-t.s,t))};Se.precision=Se.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Cu+t);if(e=Pn(i)+1,r=i.d.length-1,n=r*zt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Se.squareRoot=Se.sqrt=function(){var t,e,n,r,i,o,s,u=this,c=u.constructor;if(u.s<1){if(!u.s)return new c(0);throw Error($i+"NaN")}for(t=Pn(u),Jt=!1,i=Math.sqrt(+u),i==0||i==1/0?(e=Vo(u.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=kd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=r,r=o.plus(Ms(u,o,s+2)).times(.5),Vo(o.d).slice(0,s)===(e=Vo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(kt(o,n+1,0),o.times(o).eq(u)){r=o;break}}else if(e!="9999")break;s+=4}return Jt=!0,kt(r,n)};Se.times=Se.mul=function(t){var e,n,r,i,o,s,u,c,f,h=this,y=h.constructor,_=h.d,E=(t=new y(t)).d;if(!h.s||!t.s)return new y(0);for(t.s*=h.s,n=h.e+t.e,c=_.length,f=E.length,c<f&&(o=_,_=E,E=o,s=c,c=f,f=s),o=[],s=c+f,r=s;r--;)o.push(0);for(r=f;--r>=0;){for(e=0,i=c+r;i>r;)u=o[i]+E[r]*_[i-r-1]+e,o[i--]=u%Wn|0,e=u/Wn|0;o[i]=(o[i]+e)%Wn|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,Jt?kt(t,y.precision):t};Se.toDecimalPlaces=Se.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Jo(t,0,Nd),e===void 0?e=r.rounding:Jo(e,0,8),kt(n,t+Pn(n)+1,e))};Se.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Gu(r,!0):(Jo(t,0,Nd),e===void 0?e=i.rounding:Jo(e,0,8),r=kt(new i(r),t+1,e),n=Gu(r,!0,t+1)),n};Se.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Gu(i):(Jo(t,0,Nd),e===void 0?e=o.rounding:Jo(e,0,8),r=kt(new o(i),t+Pn(i)+1,e),n=Gu(r.abs(),!1,t+Pn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Se.toInteger=Se.toint=function(){var t=this,e=t.constructor;return kt(new e(t),Pn(t)+1,e.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(t){var e,n,r,i,o,s,u=this,c=u.constructor,f=12,h=+(t=new c(t));if(!t.s)return new c(ai);if(u=new c(u),!u.s){if(t.s<1)throw Error($i+"Infinity");return u}if(u.eq(ai))return u;if(r=c.precision,t.eq(ai))return kt(u,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=u.s,s){if((n=h<0?-h:h)<=i5){for(i=new c(ai),e=Math.ceil(r/zt+4),Jt=!1;n%2&&(i=i.times(u),tV(i.d,e)),n=kd(n/2),n!==0;)u=u.times(u),tV(u.d,e);return Jt=!0,t.s<0?new c(ai).div(i):kt(i,r)}}else if(o<0)throw Error($i+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,u.s=1,Jt=!1,i=t.times(wp(u,r+f)),Jt=!0,i=s5(i),i.s=o,i};Se.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Pn(i),r=Gu(i,n<=o.toExpNeg||n>=o.toExpPos)):(Jo(t,1,Nd),e===void 0?e=o.rounding:Jo(e,0,8),i=kt(new o(i),t,e),n=Pn(i),r=Gu(i,t<=n||n<=o.toExpNeg,t)),r};Se.toSignificantDigits=Se.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Jo(t,1,Nd),e===void 0?e=r.rounding:Jo(e,0,8)),kt(new r(n),t,e)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Pn(t),n=t.constructor;return Gu(t,e<=n.toExpNeg||e>=n.toExpPos)};function o5(t,e){var n,r,i,o,s,u,c,f,h=t.constructor,y=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Jt?kt(e,y):e;if(c=t.d,f=e.d,s=t.e,i=e.e,c=c.slice(),o=s-i,o){for(o<0?(r=c,o=-o,u=f.length):(r=f,i=s,u=c.length),s=Math.ceil(y/zt),u=s>u?s+1:u+1,o>u&&(o=u,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(u=c.length,o=f.length,u-o<0&&(o=u,r=f,f=c,c=r),n=0;o;)n=(c[--o]=c[o]+f[o]+n)/Wn|0,c[o]%=Wn;for(n&&(c.unshift(n),++i),u=c.length;c[--u]==0;)c.pop();return e.d=c,e.e=i,Jt?kt(e,y):e}function Jo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Cu+t)}function Vo(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=zt-r.length,n&&(o+=Na(n)),o+=r;s=t[e],r=s+"",n=zt-r.length,n&&(o+=Na(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Ms=function(){function t(r,i){var o,s=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+s,r[u]=o%Wn|0,s=o/Wn|0;return s&&r.unshift(s),r}function e(r,i,o,s){var u,c;if(o!=s)c=o>s?1:-1;else for(u=c=0;u<o;u++)if(r[u]!=i[u]){c=r[u]>i[u]?1:-1;break}return c}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Wn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var u,c,f,h,y,_,E,w,A,I,R,M,P,F,U,$,D,N,V=r.constructor,q=r.s==i.s?1:-1,B=r.d,G=i.d;if(!r.s)return new V(r);if(!i.s)throw Error($i+"Division by zero");for(c=r.e-i.e,D=G.length,U=B.length,E=new V(q),w=E.d=[],f=0;G[f]==(B[f]||0);)++f;if(G[f]>(B[f]||0)&&--c,o==null?M=o=V.precision:s?M=o+(Pn(r)-Pn(i))+1:M=o,M<0)return new V(0);if(M=M/zt+2|0,f=0,D==1)for(h=0,G=G[0],M++;(f<U||h)&&M--;f++)P=h*Wn+(B[f]||0),w[f]=P/G|0,h=P%G|0;else{for(h=Wn/(G[0]+1)|0,h>1&&(G=t(G,h),B=t(B,h),D=G.length,U=B.length),F=D,A=B.slice(0,D),I=A.length;I<D;)A[I++]=0;N=G.slice(),N.unshift(0),$=G[0],G[1]>=Wn/2&&++$;do h=0,u=e(G,A,D,I),u<0?(R=A[0],D!=I&&(R=R*Wn+(A[1]||0)),h=R/$|0,h>1?(h>=Wn&&(h=Wn-1),y=t(G,h),_=y.length,I=A.length,u=e(y,A,_,I),u==1&&(h--,n(y,D<_?N:G,_))):(h==0&&(u=h=1),y=G.slice()),_=y.length,_<I&&y.unshift(0),n(A,y,I),u==-1&&(I=A.length,u=e(G,A,D,I),u<1&&(h++,n(A,D<I?N:G,I))),I=A.length):u===0&&(h++,A=[0]),w[f++]=h,u&&A[0]?A[I++]=B[F]||0:(A=[B[F]],I=1);while((F++<U||A[0]!==void 0)&&M--)}return w[0]||w.shift(),E.e=c,kt(E,s?o+Pn(E)+1:o)}}();function s5(t,e){var n,r,i,o,s,u,c=0,f=0,h=t.constructor,y=h.precision;if(Pn(t)>16)throw Error(Xx+Pn(t));if(!t.s)return new h(ai);for(Jt=!1,u=y,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),f+=5;for(r=Math.log(au(2,f))/Math.LN10*2+5|0,u+=r,n=i=o=new h(ai),h.precision=u;;){if(i=kt(i.times(t),u),n=n.times(++c),s=o.plus(Ms(i,n,u)),Vo(s.d).slice(0,u)===Vo(o.d).slice(0,u)){for(;f--;)o=kt(o.times(o),u);return h.precision=y,e==null?(Jt=!0,kt(o,y)):o}o=s}}function Pn(t){for(var e=t.e*zt,n=t.d[0];n>=10;n/=10)e++;return e}function Hw(t,e,n){if(e>t.LN10.sd())throw Jt=!0,n&&(t.precision=n),Error($i+"LN10 precision limit exceeded");return kt(new t(t.LN10),e)}function Na(t){for(var e="";t--;)e+="0";return e}function wp(t,e){var n,r,i,o,s,u,c,f,h,y=1,_=10,E=t,w=E.d,A=E.constructor,I=A.precision;if(E.s<1)throw Error($i+(E.s?"NaN":"-Infinity"));if(E.eq(ai))return new A(0);if(e==null?(Jt=!1,f=I):f=e,E.eq(10))return e==null&&(Jt=!0),Hw(A,f);if(f+=_,A.precision=f,n=Vo(w),r=n.charAt(0),o=Pn(E),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=Vo(E.d),r=n.charAt(0),y++;o=Pn(E),r>1?(E=new A("0."+n),o++):E=new A(r+"."+n.slice(1))}else return c=Hw(A,f+2,I).times(o+""),E=wp(new A(r+"."+n.slice(1)),f-_).plus(c),A.precision=I,e==null?(Jt=!0,kt(E,I)):E;for(u=s=E=Ms(E.minus(ai),E.plus(ai),f),h=kt(E.times(E),f),i=3;;){if(s=kt(s.times(h),f),c=u.plus(Ms(s,new A(i),f)),Vo(c.d).slice(0,f)===Vo(u.d).slice(0,f))return u=u.times(2),o!==0&&(u=u.plus(Hw(A,f+2,I).times(o+""))),u=Ms(u,new A(y),f),A.precision=I,e==null?(Jt=!0,kt(u,I)):u;u=c,i+=2}}function eV(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=kd(n/zt),t.d=[],r=(n+1)%zt,n<0&&(r+=zt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=zt;r<i;)t.d.push(+e.slice(r,r+=zt));e=e.slice(r),r=zt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Jt&&(t.e>E_||t.e<-E_))throw Error(Xx+n)}else t.s=0,t.e=0,t.d=[0];return t}function kt(t,e,n){var r,i,o,s,u,c,f,h,y=t.d;for(s=1,o=y[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=zt,i=e,f=y[h=0];else{if(h=Math.ceil((r+1)/zt),o=y.length,h>=o)return t;for(f=o=y[h],s=1;o>=10;o/=10)s++;r%=zt,i=r-zt+s}if(n!==void 0&&(o=au(10,s-i-1),u=f/o%10|0,c=e<0||y[h+1]!==void 0||f%o,c=n<4?(u||c)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||c||n==6&&(r>0?i>0?f/au(10,s-i):0:y[h-1])%10&1||n==(t.s<0?8:7))),e<1||!y[0])return c?(o=Pn(t),y.length=1,e=e-o-1,y[0]=au(10,(zt-e%zt)%zt),t.e=kd(-e/zt)||0):(y.length=1,y[0]=t.e=t.s=0),t;if(r==0?(y.length=h,o=1,h--):(y.length=h+1,o=au(10,zt-r),y[h]=i>0?(f/au(10,s-i)%au(10,i)|0)*o:0),c)for(;;)if(h==0){(y[0]+=o)==Wn&&(y[0]=1,++t.e);break}else{if(y[h]+=o,y[h]!=Wn)break;y[h--]=0,o=1}for(r=y.length;y[--r]===0;)y.pop();if(Jt&&(t.e>E_||t.e<-E_))throw Error(Xx+Pn(t));return t}function a5(t,e){var n,r,i,o,s,u,c,f,h,y,_=t.constructor,E=_.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new _(t),Jt?kt(e,E):e;if(c=t.d,y=e.d,r=e.e,f=t.e,c=c.slice(),s=f-r,s){for(h=s<0,h?(n=c,s=-s,u=y.length):(n=y,r=f,u=c.length),i=Math.max(Math.ceil(E/zt),u)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,u=y.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(c[i]!=y[i]){h=c[i]<y[i];break}s=0}for(h&&(n=c,c=y,y=n,e.s=-e.s),u=c.length,i=y.length-u;i>0;--i)c[u++]=0;for(i=y.length;i>s;){if(c[--i]<y[i]){for(o=i;o&&c[--o]===0;)c[o]=Wn-1;--c[o],c[i]+=Wn}c[i]-=y[i]}for(;c[--u]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Jt?kt(e,E):e):new _(0)}function Gu(t,e,n){var r,i=Pn(t),o=Vo(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Na(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Na(-i-1)+o,n&&(r=n-s)>0&&(o+=Na(r))):i>=s?(o+=Na(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Na(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Na(r))),t.s<0?"-"+o:o}function tV(t,e){if(t.length>e)return t.length=e,!0}function l5(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Cu+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return eV(s,o.toString())}else if(typeof o!="string")throw Error(Cu+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,zse.test(o))eV(s,o);else throw Error(Cu+o)}if(i.prototype=Se,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=l5,i.config=i.set=$se,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function $se(t){if(!t||typeof t!="object")throw Error($i+"Object expected");var e,n,r,i=["precision",1,Nd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(kd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Cu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Cu+n+": "+r);return this}var Zx=l5(qse);ai=new Zx(1);const _t=Zx;var Gse=t=>t,u5={},c5=t=>t===u5,nV=t=>function e(){return arguments.length===0||arguments.length===1&&c5(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},f5=(t,e)=>t===1?e:nV(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==u5).length;return o>=t?e(...r):f5(t-o,nV(function(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];var f=r.map(h=>c5(h)?u.shift():h);return e(...f,...u)}))}),z0=t=>f5(t.length,t),kS=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},jse=z0((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Hse=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Gse;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((u,c)=>c(u),o(...arguments))}},OS=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),d5=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((s,u)=>{var c;return s===((c=e)===null||c===void 0?void 0:c[u])})||(e=i,n=t(...i)),n}};function h5(t){var e;return t===0?e=1:e=Math.floor(new _t(t).abs().log(10).toNumber())+1,e}function m5(t,e,n){for(var r=new _t(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}z0((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});z0((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});z0((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var p5=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},g5=(t,e,n)=>{if(t.lte(0))return new _t(0);var r=h5(t.toNumber()),i=new _t(10).pow(r),o=t.div(i),s=r!==1?.05:.1,u=new _t(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=u.mul(i);return e?new _t(c.toNumber()):new _t(Math.ceil(c.toNumber()))},Kse=(t,e,n)=>{var r=new _t(1),i=new _t(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new _t(10).pow(h5(t)-1),i=new _t(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new _t(Math.floor(t)))}else t===0?i=new _t(Math.floor((e-1)/2)):n||(i=new _t(Math.floor(t)));var s=Math.floor((e-1)/2),u=Hse(jse(c=>i.add(new _t(c-s).mul(r)).toNumber()),kS);return u(0,e)},y5=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new _t(0),tickMin:new _t(0),tickMax:new _t(0)};var s=g5(new _t(n).sub(e).div(r-1),i,o),u;e<=0&&n>=0?u=new _t(0):(u=new _t(e).add(n).div(2),u=u.sub(new _t(u).mod(s)));var c=Math.ceil(u.sub(e).div(s).toNumber()),f=Math.ceil(new _t(n).sub(u).div(s).toNumber()),h=c+f+1;return h>r?y5(e,n,r,i,o+1):(h<r&&(f=n>0?f+(r-h):f,c=n>0?c:c+(r-h)),{step:s,tickMin:u.sub(new _t(c).mul(s)),tickMax:u.add(new _t(f).mul(s))})};function Wse(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,u]=p5([e,n]);if(s===-1/0||u===1/0){var c=u===1/0?[s,...kS(0,r-1).map(()=>1/0)]:[...kS(0,r-1).map(()=>-1/0),u];return e>n?OS(c):c}if(s===u)return Kse(s,r,i);var{step:f,tickMin:h,tickMax:y}=y5(s,u,o,i,0),_=m5(h,y.add(new _t(.1).mul(f)),f);return e>n?OS(_):_}function Yse(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=p5([n,r]);if(o===-1/0||s===1/0)return[n,r];if(o===s)return[o];var u=Math.max(e,2),c=g5(new _t(s).sub(o).div(u-1),i,0),f=[...m5(new _t(o),new _t(s).sub(new _t(.99).mul(c)),c),s];return n>r?OS(f):f}var Jse=d5(Wse),Qse=d5(Yse),v5=t=>t.rootProps.maxBarSize,Xse=t=>t.rootProps.barGap,_5=t=>t.rootProps.barCategoryGap,Zse=t=>t.rootProps.barSize,$0=t=>t.rootProps.stackOffset,e1=t=>t.options.chartName,t1=t=>t.rootProps.syncId,T5=t=>t.rootProps.syncMethod,n1=t=>t.options.eventEmitter,ws={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ii={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},G0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},eae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ws.angleAxisId,includeHidden:!1,name:void 0,reversed:ws.reversed,scale:ws.scale,tick:ws.tick,tickCount:void 0,ticks:void 0,type:ws.type,unit:void 0},tae={allowDataOverflow:ii.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ii.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ii.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ii.scale,tick:ii.tick,tickCount:ii.tickCount,ticks:void 0,type:ii.type,unit:void 0},nae={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ws.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ws.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ws.scale,tick:ws.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},rae={allowDataOverflow:ii.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ii.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ii.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ii.scale,tick:ii.tick,tickCount:ii.tickCount,ticks:void 0,type:"category",unit:void 0},r1=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?nae:eae,i1=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?rae:tae,j0=t=>t.polarOptions,o1=ae([pl,gl,dr],Hte),E5=ae([j0,o1],(t,e)=>{if(t!=null)return ao(t.innerRadius,e,0)}),b5=ae([j0,o1],(t,e)=>{if(t!=null)return ao(t.outerRadius,e,e*.8)}),iae=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},w5=ae([j0],iae);ae([r1,w5],G0);var A5=ae([o1,E5,b5],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ae([i1,A5],G0);var oae=ae([Ot,j0,E5,b5,pl,gl],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:u,startAngle:c,endAngle:f}=e;return{cx:ao(s,i,i/2),cy:ao(u,o,o/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:f,clockWise:!1}}}),Xn=(t,e)=>e,H0=(t,e,n)=>n;function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(r){sae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sae(t,e,n){return(e=aae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aae(t){var e=lae(t,"string");return typeof e=="symbol"?e:e+""}function lae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VS=[0,"auto"],ti={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ws=(t,e)=>{var n=t.cartesianAxis.xAxis[e];return n??ti},ni={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:VS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:D0},_l=(t,e)=>{var n=t.cartesianAxis.yAxis[e];return n??ni},uae={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},s1=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??uae},jr=(t,e,n)=>{switch(e){case"xAxis":return Ws(t,n);case"yAxis":return _l(t,n);case"zAxis":return s1(t,n);case"angleAxis":return r1(t,n);case"radiusAxis":return i1(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},cae=(t,e,n)=>{switch(e){case"xAxis":return Ws(t,n);case"yAxis":return _l(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},og=(t,e,n)=>{switch(e){case"xAxis":return Ws(t,n);case"yAxis":return _l(t,n);case"angleAxis":return r1(t,n);case"radiusAxis":return i1(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},S5=t=>t.graphicalItems.countOfBars>0;function I5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var a1=t=>t.graphicalItems.cartesianItems,fae=ae([Xn,H0],I5),C5=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),sg=ae([a1,jr,fae],C5),x5=t=>t.filter(e=>e.stackId===void 0),dae=ae([sg],x5),R5=t=>t.map(e=>e.data).filter(Boolean).flat(1),hae=ae([sg],R5),P5=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},K0=ae([hae,r5],P5),M5=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:fi(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:fi(i,r)}))):t.map(r=>({value:r})),W0=ae([K0,jr,sg],M5);function D5(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function oc(t){return t.filter(e=>Wo(e)||e instanceof Date).map(Number).filter(e=>qi(e)===!1)}function mae(t,e,n){return!n||typeof e!="number"||qi(e)?[]:n.length?oc(n.flatMap(r=>{var i=fi(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!gi(o)||!gi(s)))return[e-o,e+s]})):[]}var N5=(t,e,n)=>{var r={},i=e.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[s,u]=o,c=u.map(f=>f.dataKey);return[s,{stackedData:lne(t,c,n),graphicalItems:u}]}))},LS=ae([K0,sg,$0],N5),k5=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var o=dne(t,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},pae=ae([LS,Dd,Xn],k5),O5=(t,e,n,r)=>n.length>0?t.flatMap(i=>n.flatMap(o=>{var s,u,c=(s=o.errorBars)===null||s===void 0?void 0:s.filter(h=>D5(r,h)),f=fi(i,(u=e.dataKey)!==null&&u!==void 0?u:o.dataKey);return{value:f,errorDomain:mae(i,f,c)}})).filter(Boolean):e?.dataKey!=null?t.map(i=>({value:fi(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),gae=ae(K0,jr,dae,Xn,O5);function yae(t){var{value:e}=t;if(Wo(e)||e instanceof Date)return e}var vae=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=oc(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},_ae=(t,e,n)=>{var r=t.map(yae).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&i3(r))?b6(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},l1=t=>{var e;if(t==null||!("domain"in t))return VS;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=oc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:VS},u1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),u=Math.max(...o);return[s,u]}},V5=t=>t.referenceElements.dots,Od=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Tae=ae([V5,Xn,H0],Od),L5=t=>t.referenceElements.areas,Eae=ae([L5,Xn,H0],Od),U5=t=>t.referenceElements.lines,bae=ae([U5,Xn,H0],Od),F5=(t,e)=>{var n=oc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},wae=ae(Tae,Xn,F5),B5=(t,e)=>{var n=oc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Aae=ae([Eae,Xn],B5),q5=(t,e)=>{var n=oc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Sae=ae(bae,Xn,q5),Iae=ae(wae,Sae,Aae,(t,e,n)=>u1(t,n,e)),Cae=ae([jr],l1),z5=(t,e,n,r,i)=>{var o=Fse(e,t.allowDataOverflow);return o??Bse(e,u1(n,i,vae(r)),t.allowDataOverflow)},xae=ae([jr,Cae,pae,gae,Iae],z5),Rae=[0,1],$5=(t,e,n,r,i,o,s)=>{if(!(t==null||n==null||n.length===0)){var{dataKey:u,type:c}=t,f=tc(e,o);return f&&u==null?b6(0,n.length):c==="category"?_ae(r,t,f):i==="expand"?Rae:s}},c1=ae([jr,Ot,K0,W0,$0,Xn,xae],$5),G5=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var u="scale".concat(Xp(o));return u in Sm?u:"point"}}},ag=ae([jr,Ot,S5,e1,Xn],G5);function Pae(t){if(t!=null){if(t in Sm)return Sm[t]();var e="scale".concat(Xp(t));if(e in Sm)return Sm[e]()}}function f1(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=Pae(e);if(i!=null){var o=i.domain(n).range(r);return rne(o),o}}}var j5=(t,e,n)=>{var r=l1(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&cd(t))return Jse(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&cd(t))return Qse(t,e.tickCount,e.allowDecimals)}},d1=ae([c1,og,ag],j5),H5=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&cd(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],u=n[n.length-1];return[Math.min(i,o),Math.max(s,u)]}return e},Mae=ae([jr,c1,d1,Xn],H5),Dae=ae(W0,jr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(oc(t.map(u=>u.value))).sort((u,c)=>u-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var s=r[o+1]-r[o];n=Math.min(n,s)}return n/i}}),K5=ae(Dae,Ot,_5,dr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!gi(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=ao(n,t*o),u=t*o/2;return u-s-(u-s)/o*s}return 0}),Nae=(t,e)=>{var n=Ws(t,e);return n==null||typeof n.padding!="string"?0:K5(t,"xAxis",e,n.padding)},kae=(t,e)=>{var n=_l(t,e);return n==null||typeof n.padding!="string"?0:K5(t,"yAxis",e,n.padding)},Oae=ae(Ws,Nae,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Vae=ae(_l,kae,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Lae=ae([dr,Oae,k0,N0,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),Uae=ae([dr,Ot,Vae,k0,N0,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),lg=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Lae(t,n,r);case"yAxis":return Uae(t,n,r);case"zAxis":return(i=s1(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return w5(t);case"radiusAxis":return A5(t,n);default:return}},W5=ae([jr,lg],G0),Vd=ae([jr,ag,Mae,W5],f1);ae(sg,Xn,(t,e)=>t.flatMap(n=>{var r;return(r=n.errorBars)!==null&&r!==void 0?r:[]}).filter(n=>D5(e,n)));function Y5(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Y0=(t,e)=>e,J0=(t,e,n)=>n,Fae=ae(bx,Y0,J0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Y5)),Bae=ae(wx,Y0,J0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Y5)),J5=(t,e)=>({width:t.width,height:e.height}),qae=(t,e)=>{var n=typeof e.width=="number"?e.width:D0;return{width:n,height:t.height}},Q5=ae(dr,Ws,J5),zae=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},$ae=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Gae=ae(gl,dr,Fae,Y0,J0,(t,e,n,r,i)=>{var o={},s;return n.forEach(u=>{var c=J5(e,u);s==null&&(s=zae(e,r,t));var f=r==="top"&&!i||r==="bottom"&&i;o[u.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),o}),jae=ae(pl,dr,Bae,Y0,J0,(t,e,n,r,i)=>{var o={},s;return n.forEach(u=>{var c=qae(e,u);s==null&&(s=$ae(e,r,t));var f=r==="left"&&!i||r==="right"&&i;o[u.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),o}),Hae=(t,e)=>{var n=dr(t),r=Ws(t,e);if(r!=null){var i=Gae(t,r.orientation,r.mirror),o=i[e];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},Kae=(t,e)=>{var n=dr(t),r=_l(t,e);if(r!=null){var i=jae(t,r.orientation,r.mirror),o=i[e];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},X5=ae(dr,_l,(t,e)=>{var n=typeof e.width=="number"?e.width:D0;return{width:n,height:t.height}}),iV=(t,e,n)=>{switch(e){case"xAxis":return Q5(t,n).width;case"yAxis":return X5(t,n).height;default:return}},Z5=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,u=tc(t,r),c=e.map(f=>f.value);if(s&&u&&o==="category"&&i&&i3(c))return c}},h1=ae([Ot,W0,jr,Xn],Z5),e9=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=tc(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(u=>u.value)}},m1=ae([Ot,W0,og,Xn],e9);ae([Ot,cae,ag,Vd,h1,m1,lg,d1,Xn],(t,e,n,r,i,o,s,u,c)=>{if(e==null)return null;var f=tc(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:f,niceTicks:u,range:s,realScaleType:n,scale:r}});var Wae=(t,e,n,r,i,o,s,u,c)=>{if(!(e==null||r==null)){var f=tc(t,c),{type:h,ticks:y,tickCount:_}=e,E=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,w=h==="category"&&r.bandwidth?r.bandwidth()/E:0;w=c==="angleAxis"&&o!=null&&o.length>=2?ui(o[0]-o[1])*2*w:w;var A=y||i;if(A){var I=A.map((R,M)=>{var P=s?s.indexOf(R):R;return{index:M,coordinate:r(P)+w,value:R,offset:w}});return I.filter(R=>!qi(R.coordinate))}return f&&u?u.map((R,M)=>({coordinate:r(R)+w,value:R,index:M,offset:w})):r.ticks?r.ticks(_).map(R=>({coordinate:r(R)+w,value:R,offset:w})):r.domain().map((R,M)=>({coordinate:r(R)+w,value:s?s[R]:R,index:M,offset:w}))}},t9=ae([Ot,og,ag,Vd,d1,lg,h1,m1,Xn],Wae),Yae=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var u=tc(t,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&r?.length>=2?ui(r[0]-r[1])*2*f:f,u&&o?o.map((h,y)=>({coordinate:n(h)+f,value:h,index:y,offset:f})):n.ticks?n.ticks(c).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,y)=>({coordinate:n(h)+f,value:i?i[h]:h,index:y,offset:f}))}},fd=ae([Ot,og,Vd,lg,h1,m1,Xn],Yae),sl=ae(jr,Vd,(t,e)=>{if(!(t==null||e==null))return b_(b_({},t),{},{scale:e})}),Jae=ae([jr,ag,c1,W5],f1);ae((t,e,n)=>s1(t,n),Jae,(t,e)=>{if(!(t==null||e==null))return b_(b_({},t),{},{scale:e})});var Qae=ae([Ot,bx,wx],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),n9=t=>t.options.defaultTooltipEventType,r9=t=>t.options.validateTooltipEventTypes;function i9(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function p1(t,e){var n=n9(t),r=r9(t);return i9(e,n,r)}function Xae(t){return Le(e=>p1(e,t))}var o9=(t,e)=>{var n,r=Number(e);if(!(qi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Zae=t=>t.tooltip.settings,Va={active:!1,index:null,dataKey:void 0,coordinate:void 0},ele={itemInteraction:{click:Va,hover:Va},axisInteraction:{click:Va,hover:Va},keyboardInteraction:Va,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},s9=Gi({name:"tooltip",initialState:ele,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=ja(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:tle,removeTooltipEntrySettings:nle,setTooltipSettingsState:rle,setActiveMouseOverItemIndex:a9,mouseLeaveItem:ile,mouseLeaveChart:l9,setActiveClickItemIndex:ole,setMouseOverAxisIndex:u9,setMouseClickAxisIndex:sle,setSyncInteraction:US,setKeyboardInteraction:FS}=s9.actions,ale=s9.reducer;function oV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(n),!0).forEach(function(r){lle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lle(t,e,n){return(e=ule(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ule(t){var e=cle(t,"string");return typeof e=="symbol"?e:e+""}function cle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fle(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function dle(t){return t.index!=null}var c9=(t,e,n,r)=>{if(e==null)return Va;var i=fle(t,e,n);if(i==null)return Va;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(dle(i)){if(o)return Xy(Xy({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Xy(Xy({},Va),{},{coordinate:i.coordinate})},g1=(t,e)=>{var n=t?.index;if(n==null)return null;var r=Number(n);if(!gi(r))return n;var i=0,o=1/0;return e.length>0&&(o=e.length-1),String(Math.max(i,Math.min(r,o)))},f9=(t,e,n,r,i,o,s,u)=>{if(!(o==null||u==null)){var c=s[0],f=c==null?void 0:u(c.positions,o);if(f!=null)return f;var h=i?.[Number(o)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},d9=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},Q0=t=>t.options.tooltipPayloadSearcher,Ld=t=>t.tooltip,Zn=t=>{var e=Ot(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Ud=t=>t.tooltip.settings.axisId,Ar=t=>{var e=Zn(t),n=Ud(t);return og(t,e,n)},y1=ae([Ar,Ot,S5,e1,Zn],G5),hle=ae([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),mle=ae([Zn,Ud],I5),X0=ae([hle,Ar,mle],C5),ple=ae([X0],R5),sc=ae([ple,Dd],P5),v1=ae([sc,Ar,X0],M5),gle=ae([Ar],l1),yle=ae([sc,X0,$0],N5),vle=ae([yle,Dd,Zn],k5),_le=ae([X0],x5),Tle=ae([sc,Ar,_le,Zn],O5),Ele=ae([V5,Zn,Ud],Od),ble=ae([Ele,Zn],F5),wle=ae([L5,Zn,Ud],Od),Ale=ae([wle,Zn],B5),Sle=ae([U5,Zn,Ud],Od),Ile=ae([Sle,Zn],q5),Cle=ae([ble,Ile,Ale],u1),xle=ae([Ar,gle,vle,Tle,Cle],z5),h9=ae([Ar,Ot,sc,v1,$0,Zn,xle],$5),Rle=ae([h9,Ar,y1],j5),Ple=ae([Ar,h9,Rle,Zn],H5),m9=t=>{var e=Zn(t),n=Ud(t),r=!1;return lg(t,e,n,r)},p9=ae([Ar,m9],G0),g9=ae([Ar,y1,Ple,p9],f1),Mle=ae([Ot,v1,Ar,Zn],Z5),Dle=ae([Ot,v1,Ar,Zn],e9),Nle=(t,e,n,r,i,o,s,u)=>{if(e){var{type:c}=e,f=tc(t,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,y=c==="category"&&r.bandwidth?r.bandwidth()/h:0;return y=u==="angleAxis"&&i!=null&&i?.length>=2?ui(i[0]-i[1])*2*y:y,f&&s?s.map((_,E)=>({coordinate:r(_)+y,value:_,index:E,offset:y})):r.domain().map((_,E)=>({coordinate:r(_)+y,value:o?o[_]:_,index:E,offset:y}))}}},Ys=ae([Ot,Ar,y1,g9,m9,Mle,Dle,Zn],Nle),y9=ae([n9,r9,Zae],(t,e,n)=>i9(n.shared,t,e)),v9=t=>t.tooltip.settings.trigger,_1=t=>t.tooltip.settings.defaultIndex,Z0=ae([Ld,y9,v9,_1],c9),Ap=ae([Z0,sc],g1),kle=ae([Ys,Ap],o9),_9=ae([Z0],t=>{if(t)return t.dataKey}),Ole=ae([Ld,y9,v9,_1],d9),Vle=ae([pl,gl,Ot,dr,Ys,_1,Ole,Q0],f9),Lle=ae([Z0,Vle],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Ule=ae([Z0],t=>t.active);function sV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sV(Object(n),!0).forEach(function(r){Fle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fle(t,e,n){return(e=Ble(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ble(t){var e=qle(t,"string");return typeof e=="symbol"?e:e+""}function qle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zle=()=>Le(Ar),$le=()=>{var t=zle(),e=Le(Ys),n=Le(g9);return Ex(aV(aV({},t),{},{scale:n}),e)};function lV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(n),!0).forEach(function(r){Gle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gle(t,e,n){return(e=jle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jle(t){var e=Hle(t,"string");return typeof e=="symbol"?e:e+""}function Hle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kle=()=>Le(e1),T1=(t,e)=>e,T9=(t,e,n)=>n,E1=(t,e,n,r)=>r;function Wle(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}var Yle=ae(Ys,t=>S0(t,e=>e.coordinate)),b1=ae([Ld,T1,T9,E1],c9),E9=ae([b1,sc],g1),Jle=(t,e,n)=>{if(e!=null){var r=Ld(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},b9=ae([Ld,T1,T9,E1],d9),w_=ae([pl,gl,Ot,dr,Ys,E1,b9,Q0],f9),Qle=ae([b1,w_],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),w9=ae(Ys,E9,o9);function Xle(t,e){return t??e}var Zle=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:u,computedData:c,dataStartIndex:f,dataEndIndex:h}=n,y=[];return t.reduce((_,E)=>{var w,{dataDefinedOnItem:A,settings:I}=E,R=Xle(A,u),M=Wle(R,f,h),P=(w=I?.dataKey)!==null&&w!==void 0?w:r?.dataKey,F=I?.nameKey,U;if(r!=null&&r.dataKey&&!(r!=null&&r.allowDuplicatedCategory)&&Array.isArray(M)&&s==="axis"?U=KX(M,r.dataKey,i):U=o(M,e,c,F),Array.isArray(U))U.forEach(D=>{var N=uV(uV({},I),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});_.push(zO({tooltipEntrySettings:N,dataKey:D.dataKey,payload:D.payload,value:fi(D.payload,D.dataKey),name:D.name}))});else{var $;_.push(zO({tooltipEntrySettings:I,dataKey:P,payload:U,value:fi(U,P),name:($=fi(U,F))!==null&&$!==void 0?$:I?.name}))}return _},y)}},eue=ae([b9,E9,Dd,Ar,w9,Q0,T1],Zle),tue=ae([b1],t=>({isActive:t.active,activeIndex:t.index})),nue=(t,e,n,r,i,o,s,u)=>{if(!(!t||!e||!r||!i||!o)){var c=hne(t.chartX,t.chartY,e,n,u);if(c){var f=pne(c,e),h=tne(f,s,o,r,i),y=mne(e,o,h,c);return{activeIndex:String(h),activeCoordinate:y}}}};function BS(){return BS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BS.apply(null,arguments)}function cV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(n),!0).forEach(function(r){rue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rue(t,e,n){return(e=iue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iue(t){var e=oue(t,"string");return typeof e=="symbol"?e:e+""}function oue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sue(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:s,cursor:u,tooltipEventType:c,chartName:f}=t,h=e,y=n,_=r;if(!u||!h||f!=="ScatterChart"&&c!=="axis")return null;var E,w;if(f==="ScatterChart")E=h,w=yre;else if(f==="BarChart")E=vre(s,h,i,o),w=v6;else if(s==="radial"){var{cx:A,cy:I,radius:R,startAngle:M,endAngle:P}=_6(h);E={cx:A,cy:I,startAngle:M,endAngle:P,innerRadius:R,outerRadius:R},w=E6}else E={points:iie(s,h,i)},w=lre;var F=typeof u=="object"&&"className"in u?u.className:void 0,U=Zy(Zy(Zy(Zy({stroke:"#ccc",pointerEvents:"none"},i),E),Xt(u,!1)),{},{payload:y,payloadIndex:_,className:Ut("recharts-tooltip-cursor",F)});return O.isValidElement(u)?O.cloneElement(u,U):O.createElement(w,U)}function aue(t){var e=$le(),n=Sx(),r=Ix(),i=Kle();return O.createElement(sue,BS({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var A9=O.createContext(null),lue=()=>O.useContext(A9),Kw={exports:{}},fV;function uue(){return fV||(fV=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function o(c,f,h,y,_){if(typeof h!="function")throw new TypeError("The listener must be a function");var E=new i(h,y||c,_),w=n?n+f:f;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],E]:c._events[w].push(E):(c._events[w]=E,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,y;if(this._eventsCount===0)return f;for(y in h=this._events)e.call(h,y)&&f.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=n?n+f:f,y=this._events[h];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,E=y.length,w=new Array(E);_<E;_++)w[_]=y[_].fn;return w},u.prototype.listenerCount=function(f){var h=n?n+f:f,y=this._events[h];return y?y.fn?1:y.length:0},u.prototype.emit=function(f,h,y,_,E,w){var A=n?n+f:f;if(!this._events[A])return!1;var I=this._events[A],R=arguments.length,M,P;if(I.fn){switch(I.once&&this.removeListener(f,I.fn,void 0,!0),R){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,h),!0;case 3:return I.fn.call(I.context,h,y),!0;case 4:return I.fn.call(I.context,h,y,_),!0;case 5:return I.fn.call(I.context,h,y,_,E),!0;case 6:return I.fn.call(I.context,h,y,_,E,w),!0}for(P=1,M=new Array(R-1);P<R;P++)M[P-1]=arguments[P];I.fn.apply(I.context,M)}else{var F=I.length,U;for(P=0;P<F;P++)switch(I[P].once&&this.removeListener(f,I[P].fn,void 0,!0),R){case 1:I[P].fn.call(I[P].context);break;case 2:I[P].fn.call(I[P].context,h);break;case 3:I[P].fn.call(I[P].context,h,y);break;case 4:I[P].fn.call(I[P].context,h,y,_);break;default:if(!M)for(U=1,M=new Array(R-1);U<R;U++)M[U-1]=arguments[U];I[P].fn.apply(I[P].context,M)}}return!0},u.prototype.on=function(f,h,y){return o(this,f,h,y,!1)},u.prototype.once=function(f,h,y){return o(this,f,h,y,!0)},u.prototype.removeListener=function(f,h,y,_){var E=n?n+f:f;if(!this._events[E])return this;if(!h)return s(this,E),this;var w=this._events[E];if(w.fn)w.fn===h&&(!_||w.once)&&(!y||w.context===y)&&s(this,E);else{for(var A=0,I=[],R=w.length;A<R;A++)(w[A].fn!==h||_&&!w[A].once||y&&w[A].context!==y)&&I.push(w[A]);I.length?this._events[E]=I.length===1?I[0]:I:s(this,E)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(Kw)),Kw.exports}var cue=uue();const fue=lo(cue);var Sp=new fue,qS="recharts.syncEvent.tooltip",dV="recharts.syncEvent.brush";function due(t,e){if(e){var n=Number.parseInt(e,10);if(!qi(n))return t?.[n]}}var hue={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},S9=Gi({name:"options",initialState:hue,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),mue=S9.reducer,{createEventEmitter:pue}=S9.actions;function gue(t){return t.tooltip.syncInteraction}var yue={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},I9=Gi({name:"chartData",initialState:yue,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:hV,setDataStartEndIndexes:vue,setComputedData:jwe}=I9.actions,_ue=I9.reducer,C9=()=>{};function Tue(){var t=Le(t1),e=Le(n1),n=gn(),r=Le(T5),i=Le(Ys),o=Ix(),s=Ax(),u=Le(c=>c.rootProps.className);O.useEffect(()=>{if(t==null)return C9;var c=(f,h,y)=>{if(e!==y&&t===f){if(r==="index"){n(h);return}if(i!=null){var _;if(typeof r=="function"){var E={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},w=r(i,E);_=i[w]}else r==="value"&&(_=i.find($=>String($.value)===h.payload.label));var{coordinate:A}=h.payload;if(_==null||h.payload.active===!1||A==null||s==null){n(US({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:I,y:R}=A,M=Math.min(I,s.x+s.width),P=Math.min(R,s.y+s.height),F={x:o==="horizontal"?_.coordinate:M,y:o==="horizontal"?P:_.coordinate},U=US({active:h.payload.active,coordinate:F,dataKey:h.payload.dataKey,index:String(_.index),label:h.payload.label});n(U)}}};return Sp.on(qS,c),()=>{Sp.off(qS,c)}},[u,n,e,t,r,i,o,s])}function Eue(){var t=Le(t1),e=Le(n1),n=gn();O.useEffect(()=>{if(t==null)return C9;var r=(i,o,s)=>{e!==s&&t===i&&n(vue(o))};return Sp.on(dV,r),()=>{Sp.off(dV,r)}},[n,e,t])}function bue(){var t=gn();O.useEffect(()=>{t(pue())},[t]),Tue(),Eue()}function wue(t,e,n,r,i,o){var s=Le(_=>Jle(_,t,e)),u=Le(n1),c=Le(t1),f=Le(T5),h=Le(gue),y=h?.active;O.useEffect(()=>{if(!y&&c!=null&&u!=null){var _=US({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r});Sp.emit(qS,c,_,u)}},[y,n,s,i,r,u,c,f,o])}function mV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(n),!0).forEach(function(r){Aue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aue(t,e,n){return(e=Sue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sue(t){var e=Iue(t,"string");return typeof e=="symbol"?e:e+""}function Iue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cue(t){return t.dataKey}function xue(t,e){return O.isValidElement(t)?O.cloneElement(t,e):typeof t=="function"?O.createElement(t,e):O.createElement(Wne,e)}var gV=[],Rue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!eg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Pue(t){var e=nc(t,Rue),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:s,filterNull:u,isAnimationActive:c,offset:f,payloadUniqBy:h,position:y,reverseDirection:_,useTranslate3d:E,wrapperStyle:w,cursor:A,shared:I,trigger:R,defaultIndex:M,portal:P,axisId:F}=e,U=gn(),$=typeof M=="number"?String(M):M;O.useEffect(()=>{U(rle({shared:I,trigger:R,axisId:F,active:n,defaultIndex:$}))},[U,I,R,F,n,$]);var D=Ax(),N=m6(),V=Xae(I),{activeIndex:q,isActive:B}=Le(Fe=>tue(Fe,V,R,$)),G=Le(Fe=>eue(Fe,V,R,$)),z=Le(Fe=>w9(Fe,V,R,$)),Ve=Le(Fe=>Qle(Fe,V,R,$)),Pe=G,ne=lue(),me=n??B,[Ae,qe]=V3([Pe,me]),K=V==="axis"?z:void 0;wue(V,R,Ve,K,q,me);var ue=P??ne;if(ue==null)return null;var se=Pe??gV;me||(se=gV),u&&se.length&&(se=M3(Pe.filter(Fe=>Fe.value!=null&&(Fe.hide!==!0||e.includeHidden)),h,Cue));var de=se.length>0,Me=O.createElement(tre,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:c,active:me,coordinate:Ve,hasPayload:de,offset:f,position:y,reverseDirection:_,useTranslate3d:E,viewBox:D,wrapperStyle:w,lastBoundingBox:Ae,innerRef:qe,hasPortalFromProps:!!P},xue(s,pV(pV({},e),{},{payload:se,label:K,active:me,coordinate:Ve,accessibilityLayer:N})));return O.createElement(O.Fragment,null,s3.createPortal(Me,ue),me&&O.createElement(aue,{cursor:A,tooltipEventType:V,coordinate:Ve,payload:Pe,index:q}))}var Ww={},Yw={},Jw={},yV;function Mue(){return yV||(yV=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,u=null;const c=o!=null&&o.includes("leading"),f=o==null||o.includes("trailing"),h=()=>{u!==null&&(n.apply(s,u),s=void 0,u=null)},y=()=>{f&&h(),A()};let _=null;const E=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,y()},r)},w=()=>{_!==null&&(clearTimeout(_),_=null)},A=()=>{w(),s=void 0,u=null},I=()=>{w(),h()},R=function(...M){if(i?.aborted)return;s=this,u=M;const P=_==null;E(),c&&P&&h()};return R.schedule=E,R.cancel=A,R.flush=I,i?.addEventListener("abort",A,{once:!0}),R}t.debounce=e}(Jw)),Jw}var vV;function Due(){return vV||(vV=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mue();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:u=!0,maxWait:c}=o,f=Array(2);s&&(f[0]="leading"),u&&(f[1]="trailing");let h,y=null;const _=e.debounce(function(...A){h=r.apply(this,A),y=null},i,{edges:f}),E=function(...A){return c!=null&&(y===null&&(y=Date.now()),Date.now()-y>=c)?(h=r.apply(this,A),y=Date.now(),_.cancel(),_.schedule(),h):(_.apply(this,A),h)},w=()=>(_.flush(),h);return E.cancel=_.cancel,E.flush=w,E}t.debounce=n}(Yw)),Yw}var _V;function Nue(){return _V||(_V=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Due();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!0,trailing:u=!0}=o;return e.debounce(r,i,{leading:s,trailing:u,maxWait:i})}t.throttle=n}(Ww)),Ww}var Qw,TV;function kue(){return TV||(TV=1,Qw=Nue().throttle),Qw}var Oue=kue();const Vue=lo(Oue);var Xw=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function EV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(n),!0).forEach(function(r){Lue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lue(t,e,n){return(e=Uue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uue(t){var e=Fue(t,"string");return typeof e=="symbol"?e:e+""}function Fue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bue=O.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:u,maxHeight:c,children:f,debounce:h=0,id:y,className:_,onResize:E,style:w={}}=t,A=O.useRef(null),I=O.useRef();I.current=E,O.useImperativeHandle(e,()=>A.current);var[R,M]=O.useState({containerWidth:r.width,containerHeight:r.height}),P=O.useCallback((U,$)=>{M(D=>{var N=Math.round(U),V=Math.round($);return D.containerWidth===N&&D.containerHeight===V?D:{containerWidth:N,containerHeight:V}})},[]);O.useEffect(()=>{var U=V=>{var q,{width:B,height:G}=V[0].contentRect;P(B,G),(q=I.current)===null||q===void 0||q.call(I,B,G)};h>0&&(U=Vue(U,h,{trailing:!0,leading:!1}));var $=new ResizeObserver(U),{width:D,height:N}=A.current.getBoundingClientRect();return P(D,N),$.observe(A.current),()=>{$.disconnect()}},[P,h]);var F=O.useMemo(()=>{var{containerWidth:U,containerHeight:$}=R;if(U<0||$<0)return null;Xw(yu(i)||yu(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),Xw(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=yu(i)?U:i,N=yu(o)?$:o;return n&&n>0&&(D?N=D/n:N&&(D=N*n),c&&N>c&&(N=c)),Xw(D>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,N,i,o,s,u,n),O.Children.map(f,V=>O.cloneElement(V,{width:D,height:N,style:Zw({height:"100%",width:"100%",maxHeight:N,maxWidth:D},V.props.style)}))},[n,f,o,c,u,s,R,i]);return O.createElement("div",{id:y?"".concat(y):void 0,className:Ut("recharts-responsive-container",_),style:Zw(Zw({},w),{},{width:i,height:o,minWidth:s,minHeight:u,maxHeight:c}),ref:A},F)}),x9=t=>null;x9.displayName="Cell";function bV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(n),!0).forEach(function(r){que(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function que(t,e,n){return(e=zue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zue(t){var e=$ue(t,"string");return typeof e=="symbol"?e:e+""}function $ue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var df={widthCache:{},cacheCount:0},Gue=2e3,jue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wV="recharts_measurement_span";function Hue(t){var e=zS({},t);return Object.keys(e).forEach(n=>{e[n]||delete e[n]}),e}var $m=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||eg.isSsr)return{width:0,height:0};var r=Hue(n),i=JSON.stringify({text:e,copyStyle:r});if(df.widthCache[i])return df.widthCache[i];try{var o=document.getElementById(wV);o||(o=document.createElement("span"),o.setAttribute("id",wV),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=zS(zS({},jue),r);Object.assign(o.style,s),o.textContent="".concat(e);var u=o.getBoundingClientRect(),c={width:u.width,height:u.height};return df.widthCache[i]=c,++df.cacheCount>Gue&&(df.cacheCount=0,df.widthCache={}),c}catch{return{width:0,height:0}}},AV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Kue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Wue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,R9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Yue=Object.keys(R9),Ef="NaN";function Jue(t,e){return t*R9[e]}class Fr{static parse(e){var n,[,r,i]=(n=Wue.exec(e))!==null&&n!==void 0?n:[];return new Fr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,qi(e)&&(this.unit=""),n!==""&&!Kue.test(n)&&(this.num=NaN,this.unit=""),Yue.includes(n)&&(this.num=Jue(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Fr(NaN,""):new Fr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Fr(NaN,""):new Fr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fr(NaN,""):new Fr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fr(NaN,""):new Fr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qi(this.num)}}function P9(t){if(t.includes(Ef))return Ef;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=AV.exec(e))!==null&&n!==void 0?n:[],s=Fr.parse(r??""),u=Fr.parse(o??""),c=i==="*"?s.multiply(u):s.divide(u);if(c.isNaN())return Ef;e=e.replace(AV,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,h,y,_]=(f=SV.exec(e))!==null&&f!==void 0?f:[],E=Fr.parse(h??""),w=Fr.parse(_??""),A=y==="+"?E.add(w):E.subtract(w);if(A.isNaN())return Ef;e=e.replace(SV,A.toString())}return e}var IV=/\(([^()]*)\)/;function Que(t){for(var e=t,n;(n=IV.exec(e))!=null;){var[,r]=n;e=e.replace(IV,P9(r))}return e}function Xue(t){var e=t.replace(/\s+/g,"");return e=Que(e),e=P9(e),e}function Zue(t){try{return Xue(t)}catch{return Ef}}function eA(t){var e=Zue(t.slice(5,-1));return e===Ef?"":e}var ece=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],tce=["dx","dy","angle","className","breakAll"];function $S(){return $S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$S.apply(null,arguments)}function CV(t,e){if(t==null)return{};var n,r,i=nce(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var M9=/[ \f\n\r\t\v\u2028\u2029]+/,D9=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Rn(e)||(n?i=e.toString().split(""):i=e.toString().split(M9));var o=i.map(u=>({word:u,width:$m(u,r).width})),s=n?0:$m("",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},rce=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:u,breakAll:c}=t,f=Oe(o),h=s,y=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce((G,z)=>{var{word:Ve,width:Pe}=z,ne=G[G.length-1];if(ne&&(r==null||i||ne.width+Pe+n<Number(r)))ne.words.push(Ve),ne.width+=Pe+n;else{var me={words:[Ve],width:Pe};G.push(me)}return G},[])},_=y(e),E=q=>q.reduce((B,G)=>B.width>G.width?B:G);if(!f||i)return _;var w=_.length>o||E(_).width>Number(r);if(!w)return _;for(var A="",I=q=>{var B=h.slice(0,q),G=D9({breakAll:c,style:u,children:B+A}).wordsWithComputedWidth,z=y(G),Ve=z.length>o||E(z).width>Number(r);return[Ve,z]},R=0,M=h.length-1,P=0,F;R<=M&&P<=h.length-1;){var U=Math.floor((R+M)/2),$=U-1,[D,N]=I($),[V]=I(U);if(!D&&!V&&(R=U+1),D&&V&&(M=U-1),!D&&V){F=N;break}P++}return F||_},xV=t=>{var e=Rn(t)?[]:t.toString().split(M9);return[{words:e}]},ice=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!eg.isSsr){var u,c,f=D9({breakAll:o,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:y}=f;u=h,c=y}else return xV(r);return rce({breakAll:o,children:r,maxLines:s,style:i},u,c,e,n)}return xV(r)},RV="#808080",w1=O.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:u="start",verticalAnchor:c="end",fill:f=RV}=t,h=CV(t,ece),y=O.useMemo(()=>ice({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:s,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,s,h.style,h.width]),{dx:_,dy:E,angle:w,className:A,breakAll:I}=h,R=CV(h,tce);if(!Wo(n)||!Wo(r))return null;var M=n+(Oe(_)?_:0),P=r+(Oe(E)?E:0),F;switch(c){case"start":F=eA("calc(".concat(o,")"));break;case"middle":F=eA("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:F=eA("calc(".concat(y.length-1," * -").concat(i,")"));break}var U=[];if(s){var $=y[0].width,{width:D}=h;U.push("scale(".concat(Oe(D)?D/$:1,")"))}return w&&U.push("rotate(".concat(w,", ").concat(M,", ").concat(P,")")),U.length&&(R.transform=U.join(" ")),O.createElement("text",$S({},Xt(R,!0),{ref:e,x:M,y:P,className:Ut("recharts-text",A),textAnchor:u,fill:f.includes("url")?RV:f}),y.map((N,V)=>{var q=N.words.join(I?"":" ");return O.createElement("tspan",{x:M,dy:V===0?F:i,key:"".concat(q,"-").concat(V)},q)}))});w1.displayName="Text";var oce=["offset"],sce=["labelRef"];function PV(t,e){if(t==null)return{};var n,r,i=ace(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ace(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function MV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MV(Object(n),!0).forEach(function(r){lce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lce(t,e,n){return(e=uce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uce(t){var e=cce(t,"string");return typeof e=="symbol"?e:e+""}function cce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function As(){return As=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},As.apply(null,arguments)}var fce=t=>{var{value:e,formatter:n}=t,r=Rn(t.children)?e:t.children;return typeof n=="function"?n(r):r},A1=t=>t!=null&&typeof t=="function",dce=(t,e)=>{var n=ui(e-t),r=Math.min(Math.abs(e-t),360);return n*r},hce=(t,e,n)=>{var{position:r,viewBox:i,offset:o,className:s}=t,{cx:u,cy:c,innerRadius:f,outerRadius:h,startAngle:y,endAngle:_,clockWise:E}=i,w=(f+h)/2,A=dce(y,_),I=A>=0?1:-1,R,M;r==="insideStart"?(R=y+I*o,M=E):r==="insideEnd"?(R=_-I*o,M=!E):r==="end"&&(R=_+I*o,M=E),M=A<=0?M:!M;var P=ur(u,c,w,R),F=ur(u,c,w,R+(M?1:-1)*359),U="M".concat(P.x,",").concat(P.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(M?0:1,`,
    `).concat(F.x,",").concat(F.y),$=Rn(t.id)?pp("recharts-radial-line-"):t.id;return O.createElement("text",As({},n,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",s)}),O.createElement("defs",null,O.createElement("path",{id:$,d:U})),O.createElement("textPath",{xlinkHref:"#".concat($)},e))},mce=t=>{var{viewBox:e,offset:n,position:r}=t,{cx:i,cy:o,innerRadius:s,outerRadius:u,startAngle:c,endAngle:f}=e,h=(c+f)/2;if(r==="outside"){var{x:y,y:_}=ur(i,o,u+n,h);return{x:y,y:_,textAnchor:y>=i?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var E=(s+u)/2,{x:w,y:A}=ur(i,o,E,h);return{x:w,y:A,textAnchor:"middle",verticalAnchor:"middle"}},pce=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,{x:o,y:s,width:u,height:c}=e,f=c>=0?1:-1,h=f*r,y=f>0?"end":"start",_=f>0?"start":"end",E=u>=0?1:-1,w=E*r,A=E>0?"end":"start",I=E>0?"start":"end";if(i==="top"){var R={x:o+u/2,y:s-f*r,textAnchor:"middle",verticalAnchor:y};return wn(wn({},R),n?{height:Math.max(s-n.y,0),width:u}:{})}if(i==="bottom"){var M={x:o+u/2,y:s+c+h,textAnchor:"middle",verticalAnchor:_};return wn(wn({},M),n?{height:Math.max(n.y+n.height-(s+c),0),width:u}:{})}if(i==="left"){var P={x:o-w,y:s+c/2,textAnchor:A,verticalAnchor:"middle"};return wn(wn({},P),n?{width:Math.max(P.x-n.x,0),height:c}:{})}if(i==="right"){var F={x:o+u+w,y:s+c/2,textAnchor:I,verticalAnchor:"middle"};return wn(wn({},F),n?{width:Math.max(n.x+n.width-F.x,0),height:c}:{})}var U=n?{width:u,height:c}:{};return i==="insideLeft"?wn({x:o+w,y:s+c/2,textAnchor:I,verticalAnchor:"middle"},U):i==="insideRight"?wn({x:o+u-w,y:s+c/2,textAnchor:A,verticalAnchor:"middle"},U):i==="insideTop"?wn({x:o+u/2,y:s+h,textAnchor:"middle",verticalAnchor:_},U):i==="insideBottom"?wn({x:o+u/2,y:s+c-h,textAnchor:"middle",verticalAnchor:y},U):i==="insideTopLeft"?wn({x:o+w,y:s+h,textAnchor:I,verticalAnchor:_},U):i==="insideTopRight"?wn({x:o+u-w,y:s+h,textAnchor:A,verticalAnchor:_},U):i==="insideBottomLeft"?wn({x:o+w,y:s+c-h,textAnchor:I,verticalAnchor:y},U):i==="insideBottomRight"?wn({x:o+u-w,y:s+c-h,textAnchor:A,verticalAnchor:y},U):i&&typeof i=="object"&&(Oe(i.x)||yu(i.x))&&(Oe(i.y)||yu(i.y))?wn({x:o+ao(i.x,u),y:s+ao(i.y,c),textAnchor:"end",verticalAnchor:"end"},U):wn({x:o+u/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},U)},gce=t=>"cx"in t&&Oe(t.cx);function si(t){var{offset:e=5}=t,n=PV(t,oce),r=wn({offset:e},n),{viewBox:i,position:o,value:s,children:u,content:c,className:f="",textBreakAll:h,labelRef:y}=r,_=Ax(),E=i||_;if(!E||Rn(s)&&Rn(u)&&!O.isValidElement(c)&&typeof c!="function")return null;if(O.isValidElement(c)){var{labelRef:w}=r,A=PV(r,sce);return O.cloneElement(c,A)}var I;if(typeof c=="function"){if(I=O.createElement(c,r),O.isValidElement(I))return I}else I=fce(r);var R=gce(E),M=Xt(r,!0);if(R&&(o==="insideStart"||o==="insideEnd"||o==="end"))return hce(r,I,M);var P=R?mce(r):pce(r,E);return O.createElement(w1,As({ref:y,className:Ut("recharts-label",f)},M,P,{breakAll:h}),I)}si.displayName="Label";var N9=t=>{var{cx:e,cy:n,angle:r,startAngle:i,endAngle:o,r:s,radius:u,innerRadius:c,outerRadius:f,x:h,y,top:_,left:E,width:w,height:A,clockWise:I,labelViewBox:R}=t;if(R)return R;if(Oe(w)&&Oe(A)){if(Oe(h)&&Oe(y))return{x:h,y,width:w,height:A};if(Oe(_)&&Oe(E))return{x:_,y:E,width:w,height:A}}if(Oe(h)&&Oe(y))return{x:h,y,width:0,height:0};if(Oe(e)&&Oe(n))return{cx:e,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:c||0,outerRadius:f||u||s||0,clockWise:I};if(t.viewBox)return t.viewBox},yce=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?O.createElement(si,As({key:"label-implicit"},r)):Wo(t)?O.createElement(si,As({key:"label-implicit",value:t},r)):O.isValidElement(t)?t.type===si?O.cloneElement(t,wn({key:"label-implicit"},r)):O.createElement(si,As({key:"label-implicit",content:t},r)):A1(t)?O.createElement(si,As({key:"label-implicit",content:t},r)):t&&typeof t=="object"?O.createElement(si,As({},t,{key:"label-implicit"},r)):null},vce=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:i,labelRef:o}=e,s=N9(e),u=nx(i,si).map((f,h)=>O.cloneElement(f,{viewBox:n||s,key:"label-".concat(h)}));if(!r)return u;var c=yce(e.label,n||s,o);return[c,...u]};si.parseViewBox=N9;si.renderCallByParent=vce;var tA={},nA={},DV;function _ce(){return DV||(DV=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e}(nA)),nA}var rA={},NV;function Tce(){return NV||(NV=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e}(rA)),rA}var kV;function Ece(){return kV||(kV=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_ce(),n=Tce(),r=cx();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i}(tA)),tA}var iA,OV;function bce(){return OV||(OV=1,iA=Ece().last),iA}var wce=bce();const Ace=lo(wce);var Sce=["valueAccessor"],Ice=["data","dataKey","clockWise","id","textBreakAll"];function A_(){return A_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A_.apply(null,arguments)}function VV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VV(Object(n),!0).forEach(function(r){Cce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cce(t,e,n){return(e=xce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xce(t){var e=Rce(t,"string");return typeof e=="symbol"?e:e+""}function Rce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UV(t,e){if(t==null)return{};var n,r,i=Pce(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Mce=t=>Array.isArray(t.value)?Ace(t.value):t.value;function xu(t){var{valueAccessor:e=Mce}=t,n=UV(t,Sce),{data:r,dataKey:i,clockWise:o,id:s,textBreakAll:u}=n,c=UV(n,Ice);return!r||!r.length?null:O.createElement(Yo,{className:"recharts-label-list"},r.map((f,h)=>{var y=Rn(i)?e(f,h):fi(f&&f.payload,i),_=Rn(s)?{}:{id:"".concat(s,"-").concat(h)};return O.createElement(si,A_({},Xt(f,!0),c,_,{parentViewBox:f.parentViewBox,value:y,textBreakAll:u,viewBox:si.parseViewBox(Rn(o)?f:LV(LV({},f),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}xu.displayName="LabelList";function Dce(t,e){return t?t===!0?O.createElement(xu,{key:"labelList-implicit",data:e}):O.isValidElement(t)||A1(t)?O.createElement(xu,{key:"labelList-implicit",data:e,content:t}):typeof t=="object"?O.createElement(xu,A_({data:e},t,{key:"labelList-implicit"})):null:null}function Nce(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:r}=t,i=nx(r,xu).map((s,u)=>O.cloneElement(s,{data:e,key:"labelList-".concat(u)}));if(!n)return i;var o=Dce(t.label,e);return[o,...i]}xu.renderCallByParent=Nce;var kce={radiusAxis:{},angleAxis:{}},k9=Gi({name:"polarAxis",initialState:kce,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Hwe,removeRadiusAxis:Kwe,addAngleAxis:Wwe,removeAngleAxis:Ywe}=k9.actions,Oce=k9.reducer,Vce={countOfBars:0,cartesianItems:[],polarItems:[]},O9=Gi({name:"graphicalItems",initialState:Vce,reducers:{addBar(t){t.countOfBars+=1},removeBar(t){t.countOfBars-=1},addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},removeCartesianGraphicalItem(t,e){var n=ja(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=ja(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addBar:Lce,removeBar:Uce,addCartesianGraphicalItem:Fce,removeCartesianGraphicalItem:Bce,addPolarGraphicalItem:Jwe,removePolarGraphicalItem:Qwe}=O9.actions,qce=O9.reducer;function FV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FV(Object(n),!0).forEach(function(r){zce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zce(t,e,n){return(e=$ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ce(t){var e=Gce(t,"string");return typeof e=="symbol"?e:e+""}function Gce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jce(t){var e=gn();return O.useEffect(()=>{var n=BV(BV({},t),{},{stackId:a6(t.stackId)});return e(Fce(n)),()=>{e(Bce(n))}},[e,t]),null}var oA={},qV;function Hce(){return qV||(qV=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e}(oA)),oA}var sA,zV;function Kce(){return zV||(zV=1,sA=Hce().isPlainObject),sA}var Wce=Kce();const Yce=lo(Wce);function S_(){return S_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S_.apply(null,arguments)}var $V=(t,e,n,r,i)=>{var o=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-o/2,",").concat(e+i),s+="L ".concat(t+n-o/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},Jce={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Qce=t=>{var e=nc(t,Jce),n=O.useRef(),[r,i]=O.useState(-1);O.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var I=n.current.getTotalLength();I&&i(I)}catch{}},[]);var{x:o,y:s,upperWidth:u,lowerWidth:c,height:f,className:h}=e,{animationEasing:y,animationDuration:_,animationBegin:E,isUpdateAnimationActive:w}=e;if(o!==+o||s!==+s||u!==+u||c!==+c||f!==+f||u===0&&c===0||f===0)return null;var A=Ut("recharts-trapezoid",h);return w?O.createElement(sd,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:f,x:o,y:s},to:{upperWidth:u,lowerWidth:c,height:f,x:o,y:s},duration:_,animationEasing:y,isActive:w},I=>{var{upperWidth:R,lowerWidth:M,height:P,x:F,y:U}=I;return O.createElement(sd,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:E,duration:_,easing:y},O.createElement("path",S_({},Xt(e,!0),{className:A,d:$V(F,U,R,M,P),ref:n})))}):O.createElement("g",null,O.createElement("path",S_({},Xt(e,!0),{className:A,d:$V(o,s,u,c,f)})))},Xce=["option","shapeType","propTransformer","activeClassName","isActive"];function Zce(t,e){if(t==null)return{};var n,r,i=efe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function efe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function GV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(n),!0).forEach(function(r){tfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tfe(t,e,n){return(e=nfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nfe(t){var e=rfe(t,"string");return typeof e=="symbol"?e:e+""}function rfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ife(t,e){return I_(I_({},e),t)}function ofe(t,e){return t==="symbols"}function jV(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return O.createElement(v6,n);case"trapezoid":return O.createElement(Qce,n);case"sector":return O.createElement(E6,n);case"symbols":if(ofe(e))return O.createElement(ax,n);break;default:return null}}function sfe(t){return O.isValidElement(t)?t.props:t}function afe(t){var{option:e,shapeType:n,propTransformer:r=ife,activeClassName:i="recharts-active-shape",isActive:o}=t,s=Zce(t,Xce),u;if(O.isValidElement(e))u=O.cloneElement(e,I_(I_({},s),sfe(e)));else if(typeof e=="function")u=e(s);else if(Yce(e)&&typeof e!="boolean"){var c=r(e,s);u=O.createElement(jV,{shapeType:n,elementProps:c})}else{var f=s;u=O.createElement(jV,{shapeType:n,elementProps:f})}return o?O.createElement(Yo,{className:i},u):u}var V9=(t,e)=>{var n=gn();return(r,i)=>o=>{t?.(r,i,o),n(a9({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},L9=t=>{var e=gn();return(n,r)=>i=>{t?.(n,r,i),e(ile())}},U9=(t,e)=>{var n=gn();return(r,i)=>o=>{t?.(r,i,o),n(ole({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function lfe(t){var{fn:e,args:n}=t,r=gn(),i=yi();return O.useEffect(()=>{if(!i){var o=e(n);return r(tle(o)),()=>{r(nle(o))}}},[e,n,r,i]),null}var ufe=()=>{};function cfe(t){var{legendPayload:e}=t,n=gn(),r=yi();return O.useEffect(()=>r?ufe:(n(Pne(e)),()=>{n(Mne(e))}),[n,r,e]),null}function ffe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=O.useRef(pp(e)),r=O.useRef(t);return r.current!==t&&(n.current=pp(e),r.current=t),n.current}var dfe=()=>{var t=gn();return O.useEffect(()=>(t(Lce()),()=>{t(Uce())})),null},hfe=["children"];function mfe(t,e){if(t==null)return{};var n,r,i=pfe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var HV=()=>{},F9=O.createContext({addErrorBar:HV,removeErrorBar:HV}),gfe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},B9=O.createContext(gfe);function yfe(t){var{children:e}=t,n=mfe(t,hfe);return O.createElement(B9.Provider,{value:n},e)}var vfe=()=>O.useContext(B9),_fe=t=>{var{children:e,xAxisId:n,yAxisId:r,zAxisId:i,dataKey:o,data:s,stackId:u,hide:c,type:f,barSize:h}=t,[y,_]=O.useState([]),E=O.useCallback(I=>{_(R=>[...R,I])},[_]),w=O.useCallback(I=>{_(R=>R.filter(M=>M!==I))},[_]),A=yi();return O.createElement(F9.Provider,{value:{addErrorBar:E,removeErrorBar:w}},O.createElement(jce,{type:f,data:s,xAxisId:n,yAxisId:r,zAxisId:i,dataKey:o,errorBars:y,stackId:u,hide:c,barSize:h,isPanorama:A}),e)};function Tfe(t){var{addErrorBar:e,removeErrorBar:n}=O.useContext(F9);return O.useEffect(()=>(e(t),()=>{n(t)}),[e,n,t]),null}var Efe=t=>{var e=yi();return Le(n=>sl(n,"xAxis",t,e))},bfe=t=>{var e=yi();return Le(n=>sl(n,"yAxis",t,e))},wfe=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function q9(t,e,n){return(e=Afe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Afe(t){var e=Sfe(t,"string");return typeof e=="symbol"?e:e+""}function Sfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ip(){return Ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ip.apply(null,arguments)}function Ife(t,e){if(t==null)return{};var n,r,i=Cfe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xfe(t){var{direction:e,width:n,dataKey:r,isAnimationActive:i,animationBegin:o,animationDuration:s,animationEasing:u}=t,c=Ife(t,wfe),f=Xt(c,!1),{data:h,dataPointFormatter:y,xAxisId:_,yAxisId:E,errorBarOffset:w}=vfe(),A=Efe(_),I=bfe(E);if(A?.scale==null||I?.scale==null||h==null||e==="x"&&A.type!=="number")return null;var R=h.map(M=>{var{x:P,y:F,value:U,errorVal:$}=y(M,r,e);if(!$)return null;var D=[],N,V;if(Array.isArray($)?[N,V]=$:N=V=$,e==="x"){var{scale:q}=A,B=F+w,G=B+n,z=B-n,Ve=q(U-N),Pe=q(U+V);D.push({x1:Pe,y1:G,x2:Pe,y2:z}),D.push({x1:Ve,y1:B,x2:Pe,y2:B}),D.push({x1:Ve,y1:G,x2:Ve,y2:z})}else if(e==="y"){var{scale:ne}=I,me=P+w,Ae=me-n,qe=me+n,K=ne(U-N),ue=ne(U+V);D.push({x1:Ae,y1:ue,x2:qe,y2:ue}),D.push({x1:me,y1:K,x2:me,y2:ue}),D.push({x1:Ae,y1:K,x2:qe,y2:K})}var se="".concat(P+w,"px ").concat(F+w,"px");return O.createElement(Yo,Ip({className:"recharts-errorBar",key:"bar-".concat(D.map(de=>"".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2)))},f),D.map(de=>{var Me=i?{transformOrigin:"".concat(de.x1-5,"px")}:void 0;return O.createElement(sd,{from:{transform:"scaleY(0)",transformOrigin:se},to:{transform:"scaleY(1)",transformOrigin:se},begin:o,easing:u,isActive:i,duration:s,key:"line-".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2),style:{transformOrigin:se}},O.createElement("line",Ip({},de,{style:Me})))}))});return O.createElement(Yo,{className:"recharts-errorBars"},R)}var z9=O.createContext(void 0);function Rfe(t){var e=O.useContext(z9);return t??e??"x"}function Pfe(t){var{direction:e,children:n}=t;return O.createElement(z9.Provider,{value:e},n)}var $9={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function Mfe(t){var e=Rfe(t.direction),{width:n,isAnimationActive:r,animationBegin:i,animationDuration:o,animationEasing:s}=nc(t,$9);return O.createElement(O.Fragment,null,O.createElement(Tfe,{dataKey:t.dataKey,direction:e}),O.createElement(xfe,Ip({},t,{direction:e,width:n,isAnimationActive:r,animationBegin:i,animationDuration:o,animationEasing:s})))}class G9 extends O.Component{render(){return O.createElement(Mfe,this.props)}}q9(G9,"defaultProps",$9);q9(G9,"displayName","ErrorBar");var Dfe="Invariant failed";function Nfe(t,e){throw new Error(Dfe)}var kfe=["x","y"];function GS(){return GS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GS.apply(null,arguments)}function KV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(n),!0).forEach(function(r){Ofe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ofe(t,e,n){return(e=Vfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vfe(t){var e=Lfe(t,"string");return typeof e=="symbol"?e:e+""}function Lfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ufe(t,e){if(t==null)return{};var n,r,i=Ffe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ffe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Bfe(t,e){var{x:n,y:r}=t,i=Ufe(t,kfe),o="".concat(n),s=parseInt(o,10),u="".concat(r),c=parseInt(u,10),f="".concat(e.height||i.height),h=parseInt(f,10),y="".concat(e.width||i.width),_=parseInt(y,10);return pm(pm(pm(pm(pm({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:h,width:_,name:e.name,radius:e.radius})}function j9(t){return O.createElement(afe,GS({shapeType:"rectangle",propTransformer:Bfe,activeClassName:"recharts-active-bar"},t))}var qfe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Oe(e))return e;var o=Oe(r)||Rn(r);return o?e(r,i):(o||Nfe(),n)}};function H9(t,e){var n,r,i=Le(f=>Ws(f,t)),o=Le(f=>_l(f,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:ti.allowDataOverflow,u=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:ni.allowDataOverflow,c=s||u;return{needClip:c,needClipX:s,needClipY:u}}function zfe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=Sx(),{needClipX:o,needClipY:s,needClip:u}=H9(e,n);if(!u)return null;var{left:c,top:f,width:h,height:y}=i;return O.createElement("clipPath",{id:"clipPath-".concat(r)},O.createElement("rect",{x:o?c:c-h/2,y:s?f:f-y/2,width:o?h:h*2,height:s?y:y*2}))}var $fe=["onMouseEnter","onMouseLeave","onClick"],Gfe=["value","background","tooltipPosition"],jfe=["onMouseEnter","onClick","onMouseLeave"];function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cp.apply(null,arguments)}function WV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WV(Object(n),!0).forEach(function(r){eT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eT(t,e,n){return(e=Hfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hfe(t){var e=Kfe(t,"string");return typeof e=="symbol"?e:e+""}function Kfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jS(t,e){if(t==null)return{};var n,r,i=Wfe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yfe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:l6(n,e),payload:t}]};function Jfe(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:s,unit:u}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:l6(o,e),hide:s,type:t.tooltipType,color:t.fill,unit:u}}}function Qfe(t){var e=Le(Ap),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:s,onMouseLeave:u,onClick:c}=o,f=jS(o,$fe),h=V9(s,r),y=L9(u),_=U9(c,r);if(!i||n==null)return null;var E=Xt(i,!1);return O.createElement(O.Fragment,null,n.map((w,A)=>{var{value:I,background:R,tooltipPosition:M}=w,P=jS(w,Gfe);if(!R)return null;var F=h(w,A),U=y(w,A),$=_(w,A),D=_r(_r(_r(_r(_r({option:i,isActive:String(A)===e},P),{},{fill:"#eee"},R),E),E0(f,w,A)),{},{onMouseEnter:F,onMouseLeave:U,onClick:$,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return O.createElement(j9,Cp({key:"background-bar-".concat(A)},D))}))}function K9(t){var{data:e,props:n,showLabels:r}=t,i=Xt(n,!1),{shape:o,dataKey:s,activeBar:u}=n,c=Le(Ap),f=Le(_9),{onMouseEnter:h,onClick:y,onMouseLeave:_}=n,E=jS(n,jfe),w=V9(h,s),A=L9(_),I=U9(y,s);return e?O.createElement(O.Fragment,null,e.map((R,M)=>{var P=u&&String(M)===c&&(f==null||s===f),F=P?u:o,U=_r(_r(_r({},i),R),{},{isActive:P,option:F,index:M,dataKey:s});return O.createElement(Yo,Cp({className:"recharts-bar-rectangle"},E0(E,R,M),{onMouseEnter:w(R,M),onMouseLeave:A(R,M),onClick:I(R,M),key:"rectangle-".concat(R?.x,"-").concat(R?.y,"-").concat(R?.value,"-").concat(M)}),O.createElement(j9,U))}),r&&xu.renderCallByParent(n,e)):null}function Xfe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:u,animationEasing:c,onAnimationEnd:f,onAnimationStart:h}=e,y=n.current,_=ffe(e,"recharts-bar-"),[E,w]=O.useState(!1),A=O.useCallback(()=>{typeof f=="function"&&f(),w(!1)},[f]),I=O.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return O.createElement(sd,{begin:s,duration:u,isActive:o,easing:c,from:{t:0},to:{t:1},onAnimationEnd:A,onAnimationStart:I,key:_},R=>{var{t:M}=R,P=M===1?r:r.map((F,U)=>{var $=y&&y[U];if($){var D=cf($.x,F.x),N=cf($.y,F.y),V=cf($.width,F.width),q=cf($.height,F.height);return _r(_r({},F),{},{x:D(M),y:N(M),width:V(M),height:q(M)})}if(i==="horizontal"){var B=cf(0,F.height),G=B(M);return _r(_r({},F),{},{y:F.y+F.height-G,height:G})}var z=cf(0,F.width),Ve=z(M);return _r(_r({},F),{},{width:Ve})});return M>0&&(n.current=P),O.createElement(Yo,null,O.createElement(K9,{props:e,data:P,showLabels:!E}))})}function Zfe(t){var{data:e,isAnimationActive:n}=t,r=O.useRef(null);return n&&e&&e.length&&(r.current==null||r.current!==e)?O.createElement(Xfe,{previousRectanglesRef:r,props:t}):O.createElement(K9,{props:t,data:e,showLabels:!0})}var W9=0,ede=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:fi(t,e)}};class tde extends O.PureComponent{constructor(){super(...arguments),eT(this,"id",pp("recharts-bar-"))}render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:s,needClip:u,background:c,id:f,layout:h}=this.props;if(e)return null;var y=Ut("recharts-bar",i),_=Rn(f)?this.id:f;return O.createElement(Yo,{className:y},u&&O.createElement("defs",null,O.createElement(zfe,{clipPathId:_,xAxisId:o,yAxisId:s})),O.createElement(Yo,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(_,")"):null},O.createElement(Qfe,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),O.createElement(Zfe,this.props)),O.createElement(Pfe,{direction:h==="horizontal"?"y":"x"},this.props.children))}}var Y9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!eg.isSsr,legendType:"rect",minPointSize:W9,xAxisId:0,yAxisId:0};function nde(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:u,animationDuration:c,animationEasing:f,isAnimationActive:h}=nc(t,Y9),{needClip:y}=H9(e,n),_=Ix(),E=yi(),w=O.useMemo(()=>({barSize:t.barSize,data:void 0,dataKey:t.dataKey,maxBarSize:t.maxBarSize,minPointSize:o,stackId:a6(t.stackId)}),[t.barSize,t.dataKey,t.maxBarSize,o,t.stackId]),A=nx(t.children,x9),I=Le(P=>Pde(P,e,n,E,w,A));if(_!=="vertical"&&_!=="horizontal")return null;var R,M=I?.[0];return M==null||M.height==null||M.width==null?R=0:R=_==="vertical"?M.height/2:M.width/2,O.createElement(yfe,{xAxisId:e,yAxisId:n,data:I,dataPointFormatter:ede,errorBarOffset:R},O.createElement(tde,Cp({},t,{layout:_,needClip:y,data:I,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:u,animationDuration:c,animationEasing:f,isAnimationActive:h})))}function rde(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:s,yAxis:u,xAxisTicks:c,yAxisTicks:f,stackedData:h,displayedData:y,offset:_,cells:E}=t,w=e==="horizontal"?u:s,A=h?w.scale.domain():null,I=une({numericAxis:w});return y.map((R,M)=>{var P,F,U,$,D,N;h?P=ine(h[M],A):(P=fi(R,n),Array.isArray(P)||(P=[I,P]));var V=qfe(r,W9)(P[1],M);if(e==="horizontal"){var q,[B,G]=[u.scale(P[0]),u.scale(P[1])];F=FO({axis:s,ticks:c,bandSize:o,offset:i.offset,entry:R,index:M}),U=(q=G??B)!==null&&q!==void 0?q:void 0,$=i.size;var z=B-G;if(D=qi(z)?0:z,N={x:F,y:_.top,width:$,height:_.height},Math.abs(V)>0&&Math.abs(D)<Math.abs(V)){var Ve=ui(D||V)*(Math.abs(V)-Math.abs(D));U-=Ve,D+=Ve}}else{var[Pe,ne]=[s.scale(P[0]),s.scale(P[1])];if(F=Pe,U=FO({axis:u,ticks:f,bandSize:o,offset:i.offset,entry:R,index:M}),$=ne-Pe,D=i.size,N={x:_.left,y:U,width:_.width,height:D},Math.abs(V)>0&&Math.abs($)<Math.abs(V)){var me=ui($||V)*(Math.abs(V)-Math.abs($));$+=me}}return _r(_r({},R),{},{x:F,y:U,width:$,height:D,value:h?P:P[1],payload:R,background:N,tooltipPosition:{x:F+$/2,y:U+D/2}},E&&E[M]&&E[M].props)})}class Gm extends O.PureComponent{render(){return O.createElement(_fe,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},O.createElement(dfe,null),O.createElement(cfe,{legendPayload:Yfe(this.props)}),O.createElement(lfe,{fn:Jfe,args:this.props}),O.createElement(nde,this.props))}}eT(Gm,"displayName","Bar");eT(Gm,"defaultProps",Y9);function YV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ev(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YV(Object(n),!0).forEach(function(r){ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ide(t,e,n){return(e=ode(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ode(t){var e=sde(t,"string");return typeof e=="symbol"?e:e+""}function sde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ade=(t,e)=>e,lde=(t,e,n)=>n,ude=(t,e,n,r)=>r,S1=(t,e,n,r,i)=>i,cde=(t,e,n,r,i)=>i.maxBarSize,fde=(t,e,n,r,i,o)=>o,JV=(t,e,n)=>{var r=n??t;if(!Rn(r))return ao(r,e,0)},dde=ae([Ot,a1,ade,lde,ude],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),hde=(t,e,n,r)=>{var i=Ot(t);return i==="horizontal"?LS(t,"yAxis",n,r):LS(t,"xAxis",e,r)},mde=(t,e,n)=>{var r=Ot(t);return r==="horizontal"?iV(t,"xAxis",e):iV(t,"yAxis",n)};function pde(t){return t.stackId!=null&&t.dataKey!=null}var gde=(t,e,n)=>{var r={},i=t.filter(pde),o=t.filter(f=>f.stackId==null),s=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),u=Object.entries(s).map(f=>{var[h,y]=f,_=y.map(w=>w.dataKey),E=JV(e,n,y[0].barSize);return{stackId:h,dataKeys:_,barSize:E}}),c=o.map(f=>{var h=[f.dataKey].filter(_=>_!=null),y=JV(e,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:y}});return[...u,...c]},yde=ae([dde,Zse,mde],gde),vde=(t,e,n,r,i)=>{var o,s,u=Ot(t),c=v5(t),{maxBarSize:f}=i,h=Rn(f)?c:f,y,_;return u==="horizontal"?(y=sl(t,"xAxis",e,r),_=fd(t,"xAxis",e,r)):(y=sl(t,"yAxis",n,r),_=fd(t,"yAxis",n,r)),(o=(s=Ex(y,_,!0))!==null&&s!==void 0?s:h)!==null&&o!==void 0?o:0},J9=(t,e,n,r)=>{var i=Ot(t),o,s;return i==="horizontal"?(o=sl(t,"xAxis",e,r),s=fd(t,"xAxis",e,r)):(o=sl(t,"yAxis",n,r),s=fd(t,"yAxis",n,r)),Ex(o,s)};function _de(t,e,n,r,i){var o=r.length;if(!(o<1)){var s=ao(t,n,0,!0),u,c=[];if(gi(r[0].barSize)){var f=!1,h=n/o,y=r.reduce((R,M)=>R+(M.barSize||0),0);y+=(o-1)*s,y>=n&&(y-=(o-1)*s,s=0),y>=n&&h>0&&(f=!0,h*=.9,y=o*h);var _=(n-y)/2>>0,E={offset:_-s,size:0};u=r.reduce((R,M)=>{var P,F={stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:E.offset+E.size+s,size:f?h:(P=M.barSize)!==null&&P!==void 0?P:0}},U=[...R,F];return E=U[U.length-1].position,U},c)}else{var w=ao(e,n,0,!0);n-2*w-(o-1)*s<=0&&(s=0);var A=(n-2*w-(o-1)*s)/o;A>1&&(A>>=0);var I=gi(i)?Math.min(A,i):A;u=r.reduce((R,M,P)=>[...R,{stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:w+(A+s)*P+(A-I)/2,size:I}}],c)}return u}}var Tde=(t,e,n,r,i,o,s)=>{var u=Rn(s)?e:s,c=_de(n,r,i!==o?i:o,t,u);return i!==o&&c!=null&&(c=c.map(f=>ev(ev({},f),{},{position:ev(ev({},f.position),{},{offset:f.position.offset-i/2})}))),c},Ede=ae([yde,v5,Xse,_5,vde,J9,cde],Tde),bde=(t,e,n,r)=>sl(t,"xAxis",e,r),wde=(t,e,n,r)=>sl(t,"yAxis",n,r),Ade=(t,e,n,r)=>fd(t,"xAxis",e,r),Sde=(t,e,n,r)=>fd(t,"yAxis",n,r),Ide=ae([Ede,S1],(t,e)=>{if(t!=null){var n=t.find(r=>r.stackId===e.stackId&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Cde=(t,e)=>{if(!(!t||e?.dataKey==null)){var{stackId:n}=e;if(n!=null){var r=t[n];if(r){var{stackedData:i}=r;if(i){var o=i.find(s=>s.key===e.dataKey);return o}}}}},xde=ae([a1,S1],(t,e)=>{if(t.some(n=>n.type==="bar"&&e.dataKey===n.dataKey&&e.stackId===n.stackId&&e.stackId===n.stackId))return e}),Rde=ae([hde,S1],Cde),Pde=ae([dr,bde,wde,Ade,Sde,Ide,Ot,r5,J9,Rde,xde,fde],(t,e,n,r,i,o,s,u,c,f,h,y)=>{var{chartData:_,dataStartIndex:E,dataEndIndex:w}=u;if(!(h==null||o==null||s!=="horizontal"&&s!=="vertical"||e==null||n==null||r==null||i==null||c==null)){var{data:A}=h,I;if(A!=null&&A.length>0?I=A:I=_?.slice(E,w+1),I!=null)return rde({layout:s,barSettings:h,pos:o,bandSize:c,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,stackedData:f,displayedData:I,offset:t,cells:y})}}),Mde=t=>{var{chartData:e}=t,n=gn(),r=yi();return O.useEffect(()=>r?()=>{}:(n(hV(e)),()=>{n(hV(void 0))}),[e,n,r]),null},QV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Q9=Gi({name:"brush",initialState:QV,reducers:{setBrushSettings(t,e){return e.payload==null?QV:e.payload}}}),{setBrushSettings:Xwe}=Q9.actions,Dde=Q9.reducer;function Nde(t,e,n){return(e=kde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kde(t){var e=Ode(t,"string");return typeof e=="symbol"?e:e+""}function Ode(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class I1{static create(e){return new I1(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}Nde(I1,"EPS",1e-4);function Vde(t){return(t%180+180)%180}var Lde=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Vde(i),s=o*Math.PI/180,u=Math.atan(r/n),c=s>u&&s<Math.PI-u?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Ude={dots:[],areas:[],lines:[]},X9=Gi({name:"referenceElements",initialState:Ude,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ja(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ja(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ja(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Zwe,removeDot:eAe,addArea:tAe,removeArea:nAe,addLine:rAe,removeLine:iAe}=X9.actions,Fde=X9.reducer,Bde=O.createContext(void 0),qde=t=>{var{children:e}=t,[n]=O.useState("".concat(pp("recharts"),"-clip")),r=Sx();if(r==null)return null;var{left:i,top:o,height:s,width:u}=r;return O.createElement(Bde.Provider,{value:n},O.createElement("defs",null,O.createElement("clipPath",{id:n},O.createElement("rect",{x:i,y:o,height:s,width:u}))),e)};function aA(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function Z9(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function zde(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Lde(r,n)}function $de(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:u}=t;return e===1?{start:r?i:o,end:r?i+s:o+u}:{start:r?i+s:o+u,end:r?i:o}}function C_(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Gde(t,e){return Z9(t,e+1)}function jde(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:u}=e,c=0,f=1,h=s,y=function(){var w=r?.[c];if(w===void 0)return{v:Z9(r,f)};var A=c,I,R=()=>(I===void 0&&(I=n(w,A)),I),M=w.coordinate,P=c===0||C_(t,M,R,h,u);P||(c=0,h=s,f+=1),P&&(h=M+t*(R()/2+i),c+=f)},_;f<=o.length;)if(_=y(),_)return _.v;return[]}function XV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XV(Object(n),!0).forEach(function(r){Hde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hde(t,e,n){return(e=Kde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kde(t){var e=Wde(t,"string");return typeof e=="symbol"?e:e+""}function Wde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yde(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:u}=e,{end:c}=e,f=function(_){var E=o[_],w,A=()=>(w===void 0&&(w=n(E,_)),w);if(_===s-1){var I=t*(E.coordinate+t*A()/2-c);o[_]=E=yr(yr({},E),{},{tickCoord:I>0?E.coordinate-I*t:E.coordinate})}else o[_]=E=yr(yr({},E),{},{tickCoord:E.coordinate});var R=C_(t,E.tickCoord,A,u,c);R&&(c=E.tickCoord-t*(A()/2+i),o[_]=yr(yr({},E),{},{isShow:!0}))},h=s-1;h>=0;h--)f(h);return o}function Jde(t,e,n,r,i,o){var s=(r||[]).slice(),u=s.length,{start:c,end:f}=e;if(o){var h=r[u-1],y=n(h,u-1),_=t*(h.coordinate+t*y/2-f);s[u-1]=h=yr(yr({},h),{},{tickCoord:_>0?h.coordinate-_*t:h.coordinate});var E=C_(t,h.tickCoord,()=>y,c,f);E&&(f=h.tickCoord-t*(y/2+i),s[u-1]=yr(yr({},h),{},{isShow:!0}))}for(var w=o?u-1:u,A=function(M){var P=s[M],F,U=()=>(F===void 0&&(F=n(P,M)),F);if(M===0){var $=t*(P.coordinate-t*U()/2-c);s[M]=P=yr(yr({},P),{},{tickCoord:$<0?P.coordinate-$*t:P.coordinate})}else s[M]=P=yr(yr({},P),{},{tickCoord:P.coordinate});var D=C_(t,P.tickCoord,U,c,f);D&&(c=P.tickCoord+t*(U()/2+i),s[M]=yr(yr({},P),{},{isShow:!0}))},I=0;I<w;I++)A(I);return s}function Qde(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:u,interval:c,tickFormatter:f,unit:h,angle:y}=t;if(!i||!i.length||!r)return[];if(Oe(c)||eg.isSsr){var _;return(_=Gde(i,Oe(c)?c:0))!==null&&_!==void 0?_:[]}var E=[],w=u==="top"||u==="bottom"?"width":"height",A=h&&w==="width"?$m(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},I=(P,F)=>{var U=typeof f=="function"?f(P.value,F):P.value;return w==="width"?zde($m(U,{fontSize:e,letterSpacing:n}),A,y):$m(U,{fontSize:e,letterSpacing:n})[w]},R=i.length>=2?ui(i[1].coordinate-i[0].coordinate):1,M=$de(o,R,w);return c==="equidistantPreserveStart"?jde(R,M,I,i,s):(c==="preserveStart"||c==="preserveStartEnd"?E=Jde(R,M,I,i,s,c==="preserveStartEnd"):E=Yde(R,M,I,i,s),E.filter(P=>P.isShow))}var Xde=["viewBox"],Zde=["viewBox"];function bf(){return bf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bf.apply(null,arguments)}function ZV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZV(Object(n),!0).forEach(function(r){C1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eL(t,e){if(t==null)return{};var n,r,i=ehe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ehe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function C1(t,e,n){return(e=the(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function the(t){var e=nhe(t,"string");return typeof e=="symbol"?e:e+""}function nhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Fd extends O.Component{constructor(e){super(e),this.tickRefs=O.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=eL(e,Xde),o=this.props,{viewBox:s}=o,u=eL(o,Zde);return!aA(r,s)||!aA(i,u)||!aA(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:o,orientation:s,tickSize:u,mirror:c,tickMargin:f}=this.props,h,y,_,E,w,A,I=c?-1:1,R=e.tickSize||u,M=Oe(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=y=e.coordinate,E=r+ +!c*o,_=E-I*R,A=_-I*f,w=M;break;case"left":_=E=e.coordinate,y=n+ +!c*i,h=y-I*R,w=h-I*f,A=M;break;case"right":_=E=e.coordinate,y=n+ +c*i,h=y+I*R,w=h+I*f,A=M;break;default:h=y=e.coordinate,E=r+ +c*o,_=E+I*R,A=_+I*f,w=M;break}return{line:{x1:h,y1:_,x2:y,y2:E},tick:{x:w,y:A}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props,r;switch(e){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:u}=this.props,c=Ln(Ln(Ln({},Xt(this.props,!1)),Xt(u,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!s||o==="bottom"&&s);c=Ln(Ln({},c),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(o==="left"&&!s||o==="right"&&s);c=Ln(Ln({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return O.createElement("line",bf({},c,{className:Ut("recharts-cartesian-axis-line",qu(u,"className"))}))}static renderTickItem(e,n,r){var i,o=Ut(n.className,"recharts-cartesian-axis-tick-value");if(O.isValidElement(e))i=O.cloneElement(e,Ln(Ln({},n),{},{className:o}));else if(typeof e=="function")i=e(Ln(Ln({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Ut(s,e.className)),i=O.createElement(w1,bf({},n,{className:s}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:s,tickFormatter:u,unit:c}=this.props,f=Qde(Ln(Ln({},this.props),{},{ticks:r}),e,n),h=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),_=Xt(this.props,!1),E=Xt(s,!1),w=Ln(Ln({},_),{},{fill:"none"},Xt(i,!1)),A=f.map((I,R)=>{var{line:M,tick:P}=this.getTickLineCoord(I),F=Ln(Ln(Ln(Ln({textAnchor:h,verticalAnchor:y},_),{},{stroke:"none",fill:o},E),P),{},{index:R,payload:I,visibleTicksCount:f.length,tickFormatter:u});return O.createElement(Yo,bf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(I.value,"-").concat(I.coordinate,"-").concat(I.tickCoord)},E0(this.props,I,R)),i&&O.createElement("line",bf({},w,M,{className:Ut("recharts-cartesian-axis-tick-line",qu(i,"className"))})),s&&Fd.renderTickItem(s,F,"".concat(typeof u=="function"?u(I.value,R):I.value).concat(c||"")))});return A.length>0?O.createElement("g",{className:"recharts-cartesian-axis-ticks"},A):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:s}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:O.createElement(Yo,{className:Ut("recharts-cartesian-axis",i),ref:u=>{if(u){var c=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var f=c[0];if(f){var h=window.getComputedStyle(f).fontSize,y=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||y!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),si.renderCallByParent(this.props))}}C1(Fd,"displayName","CartesianAxis");C1(Fd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(r){rhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rhe(t,e,n){return(e=ihe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ihe(t){var e=ohe(t,"string");return typeof e=="symbol"?e:e+""}function ohe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var she={xAxis:{},yAxis:{},zAxis:{}},ez=Gi({name:"cartesianAxis",initialState:she,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=nL(nL({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:ahe,removeXAxis:lhe,addYAxis:uhe,removeYAxis:che,addZAxis:oAe,removeZAxis:sAe,updateYAxisWidth:fhe}=ez.actions,dhe=ez.reducer,hhe=["children"],mhe=["dangerouslySetInnerHTML","ticks"];function tz(t,e,n){return(e=phe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function phe(t){var e=ghe(t,"string");return typeof e=="symbol"?e:e+""}function ghe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HS(){return HS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HS.apply(null,arguments)}function nz(t,e){if(t==null)return{};var n,r,i=yhe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vhe(t){var e=gn(),n=O.useMemo(()=>{var{children:o}=t,s=nz(t,hhe);return s},[t]),r=Le(o=>Ws(o,n.id)),i=n===r;return O.useEffect(()=>(e(ahe(n)),()=>{e(lhe(n))}),[n,e]),i?t.children:null}var _he=t=>{var{xAxisId:e,className:n}=t,r=Le(c6),i=yi(),o="xAxis",s=Le(E=>Vd(E,o,e,i)),u=Le(E=>t9(E,o,e,i)),c=Le(E=>Q5(E,e)),f=Le(E=>Hae(E,e));if(c==null||f==null)return null;var{dangerouslySetInnerHTML:h,ticks:y}=t,_=nz(t,mhe);return O.createElement(Fd,HS({},_,{scale:s,x:f.x,y:f.y,width:c.width,height:c.height,className:Ut("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:u}))},The=t=>{var e,n,r,i,o;return O.createElement(vhe,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter},O.createElement(_he,t))};class x1 extends O.Component{render(){return O.createElement(The,this.props)}}tz(x1,"displayName","XAxis");tz(x1,"defaultProps",{allowDataOverflow:ti.allowDataOverflow,allowDecimals:ti.allowDecimals,allowDuplicatedCategory:ti.allowDuplicatedCategory,height:ti.height,hide:!1,mirror:ti.mirror,orientation:ti.orientation,padding:ti.padding,reversed:ti.reversed,scale:ti.scale,tickCount:ti.tickCount,type:ti.type,xAxisId:0});var Ehe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){e.forEach(h=>{if(h){var y=h.getBoundingClientRect();y.width>s&&(s=y.width)}});var u=n?n.getBoundingClientRect().width:0,c=i+o,f=s+c+u+(n?r:0);return Math.round(f)}return 0},bhe=["dangerouslySetInnerHTML","ticks"];function rz(t,e,n){return(e=whe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function whe(t){var e=Ahe(t,"string");return typeof e=="symbol"?e:e+""}function Ahe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KS(){return KS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KS.apply(null,arguments)}function She(t,e){if(t==null)return{};var n,r,i=Ihe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ihe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Che(t){var e=gn();return O.useEffect(()=>(e(uhe(t)),()=>{e(che(t))}),[t,e]),null}var xhe=t=>{var e,{yAxisId:n,className:r,width:i,label:o}=t,s=O.useRef(null),u=O.useRef(null),c=Le(c6),f=yi(),h=gn(),y="yAxis",_=Le(P=>Vd(P,y,n,f)),E=Le(P=>X5(P,n)),w=Le(P=>Kae(P,n)),A=Le(P=>t9(P,y,n,f));if(O.useLayoutEffect(()=>{var P;if(!(i!=="auto"||!E||A1(o)||O.isValidElement(o))){var F=s.current,U=F==null||(P=F.tickRefs)===null||P===void 0?void 0:P.current,{tickSize:$,tickMargin:D}=F.props,N=Ehe({ticks:U,label:u.current,labelGapWithTick:5,tickSize:$,tickMargin:D});Math.round(E.width)!==Math.round(N)&&h(fhe({id:n,width:N}))}},[s,s==null||(e=s.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,E?.width,E,h,o,n,i]),E==null||w==null)return null;var{dangerouslySetInnerHTML:I,ticks:R}=t,M=She(t,bhe);return O.createElement(Fd,KS({},M,{ref:s,labelRef:u,scale:_,x:w.x,y:w.y,width:E.width,height:E.height,className:Ut("recharts-".concat(y," ").concat(y),r),viewBox:c,ticks:A}))},Rhe=t=>{var e,n,r,i,o;return O.createElement(O.Fragment,null,O.createElement(Che,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter}),O.createElement(xhe,t))},Phe={allowDataOverflow:ni.allowDataOverflow,allowDecimals:ni.allowDecimals,allowDuplicatedCategory:ni.allowDuplicatedCategory,hide:!1,mirror:ni.mirror,orientation:ni.orientation,padding:ni.padding,reversed:ni.reversed,scale:ni.scale,tickCount:ni.tickCount,type:ni.type,width:ni.width,yAxisId:0};class R1 extends O.Component{render(){return O.createElement(Rhe,this.props)}}rz(R1,"displayName","YAxis");rz(R1,"defaultProps",Phe);var lA={exports:{}},uA={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rL;function Mhe(){if(rL)return uA;rL=1;var t=yd();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,u=t.useDebugValue;return uA.useSyncExternalStoreWithSelector=function(c,f,h,y,_){var E=i(null);if(E.current===null){var w={hasValue:!1,value:null};E.current=w}else w=E.current;E=s(function(){function I(U){if(!R){if(R=!0,M=U,U=y(U),_!==void 0&&w.hasValue){var $=w.value;if(_($,U))return P=$}return P=U}if($=P,n(M,U))return $;var D=y(U);return _!==void 0&&_($,D)?(M=U,$):(M=U,P=D)}var R=!1,M,P,F=h===void 0?null:h;return[function(){return I(f())},F===null?void 0:function(){return I(F())}]},[f,h,y,_]);var A=r(c,E[0],E[1]);return o(function(){w.hasValue=!0,w.value=A},[A]),u(A),A},uA}var iL;function Dhe(){return iL||(iL=1,lA.exports=Mhe()),lA.exports}Dhe();function Nhe(t){t()}function khe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Nhe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var oL={notify(){},get:()=>[]};function Ohe(t,e){let n,r=oL,i=0,o=!1;function s(A){h();const I=r.subscribe(A);let R=!1;return()=>{R||(R=!0,I(),y())}}function u(){r.notify()}function c(){w.onStateChange&&w.onStateChange()}function f(){return o}function h(){i++,n||(n=t.subscribe(c),r=khe())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=oL)}function _(){o||(o=!0,h())}function E(){o&&(o=!1,y())}const w={addNestedSub:s,notifyNestedSubs:u,handleChangeWrapper:c,isSubscribed:f,trySubscribe:_,tryUnsubscribe:E,getListeners:()=>r};return w}var Vhe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Lhe=Vhe(),Uhe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Fhe=Uhe(),Bhe=()=>Lhe||Fhe?O.useLayoutEffect:O.useEffect,qhe=Bhe(),zhe=Symbol.for("react-redux-context"),$he=typeof globalThis<"u"?globalThis:{};function Ghe(){if(!O.createContext)return{};const t=$he[zhe]??=new Map;let e=t.get(O.createContext);return e||(e=O.createContext(null),t.set(O.createContext,e)),e}var jhe=Ghe();function Hhe(t){const{children:e,context:n,serverState:r,store:i}=t,o=O.useMemo(()=>{const c=Ohe(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=O.useMemo(()=>i.getState(),[i]);qhe(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const u=n||jhe;return O.createElement(u.Provider,{value:o},e)}var Khe=Hhe,Whe=(t,e)=>e,P1=ae([Whe,Ot,oae,Zn,p9,Ys,Yle,dr],nue),M1=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},iz=zi("mouseClick"),oz=Zp();oz.startListening({actionCreator:iz,effect:(t,e)=>{var n=t.payload,r=P1(e.getState(),M1(n));r?.activeIndex!=null&&e.dispatch(sle({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var WS=zi("mouseMove"),sz=Zp();sz.startListening({actionCreator:WS,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=p1(r,r.tooltip.settings.shared),o=P1(r,M1(n));i==="axis"&&(o?.activeIndex!=null?e.dispatch(u9({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(l9()))}});function Yhe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var sL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},az=Gi({name:"rootProps",initialState:sL,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:sL.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),Jhe=az.reducer,{updateOptions:Qhe}=az.actions,lz=Gi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:aAe}=lz.actions,Xhe=lz.reducer,uz=zi("keyDown"),cz=zi("focus"),D1=Zp();D1.startListening({actionCreator:uz,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(g1(i,sc(n))),u=Ys(n);if(o==="Enter"){var c=w_(n,"axis","hover",String(i.index));e.dispatch(FS({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=Qae(n),h=f==="left-to-right"?1:-1,y=o==="ArrowRight"?1:-1,_=s+y*h;if(!(u==null||_>=u.length||_<0)){var E=w_(n,"axis","hover",String(_));e.dispatch(FS({active:!0,activeIndex:_.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}});D1.startListening({actionCreator:cz,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=w_(n,"axis","hover",String(o));e.dispatch(FS({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var Ni=zi("externalEvent"),fz=Zp();fz.startListening({actionCreator:Ni,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:Lle(n),activeDataKey:_9(n),activeIndex:Ap(n),activeLabel:kle(n),activeTooltipIndex:Ap(n),isTooltipActive:Ule(n)};t.payload.handler(r,t.payload.reactEvent)}}});var Zhe=ae([Ld],t=>t.tooltipItemPayloads),eme=ae([Zhe,Q0,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),dz=zi("touchMove"),hz=Zp();hz.startListening({actionCreator:dz,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=p1(r,r.tooltip.settings.shared);if(i==="axis"){var o=P1(r,M1({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&e.dispatch(u9({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,u=n.touches[0],c=document.elementFromPoint(u.clientX,u.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(yne),h=(s=c.getAttribute(vne))!==null&&s!==void 0?s:void 0,y=eme(e.getState(),f,h);e.dispatch(a9({activeDataKey:h,activeIndex:f,activeCoordinate:y}))}}});var tme=U3({brush:Dde,cartesianAxis:dhe,chartData:_ue,graphicalItems:qce,layout:qte,legend:Dne,options:mue,polarAxis:Oce,polarOptions:Xhe,referenceElements:Fde,rootProps:Jhe,tooltip:ale}),nme=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return dte({reducer:tme,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([oz.middleware,sz.middleware,D1.middleware,fz.middleware,hz.middleware]),devTools:{serialize:{replacer:Yhe},name:"recharts-".concat(n)}})};function rme(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=yi(),o=O.useRef(null);if(i)return n;o.current==null&&(o.current=nme(e,r));var s=px;return O.createElement(Khe,{context:s,store:o.current},n)}function ime(t){var{layout:e,width:n,height:r,margin:i}=t,o=gn(),s=yi();return O.useEffect(()=>{s||(o(Ute(e)),o(Fte({width:n,height:r})),o(Lte(i)))},[o,s,e,n,r,i]),null}function ome(t){var e=gn();return O.useEffect(()=>{e(Qhe(t))},[e,t]),null}var sme=["children"];function ame(t,e){if(t==null)return{};var n,r,i=lme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function x_(){return x_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x_.apply(null,arguments)}var ume={width:"100%",height:"100%"},cme=O.forwardRef((t,e)=>{var n=f6(),r=d6(),i=m6();if(!l_(n)||!l_(r))return null;var{children:o,otherAttributes:s,title:u,desc:c}=t,f,h;return typeof s.tabIndex=="number"?f=s.tabIndex:f=i?0:void 0,typeof s.role=="string"?h=s.role:h=i?"application":void 0,O.createElement(rx,x_({},s,{title:u,desc:c,role:h,tabIndex:f,width:n,height:r,style:ume,ref:e}),o)}),fme=t=>{var{children:e}=t,n=Le(k0);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return O.createElement(rx,{width:r,height:i,x:s,y:o},e)},aL=O.forwardRef((t,e)=>{var{children:n}=t,r=ame(t,sme),i=yi();return i?O.createElement(fme,null,n):O.createElement(cme,x_({ref:e},r),n)});function dme(){var t=gn(),[e,n]=O.useState(null),r=Le(gne);return O.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;gi(o)&&o!==r&&t(Bte(o))}},[e,t,r]),n}function lL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(n),!0).forEach(function(r){mme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mme(t,e,n){return(e=pme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pme(t){var e=gme(t,"string");return typeof e=="symbol"?e:e+""}function gme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yme=O.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:u,onMouseDown:c,onMouseEnter:f,onMouseLeave:h,onMouseMove:y,onMouseUp:_,onTouchEnd:E,onTouchMove:w,onTouchStart:A,style:I,width:R}=t,M=gn(),[P,F]=O.useState(null),[U,$]=O.useState(null);bue();var D=dme(),N=O.useCallback(se=>{D(se),typeof e=="function"&&e(se),F(se),$(se)},[D,e,F,$]),V=O.useCallback(se=>{M(iz(se)),M(Ni({handler:o,reactEvent:se}))},[M,o]),q=O.useCallback(se=>{M(WS(se)),M(Ni({handler:f,reactEvent:se}))},[M,f]),B=O.useCallback(se=>{M(l9()),M(Ni({handler:h,reactEvent:se}))},[M,h]),G=O.useCallback(se=>{M(WS(se)),M(Ni({handler:y,reactEvent:se}))},[M,y]),z=O.useCallback(()=>{M(cz())},[M]),Ve=O.useCallback(se=>{M(uz(se.key))},[M]),Pe=O.useCallback(se=>{M(Ni({handler:s,reactEvent:se}))},[M,s]),ne=O.useCallback(se=>{M(Ni({handler:u,reactEvent:se}))},[M,u]),me=O.useCallback(se=>{M(Ni({handler:c,reactEvent:se}))},[M,c]),Ae=O.useCallback(se=>{M(Ni({handler:_,reactEvent:se}))},[M,_]),qe=O.useCallback(se=>{M(Ni({handler:A,reactEvent:se}))},[M,A]),K=O.useCallback(se=>{M(dz(se)),M(Ni({handler:w,reactEvent:se}))},[M,w]),ue=O.useCallback(se=>{M(Ni({handler:E,reactEvent:se}))},[M,E]);return O.createElement(A9.Provider,{value:P},O.createElement(a3.Provider,{value:U},O.createElement("div",{className:Ut("recharts-wrapper",r),style:hme({position:"relative",cursor:"default",width:R,height:i},I),role:"application",onClick:V,onContextMenu:Pe,onDoubleClick:ne,onFocus:z,onKeyDown:Ve,onMouseDown:me,onMouseEnter:q,onMouseLeave:B,onMouseMove:G,onMouseUp:Ae,onTouchEnd:ue,onTouchMove:K,onTouchStart:qe,ref:N},n)))}),vme=["children","className","width","height","style","compact","title","desc"];function _me(t,e){if(t==null)return{};var n,r,i=Tme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Eme=O.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:o,style:s,compact:u,title:c,desc:f}=t,h=_me(t,vme),y=Xt(h,!1);return u?O.createElement(aL,{otherAttributes:y,title:c,desc:f},n):O.createElement(yme,{className:r,style:s,width:i,height:o,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},O.createElement(aL,{otherAttributes:y,title:c,desc:f,ref:e},O.createElement(qde,null,n)))}),bme=["width","height"];function YS(){return YS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YS.apply(null,arguments)}function wme(t,e){if(t==null)return{};var n,r,i=Ame(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ame(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Sme={top:5,right:5,bottom:5,left:5},Ime={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Sme,reverseStackOrder:!1,syncMethod:"index"},Cme=O.forwardRef(function(e,n){var r,i=nc(e.categoricalChartProps,Ime),{width:o,height:s}=i,u=wme(i,bme);if(!l_(o)||!l_(s))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:y,categoricalChartProps:_}=e,E={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:y,eventEmitter:void 0};return O.createElement(rme,{preloadedState:{options:E},reduxStoreName:(r=_.id)!==null&&r!==void 0?r:c},O.createElement(Mde,{chartData:_.data}),O.createElement(ime,{width:o,height:s,layout:i.layout,margin:i.margin}),O.createElement(ome,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),O.createElement(Eme,YS({},u,{width:o,height:s,ref:n})))}),xme=["axis","item"],Rme=O.forwardRef((t,e)=>O.createElement(Cme,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xme,tooltipPayloadSearcher:due,categoricalChartProps:t,ref:e}));const Pme={spinner:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:H.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 1 1-6.219-8.56"})}),download:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),appLogo:H.jsx("img",{src:"logo.jpeg",alt:"Vakratund Logo",className:"w-full h-full object-cover"}),addMemberIllustration:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM4 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 10.5 21.75c-2.676 0-5.216-.584-7.5-1.615Z"})}),logout:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),search:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),dashboard:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h12M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-12a2.25 2.25 0 01-2.25-2.25V3M3.75 21h16.5M12 6.75h.008v.008H12V6.75z"})}),attendance:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 21h-5.625M3 21h5.625M3 8.25h18M3 14.625h18M3 11.4375h18M4.5 3.75h15a2.25 2.25 0 012.25 2.25v12a2.25 2.25 0 01-2.25-2.25h-15a2.25 2.25 0 01-2.25-2.25v-12A2.25 2.25 0 014.5 3.75z"})}),add:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.5 21.75c-2.676 0-5.216-.584-7.5-1.615z"})}),member:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),back:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),check:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),close:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),halfday:H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[H.jsx("path",{d:"M12 2.25a9.75 9.75 0 100 19.5 9.75 9.75 0 000-19.5z",strokeLinecap:"round",strokeLinejoin:"round"}),H.jsx("path",{fill:"currentColor",d:"M12 2.25v19.5a9.75 9.75 0 000-19.5z"})]}),edit:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),save:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 13.5l3 3m0 0l3-3m-3 3v-6m1.06-4.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})})},Cn=({type:t,className:e="w-6 h-6"})=>{const n=Pme[t];return t==="appLogo"&&hA.isValidElement(n)?hA.cloneElement(n,{className:e}):t==="spinner"?H.jsx("div",{className:`${e} animate-spin`,children:n}):H.jsx("div",{className:e,children:n})},tv=({title:t,value:e,iconType:n,color:r})=>H.jsxs("div",{className:"bg-stone-900 p-4 rounded-lg shadow-md flex items-center",children:[H.jsx("div",{className:`p-3 rounded-full mr-4 ${r}`,children:H.jsx(Cn,{type:n,className:"w-6 h-6 text-white"})}),H.jsxs("div",{children:[H.jsx("p",{className:"text-sm text-stone-400",children:t}),H.jsx("p",{className:"text-2xl font-bold text-stone-100",children:e})]})]}),Mme=({todaySummary:t,weeklySummary:e,onLogout:n,members:r,onSelectMember:i,loading:o,onGenerateReport:s})=>{const[u,c]=O.useState(""),f=r.filter(E=>E.name.toLowerCase().includes(u.toLowerCase())||E.instrument.toLowerCase().includes(u.toLowerCase())),h={[st.Present]:"#22c55e",[st.Absent]:"#ef4444",[st.HalfDay]:"#f97316"},y=(E,w)=>{const A=new Blob([E],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),R=URL.createObjectURL(A);I.setAttribute("href",R),I.setAttribute("download",w),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)},_=E=>{const w=E===7?`weekly-attendance-report-${new Date().toISOString().split("T")[0]}.csv`:`monthly-attendance-report-${new Date().toISOString().split("T")[0]}.csv`,A=s(E);y(A,w)};return o?H.jsxs("div",{className:"flex flex-col items-center justify-center h-full pt-20",children:[H.jsx(Cn,{type:"spinner",className:"w-12 h-12 text-orange-500"}),H.jsx("p",{className:"mt-4 text-stone-400",children:"Loading Dashboard..."})]}):H.jsxs("div",{className:"p-4 space-y-6 relative",children:[H.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-stone-800 transition-colors z-10",children:H.jsx(Cn,{type:"logout",className:"w-6 h-6 text-stone-300"})}),H.jsxs("div",{className:"text-center pt-4 pb-2",children:[H.jsx("div",{className:"w-24 h-24 inline-block rounded-full mb-4 overflow-hidden shadow-lg bg-stone-900",children:H.jsx(Cn,{type:"appLogo",className:"w-full h-full object-cover"})}),H.jsx("h1",{className:"text-3xl font-bold text-orange-100",style:{fontFamily:"sans-serif"},children:""}),H.jsx("p",{className:"text-stone-400 mt-1",children:"   "})]}),H.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[H.jsx(tv,{title:"Total Members",value:t.total,iconType:"member",color:"bg-orange-500"}),H.jsx(tv,{title:"Present",value:t.present,iconType:"check",color:"bg-green-500"}),H.jsx(tv,{title:"Absent",value:t.absent,iconType:"close",color:"bg-red-500"}),H.jsx(tv,{title:"Half Day",value:t.onHalfDay,iconType:"halfday",color:"bg-orange-500"})]}),H.jsxs("div",{children:[H.jsx("h3",{className:"text-xl font-bold text-stone-100 mb-4",children:"Weekly Attendance"}),H.jsx("div",{className:"bg-stone-900 p-4 rounded-lg shadow-md h-72",children:H.jsx(Bue,{width:"100%",height:"100%",children:H.jsxs(Rme,{data:e,margin:{top:5,right:0,left:-20,bottom:5},children:[H.jsx(x1,{dataKey:"name",stroke:"#78716c",fontSize:12,tickLine:!1,axisLine:!1}),H.jsx(R1,{stroke:"#78716c",fontSize:12,tickLine:!1,axisLine:!1}),H.jsx(Pue,{contentStyle:{backgroundColor:"#1c1917",border:"1px solid #292524",borderRadius:"0.5rem"},labelStyle:{color:"#f5f5f4"}}),H.jsx(O0,{wrapperStyle:{fontSize:"12px"}}),H.jsx(Gm,{dataKey:"present",stackId:"a",fill:h.present,name:"Present"}),H.jsx(Gm,{dataKey:"absent",stackId:"a",fill:h.absent,name:"Absent"}),H.jsx(Gm,{dataKey:"halfDay",stackId:"a",fill:h.halfday,name:"Half Day",radius:[4,4,0,0]})]})})})]}),H.jsxs("div",{children:[H.jsx("h3",{className:"text-xl font-bold text-stone-100 mb-4",children:"Reports"}),H.jsxs("div",{className:"bg-stone-900 p-4 rounded-lg shadow-md flex flex-col sm:flex-row gap-4",children:[H.jsxs("button",{onClick:()=>_(7),className:"w-full flex items-center justify-center gap-2 bg-stone-800 hover:bg-stone-700 text-stone-100 font-semibold py-3 px-4 rounded-lg transition-colors duration-200",children:[H.jsx(Cn,{type:"download",className:"w-5 h-5"}),"Weekly Report"]}),H.jsxs("button",{onClick:()=>_(30),className:"w-full flex items-center justify-center gap-2 bg-stone-800 hover:bg-stone-700 text-stone-100 font-semibold py-3 px-4 rounded-lg transition-colors duration-200",children:[H.jsx(Cn,{type:"download",className:"w-5 h-5"}),"Monthly Report"]})]})]}),H.jsxs("div",{children:[H.jsxs("h3",{className:"text-xl font-bold text-stone-100 mb-4",children:["All Members (",r.length,")"]}),H.jsxs("div",{className:"relative mb-4",children:[H.jsx("input",{type:"text",placeholder:"Search by name or instrument...",value:u,onChange:E=>c(E.target.value),className:"w-full bg-stone-800 border border-stone-700 text-stone-100 rounded-lg py-3 pl-10 pr-4 focus:ring-orange-500 focus:border-orange-500 transition"}),H.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:H.jsx(Cn,{type:"search",className:"w-5 h-5 text-stone-400"})})]}),H.jsx("div",{className:"space-y-3",children:f.length>0?f.map(E=>H.jsx("div",{onClick:()=>i(E.id),className:"bg-stone-900 p-4 rounded-lg flex items-center justify-between shadow cursor-pointer hover:bg-stone-800 transition-colors",children:H.jsxs("div",{className:"flex items-center",children:[H.jsx("div",{className:"bg-stone-700 p-2 rounded-full mr-4",children:H.jsx(Cn,{type:"member",className:"w-6 h-6 text-stone-300"})}),H.jsxs("div",{children:[H.jsx("p",{className:"font-semibold text-stone-100",children:E.name}),H.jsx("p",{className:"text-sm text-stone-400",children:E.instrument})]})]})},E.id)):H.jsx("div",{className:"text-center py-8 bg-stone-900 rounded-lg",children:r.length===0?H.jsx("p",{className:"text-stone-400",children:"No members found. Add one from the 'Add Member' tab."}):H.jsxs("p",{className:"text-stone-400",children:['No members found matching "',u,'".']})})})]})]})},uL=({status:t,currentStatus:e,onClick:n})=>{const r=t===e,i="p-2 rounded-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900",o={[st.Present]:"bg-green-500 text-white ring-green-300",[st.Absent]:"bg-red-500 text-white ring-red-300",[st.HalfDay]:"bg-orange-500 text-white ring-orange-300"},s="bg-stone-700 text-stone-100 hover:bg-stone-600 ring-transparent",u={[st.Present]:"check",[st.Absent]:"close",[st.HalfDay]:"halfday"},c=`${i} ${r?o[t]:s}`;return H.jsx("button",{onClick:n,className:c,children:H.jsx(Cn,{type:u[t],className:"w-5 h-5"})})},Dme=({members:t,todaysAttendance:e,onSave:n})=>{const r=new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),i=(s,u)=>{e[s]!==u&&n({[s]:u})},o=()=>{const s=t.reduce((u,c)=>(e[c.id]!==st.Present&&(u[c.id]=st.Present),u),{});Object.keys(s).length>0&&n(s)};return H.jsxs("div",{className:"p-4",children:[H.jsxs("div",{className:"mb-6 text-center",children:[H.jsx("p",{className:"text-stone-400 text-sm",children:"Marking attendance for:"}),H.jsx("h2",{className:"text-xl font-semibold text-orange-200",children:r})]}),H.jsx("div",{className:"flex justify-end items-center mb-4",children:H.jsx("button",{onClick:o,className:"bg-orange-600 text-white px-4 py-2 rounded-lg shadow hover:bg-orange-700 transition-colors",children:"Mark All Present"})}),H.jsx("div",{className:"space-y-3",children:t.map(s=>H.jsxs("div",{className:"bg-stone-900 p-4 rounded-lg flex items-center justify-between shadow",children:[H.jsxs("div",{children:[H.jsx("p",{className:"font-semibold text-stone-100",children:s.name}),H.jsx("p",{className:"text-sm text-stone-400",children:s.instrument})]}),H.jsxs("div",{className:"flex items-center space-x-2",children:[H.jsx(uL,{status:st.Present,currentStatus:e[s.id],onClick:()=>i(s.id,st.Present)}),H.jsx(uL,{status:st.HalfDay,currentStatus:e[s.id],onClick:()=>i(s.id,st.HalfDay)})]})]},s.id))})]})},Nme=({onAddMember:t,onDone:e})=>{const[n,r]=O.useState(""),[i,o]=O.useState(""),[s,u]=O.useState(""),[c,f]=O.useState(!1),h=async y=>{if(y.preventDefault(),!n.trim()||!i.trim()){u("Both name and instrument are required.");return}u(""),f(!0);try{await t(n,i),r(""),o(""),e()}catch(_){console.error("Failed to add member:",_),u("An error occurred while adding the member. Please try again.")}finally{f(!1)}};return H.jsx("div",{className:"p-4 h-full flex flex-col items-center justify-center",children:H.jsxs("div",{className:"w-full max-w-md",children:[H.jsxs("div",{className:"text-center mb-8",children:[H.jsx(Cn,{type:"addMemberIllustration",className:"w-24 h-24 text-orange-500 mx-auto"}),H.jsx("h2",{className:"text-2xl font-bold text-stone-100 mt-4",children:"Add a New Member"}),H.jsx("p",{className:"text-stone-400 mt-1",children:"Fill out the details below to add a new team member."})]}),H.jsxs("form",{onSubmit:h,className:"space-y-6",children:[H.jsxs("div",{children:[H.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-stone-300 mb-1",children:"Member Name"}),H.jsx("input",{type:"text",id:"name",value:n,onChange:y=>r(y.target.value),className:"w-full bg-stone-800 border border-stone-700 text-stone-100 rounded-lg p-3 focus:ring-orange-500 focus:border-orange-500 transition",placeholder:"e.g., Priya Sharma",disabled:c})]}),H.jsxs("div",{children:[H.jsx("label",{htmlFor:"instrument",className:"block text-sm font-medium text-stone-300 mb-1",children:"Instrument Name"}),H.jsx("input",{type:"text",id:"instrument",value:i,onChange:y=>o(y.target.value),className:"w-full bg-stone-800 border border-stone-700 text-stone-100 rounded-lg p-3 focus:ring-orange-500 focus:border-orange-500 transition",placeholder:"e.g., Dhol, Tasha",disabled:c})]}),s&&H.jsx("p",{className:"text-red-400 text-sm",children:s}),H.jsx("button",{type:"submit",className:"w-full bg-orange-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-orange-700 transition-colors duration-200 shadow-lg disabled:bg-stone-700 disabled:cursor-not-allowed flex items-center justify-center",disabled:!n||!i||c,children:c?H.jsxs(H.Fragment,{children:[H.jsx(Cn,{type:"spinner",className:"w-5 h-5 mr-2"}),"Adding..."]}):"Add Member"})]})]})})};var mt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},t.getValidEnumValues=i=>{const o=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),s={};for(const u of o)s[u]=i[u];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(const s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(mt||(mt={}));var cL;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(cL||(cL={}));const Ce=mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ka=t=>{switch(typeof t){case"undefined":return Ce.undefined;case"string":return Ce.string;case"number":return Number.isNaN(t)?Ce.nan:Ce.number;case"boolean":return Ce.boolean;case"function":return Ce.function;case"bigint":return Ce.bigint;case"symbol":return Ce.symbol;case"object":return Array.isArray(t)?Ce.array:t===null?Ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ce.promise:typeof Map<"u"&&t instanceof Map?Ce.map:typeof Set<"u"&&t instanceof Set?Ce.set:typeof Date<"u"&&t instanceof Date?Ce.date:Ce.object;default:return Ce.unknown}},ye=mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Bs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let u=r,c=0;for(;c<s.path.length;){const f=s.path[c];c===s.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(n(s))):u[f]=u[f]||{_errors:[]},u=u[f],c++}}};return i(this),r}static assert(e){if(!(e instanceof Bs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const o=i.path[0];n[o]=n[o]||[],n[o].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Bs.create=t=>new Bs(t);const JS=(t,e)=>{let n;switch(t.code){case ye.invalid_type:t.received===Ce.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ye.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,mt.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:n=`Unrecognized key(s) in object: ${mt.joinValues(t.keys,", ")}`;break;case ye.invalid_union:n="Invalid input";break;case ye.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${mt.joinValues(t.options)}`;break;case ye.invalid_enum_value:n=`Invalid enum value. Expected ${mt.joinValues(t.options)}, received '${t.received}'`;break;case ye.invalid_arguments:n="Invalid function arguments";break;case ye.invalid_return_type:n="Invalid function return type";break;case ye.invalid_date:n="Invalid date";break;case ye.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:mt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ye.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ye.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ye.custom:n="Invalid input";break;case ye.invalid_intersection_types:n="Intersection results could not be merged";break;case ye.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ye.not_finite:n="Number must be finite";break;default:n=e.defaultError,mt.assertNever(t)}return{message:n}};let kme=JS;function Ome(){return kme}const Vme=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let u="";const c=r.filter(f=>!!f).slice().reverse();for(const f of c)u=f(s,{data:e,defaultError:u}).message;return{...i,path:o,message:u}};function be(t,e){const n=Ome(),r=Vme({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===JS?void 0:JS].filter(i=>!!i)});t.common.issues.push(r)}class Or{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return We;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const o=await i.key,s=await i.value;r.push({key:o,value:s})}return Or.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return We;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[o.value]=s.value)}return{status:e.value,value:r}}}const We=Object.freeze({status:"aborted"}),Im=t=>({status:"dirty",value:t}),Hi=t=>({status:"valid",value:t}),fL=t=>t.status==="aborted",dL=t=>t.status==="dirty",dd=t=>t.status==="valid",R_=t=>typeof Promise<"u"&&t instanceof Promise;var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Re||(Re={}));class Qo{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hL=(t,e)=>{if(dd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Bs(t.common.issues);return this._error=n,this._error}}};function Xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,u)=>{const{message:c}=t;return s.code==="invalid_enum_value"?{message:c??u.defaultError}:typeof u.data>"u"?{message:c??r??u.defaultError}:s.code!=="invalid_type"?{message:u.defaultError}:{message:c??n??u.defaultError}},description:i}}class at{get description(){return this._def.description}_getType(e){return ka(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ka(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Or,ctx:{common:e.parent.common,data:e.data,parsedType:ka(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(R_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ka(e)},i=this._parseSync({data:e,path:r.path,parent:r});return hL(r,i)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ka(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return dd(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>dd(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ka(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(R_(i)?i:Promise.resolve(i));return hL(r,o)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const s=e(i),u=()=>o.addIssue({code:ye.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(c=>c?!0:(u(),!1)):s?!0:(u(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new pd({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ka.create(this,this._def)}nullable(){return gd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $o.create(this)}promise(){return k_.create(this,this._def)}or(e){return M_.create([this,e],this._def)}and(e){return D_.create(this,e,this._def)}transform(e){return new pd({...Xe(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new eI({...Xe(this._def),innerType:this,defaultValue:n,typeName:He.ZodDefault})}brand(){return new ope({typeName:He.ZodBranded,type:this,...Xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new tI({...Xe(this._def),innerType:this,catchValue:n,typeName:He.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return N1.create(this,e)}readonly(){return nI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Lme=/^c[^\s-]{8,}$/i,Ume=/^[0-9a-z]+$/,Fme=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Bme=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qme=/^[a-z0-9_-]{21}$/i,zme=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,$me=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Gme=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jme="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cA;const Hme=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Kme=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Wme=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yme=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Jme=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qme=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,mz="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Xme=new RegExp(`^${mz}$`);function pz(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Zme(t){return new RegExp(`^${pz(t)}$`)}function epe(t){let e=`${mz}T${pz(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function tpe(t,e){return!!((e==="v4"||!e)&&Hme.test(t)||(e==="v6"||!e)&&Wme.test(t))}function npe(t,e){if(!zme.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function rpe(t,e){return!!((e==="v4"||!e)&&Kme.test(t)||(e==="v6"||!e)&&Yme.test(t))}class Lo extends at{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ce.string){const o=this._getOrReturnCtx(e);return be(o,{code:ye.invalid_type,expected:Ce.string,received:o.parsedType}),We}const r=new Or;let i;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),be(i,{code:ye.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),be(i,{code:ye.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=e.data.length>o.value,u=e.data.length<o.value;(s||u)&&(i=this._getOrReturnCtx(e,i),s?be(i,{code:ye.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&be(i,{code:ye.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")Gme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"email",code:ye.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")cA||(cA=new RegExp(jme,"u")),cA.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"emoji",code:ye.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Bme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"uuid",code:ye.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")qme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"nanoid",code:ye.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Lme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"cuid",code:ye.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Ume.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"cuid2",code:ye.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Fme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"ulid",code:ye.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),be(i,{validation:"url",code:ye.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"regex",code:ye.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),be(i,{code:ye.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),be(i,{code:ye.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),be(i,{code:ye.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?epe(o).test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ye.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Xme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ye.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?Zme(o).test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ye.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?$me.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"duration",code:ye.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?tpe(e.data,o.version)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"ip",code:ye.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?npe(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"jwt",code:ye.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?rpe(e.data,o.version)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"cidr",code:ye.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?Jme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"base64",code:ye.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?Qme.test(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{validation:"base64url",code:ye.invalid_string,message:o.message}),r.dirty()):mt.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ye.invalid_string,...Re.errToObj(r)})}_addCheck(e){return new Lo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Re.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Re.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Re.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Re.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new Lo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Lo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Lo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Lo.create=t=>new Lo({checks:[],typeName:He.ZodString,coerce:t?.coerce??!1,...Xe(t)});function ipe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}class ju extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ce.number){const o=this._getOrReturnCtx(e);return be(o,{code:ye.invalid_type,expected:Ce.number,received:o.parsedType}),We}let r;const i=new Or;for(const o of this._def.checks)o.kind==="int"?mt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ye.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ye.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ye.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?ipe(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),be(r,{code:ye.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ye.not_finite,message:o.message}),i.dirty()):mt.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new ju({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new ju({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&mt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ju.create=t=>new ju({checks:[],typeName:He.ZodNumber,coerce:t?.coerce||!1,...Xe(t)});class Hu extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ce.bigint)return this._getInvalidInput(e);let r;const i=new Or;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ye.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ye.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),be(r,{code:ye.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):mt.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return be(n,{code:ye.invalid_type,expected:Ce.bigint,received:n.parsedType}),We}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new Hu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new Hu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Hu.create=t=>new Hu({checks:[],typeName:He.ZodBigInt,coerce:t?.coerce??!1,...Xe(t)});class P_ extends at{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ce.boolean){const r=this._getOrReturnCtx(e);return be(r,{code:ye.invalid_type,expected:Ce.boolean,received:r.parsedType}),We}return Hi(e.data)}}P_.create=t=>new P_({typeName:He.ZodBoolean,coerce:t?.coerce||!1,...Xe(t)});class hd extends at{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ce.date){const o=this._getOrReturnCtx(e);return be(o,{code:ye.invalid_type,expected:Ce.date,received:o.parsedType}),We}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return be(o,{code:ye.invalid_date}),We}const r=new Or;let i;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),be(i,{code:ye.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),be(i,{code:ye.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):mt.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new hd({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}hd.create=t=>new hd({checks:[],coerce:t?.coerce||!1,typeName:He.ZodDate,...Xe(t)});class mL extends at{_parse(e){if(this._getType(e)!==Ce.symbol){const r=this._getOrReturnCtx(e);return be(r,{code:ye.invalid_type,expected:Ce.symbol,received:r.parsedType}),We}return Hi(e.data)}}mL.create=t=>new mL({typeName:He.ZodSymbol,...Xe(t)});class pL extends at{_parse(e){if(this._getType(e)!==Ce.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ye.invalid_type,expected:Ce.undefined,received:r.parsedType}),We}return Hi(e.data)}}pL.create=t=>new pL({typeName:He.ZodUndefined,...Xe(t)});class gL extends at{_parse(e){if(this._getType(e)!==Ce.null){const r=this._getOrReturnCtx(e);return be(r,{code:ye.invalid_type,expected:Ce.null,received:r.parsedType}),We}return Hi(e.data)}}gL.create=t=>new gL({typeName:He.ZodNull,...Xe(t)});class yL extends at{constructor(){super(...arguments),this._any=!0}_parse(e){return Hi(e.data)}}yL.create=t=>new yL({typeName:He.ZodAny,...Xe(t)});class QS extends at{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hi(e.data)}}QS.create=t=>new QS({typeName:He.ZodUnknown,...Xe(t)});class al extends at{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ye.invalid_type,expected:Ce.never,received:n.parsedType}),We}}al.create=t=>new al({typeName:He.ZodNever,...Xe(t)});class vL extends at{_parse(e){if(this._getType(e)!==Ce.undefined){const r=this._getOrReturnCtx(e);return be(r,{code:ye.invalid_type,expected:Ce.void,received:r.parsedType}),We}return Hi(e.data)}}vL.create=t=>new vL({typeName:He.ZodVoid,...Xe(t)});class $o extends at{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ce.array)return be(n,{code:ye.invalid_type,expected:Ce.array,received:n.parsedType}),We;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,u=n.data.length<i.exactLength.value;(s||u)&&(be(n,{code:s?ye.too_big:ye.too_small,minimum:u?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(be(n,{code:ye.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(be(n,{code:ye.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,u)=>i.type._parseAsync(new Qo(n,s,n.path,u)))).then(s=>Or.mergeArray(r,s));const o=[...n.data].map((s,u)=>i.type._parseSync(new Qo(n,s,n.path,u)));return Or.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new $o({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new $o({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new $o({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}$o.create=(t,e)=>new $o({type:t,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...Xe(e)});function _f(t){if(t instanceof Sn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ka.create(_f(r))}return new Sn({...t._def,shape:()=>e})}else return t instanceof $o?new $o({...t._def,type:_f(t.element)}):t instanceof Ka?Ka.create(_f(t.unwrap())):t instanceof gd?gd.create(_f(t.unwrap())):t instanceof Ku?Ku.create(t.items.map(e=>_f(e))):t}class Sn extends at{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=mt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ce.object){const f=this._getOrReturnCtx(e);return be(f,{code:ye.invalid_type,expected:Ce.object,received:f.parsedType}),We}const{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),u=[];if(!(this._def.catchall instanceof al&&this._def.unknownKeys==="strip"))for(const f in i.data)s.includes(f)||u.push(f);const c=[];for(const f of s){const h=o[f],y=i.data[f];c.push({key:{status:"valid",value:f},value:h._parse(new Qo(i,y,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof al){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of u)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(f==="strict")u.length>0&&(be(i,{code:ye.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of u){const y=i.data[h];c.push({key:{status:"valid",value:h},value:f._parse(new Qo(i,y,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of c){const y=await h.key,_=await h.value;f.push({key:y,value:_,alwaysSet:h.alwaysSet})}return f}).then(f=>Or.mergeObjectSync(r,f)):Or.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new Sn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:Re.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Sn({...this._def,unknownKeys:"strip"})}passthrough(){return new Sn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Sn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Sn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Sn({...this._def,catchall:e})}pick(e){const n={};for(const r of mt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Sn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of mt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Sn({...this._def,shape:()=>n})}deepPartial(){return _f(this)}partial(e){const n={};for(const r of mt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Sn({...this._def,shape:()=>n})}required(e){const n={};for(const r of mt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Ka;)o=o._def.innerType;n[r]=o}return new Sn({...this._def,shape:()=>n})}keyof(){return gz(mt.objectKeys(this.shape))}}Sn.create=(t,e)=>new Sn({shape:()=>t,unknownKeys:"strip",catchall:al.create(),typeName:He.ZodObject,...Xe(e)});Sn.strictCreate=(t,e)=>new Sn({shape:()=>t,unknownKeys:"strict",catchall:al.create(),typeName:He.ZodObject,...Xe(e)});Sn.lazycreate=(t,e)=>new Sn({shape:t,unknownKeys:"strip",catchall:al.create(),typeName:He.ZodObject,...Xe(e)});class M_ extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(const u of o)if(u.result.status==="valid")return u.result;for(const u of o)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const s=o.map(u=>new Bs(u.ctx.common.issues));return be(n,{code:ye.invalid_union,unionErrors:s}),We}if(n.common.async)return Promise.all(r.map(async o=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const c of r){const f={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!o&&(o={result:h,ctx:f}),f.common.issues.length&&s.push(f.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const u=s.map(c=>new Bs(c));return be(n,{code:ye.invalid_union,unionErrors:u}),We}}get options(){return this._def.options}}M_.create=(t,e)=>new M_({options:t,typeName:He.ZodUnion,...Xe(e)});function XS(t,e){const n=ka(t),r=ka(e);if(t===e)return{valid:!0,data:t};if(n===Ce.object&&r===Ce.object){const i=mt.objectKeys(e),o=mt.objectKeys(t).filter(u=>i.indexOf(u)!==-1),s={...t,...e};for(const u of o){const c=XS(t[u],e[u]);if(!c.valid)return{valid:!1};s[u]=c.data}return{valid:!0,data:s}}else if(n===Ce.array&&r===Ce.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let o=0;o<t.length;o++){const s=t[o],u=e[o],c=XS(s,u);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===Ce.date&&r===Ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class D_ extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(o,s)=>{if(fL(o)||fL(s))return We;const u=XS(o.value,s.value);return u.valid?((dL(o)||dL(s))&&n.dirty(),{status:n.value,value:u.data}):(be(r,{code:ye.invalid_intersection_types}),We)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}D_.create=(t,e,n)=>new D_({left:t,right:e,typeName:He.ZodIntersection,...Xe(n)});class Ku extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.array)return be(r,{code:ye.invalid_type,expected:Ce.array,received:r.parsedType}),We;if(r.data.length<this._def.items.length)return be(r,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&r.data.length>this._def.items.length&&(be(r,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((s,u)=>{const c=this._def.items[u]||this._def.rest;return c?c._parse(new Qo(r,s,r.path,u)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>Or.mergeArray(n,s)):Or.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Ku({...this._def,rest:e})}}Ku.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ku({items:t,typeName:He.ZodTuple,rest:null,...Xe(e)})};class N_ extends at{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.object)return be(r,{code:ye.invalid_type,expected:Ce.object,received:r.parsedType}),We;const i=[],o=this._def.keyType,s=this._def.valueType;for(const u in r.data)i.push({key:o._parse(new Qo(r,u,r.path,u)),value:s._parse(new Qo(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Or.mergeObjectAsync(n,i):Or.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof at?new N_({keyType:e,valueType:n,typeName:He.ZodRecord,...Xe(r)}):new N_({keyType:Lo.create(),valueType:e,typeName:He.ZodRecord,...Xe(n)})}}class _L extends at{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.map)return be(r,{code:ye.invalid_type,expected:Ce.map,received:r.parsedType}),We;const i=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([u,c],f)=>({key:i._parse(new Qo(r,u,r.path,[f,"key"])),value:o._parse(new Qo(r,c,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const c of s){const f=await c.key,h=await c.value;if(f.status==="aborted"||h.status==="aborted")return We;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),u.set(f.value,h.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const c of s){const f=c.key,h=c.value;if(f.status==="aborted"||h.status==="aborted")return We;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),u.set(f.value,h.value)}return{status:n.value,value:u}}}}_L.create=(t,e,n)=>new _L({valueType:e,keyType:t,typeName:He.ZodMap,...Xe(n)});class xp extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ce.set)return be(r,{code:ye.invalid_type,expected:Ce.set,received:r.parsedType}),We;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(be(r,{code:ye.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(be(r,{code:ye.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function s(c){const f=new Set;for(const h of c){if(h.status==="aborted")return We;h.status==="dirty"&&n.dirty(),f.add(h.value)}return{status:n.value,value:f}}const u=[...r.data.values()].map((c,f)=>o._parse(new Qo(r,c,r.path,f)));return r.common.async?Promise.all(u).then(c=>s(c)):s(u)}min(e,n){return new xp({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new xp({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}xp.create=(t,e)=>new xp({valueType:t,minSize:null,maxSize:null,typeName:He.ZodSet,...Xe(e)});class ZS extends at{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ZS.create=(t,e)=>new ZS({getter:t,typeName:He.ZodLazy,...Xe(e)});class TL extends at{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ye.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:e.data}}get value(){return this._def.value}}TL.create=(t,e)=>new TL({value:t,typeName:He.ZodLiteral,...Xe(e)});function gz(t,e){return new md({values:t,typeName:He.ZodEnum,...Xe(e)})}class md extends at{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{expected:mt.joinValues(r),received:n.parsedType,code:ye.invalid_type}),We}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return be(n,{received:n.data,code:ye.invalid_enum_value,options:r}),We}return Hi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return md.create(e,{...this._def,...n})}exclude(e,n=this._def){return md.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}md.create=gz;class EL extends at{_parse(e){const n=mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ce.string&&r.parsedType!==Ce.number){const i=mt.objectValues(n);return be(r,{expected:mt.joinValues(i),received:r.parsedType,code:ye.invalid_type}),We}if(this._cache||(this._cache=new Set(mt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=mt.objectValues(n);return be(r,{received:r.data,code:ye.invalid_enum_value,options:i}),We}return Hi(e.data)}get enum(){return this._def.values}}EL.create=(t,e)=>new EL({values:t,typeName:He.ZodNativeEnum,...Xe(e)});class k_ extends at{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ce.promise&&n.common.async===!1)return be(n,{code:ye.invalid_type,expected:Ce.promise,received:n.parsedType}),We;const r=n.parsedType===Ce.promise?n.data:Promise.resolve(n.data);return Hi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}k_.create=(t,e)=>new k_({type:t,typeName:He.ZodPromise,...Xe(e)});class pd extends at{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{be(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const s=i.transform(r.data,o);if(r.common.async)return Promise.resolve(s).then(async u=>{if(n.value==="aborted")return We;const c=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return c.status==="aborted"?We:c.status==="dirty"||n.value==="dirty"?Im(c.value):c});{if(n.value==="aborted")return We;const u=this._def.schema._parseSync({data:s,path:r.path,parent:r});return u.status==="aborted"?We:u.status==="dirty"||n.value==="dirty"?Im(u.value):u}}if(i.type==="refinement"){const s=u=>{const c=i.refinement(u,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?We:(u.status==="dirty"&&n.dirty(),s(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?We:(u.status==="dirty"&&n.dirty(),s(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!dd(s))return We;const u=i.transform(s.value,o);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>dd(s)?Promise.resolve(i.transform(s.value,o)).then(u=>({status:n.value,value:u})):We);mt.assertNever(i)}}pd.create=(t,e,n)=>new pd({schema:t,typeName:He.ZodEffects,effect:e,...Xe(n)});pd.createWithPreprocess=(t,e,n)=>new pd({schema:e,effect:{type:"preprocess",transform:t},typeName:He.ZodEffects,...Xe(n)});class Ka extends at{_parse(e){return this._getType(e)===Ce.undefined?Hi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ka.create=(t,e)=>new Ka({innerType:t,typeName:He.ZodOptional,...Xe(e)});class gd extends at{_parse(e){return this._getType(e)===Ce.null?Hi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gd.create=(t,e)=>new gd({innerType:t,typeName:He.ZodNullable,...Xe(e)});class eI extends at{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ce.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}eI.create=(t,e)=>new eI({innerType:t,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xe(e)});class tI extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return R_(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Bs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Bs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}tI.create=(t,e)=>new tI({innerType:t,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xe(e)});class bL extends at{_parse(e){if(this._getType(e)!==Ce.nan){const r=this._getOrReturnCtx(e);return be(r,{code:ye.invalid_type,expected:Ce.nan,received:r.parsedType}),We}return{status:"valid",value:e.data}}}bL.create=t=>new bL({typeName:He.ZodNaN,...Xe(t)});class ope extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class N1 extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?We:o.status==="dirty"?(n.dirty(),Im(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?We:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new N1({in:e,out:n,typeName:He.ZodPipeline})}}class nI extends at{_parse(e){const n=this._def.innerType._parse(e),r=i=>(dd(i)&&(i.value=Object.freeze(i.value)),i);return R_(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}nI.create=(t,e)=>new nI({innerType:t,typeName:He.ZodReadonly,...Xe(e)});var He;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(He||(He={}));const tu=Lo.create,wL=ju.create;Hu.create;const spe=P_.create;hd.create;const AL=QS.create;al.create;const Cm=$o.create,ape=Sn.create,lpe=M_.create;D_.create;Ku.create;const upe=N_.create,cpe=ZS.create,fpe=md.create;k_.create;Ka.create;gd.create;const hf={string:t=>Lo.create({...t,coerce:!0}),number:t=>ju.create({...t,coerce:!0}),boolean:t=>P_.create({...t,coerce:!0}),bigint:t=>Hu.create({...t,coerce:!0}),date:t=>hd.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dpe,hpe;function mpe(){return{geminiUrl:dpe,vertexUrl:hpe}}function ppe(t,e,n){var r,i,o;if(!(!((r=t.httpOptions)===null||r===void 0)&&r.baseUrl)){const s=mpe();return t.vertexai?(i=s.vertexUrl)!==null&&i!==void 0?i:e:(o=s.geminiUrl)!==null&&o!==void 0?o:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ac{}function Ne(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function p(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let f=0;f<c.length;f++){const h=c[f];p(h,e.slice(o+1),n[f])}else for(const f of c)p(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];p(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function m(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>m(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SL;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(SL||(SL={}));var IL;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(IL||(IL={}));var Uo;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Uo||(Uo={}));var CL;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(CL||(CL={}));var xL;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(xL||(xL={}));var RL;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(RL||(RL={}));var PL;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(PL||(PL={}));var ML;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ML||(ML={}));var DL;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(DL||(DL={}));var NL;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(NL||(NL={}));var kL;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(kL||(kL={}));var OL;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(OL||(OL={}));var VL;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(VL||(VL={}));var LL;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(LL||(LL={}));var UL;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(UL||(UL={}));var FL;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(FL||(FL={}));var O_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(O_||(O_={}));var BL;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(BL||(BL={}));var rI;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rI||(rI={}));var qL;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qL||(qL={}));var zL;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(zL||(zL={}));var $L;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})($L||($L={}));var GL;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(GL||(GL={}));var jL;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(jL||(jL={}));var HL;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HL||(HL={}));var KL;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(KL||(KL={}));var WL;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(WL||(WL={}));var YL;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(YL||(YL={}));var JL;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(JL||(JL={}));var QL;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(QL||(QL={}));var XL;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(XL||(XL={}));var ZL;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ZL||(ZL={}));var eU;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(eU||(eU={}));var tU;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(tU||(tU={}));var nU;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(nU||(nU={}));var rU;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(rU||(rU={}));var iU;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(iU||(iU={}));var oU;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(oU||(oU={}));var sU;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sU||(sU={}));var aU;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(aU||(aU={}));var lU;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lU||(lU={}));var wf;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(wf||(wf={}));class iI{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class gm{get text(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const y=[];for(const _ of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[E,w]of Object.entries(_))E!=="text"&&E!=="thought"&&(w!==null||w!==void 0)&&y.push(E);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;h=!0,f+=_.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const y of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[_,E]of Object.entries(y))_!=="inlineData"&&(E!==null||E!==void 0)&&h.push(_);y.inlineData&&typeof y.inlineData.data=="string"&&(f+=atob(y.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if(f?.length!==0)return f}get executableCode(){var e,n,r,i,o,s,u,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(h?.length!==0)return(f=h?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,u,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(h?.length!==0)return(f=h?.[0])===null||f===void 0?void 0:f.output}}class uU{}class cU{}class gpe{}class ype{}class fU{}class dU{}class hU{}class vpe{}class mU{}class pU{}class gU{}class _pe{}class Tpe{}class Epe{}class yU{}class bpe{get text(){var e,n,r;let i="",o=!1;const s=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(u))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class wpe{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function It(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yz(t,e){const n=It(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function vz(t){return Array.isArray(t)?t.map(e=>V_(e)):[V_(t)]}function V_(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function _z(t){const e=V_(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tz(t){const e=V_(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vU(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Ez(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>vU(e)):[vU(t)]}function oI(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function _U(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function TU(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Er(t){if(t==null)throw new Error("ContentUnion is required");return oI(t)?t:{role:"user",parts:Ez(t)}}function bz(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Er(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Er(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Er(n)):[Er(e)]}function Fi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(_U(t)||TU(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Er(t)]}const e=[],n=[],r=oI(t[0]);for(const i of t){const o=oI(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(_U(i)||TU(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Ez(n)}),e}const Ape=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),EU=fpe(["string","number","integer","object","array","boolean","null"]),Spe=lpe([EU,Cm(EU)]);function Ipe(t=!0){const e=cpe(()=>{const n=ape({type:Spe.optional(),format:tu().optional(),title:tu().optional(),description:tu().optional(),default:AL().optional(),items:e.optional(),minItems:hf.string().optional(),maxItems:hf.string().optional(),enum:Cm(AL()).optional(),properties:upe(tu(),e).optional(),required:Cm(tu()).optional(),minProperties:hf.string().optional(),maxProperties:hf.string().optional(),propertyOrdering:Cm(tu()).optional(),minimum:wL().optional(),maximum:wL().optional(),minLength:hf.string().optional(),maxLength:hf.string().optional(),pattern:tu().optional(),anyOf:Cm(e).optional(),additionalProperties:spe().optional()});return t?n.strict():n});return e}function Cpe(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Uo).includes(n[0].toUpperCase())?n[0].toUpperCase():Uo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Uo).includes(r.toUpperCase())?r.toUpperCase():Uo.TYPE_UNSPECIFIED})}}function Df(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Cpe(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Uo).includes(u.toUpperCase())?u.toUpperCase():Uo.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Df(u);else if(r.includes(s)){const c=[];for(const f of u){if(f.type=="null"){e.nullable=!0;continue}c.push(Df(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,h]of Object.entries(u))c[f]=Df(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function Rp(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=Ipe().parse(t);return Df(e)}else return Df(t)}function k1(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function O1(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Bd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=Rp(e.parameters)),e.response&&(e.response=Rp(e.response));return t}function qd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function xpe(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Js(t,e){if(typeof e!="string")throw new Error("name must be a string");return xpe(t,e,"cachedContents")}function wz(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Qs(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Rpe(t){return t!=null&&typeof t=="object"&&"name"in t}function Ppe(t){return t!=null&&typeof t=="object"&&"video"in t}function Mpe(t){return t!=null&&typeof t=="object"&&"uri"in t}function Az(t){var e;let n;if(Rpe(t)&&(n=t.name),!(Mpe(t)&&(n=t.uri,n===void 0))&&!(Ppe(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Sz(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Iz(t){for(const e of["models","tunedModels","publisherModels"])if(Dpe(t,e))return t[e];return[]}function Dpe(t,e){return t!==null&&typeof t=="object"&&e in t}function Npe(t,e={}){const n=t,r={name:n.name,description:n.description,parameters:Df(tT(n.inputSchema))};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function kpe(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=Npe(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Ope(t){const e=[];for(const n of t)e.push(tT(n));return e}function Vpe(t){const e={};for(const[n,r]of Object.entries(t)){const i=r;e[n]=tT(i)}return e}function tT(t){const e=new Set(["items"]),n=new Set(["anyOf"]),r=new Set(["properties"]),i={};for(const[o,s]of Object.entries(t))if(e.has(o))i[o]=tT(s);else if(n.has(o))i[o]=Ope(s);else if(r.has(o))i[o]=Vpe(s);else if(o==="type"){const u=s.toUpperCase();i[o]=Object.values(Uo).includes(u)?u:Uo.TYPE_UNSPECIFIED}else Ape.has(o)&&(i[o]=s);return i}function Cz(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Lpe(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function xz(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Upe(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function Fpe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Bpe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qpe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],Upe(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],Fpe(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],Bpe(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function Rz(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qpe(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function zpe(t){const e={},n=m(t,["anyOf"]);n!=null&&p(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&p(e,["default"],r);const i=m(t,["description"]);i!=null&&p(e,["description"],i);const o=m(t,["enum"]);o!=null&&p(e,["enum"],o);const s=m(t,["example"]);s!=null&&p(e,["example"],s);const u=m(t,["format"]);u!=null&&p(e,["format"],u);const c=m(t,["items"]);c!=null&&p(e,["items"],c);const f=m(t,["maxItems"]);f!=null&&p(e,["maxItems"],f);const h=m(t,["maxLength"]);h!=null&&p(e,["maxLength"],h);const y=m(t,["maxProperties"]);y!=null&&p(e,["maxProperties"],y);const _=m(t,["maximum"]);_!=null&&p(e,["maximum"],_);const E=m(t,["minItems"]);E!=null&&p(e,["minItems"],E);const w=m(t,["minLength"]);w!=null&&p(e,["minLength"],w);const A=m(t,["minProperties"]);A!=null&&p(e,["minProperties"],A);const I=m(t,["minimum"]);I!=null&&p(e,["minimum"],I);const R=m(t,["nullable"]);R!=null&&p(e,["nullable"],R);const M=m(t,["pattern"]);M!=null&&p(e,["pattern"],M);const P=m(t,["properties"]);P!=null&&p(e,["properties"],P);const F=m(t,["propertyOrdering"]);F!=null&&p(e,["propertyOrdering"],F);const U=m(t,["required"]);U!=null&&p(e,["required"],U);const $=m(t,["title"]);$!=null&&p(e,["title"],$);const D=m(t,["type"]);return D!=null&&p(e,["type"],D),e}function $pe(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&p(e,["category"],n);const r=m(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function Gpe(t){const e={},n=m(t,["behavior"]);n!=null&&p(e,["behavior"],n);const r=m(t,["description"]);r!=null&&p(e,["description"],r);const i=m(t,["name"]);i!=null&&p(e,["name"],i);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const c=m(t,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function jpe(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function Hpe(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],jpe(n)),e}function Kpe(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Wpe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],Kpe(n)),e}function Ype(){return{}}function Jpe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Gpe(f))),p(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&p(e,["googleSearch"],Hpe(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&p(e,["googleSearchRetrieval"],Wpe(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&p(e,["urlContext"],Ype());const s=m(t,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const u=m(t,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function Qpe(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function Xpe(t){const e={},n=m(t,["latitude"]);n!=null&&p(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function Zpe(t){const e={},n=m(t,["latLng"]);n!=null&&p(e,["latLng"],Xpe(n));const r=m(t,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function ege(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],Qpe(n));const r=m(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],Zpe(r)),e}function tge(t){const e={},n=m(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function Pz(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],tge(n)),e}function nge(t){const e={},n=m(t,["speaker"]);n!=null&&p(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],Pz(r)),e}function rge(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>nge(i))),p(e,["speakerVoiceConfigs"],r)}return e}function ige(t){const e={},n=m(t,["voiceConfig"]);n!=null&&p(e,["voiceConfig"],Pz(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],rge(r));const i=m(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function oge(t){const e={},n=m(t,["includeThoughts"]);n!=null&&p(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&p(e,["thinkingBudget"],r),e}function sge(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],Rz(Er(i)));const o=m(e,["temperature"]);o!=null&&p(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&p(r,["topP"],s);const u=m(e,["topK"]);u!=null&&p(r,["topK"],u);const c=m(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const f=m(e,["maxOutputTokens"]);f!=null&&p(r,["maxOutputTokens"],f);const h=m(e,["stopSequences"]);h!=null&&p(r,["stopSequences"],h);const y=m(e,["responseLogprobs"]);y!=null&&p(r,["responseLogprobs"],y);const _=m(e,["logprobs"]);_!=null&&p(r,["logprobs"],_);const E=m(e,["presencePenalty"]);E!=null&&p(r,["presencePenalty"],E);const w=m(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const A=m(e,["seed"]);A!=null&&p(r,["seed"],A);const I=m(e,["responseMimeType"]);I!=null&&p(r,["responseMimeType"],I);const R=m(e,["responseSchema"]);R!=null&&p(r,["responseSchema"],zpe(Rp(R)));const M=m(e,["responseJsonSchema"]);if(M!=null&&p(r,["responseJsonSchema"],M),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=m(e,["safetySettings"]);if(n!==void 0&&P!=null){let B=P;Array.isArray(B)&&(B=B.map(G=>$pe(G))),p(n,["safetySettings"],B)}const F=m(e,["tools"]);if(n!==void 0&&F!=null){let B=qd(F);Array.isArray(B)&&(B=B.map(G=>Jpe(Bd(G)))),p(n,["tools"],B)}const U=m(e,["toolConfig"]);if(n!==void 0&&U!=null&&p(n,["toolConfig"],ege(U)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=m(e,["cachedContent"]);n!==void 0&&$!=null&&p(n,["cachedContent"],Js(t,$));const D=m(e,["responseModalities"]);D!=null&&p(r,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&p(r,["mediaResolution"],N);const V=m(e,["speechConfig"]);if(V!=null&&p(r,["speechConfig"],ige(k1(V))),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=m(e,["thinkingConfig"]);return q!=null&&p(r,["thinkingConfig"],oge(q)),r}function age(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["request","model"],It(t,r));const i=m(e,["contents"]);if(i!=null){let s=Fi(i);Array.isArray(s)&&(s=s.map(u=>Rz(u))),p(n,["request","contents"],s)}const o=m(e,["config"]);return o!=null&&p(n,["request","generationConfig"],sge(t,o,n)),n}function lge(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=m(e,["fileName"]);r!=null&&p(n,["fileName"],r);const i=m(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>age(t,s))),p(n,["requests","requests"],o)}return n}function uge(t,e){const n={},r=m(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function cge(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["src"]);i!=null&&p(n,["batch","inputConfig"],lge(t,Cz(t,i)));const o=m(e,["config"]);return o!=null&&p(n,["config"],uge(o,n)),n}function fge(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],zd(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function dge(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],zd(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function hge(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);if(e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function mge(t){const e={},n=m(t,["config"]);return n!=null&&p(e,["config"],hge(n,e)),e}function pge(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],zd(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function gge(t){const e={},n=m(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=m(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&p(e,["bigquerySource","inputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yge(t){const e={},n=m(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=m(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&p(e,["bigqueryDestination","outputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function vge(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=m(t,["dest"]);return e!==void 0&&i!=null&&p(e,["outputConfig"],yge(Lpe(i))),n}function _ge(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["model"],It(t,r));const i=m(e,["src"]);i!=null&&p(n,["inputConfig"],gge(Cz(t,i)));const o=m(e,["config"]);return o!=null&&p(n,["config"],vge(o,n)),n}function Tge(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],zd(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function Ege(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],zd(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function bge(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function wge(t){const e={},n=m(t,["config"]);return n!=null&&p(e,["config"],bge(n,e)),e}function Age(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],zd(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function Mz(){return{}}function Sge(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function Ige(t){const e={},n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Cge(t){const e={},n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function xge(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],Sge(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],Ige(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],Cge(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function Rge(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xge(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function Pge(t){const e={},n=m(t,["citationSources"]);return n!=null&&p(e,["citations"],n),e}function Mge(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&p(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function Dge(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Mge(i))),p(e,["urlMetadata"],r)}return e}function Nge(t){const e={},n=m(t,["content"]);n!=null&&p(e,["content"],Rge(n));const r=m(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],Pge(r));const i=m(t,["tokenCount"]);i!=null&&p(e,["tokenCount"],i);const o=m(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&p(e,["urlContextMetadata"],Dge(s));const u=m(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const c=m(t,["groundingMetadata"]);c!=null&&p(e,["groundingMetadata"],c);const f=m(t,["index"]);f!=null&&p(e,["index"],f);const h=m(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const y=m(t,["safetyRatings"]);return y!=null&&p(e,["safetyRatings"],y),e}function kge(t){const e={},n=m(t,["candidates"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>Nge(u))),p(e,["candidates"],s)}const r=m(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const i=m(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=m(t,["usageMetadata"]);return o!=null&&p(e,["usageMetadata"],o),e}function Oge(t){const e={},n=m(t,["response"]);return n!=null&&p(e,["response"],kge(n)),m(t,["error"])!=null&&p(e,["error"],Mz()),e}function Vge(t){const e={},n=m(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=m(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Oge(o))),p(e,["inlinedResponses"],i)}return e}function sI(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["metadata","state"]);i!=null&&p(e,["state"],xz(i));const o=m(t,["metadata","createTime"]);o!=null&&p(e,["createTime"],o);const s=m(t,["metadata","endTime"]);s!=null&&p(e,["endTime"],s);const u=m(t,["metadata","updateTime"]);u!=null&&p(e,["updateTime"],u);const c=m(t,["metadata","model"]);c!=null&&p(e,["model"],c);const f=m(t,["metadata","output"]);return f!=null&&p(e,["dest"],Vge(f)),e}function Lge(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>sI(o))),p(e,["batchJobs"],i)}return e}function Uge(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["done"]);return r!=null&&p(e,["done"],r),m(t,["error"])!=null&&p(e,["error"],Mz()),e}function Dz(t){const e={},n=m(t,["details"]);n!=null&&p(e,["details"],n);const r=m(t,["code"]);r!=null&&p(e,["code"],r);const i=m(t,["message"]);return i!=null&&p(e,["message"],i),e}function Fge(t){const e={},n=m(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=m(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const i=m(t,["bigquerySource","inputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function Bge(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=m(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const i=m(t,["bigqueryDestination","outputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function aI(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["state"]);i!=null&&p(e,["state"],xz(i));const o=m(t,["error"]);o!=null&&p(e,["error"],Dz(o));const s=m(t,["createTime"]);s!=null&&p(e,["createTime"],s);const u=m(t,["startTime"]);u!=null&&p(e,["startTime"],u);const c=m(t,["endTime"]);c!=null&&p(e,["endTime"],c);const f=m(t,["updateTime"]);f!=null&&p(e,["updateTime"],f);const h=m(t,["model"]);h!=null&&p(e,["model"],h);const y=m(t,["inputConfig"]);y!=null&&p(e,["src"],Fge(y));const _=m(t,["outputConfig"]);return _!=null&&p(e,["dest"],Bge(_)),e}function qge(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>aI(o))),p(e,["batchJobs"],i)}return e}function zge(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["done"]);r!=null&&p(e,["done"],r);const i=m(t,["error"]);return i!=null&&p(e,["error"],Dz(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wu;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Wu||(Wu={}));class ug{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let s={config:{}};r?typeof r=="object"?s=Object.assign({},r):s=r:s={config:{}},s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $ge extends ac{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const i=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${i}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new ug(Wu.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=_ge(this.apiClient,e);return u=Ne("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>aI(h))}else{const f=cge(this.apiClient,e);return u=Ne("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>sI(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Tge(this.apiClient,e);return u=Ne("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>aI(h))}else{const f=fge(this.apiClient,e);return u=Ne("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>sI(h))}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=Ege(this.apiClient,e);s=Ne("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=dge(this.apiClient,e);s=Ne("batches/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=wge(e);return u=Ne("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=qge(h),_=new yU;return Object.assign(_,y),_})}else{const f=mge(e);return u=Ne("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=Lge(h),_=new yU;return Object.assign(_,y),_})}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Age(this.apiClient,e);return u=Ne("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>zge(h))}else{const f=pge(this.apiClient,e);return u=Ne("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Uge(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gge(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function jge(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Hge(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Kge(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],Gge(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],jge(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],Hge(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function bU(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Kge(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function Wge(t){const e={},n=m(t,["behavior"]);n!=null&&p(e,["behavior"],n);const r=m(t,["description"]);r!=null&&p(e,["description"],r);const i=m(t,["name"]);i!=null&&p(e,["name"],i);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const c=m(t,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function Yge(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function Jge(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],Yge(n)),e}function Qge(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Xge(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],Qge(n)),e}function Zge(){return{}}function eye(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Wge(f))),p(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&p(e,["googleSearch"],Jge(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&p(e,["googleSearchRetrieval"],Xge(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&p(e,["urlContext"],Zge());const s=m(t,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const u=m(t,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function tye(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function nye(t){const e={},n=m(t,["latitude"]);n!=null&&p(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function rye(t){const e={},n=m(t,["latLng"]);n!=null&&p(e,["latLng"],nye(n));const r=m(t,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function iye(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],tye(n));const r=m(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],rye(r)),e}function oye(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const s=m(t,["contents"]);if(e!==void 0&&s!=null){let h=Fi(s);Array.isArray(h)&&(h=h.map(y=>bU(y))),p(e,["contents"],h)}const u=m(t,["systemInstruction"]);e!==void 0&&u!=null&&p(e,["systemInstruction"],bU(Er(u)));const c=m(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(y=>eye(y))),p(e,["tools"],h)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&p(e,["toolConfig"],iye(f)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function sye(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["model"],yz(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],oye(i,n)),n}function aye(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],Js(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function lye(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],Js(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function uye(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function cye(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],Js(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],uye(i,n)),n}function fye(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function dye(t){const e={},n=m(t,["config"]);return n!=null&&p(e,["config"],fye(n,e)),e}function hye(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function mye(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["data"]);r!=null&&p(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function pye(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&p(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function gye(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],hye(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],mye(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],pye(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function wU(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gye(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function yye(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&p(e,["description"],n);const r=m(t,["name"]);r!=null&&p(e,["name"],r);const i=m(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&p(e,["response"],s);const u=m(t,["responseJsonSchema"]);return u!=null&&p(e,["responseJsonSchema"],u),e}function vye(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function _ye(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],vye(n)),e}function Tye(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Eye(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],Tye(n)),e}function bye(){return{}}function wye(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&p(e,["apiKeyString"],n),e}function Aye(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&p(e,["apiKeyConfig"],wye(n));const r=m(t,["authType"]);r!=null&&p(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&p(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&p(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&p(e,["oauthConfig"],s);const u=m(t,["oidcConfig"]);return u!=null&&p(e,["oidcConfig"],u),e}function Sye(t){const e={},n=m(t,["authConfig"]);return n!=null&&p(e,["authConfig"],Aye(n)),e}function Iye(){return{}}function Cye(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>yye(_))),p(e,["functionDeclarations"],y)}const r=m(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&p(e,["googleSearch"],_ye(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],Eye(o)),m(t,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],bye());const u=m(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],Sye(u)),m(t,["urlContext"])!=null&&p(e,["urlContext"],Iye());const f=m(t,["codeExecution"]);f!=null&&p(e,["codeExecution"],f);const h=m(t,["computerUse"]);return h!=null&&p(e,["computerUse"],h),e}function xye(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function Rye(t){const e={},n=m(t,["latitude"]);n!=null&&p(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function Pye(t){const e={},n=m(t,["latLng"]);n!=null&&p(e,["latLng"],Rye(n));const r=m(t,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function Mye(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],xye(n));const r=m(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],Pye(r)),e}function Dye(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const o=m(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const s=m(t,["contents"]);if(e!==void 0&&s!=null){let y=Fi(s);Array.isArray(y)&&(y=y.map(_=>wU(_))),p(e,["contents"],y)}const u=m(t,["systemInstruction"]);e!==void 0&&u!=null&&p(e,["systemInstruction"],wU(Er(u)));const c=m(t,["tools"]);if(e!==void 0&&c!=null){let y=c;Array.isArray(y)&&(y=y.map(_=>Cye(_))),p(e,["tools"],y)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&p(e,["toolConfig"],Mye(f));const h=m(t,["kmsKeyName"]);return e!==void 0&&h!=null&&p(e,["encryption_spec","kmsKeyName"],h),n}function Nye(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["model"],yz(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],Dye(i,n)),n}function kye(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],Js(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function Oye(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],Js(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function Vye(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function Lye(t,e){const n={},r=m(e,["name"]);r!=null&&p(n,["_url","name"],Js(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],Vye(i,n)),n}function Uye(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function Fye(t){const e={},n=m(t,["config"]);return n!=null&&p(e,["config"],Uye(n,e)),e}function Tv(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["model"]);i!=null&&p(e,["model"],i);const o=m(t,["createTime"]);o!=null&&p(e,["createTime"],o);const s=m(t,["updateTime"]);s!=null&&p(e,["updateTime"],s);const u=m(t,["expireTime"]);u!=null&&p(e,["expireTime"],u);const c=m(t,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function Bye(){return{}}function qye(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Tv(o))),p(e,["cachedContents"],i)}return e}function Ev(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["model"]);i!=null&&p(e,["model"],i);const o=m(t,["createTime"]);o!=null&&p(e,["createTime"],o);const s=m(t,["updateTime"]);s!=null&&p(e,["updateTime"],s);const u=m(t,["expireTime"]);u!=null&&p(e,["expireTime"],u);const c=m(t,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function zye(){return{}}function $ye(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ev(o))),p(e,["cachedContents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gye extends ac{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ug(Wu.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Nye(this.apiClient,e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ev(h))}else{const f=sye(this.apiClient,e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Tv(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=kye(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ev(h))}else{const f=aye(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Tv(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Oye(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(()=>{const h=zye(),y=new pU;return Object.assign(y,h),y})}else{const f=lye(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(()=>{const h=Bye(),y=new pU;return Object.assign(y,h),y})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Lye(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ev(h))}else{const f=cye(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Tv(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Fye(e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=$ye(h),_=new gU;return Object.assign(_,y),_})}else{const f=dye(e);return u=Ne("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=qye(h),_=new gU;return Object.assign(_,y),_})}}}function AU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qt(t){return this instanceof qt?(this.v=t,this):new qt(t)}function Nf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(w){return Promise.resolve(w).then(E,y)}}function u(E,w){r[E]&&(i[E]=function(A){return new Promise(function(I,R){o.push([E,A,I,R])>1||c(E,A)})},w&&(i[E]=w(i[E])))}function c(E,w){try{f(r[E](w))}catch(A){_(o[0][3],A)}}function f(E){E.value instanceof qt?Promise.resolve(E.value.v).then(h,y):_(o[0][2],E)}function h(E){c("next",E)}function y(E){c("throw",E)}function _(E,w){E(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function jm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AU=="function"?AU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(f){o({value:f,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jye(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Nz(n)}function Nz(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Hye(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function SU(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!Nz(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class Kye{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Wye(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Wye{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Hye(o)}async sendMessage(e){var n;await this.sendPromise;const r=Er(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let _=[];h!=null&&(_=(u=h.slice(y))!==null&&u!==void 0?u:[]);const E=f?[f]:[];this.recordHistory(r,E,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Er(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?SU(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Nf(this,arguments,function*(){var s,u,c,f;const h=[];try{for(var y=!0,_=jm(e),E;E=yield qt(_.next()),s=E.done,!s;y=!0){f=E.value,y=!1;const w=f;if(jye(w)){const A=(i=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;A!==void 0&&h.push(A)}yield yield qt(w)}}catch(w){u={error:w}}finally{try{!y&&!s&&(c=_.return)&&(yield qt(c.call(_)))}finally{if(u)throw u.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...SU(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nT extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nT.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yye(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function Jye(t){const e={},n=m(t,["config"]);return n!=null&&p(e,["config"],Yye(n,e)),e}function Qye(t){const e={},n=m(t,["details"]);n!=null&&p(e,["details"],n);const r=m(t,["message"]);r!=null&&p(e,["message"],r);const i=m(t,["code"]);return i!=null&&p(e,["code"],i),e}function Xye(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["mimeType"]);i!=null&&p(e,["mimeType"],i);const o=m(t,["sizeBytes"]);o!=null&&p(e,["sizeBytes"],o);const s=m(t,["createTime"]);s!=null&&p(e,["createTime"],s);const u=m(t,["expirationTime"]);u!=null&&p(e,["expirationTime"],u);const c=m(t,["updateTime"]);c!=null&&p(e,["updateTime"],c);const f=m(t,["sha256Hash"]);f!=null&&p(e,["sha256Hash"],f);const h=m(t,["uri"]);h!=null&&p(e,["uri"],h);const y=m(t,["downloadUri"]);y!=null&&p(e,["downloadUri"],y);const _=m(t,["state"]);_!=null&&p(e,["state"],_);const E=m(t,["source"]);E!=null&&p(e,["source"],E);const w=m(t,["videoMetadata"]);w!=null&&p(e,["videoMetadata"],w);const A=m(t,["error"]);return A!=null&&p(e,["error"],Qye(A)),e}function Zye(t){const e={},n=m(t,["file"]);n!=null&&p(e,["file"],Xye(n));const r=m(t,["config"]);return r!=null&&p(e,["config"],r),e}function eve(t){const e={},n=m(t,["name"]);n!=null&&p(e,["_url","file"],Az(n));const r=m(t,["config"]);return r!=null&&p(e,["config"],r),e}function tve(t){const e={},n=m(t,["name"]);n!=null&&p(e,["_url","file"],Az(n));const r=m(t,["config"]);return r!=null&&p(e,["config"],r),e}function nve(t){const e={},n=m(t,["details"]);n!=null&&p(e,["details"],n);const r=m(t,["message"]);r!=null&&p(e,["message"],r);const i=m(t,["code"]);return i!=null&&p(e,["code"],i),e}function lI(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["mimeType"]);i!=null&&p(e,["mimeType"],i);const o=m(t,["sizeBytes"]);o!=null&&p(e,["sizeBytes"],o);const s=m(t,["createTime"]);s!=null&&p(e,["createTime"],s);const u=m(t,["expirationTime"]);u!=null&&p(e,["expirationTime"],u);const c=m(t,["updateTime"]);c!=null&&p(e,["updateTime"],c);const f=m(t,["sha256Hash"]);f!=null&&p(e,["sha256Hash"],f);const h=m(t,["uri"]);h!=null&&p(e,["uri"],h);const y=m(t,["downloadUri"]);y!=null&&p(e,["downloadUri"],y);const _=m(t,["state"]);_!=null&&p(e,["state"],_);const E=m(t,["source"]);E!=null&&p(e,["source"],E);const w=m(t,["videoMetadata"]);w!=null&&p(e,["videoMetadata"],w);const A=m(t,["error"]);return A!=null&&p(e,["error"],nve(A)),e}function rve(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>lI(o))),p(e,["files"],i)}return e}function ive(){return{}}function ove(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sve extends ac{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ug(Wu.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>lI(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jye(e);return o=Ne("files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=rve(c),h=new _pe;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zye(e);return o=Ne("upload/v1beta/files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{const c=ive(),f=new Tpe;return Object.assign(f,c),f})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eve(e);return o=Ne("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>lI(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tve(e);return o=Ne("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(()=>{const c=ove(),f=new Epe;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ave(t){const e={},n=m(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function lve(t){const e={},n=m(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function kz(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],ave(n)),e}function uve(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],lve(n)),e}function cve(t){const e={},n=m(t,["speaker"]);n!=null&&p(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],kz(r)),e}function fve(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cve(i))),p(e,["speakerVoiceConfigs"],r)}return e}function dve(t){const e={},n=m(t,["voiceConfig"]);n!=null&&p(e,["voiceConfig"],kz(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],fve(r));const i=m(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function hve(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&p(e,["voiceConfig"],uve(n)),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=m(t,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function mve(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function pve(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function gve(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function yve(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["data"]);r!=null&&p(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function vve(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function _ve(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&p(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Tve(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],mve(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],gve(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],vve(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function Eve(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],pve(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],yve(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],_ve(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function bve(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Tve(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function wve(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Eve(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function Ave(t){const e={},n=m(t,["behavior"]);n!=null&&p(e,["behavior"],n);const r=m(t,["description"]);r!=null&&p(e,["description"],r);const i=m(t,["name"]);i!=null&&p(e,["name"],i);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const c=m(t,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function Sve(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&p(e,["description"],n);const r=m(t,["name"]);r!=null&&p(e,["name"],r);const i=m(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&p(e,["response"],s);const u=m(t,["responseJsonSchema"]);return u!=null&&p(e,["responseJsonSchema"],u),e}function Ive(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function Cve(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function xve(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],Ive(n)),e}function Rve(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],Cve(n)),e}function Pve(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Mve(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Dve(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],Pve(n)),e}function Nve(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],Mve(n)),e}function kve(){return{}}function Ove(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&p(e,["apiKeyString"],n),e}function Vve(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&p(e,["apiKeyConfig"],Ove(n));const r=m(t,["authType"]);r!=null&&p(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&p(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&p(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&p(e,["oauthConfig"],s);const u=m(t,["oidcConfig"]);return u!=null&&p(e,["oidcConfig"],u),e}function Lve(t){const e={},n=m(t,["authConfig"]);return n!=null&&p(e,["authConfig"],Vve(n)),e}function Uve(){return{}}function Fve(){return{}}function Bve(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Ave(f))),p(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&p(e,["googleSearch"],xve(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&p(e,["googleSearchRetrieval"],Dve(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&p(e,["urlContext"],Uve());const s=m(t,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const u=m(t,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function qve(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>Sve(_))),p(e,["functionDeclarations"],y)}const r=m(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&p(e,["googleSearch"],Rve(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],Nve(o)),m(t,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],kve());const u=m(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],Lve(u)),m(t,["urlContext"])!=null&&p(e,["urlContext"],Fve());const f=m(t,["codeExecution"]);f!=null&&p(e,["codeExecution"],f);const h=m(t,["computerUse"]);return h!=null&&p(e,["computerUse"],h),e}function zve(t){const e={},n=m(t,["handle"]);if(n!=null&&p(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $ve(t){const e={},n=m(t,["handle"]);n!=null&&p(e,["handle"],n);const r=m(t,["transparent"]);return r!=null&&p(e,["transparent"],r),e}function IU(){return{}}function CU(){return{}}function Gve(t){const e={},n=m(t,["disabled"]);n!=null&&p(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&p(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&p(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&p(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&p(e,["silenceDurationMs"],s),e}function jve(t){const e={},n=m(t,["disabled"]);n!=null&&p(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&p(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&p(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&p(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&p(e,["silenceDurationMs"],s),e}function Hve(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&p(e,["automaticActivityDetection"],Gve(n));const r=m(t,["activityHandling"]);r!=null&&p(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&p(e,["turnCoverage"],i),e}function Kve(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&p(e,["automaticActivityDetection"],jve(n));const r=m(t,["activityHandling"]);r!=null&&p(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&p(e,["turnCoverage"],i),e}function Wve(t){const e={},n=m(t,["targetTokens"]);return n!=null&&p(e,["targetTokens"],n),e}function Yve(t){const e={},n=m(t,["targetTokens"]);return n!=null&&p(e,["targetTokens"],n),e}function Jve(t){const e={},n=m(t,["triggerTokens"]);n!=null&&p(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&p(e,["slidingWindow"],Wve(r)),e}function Qve(t){const e={},n=m(t,["triggerTokens"]);n!=null&&p(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&p(e,["slidingWindow"],Yve(r)),e}function Xve(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&p(e,["proactiveAudio"],n),e}function Zve(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&p(e,["proactiveAudio"],n),e}function e_e(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);const u=m(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const c=m(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const h=m(t,["seed"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","seed"],h);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],dve(O1(y)));const _=m(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=m(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],bve(Er(E)));const w=m(t,["tools"]);if(e!==void 0&&w!=null){let U=qd(w);Array.isArray(U)&&(U=U.map($=>Bve(Bd($)))),p(e,["setup","tools"],U)}const A=m(t,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],zve(A));const I=m(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","inputAudioTranscription"],IU());const R=m(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","outputAudioTranscription"],IU());const M=m(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&p(e,["setup","realtimeInputConfig"],Hve(M));const P=m(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],Jve(P));const F=m(t,["proactivity"]);return e!==void 0&&F!=null&&p(e,["setup","proactivity"],Xve(F)),n}function t_e(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);const u=m(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const c=m(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const h=m(t,["seed"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","seed"],h);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],hve(O1(y)));const _=m(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=m(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],wve(Er(E)));const w=m(t,["tools"]);if(e!==void 0&&w!=null){let U=qd(w);Array.isArray(U)&&(U=U.map($=>qve(Bd($)))),p(e,["setup","tools"],U)}const A=m(t,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],$ve(A));const I=m(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","inputAudioTranscription"],CU());const R=m(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","outputAudioTranscription"],CU());const M=m(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&p(e,["setup","realtimeInputConfig"],Kve(M));const P=m(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],Qve(P));const F=m(t,["proactivity"]);return e!==void 0&&F!=null&&p(e,["setup","proactivity"],Zve(F)),n}function n_e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["setup","model"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],e_e(i,n)),n}function r_e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["setup","model"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],t_e(i,n)),n}function i_e(){return{}}function o_e(){return{}}function s_e(){return{}}function a_e(){return{}}function l_e(t){const e={},n=m(t,["media"]);n!=null&&p(e,["mediaChunks"],vz(n));const r=m(t,["audio"]);r!=null&&p(e,["audio"],Tz(r));const i=m(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const o=m(t,["video"]);o!=null&&p(e,["video"],_z(o));const s=m(t,["text"]);return s!=null&&p(e,["text"],s),m(t,["activityStart"])!=null&&p(e,["activityStart"],i_e()),m(t,["activityEnd"])!=null&&p(e,["activityEnd"],s_e()),e}function u_e(t){const e={},n=m(t,["media"]);n!=null&&p(e,["mediaChunks"],vz(n));const r=m(t,["audio"]);r!=null&&p(e,["audio"],Tz(r));const i=m(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const o=m(t,["video"]);o!=null&&p(e,["video"],_z(o));const s=m(t,["text"]);return s!=null&&p(e,["text"],s),m(t,["activityStart"])!=null&&p(e,["activityStart"],o_e()),m(t,["activityEnd"])!=null&&p(e,["activityEnd"],a_e()),e}function Oz(t){const e={},n=m(t,["text"]);n!=null&&p(e,["text"],n);const r=m(t,["weight"]);return r!=null&&p(e,["weight"],r),e}function c_e(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Oz(i))),p(e,["weightedPrompts"],r)}return e}function Vz(t){const e={},n=m(t,["temperature"]);n!=null&&p(e,["temperature"],n);const r=m(t,["topK"]);r!=null&&p(e,["topK"],r);const i=m(t,["seed"]);i!=null&&p(e,["seed"],i);const o=m(t,["guidance"]);o!=null&&p(e,["guidance"],o);const s=m(t,["bpm"]);s!=null&&p(e,["bpm"],s);const u=m(t,["density"]);u!=null&&p(e,["density"],u);const c=m(t,["brightness"]);c!=null&&p(e,["brightness"],c);const f=m(t,["scale"]);f!=null&&p(e,["scale"],f);const h=m(t,["muteBass"]);h!=null&&p(e,["muteBass"],h);const y=m(t,["muteDrums"]);y!=null&&p(e,["muteDrums"],y);const _=m(t,["onlyBassAndDrums"]);return _!=null&&p(e,["onlyBassAndDrums"],_),e}function f_e(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],Vz(n)),e}function Lz(t){const e={},n=m(t,["model"]);return n!=null&&p(e,["model"],n),e}function Uz(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Oz(i))),p(e,["weightedPrompts"],r)}return e}function uI(t){const e={},n=m(t,["setup"]);n!=null&&p(e,["setup"],Lz(n));const r=m(t,["clientContent"]);r!=null&&p(e,["clientContent"],Uz(r));const i=m(t,["musicGenerationConfig"]);i!=null&&p(e,["musicGenerationConfig"],Vz(i));const o=m(t,["playbackControl"]);return o!=null&&p(e,["playbackControl"],o),e}function d_e(){return{}}function h_e(t){const e={},n=m(t,["sessionId"]);return n!=null&&p(e,["sessionId"],n),e}function m_e(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function p_e(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function g_e(t){const e={},n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function y_e(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["data"]);r!=null&&p(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function v_e(t){const e={},n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function __e(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&p(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function T_e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],m_e(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],g_e(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],v_e(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function E_e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],p_e(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],y_e(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],__e(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function b_e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>T_e(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function w_e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>E_e(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function xU(t){const e={},n=m(t,["text"]);n!=null&&p(e,["text"],n);const r=m(t,["finished"]);return r!=null&&p(e,["finished"],r),e}function RU(t){const e={},n=m(t,["text"]);n!=null&&p(e,["text"],n);const r=m(t,["finished"]);return r!=null&&p(e,["finished"],r),e}function A_e(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&p(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function S_e(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>A_e(i))),p(e,["urlMetadata"],r)}return e}function I_e(t){const e={},n=m(t,["modelTurn"]);n!=null&&p(e,["modelTurn"],b_e(n));const r=m(t,["turnComplete"]);r!=null&&p(e,["turnComplete"],r);const i=m(t,["interrupted"]);i!=null&&p(e,["interrupted"],i);const o=m(t,["groundingMetadata"]);o!=null&&p(e,["groundingMetadata"],o);const s=m(t,["generationComplete"]);s!=null&&p(e,["generationComplete"],s);const u=m(t,["inputTranscription"]);u!=null&&p(e,["inputTranscription"],xU(u));const c=m(t,["outputTranscription"]);c!=null&&p(e,["outputTranscription"],xU(c));const f=m(t,["urlContextMetadata"]);return f!=null&&p(e,["urlContextMetadata"],S_e(f)),e}function C_e(t){const e={},n=m(t,["modelTurn"]);n!=null&&p(e,["modelTurn"],w_e(n));const r=m(t,["turnComplete"]);r!=null&&p(e,["turnComplete"],r);const i=m(t,["interrupted"]);i!=null&&p(e,["interrupted"],i);const o=m(t,["groundingMetadata"]);o!=null&&p(e,["groundingMetadata"],o);const s=m(t,["generationComplete"]);s!=null&&p(e,["generationComplete"],s);const u=m(t,["inputTranscription"]);u!=null&&p(e,["inputTranscription"],RU(u));const c=m(t,["outputTranscription"]);return c!=null&&p(e,["outputTranscription"],RU(c)),e}function x_e(t){const e={},n=m(t,["id"]);n!=null&&p(e,["id"],n);const r=m(t,["args"]);r!=null&&p(e,["args"],r);const i=m(t,["name"]);return i!=null&&p(e,["name"],i),e}function R_e(t){const e={},n=m(t,["args"]);n!=null&&p(e,["args"],n);const r=m(t,["name"]);return r!=null&&p(e,["name"],r),e}function P_e(t){const e={},n=m(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>x_e(i))),p(e,["functionCalls"],r)}return e}function M_e(t){const e={},n=m(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>R_e(i))),p(e,["functionCalls"],r)}return e}function D_e(t){const e={},n=m(t,["ids"]);return n!=null&&p(e,["ids"],n),e}function N_e(t){const e={},n=m(t,["ids"]);return n!=null&&p(e,["ids"],n),e}function nv(t){const e={},n=m(t,["modality"]);n!=null&&p(e,["modality"],n);const r=m(t,["tokenCount"]);return r!=null&&p(e,["tokenCount"],r),e}function rv(t){const e={},n=m(t,["modality"]);n!=null&&p(e,["modality"],n);const r=m(t,["tokenCount"]);return r!=null&&p(e,["tokenCount"],r),e}function k_e(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=m(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const i=m(t,["responseTokenCount"]);i!=null&&p(e,["responseTokenCount"],i);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const s=m(t,["thoughtsTokenCount"]);s!=null&&p(e,["thoughtsTokenCount"],s);const u=m(t,["totalTokenCount"]);u!=null&&p(e,["totalTokenCount"],u);const c=m(t,["promptTokensDetails"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(E=>nv(E))),p(e,["promptTokensDetails"],_)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>nv(E))),p(e,["cacheTokensDetails"],_)}const h=m(t,["responseTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(E=>nv(E))),p(e,["responseTokensDetails"],_)}const y=m(t,["toolUsePromptTokensDetails"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(E=>nv(E))),p(e,["toolUsePromptTokensDetails"],_)}return e}function O_e(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=m(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const i=m(t,["candidatesTokenCount"]);i!=null&&p(e,["responseTokenCount"],i);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const s=m(t,["thoughtsTokenCount"]);s!=null&&p(e,["thoughtsTokenCount"],s);const u=m(t,["totalTokenCount"]);u!=null&&p(e,["totalTokenCount"],u);const c=m(t,["promptTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(w=>rv(w))),p(e,["promptTokensDetails"],E)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(w=>rv(w))),p(e,["cacheTokensDetails"],E)}const h=m(t,["candidatesTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(w=>rv(w))),p(e,["responseTokensDetails"],E)}const y=m(t,["toolUsePromptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(w=>rv(w))),p(e,["toolUsePromptTokensDetails"],E)}const _=m(t,["trafficType"]);return _!=null&&p(e,["trafficType"],_),e}function V_e(t){const e={},n=m(t,["timeLeft"]);return n!=null&&p(e,["timeLeft"],n),e}function L_e(t){const e={},n=m(t,["timeLeft"]);return n!=null&&p(e,["timeLeft"],n),e}function U_e(t){const e={},n=m(t,["newHandle"]);n!=null&&p(e,["newHandle"],n);const r=m(t,["resumable"]);r!=null&&p(e,["resumable"],r);const i=m(t,["lastConsumedClientMessageIndex"]);return i!=null&&p(e,["lastConsumedClientMessageIndex"],i),e}function F_e(t){const e={},n=m(t,["newHandle"]);n!=null&&p(e,["newHandle"],n);const r=m(t,["resumable"]);r!=null&&p(e,["resumable"],r);const i=m(t,["lastConsumedClientMessageIndex"]);return i!=null&&p(e,["lastConsumedClientMessageIndex"],i),e}function B_e(t){const e={};m(t,["setupComplete"])!=null&&p(e,["setupComplete"],d_e());const r=m(t,["serverContent"]);r!=null&&p(e,["serverContent"],I_e(r));const i=m(t,["toolCall"]);i!=null&&p(e,["toolCall"],P_e(i));const o=m(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],D_e(o));const s=m(t,["usageMetadata"]);s!=null&&p(e,["usageMetadata"],k_e(s));const u=m(t,["goAway"]);u!=null&&p(e,["goAway"],V_e(u));const c=m(t,["sessionResumptionUpdate"]);return c!=null&&p(e,["sessionResumptionUpdate"],U_e(c)),e}function q_e(t){const e={},n=m(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],h_e(n));const r=m(t,["serverContent"]);r!=null&&p(e,["serverContent"],C_e(r));const i=m(t,["toolCall"]);i!=null&&p(e,["toolCall"],M_e(i));const o=m(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],N_e(o));const s=m(t,["usageMetadata"]);s!=null&&p(e,["usageMetadata"],O_e(s));const u=m(t,["goAway"]);u!=null&&p(e,["goAway"],L_e(u));const c=m(t,["sessionResumptionUpdate"]);return c!=null&&p(e,["sessionResumptionUpdate"],F_e(c)),e}function z_e(){return{}}function $_e(t){const e={},n=m(t,["text"]);n!=null&&p(e,["text"],n);const r=m(t,["weight"]);return r!=null&&p(e,["weight"],r),e}function G_e(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$_e(i))),p(e,["weightedPrompts"],r)}return e}function j_e(t){const e={},n=m(t,["temperature"]);n!=null&&p(e,["temperature"],n);const r=m(t,["topK"]);r!=null&&p(e,["topK"],r);const i=m(t,["seed"]);i!=null&&p(e,["seed"],i);const o=m(t,["guidance"]);o!=null&&p(e,["guidance"],o);const s=m(t,["bpm"]);s!=null&&p(e,["bpm"],s);const u=m(t,["density"]);u!=null&&p(e,["density"],u);const c=m(t,["brightness"]);c!=null&&p(e,["brightness"],c);const f=m(t,["scale"]);f!=null&&p(e,["scale"],f);const h=m(t,["muteBass"]);h!=null&&p(e,["muteBass"],h);const y=m(t,["muteDrums"]);y!=null&&p(e,["muteDrums"],y);const _=m(t,["onlyBassAndDrums"]);return _!=null&&p(e,["onlyBassAndDrums"],_),e}function H_e(t){const e={},n=m(t,["clientContent"]);n!=null&&p(e,["clientContent"],G_e(n));const r=m(t,["musicGenerationConfig"]);return r!=null&&p(e,["musicGenerationConfig"],j_e(r)),e}function K_e(t){const e={},n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);r!=null&&p(e,["mimeType"],r);const i=m(t,["sourceMetadata"]);return i!=null&&p(e,["sourceMetadata"],H_e(i)),e}function W_e(t){const e={},n=m(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>K_e(i))),p(e,["audioChunks"],r)}return e}function Y_e(t){const e={},n=m(t,["text"]);n!=null&&p(e,["text"],n);const r=m(t,["filteredReason"]);return r!=null&&p(e,["filteredReason"],r),e}function J_e(t){const e={};m(t,["setupComplete"])!=null&&p(e,["setupComplete"],z_e());const r=m(t,["serverContent"]);r!=null&&p(e,["serverContent"],W_e(r));const i=m(t,["filteredPrompt"]);return i!=null&&p(e,["filteredPrompt"],Y_e(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q_e(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function X_e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Z_e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function e0e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],Q_e(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],X_e(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],Z_e(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function rT(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>e0e(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function t0e(t){const e={},n=m(t,["anyOf"]);n!=null&&p(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&p(e,["default"],r);const i=m(t,["description"]);i!=null&&p(e,["description"],i);const o=m(t,["enum"]);o!=null&&p(e,["enum"],o);const s=m(t,["example"]);s!=null&&p(e,["example"],s);const u=m(t,["format"]);u!=null&&p(e,["format"],u);const c=m(t,["items"]);c!=null&&p(e,["items"],c);const f=m(t,["maxItems"]);f!=null&&p(e,["maxItems"],f);const h=m(t,["maxLength"]);h!=null&&p(e,["maxLength"],h);const y=m(t,["maxProperties"]);y!=null&&p(e,["maxProperties"],y);const _=m(t,["maximum"]);_!=null&&p(e,["maximum"],_);const E=m(t,["minItems"]);E!=null&&p(e,["minItems"],E);const w=m(t,["minLength"]);w!=null&&p(e,["minLength"],w);const A=m(t,["minProperties"]);A!=null&&p(e,["minProperties"],A);const I=m(t,["minimum"]);I!=null&&p(e,["minimum"],I);const R=m(t,["nullable"]);R!=null&&p(e,["nullable"],R);const M=m(t,["pattern"]);M!=null&&p(e,["pattern"],M);const P=m(t,["properties"]);P!=null&&p(e,["properties"],P);const F=m(t,["propertyOrdering"]);F!=null&&p(e,["propertyOrdering"],F);const U=m(t,["required"]);U!=null&&p(e,["required"],U);const $=m(t,["title"]);$!=null&&p(e,["title"],$);const D=m(t,["type"]);return D!=null&&p(e,["type"],D),e}function n0e(t){const e={};if(m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=m(t,["category"]);n!=null&&p(e,["category"],n);const r=m(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function r0e(t){const e={},n=m(t,["behavior"]);n!=null&&p(e,["behavior"],n);const r=m(t,["description"]);r!=null&&p(e,["description"],r);const i=m(t,["name"]);i!=null&&p(e,["name"],i);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const c=m(t,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function i0e(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function o0e(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],i0e(n)),e}function s0e(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function a0e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],s0e(n)),e}function l0e(){return{}}function u0e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>r0e(f))),p(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&p(e,["googleSearch"],o0e(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&p(e,["googleSearchRetrieval"],a0e(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&p(e,["urlContext"],l0e());const s=m(t,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const u=m(t,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function c0e(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function f0e(t){const e={},n=m(t,["latitude"]);n!=null&&p(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function d0e(t){const e={},n=m(t,["latLng"]);n!=null&&p(e,["latLng"],f0e(n));const r=m(t,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function h0e(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],c0e(n));const r=m(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],d0e(r)),e}function m0e(t){const e={},n=m(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function Fz(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],m0e(n)),e}function p0e(t){const e={},n=m(t,["speaker"]);n!=null&&p(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],Fz(r)),e}function g0e(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>p0e(i))),p(e,["speakerVoiceConfigs"],r)}return e}function y0e(t){const e={},n=m(t,["voiceConfig"]);n!=null&&p(e,["voiceConfig"],Fz(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],g0e(r));const i=m(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function v0e(t){const e={},n=m(t,["includeThoughts"]);n!=null&&p(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&p(e,["thinkingBudget"],r),e}function _0e(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],rT(Er(i)));const o=m(e,["temperature"]);o!=null&&p(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&p(r,["topP"],s);const u=m(e,["topK"]);u!=null&&p(r,["topK"],u);const c=m(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const f=m(e,["maxOutputTokens"]);f!=null&&p(r,["maxOutputTokens"],f);const h=m(e,["stopSequences"]);h!=null&&p(r,["stopSequences"],h);const y=m(e,["responseLogprobs"]);y!=null&&p(r,["responseLogprobs"],y);const _=m(e,["logprobs"]);_!=null&&p(r,["logprobs"],_);const E=m(e,["presencePenalty"]);E!=null&&p(r,["presencePenalty"],E);const w=m(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const A=m(e,["seed"]);A!=null&&p(r,["seed"],A);const I=m(e,["responseMimeType"]);I!=null&&p(r,["responseMimeType"],I);const R=m(e,["responseSchema"]);R!=null&&p(r,["responseSchema"],t0e(Rp(R)));const M=m(e,["responseJsonSchema"]);if(M!=null&&p(r,["responseJsonSchema"],M),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=m(e,["safetySettings"]);if(n!==void 0&&P!=null){let B=P;Array.isArray(B)&&(B=B.map(G=>n0e(G))),p(n,["safetySettings"],B)}const F=m(e,["tools"]);if(n!==void 0&&F!=null){let B=qd(F);Array.isArray(B)&&(B=B.map(G=>u0e(Bd(G)))),p(n,["tools"],B)}const U=m(e,["toolConfig"]);if(n!==void 0&&U!=null&&p(n,["toolConfig"],h0e(U)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=m(e,["cachedContent"]);n!==void 0&&$!=null&&p(n,["cachedContent"],Js(t,$));const D=m(e,["responseModalities"]);D!=null&&p(r,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&p(r,["mediaResolution"],N);const V=m(e,["speechConfig"]);if(V!=null&&p(r,["speechConfig"],y0e(k1(V))),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=m(e,["thinkingConfig"]);return q!=null&&p(r,["thinkingConfig"],v0e(q)),r}function PU(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["contents"]);if(i!=null){let s=Fi(i);Array.isArray(s)&&(s=s.map(u=>rT(u))),p(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&p(n,["generationConfig"],_0e(t,o,n)),n}function T0e(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&p(e,["requests[]","title"],i);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function E0e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["contents"]);i!=null&&p(n,["requests[]","content"],bz(t,i));const o=m(e,["config"]);o!=null&&p(n,["config"],T0e(o,n));const s=m(e,["model"]);return s!==void 0&&p(n,["requests[]","model"],It(t,s)),n}function b0e(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=m(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&p(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=m(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const u=m(t,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const c=m(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&p(e,["parameters","includeSafetyAttributes"],c);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);const h=m(t,["language"]);e!==void 0&&h!=null&&p(e,["parameters","language"],h);const y=m(t,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);const _=m(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&p(e,["parameters","outputOptions","compressionQuality"],_),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function w0e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=m(e,["config"]);return o!=null&&p(n,["config"],b0e(o,n)),n}function A0e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","name"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function S0e(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const s=m(e,["filter"]);n!==void 0&&s!=null&&p(n,["_query","filter"],s);const u=m(e,["queryBase"]);return n!==void 0&&u!=null&&p(n,["_url","models_url"],Sz(t,u)),r}function I0e(t,e){const n={},r=m(e,["config"]);return r!=null&&p(n,["config"],S0e(t,r,n)),n}function C0e(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function x0e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","name"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],C0e(i,n)),n}function R0e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","name"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function P0e(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function M0e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["contents"]);if(i!=null){let s=Fi(i);Array.isArray(s)&&(s=s.map(u=>rT(u))),p(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&p(n,["config"],P0e(o)),n}function D0e(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],Qs(n));const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function N0e(t,e){const n={},r=m(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=m(t,["durationSeconds"]);if(e!==void 0&&i!=null&&p(e,["parameters","durationSeconds"],i),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);if(e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o),m(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const s=m(t,["personGeneration"]);if(e!==void 0&&s!=null&&p(e,["parameters","personGeneration"],s),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=m(t,["negativePrompt"]);e!==void 0&&u!=null&&p(e,["parameters","negativePrompt"],u);const c=m(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&p(e,["parameters","enhancePrompt"],c),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(m(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function k0e(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=m(e,["image"]);if(o!=null&&p(n,["instances[0]","image"],D0e(o)),m(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=m(e,["config"]);return s!=null&&p(n,["config"],N0e(s,n)),n}function O0e(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function V0e(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["data"]);r!=null&&p(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function L0e(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&p(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function U0e(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],O0e(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],V0e(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],L0e(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function $d(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>U0e(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function F0e(t){const e={},n=m(t,["anyOf"]);n!=null&&p(e,["anyOf"],n);const r=m(t,["default"]);r!=null&&p(e,["default"],r);const i=m(t,["description"]);i!=null&&p(e,["description"],i);const o=m(t,["enum"]);o!=null&&p(e,["enum"],o);const s=m(t,["example"]);s!=null&&p(e,["example"],s);const u=m(t,["format"]);u!=null&&p(e,["format"],u);const c=m(t,["items"]);c!=null&&p(e,["items"],c);const f=m(t,["maxItems"]);f!=null&&p(e,["maxItems"],f);const h=m(t,["maxLength"]);h!=null&&p(e,["maxLength"],h);const y=m(t,["maxProperties"]);y!=null&&p(e,["maxProperties"],y);const _=m(t,["maximum"]);_!=null&&p(e,["maximum"],_);const E=m(t,["minItems"]);E!=null&&p(e,["minItems"],E);const w=m(t,["minLength"]);w!=null&&p(e,["minLength"],w);const A=m(t,["minProperties"]);A!=null&&p(e,["minProperties"],A);const I=m(t,["minimum"]);I!=null&&p(e,["minimum"],I);const R=m(t,["nullable"]);R!=null&&p(e,["nullable"],R);const M=m(t,["pattern"]);M!=null&&p(e,["pattern"],M);const P=m(t,["properties"]);P!=null&&p(e,["properties"],P);const F=m(t,["propertyOrdering"]);F!=null&&p(e,["propertyOrdering"],F);const U=m(t,["required"]);U!=null&&p(e,["required"],U);const $=m(t,["title"]);$!=null&&p(e,["title"],$);const D=m(t,["type"]);return D!=null&&p(e,["type"],D),e}function B0e(t){const e={},n=m(t,["featureSelectionPreference"]);return n!=null&&p(e,["featureSelectionPreference"],n),e}function q0e(t){const e={},n=m(t,["method"]);n!=null&&p(e,["method"],n);const r=m(t,["category"]);r!=null&&p(e,["category"],r);const i=m(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function z0e(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&p(e,["description"],n);const r=m(t,["name"]);r!=null&&p(e,["name"],r);const i=m(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=m(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const s=m(t,["response"]);s!=null&&p(e,["response"],s);const u=m(t,["responseJsonSchema"]);return u!=null&&p(e,["responseJsonSchema"],u),e}function $0e(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function G0e(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],$0e(n)),e}function j0e(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function H0e(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],j0e(n)),e}function K0e(){return{}}function W0e(t){const e={},n=m(t,["apiKeyString"]);return n!=null&&p(e,["apiKeyString"],n),e}function Y0e(t){const e={},n=m(t,["apiKeyConfig"]);n!=null&&p(e,["apiKeyConfig"],W0e(n));const r=m(t,["authType"]);r!=null&&p(e,["authType"],r);const i=m(t,["googleServiceAccountConfig"]);i!=null&&p(e,["googleServiceAccountConfig"],i);const o=m(t,["httpBasicAuthConfig"]);o!=null&&p(e,["httpBasicAuthConfig"],o);const s=m(t,["oauthConfig"]);s!=null&&p(e,["oauthConfig"],s);const u=m(t,["oidcConfig"]);return u!=null&&p(e,["oidcConfig"],u),e}function J0e(t){const e={},n=m(t,["authConfig"]);return n!=null&&p(e,["authConfig"],Y0e(n)),e}function Q0e(){return{}}function Bz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>z0e(_))),p(e,["functionDeclarations"],y)}const r=m(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const i=m(t,["googleSearch"]);i!=null&&p(e,["googleSearch"],G0e(i));const o=m(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],H0e(o)),m(t,["enterpriseWebSearch"])!=null&&p(e,["enterpriseWebSearch"],K0e());const u=m(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],J0e(u)),m(t,["urlContext"])!=null&&p(e,["urlContext"],Q0e());const f=m(t,["codeExecution"]);f!=null&&p(e,["codeExecution"],f);const h=m(t,["computerUse"]);return h!=null&&p(e,["computerUse"],h),e}function X0e(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["allowedFunctionNames"]);return r!=null&&p(e,["allowedFunctionNames"],r),e}function Z0e(t){const e={},n=m(t,["latitude"]);n!=null&&p(e,["latitude"],n);const r=m(t,["longitude"]);return r!=null&&p(e,["longitude"],r),e}function eTe(t){const e={},n=m(t,["latLng"]);n!=null&&p(e,["latLng"],Z0e(n));const r=m(t,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function tTe(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],X0e(n));const r=m(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],eTe(r)),e}function nTe(t){const e={},n=m(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function rTe(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],nTe(n)),e}function iTe(t){const e={},n=m(t,["voiceConfig"]);if(n!=null&&p(e,["voiceConfig"],rTe(n)),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=m(t,["languageCode"]);return r!=null&&p(e,["languageCode"],r),e}function oTe(t){const e={},n=m(t,["includeThoughts"]);n!=null&&p(e,["includeThoughts"],n);const r=m(t,["thinkingBudget"]);return r!=null&&p(e,["thinkingBudget"],r),e}function sTe(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],$d(Er(i)));const o=m(e,["temperature"]);o!=null&&p(r,["temperature"],o);const s=m(e,["topP"]);s!=null&&p(r,["topP"],s);const u=m(e,["topK"]);u!=null&&p(r,["topK"],u);const c=m(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const f=m(e,["maxOutputTokens"]);f!=null&&p(r,["maxOutputTokens"],f);const h=m(e,["stopSequences"]);h!=null&&p(r,["stopSequences"],h);const y=m(e,["responseLogprobs"]);y!=null&&p(r,["responseLogprobs"],y);const _=m(e,["logprobs"]);_!=null&&p(r,["logprobs"],_);const E=m(e,["presencePenalty"]);E!=null&&p(r,["presencePenalty"],E);const w=m(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const A=m(e,["seed"]);A!=null&&p(r,["seed"],A);const I=m(e,["responseMimeType"]);I!=null&&p(r,["responseMimeType"],I);const R=m(e,["responseSchema"]);R!=null&&p(r,["responseSchema"],F0e(Rp(R)));const M=m(e,["responseJsonSchema"]);M!=null&&p(r,["responseJsonSchema"],M);const P=m(e,["routingConfig"]);P!=null&&p(r,["routingConfig"],P);const F=m(e,["modelSelectionConfig"]);F!=null&&p(r,["modelConfig"],B0e(F));const U=m(e,["safetySettings"]);if(n!==void 0&&U!=null){let Pe=U;Array.isArray(Pe)&&(Pe=Pe.map(ne=>q0e(ne))),p(n,["safetySettings"],Pe)}const $=m(e,["tools"]);if(n!==void 0&&$!=null){let Pe=qd($);Array.isArray(Pe)&&(Pe=Pe.map(ne=>Bz(Bd(ne)))),p(n,["tools"],Pe)}const D=m(e,["toolConfig"]);n!==void 0&&D!=null&&p(n,["toolConfig"],tTe(D));const N=m(e,["labels"]);n!==void 0&&N!=null&&p(n,["labels"],N);const V=m(e,["cachedContent"]);n!==void 0&&V!=null&&p(n,["cachedContent"],Js(t,V));const q=m(e,["responseModalities"]);q!=null&&p(r,["responseModalities"],q);const B=m(e,["mediaResolution"]);B!=null&&p(r,["mediaResolution"],B);const G=m(e,["speechConfig"]);G!=null&&p(r,["speechConfig"],iTe(k1(G)));const z=m(e,["audioTimestamp"]);z!=null&&p(r,["audioTimestamp"],z);const Ve=m(e,["thinkingConfig"]);return Ve!=null&&p(r,["thinkingConfig"],oTe(Ve)),r}function MU(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["contents"]);if(i!=null){let s=Fi(i);Array.isArray(s)&&(s=s.map(u=>$d(u))),p(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&p(n,["generationConfig"],sTe(t,o,n)),n}function aTe(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&p(e,["instances[]","title"],i);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&p(e,["parameters","outputDimensionality"],o);const s=m(t,["mimeType"]);e!==void 0&&s!=null&&p(e,["instances[]","mimeType"],s);const u=m(t,["autoTruncate"]);return e!==void 0&&u!=null&&p(e,["parameters","autoTruncate"],u),n}function lTe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["contents"]);i!=null&&p(n,["instances[]","content"],bz(t,i));const o=m(e,["config"]);return o!=null&&p(n,["config"],aTe(o,n)),n}function uTe(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&p(e,["parameters","negativePrompt"],i);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const u=m(t,["guidanceScale"]);e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u);const c=m(t,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const h=m(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const y=m(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);const _=m(t,["includeRaiReason"]);e!==void 0&&_!=null&&p(e,["parameters","includeRaiReason"],_);const E=m(t,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const w=m(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const A=m(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&p(e,["parameters","outputOptions","compressionQuality"],A);const I=m(t,["addWatermark"]);e!==void 0&&I!=null&&p(e,["parameters","addWatermark"],I);const R=m(t,["enhancePrompt"]);return e!==void 0&&R!=null&&p(e,["parameters","enhancePrompt"],R),n}function cTe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=m(e,["config"]);return o!=null&&p(n,["config"],uTe(o,n)),n}function iT(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=m(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],Qs(r));const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function fTe(t){const e={},n=m(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=m(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const i=m(t,["maskDilation"]);return i!=null&&p(e,["dilation"],i),e}function dTe(t){const e={},n=m(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=m(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function hTe(t){const e={},n=m(t,["styleDescription"]);return n!=null&&p(e,["styleDescription"],n),e}function mTe(t){const e={},n=m(t,["subjectType"]);n!=null&&p(e,["subjectType"],n);const r=m(t,["subjectDescription"]);return r!=null&&p(e,["subjectDescription"],r),e}function pTe(t){const e={},n=m(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],iT(n));const r=m(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const i=m(t,["referenceType"]);i!=null&&p(e,["referenceType"],i);const o=m(t,["maskImageConfig"]);o!=null&&p(e,["maskImageConfig"],fTe(o));const s=m(t,["controlImageConfig"]);s!=null&&p(e,["controlImageConfig"],dTe(s));const u=m(t,["styleImageConfig"]);u!=null&&p(e,["styleImageConfig"],hTe(u));const c=m(t,["subjectImageConfig"]);return c!=null&&p(e,["subjectImageConfig"],mTe(c)),e}function gTe(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&p(e,["parameters","negativePrompt"],i);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const s=m(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const u=m(t,["guidanceScale"]);e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u);const c=m(t,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const h=m(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const y=m(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&p(e,["parameters","includeSafetyAttributes"],y);const _=m(t,["includeRaiReason"]);e!==void 0&&_!=null&&p(e,["parameters","includeRaiReason"],_);const E=m(t,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const w=m(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const A=m(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&p(e,["parameters","outputOptions","compressionQuality"],A);const I=m(t,["editMode"]);e!==void 0&&I!=null&&p(e,["parameters","editMode"],I);const R=m(t,["baseSteps"]);return e!==void 0&&R!=null&&p(e,["parameters","editConfig","baseSteps"],R),n}function yTe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=m(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>pTe(c))),p(n,["instances[0]","referenceImages"],u)}const s=m(e,["config"]);return s!=null&&p(n,["config"],gTe(s,n)),n}function vTe(t,e){const n={},r=m(t,["includeRaiReason"]);e!==void 0&&r!=null&&p(e,["parameters","includeRaiReason"],r);const i=m(t,["outputMimeType"]);e!==void 0&&i!=null&&p(e,["parameters","outputOptions","mimeType"],i);const o=m(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&p(e,["parameters","outputOptions","compressionQuality"],o);const s=m(t,["enhanceInputImage"]);e!==void 0&&s!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],s);const u=m(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const c=m(t,["numberOfImages"]);e!==void 0&&c!=null&&p(e,["parameters","sampleCount"],c);const f=m(t,["mode"]);return e!==void 0&&f!=null&&p(e,["parameters","mode"],f),n}function _Te(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["image"]);i!=null&&p(n,["instances[0]","image"],iT(i));const o=m(e,["upscaleFactor"]);o!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=m(e,["config"]);return s!=null&&p(n,["config"],vTe(s,n)),n}function TTe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","name"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function ETe(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const s=m(e,["filter"]);n!==void 0&&s!=null&&p(n,["_query","filter"],s);const u=m(e,["queryBase"]);return n!==void 0&&u!=null&&p(n,["_url","models_url"],Sz(t,u)),r}function bTe(t,e){const n={},r=m(e,["config"]);return r!=null&&p(n,["config"],ETe(t,r,n)),n}function wTe(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function ATe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],wTe(i,n)),n}function STe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","name"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],i),n}function ITe(t,e){const n={},r=m(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],$d(Er(r)));const i=m(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Bz(u))),p(e,["tools"],s)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&p(e,["generationConfig"],o),n}function CTe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["contents"]);if(i!=null){let s=Fi(i);Array.isArray(s)&&(s=s.map(u=>$d(u))),p(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&p(n,["config"],ITe(o,n)),n}function xTe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["contents"]);if(i!=null){let s=Fi(i);Array.isArray(s)&&(s=s.map(u=>$d(u))),p(n,["contents"],s)}const o=m(e,["config"]);return o!=null&&p(n,["config"],o),n}function RTe(t){const e={},n=m(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=m(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],Qs(r));const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function PTe(t,e){const n={},r=m(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=m(t,["fps"]);e!==void 0&&o!=null&&p(e,["parameters","fps"],o);const s=m(t,["durationSeconds"]);e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s);const u=m(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const c=m(t,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const f=m(t,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);const h=m(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const y=m(t,["pubsubTopic"]);e!==void 0&&y!=null&&p(e,["parameters","pubsubTopic"],y);const _=m(t,["negativePrompt"]);e!==void 0&&_!=null&&p(e,["parameters","negativePrompt"],_);const E=m(t,["enhancePrompt"]);e!==void 0&&E!=null&&p(e,["parameters","enhancePrompt"],E);const w=m(t,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const A=m(t,["lastFrame"]);e!==void 0&&A!=null&&p(e,["instances[0]","lastFrame"],iT(A));const I=m(t,["compressionQuality"]);return e!==void 0&&I!=null&&p(e,["parameters","compressionQuality"],I),n}function MTe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["_url","model"],It(t,r));const i=m(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=m(e,["image"]);o!=null&&p(n,["instances[0]","image"],iT(o));const s=m(e,["video"]);s!=null&&p(n,["instances[0]","video"],RTe(s));const u=m(e,["config"]);return u!=null&&p(n,["config"],PTe(u,n)),n}function DTe(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function NTe(t){const e={},n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function kTe(t){const e={},n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function OTe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],DTe(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],NTe(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],kTe(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function VTe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>OTe(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function LTe(t){const e={},n=m(t,["citationSources"]);return n!=null&&p(e,["citations"],n),e}function UTe(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&p(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function FTe(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>UTe(i))),p(e,["urlMetadata"],r)}return e}function BTe(t){const e={},n=m(t,["content"]);n!=null&&p(e,["content"],VTe(n));const r=m(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],LTe(r));const i=m(t,["tokenCount"]);i!=null&&p(e,["tokenCount"],i);const o=m(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&p(e,["urlContextMetadata"],FTe(s));const u=m(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const c=m(t,["groundingMetadata"]);c!=null&&p(e,["groundingMetadata"],c);const f=m(t,["index"]);f!=null&&p(e,["index"],f);const h=m(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const y=m(t,["safetyRatings"]);return y!=null&&p(e,["safetyRatings"],y),e}function DU(t){const e={},n=m(t,["candidates"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>BTe(u))),p(e,["candidates"],s)}const r=m(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const i=m(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=m(t,["usageMetadata"]);return o!=null&&p(e,["usageMetadata"],o),e}function qTe(t){const e={},n=m(t,["values"]);return n!=null&&p(e,["values"],n),e}function zTe(){return{}}function $Te(t){const e={},n=m(t,["embeddings"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qTe(o))),p(e,["embeddings"],i)}return m(t,["metadata"])!=null&&p(e,["metadata"],zTe()),e}function GTe(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],Qs(n));const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qz(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&p(e,["contentType"],i),e}function jTe(t){const e={},n=m(t,["_self"]);n!=null&&p(e,["image"],GTe(n));const r=m(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const i=m(t,["_self"]);return i!=null&&p(e,["safetyAttributes"],qz(i)),e}function HTe(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jTe(o))),p(e,["generatedImages"],i)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],qz(r)),e}function KTe(t){const e={},n=m(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&p(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&p(e,["updateTime"],i),e}function cI(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["description"]);i!=null&&p(e,["description"],i);const o=m(t,["version"]);o!=null&&p(e,["version"],o);const s=m(t,["_self"]);s!=null&&p(e,["tunedModelInfo"],KTe(s));const u=m(t,["inputTokenLimit"]);u!=null&&p(e,["inputTokenLimit"],u);const c=m(t,["outputTokenLimit"]);c!=null&&p(e,["outputTokenLimit"],c);const f=m(t,["supportedGenerationMethods"]);return f!=null&&p(e,["supportedActions"],f),e}function WTe(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["_self"]);if(r!=null){let i=Iz(r);Array.isArray(i)&&(i=i.map(o=>cI(o))),p(e,["models"],i)}return e}function YTe(){return{}}function JTe(t){const e={},n=m(t,["totalTokens"]);n!=null&&p(e,["totalTokens"],n);const r=m(t,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function QTe(t){const e={},n=m(t,["video","uri"]);n!=null&&p(e,["uri"],n);const r=m(t,["video","encodedVideo"]);r!=null&&p(e,["videoBytes"],Qs(r));const i=m(t,["encoding"]);return i!=null&&p(e,["mimeType"],i),e}function XTe(t){const e={},n=m(t,["_self"]);return n!=null&&p(e,["video"],QTe(n)),e}function ZTe(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>XTe(s))),p(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function eEe(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=m(t,["done"]);i!=null&&p(e,["done"],i);const o=m(t,["error"]);o!=null&&p(e,["error"],o);const s=m(t,["response","generateVideoResponse"]);return s!=null&&p(e,["response"],ZTe(s)),e}function tEe(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function nEe(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["data"]);r!=null&&p(e,["data"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function rEe(t){const e={},n=m(t,["displayName"]);n!=null&&p(e,["displayName"],n);const r=m(t,["fileUri"]);r!=null&&p(e,["fileUri"],r);const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function iEe(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],tEe(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],nEe(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],rEe(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function oEe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>iEe(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function sEe(t){const e={},n=m(t,["citations"]);return n!=null&&p(e,["citations"],n),e}function aEe(t){const e={},n=m(t,["retrievedUrl"]);n!=null&&p(e,["retrievedUrl"],n);const r=m(t,["urlRetrievalStatus"]);return r!=null&&p(e,["urlRetrievalStatus"],r),e}function lEe(t){const e={},n=m(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aEe(i))),p(e,["urlMetadata"],r)}return e}function uEe(t){const e={},n=m(t,["content"]);n!=null&&p(e,["content"],oEe(n));const r=m(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],sEe(r));const i=m(t,["finishMessage"]);i!=null&&p(e,["finishMessage"],i);const o=m(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const s=m(t,["urlContextMetadata"]);s!=null&&p(e,["urlContextMetadata"],lEe(s));const u=m(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const c=m(t,["groundingMetadata"]);c!=null&&p(e,["groundingMetadata"],c);const f=m(t,["index"]);f!=null&&p(e,["index"],f);const h=m(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const y=m(t,["safetyRatings"]);return y!=null&&p(e,["safetyRatings"],y),e}function NU(t){const e={},n=m(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>uEe(f))),p(e,["candidates"],c)}const r=m(t,["createTime"]);r!=null&&p(e,["createTime"],r);const i=m(t,["responseId"]);i!=null&&p(e,["responseId"],i);const o=m(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const s=m(t,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);const u=m(t,["usageMetadata"]);return u!=null&&p(e,["usageMetadata"],u),e}function cEe(t){const e={},n=m(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=m(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function fEe(t){const e={},n=m(t,["values"]);n!=null&&p(e,["values"],n);const r=m(t,["statistics"]);return r!=null&&p(e,["statistics"],cEe(r)),e}function dEe(t){const e={},n=m(t,["billableCharacterCount"]);return n!=null&&p(e,["billableCharacterCount"],n),e}function hEe(t){const e={},n=m(t,["predictions[]","embeddings"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>fEe(o))),p(e,["embeddings"],i)}const r=m(t,["metadata"]);return r!=null&&p(e,["metadata"],dEe(r)),e}function mEe(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],Qs(r));const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function zz(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&p(e,["contentType"],i),e}function V1(t){const e={},n=m(t,["_self"]);n!=null&&p(e,["image"],mEe(n));const r=m(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const i=m(t,["_self"]);i!=null&&p(e,["safetyAttributes"],zz(i));const o=m(t,["prompt"]);return o!=null&&p(e,["enhancedPrompt"],o),e}function pEe(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>V1(o))),p(e,["generatedImages"],i)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],zz(r)),e}function gEe(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>V1(i))),p(e,["generatedImages"],r)}return e}function yEe(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>V1(i))),p(e,["generatedImages"],r)}return e}function vEe(t){const e={},n=m(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=m(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function _Ee(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&p(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&p(e,["updateTime"],i),e}function TEe(t){const e={},n=m(t,["checkpointId"]);n!=null&&p(e,["checkpointId"],n);const r=m(t,["epoch"]);r!=null&&p(e,["epoch"],r);const i=m(t,["step"]);return i!=null&&p(e,["step"],i),e}function fI(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=m(t,["description"]);i!=null&&p(e,["description"],i);const o=m(t,["versionId"]);o!=null&&p(e,["version"],o);const s=m(t,["deployedModels"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(_=>vEe(_))),p(e,["endpoints"],y)}const u=m(t,["labels"]);u!=null&&p(e,["labels"],u);const c=m(t,["_self"]);c!=null&&p(e,["tunedModelInfo"],_Ee(c));const f=m(t,["defaultCheckpointId"]);f!=null&&p(e,["defaultCheckpointId"],f);const h=m(t,["checkpoints"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(_=>TEe(_))),p(e,["checkpoints"],y)}return e}function EEe(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["_self"]);if(r!=null){let i=Iz(r);Array.isArray(i)&&(i=i.map(o=>fI(o))),p(e,["models"],i)}return e}function bEe(){return{}}function wEe(t){const e={},n=m(t,["totalTokens"]);return n!=null&&p(e,["totalTokens"],n),e}function AEe(t){const e={},n=m(t,["tokensInfo"]);return n!=null&&p(e,["tokensInfo"],n),e}function SEe(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],Qs(r));const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function IEe(t){const e={},n=m(t,["_self"]);return n!=null&&p(e,["video"],SEe(n)),e}function CEe(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>IEe(s))),p(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function xEe(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=m(t,["done"]);i!=null&&p(e,["done"],i);const o=m(t,["error"]);o!=null&&p(e,["error"],o);const s=m(t,["response"]);return s!=null&&p(e,["response"],CEe(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const REe="Content-Type",PEe="X-Server-Timeout",MEe="User-Agent",dI="x-goog-api-client",DEe="1.8.0",NEe=`google-genai-sdk/${DEe}`,kEe="v1beta1",OEe="v1beta",kU=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class VEe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:kEe,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:OEe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))i.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;n.timeout&&n?.timeout>0&&setTimeout(()=>i.abort(),n.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&LEe(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await OU(i),new iI(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await OU(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Nf(this,arguments,function*(){const i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield qt(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c);try{const y=JSON.parse(f);if("error"in y){const _=JSON.parse(JSON.stringify(y.error)),E=_.status,w=_.code,A=`got status: ${E}. ${JSON.stringify(y)}`;if(w>=400&&w<600)throw new nT({message:A,status:w})}}catch(y){if(y.name==="ApiError")throw y}s+=f;let h=s.match(kU);for(;h;){const y=h[1];try{const _=new Response(y,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield qt(new iI(_)),s=s.slice(h[0].length),h=s.match(kU)}catch(_){throw new Error(`exception parsing stream chunk ${y}. ${_}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=NEe+" "+this.clientOptions.userAgentExtra;return e[MEe]=n,e[dI]=n,e[REe]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(PEe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const u=(r=n?.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n?.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:Ne("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!s?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=s?.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function OU(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new nT({message:i,status:n}):new Error(i)}}function LEe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],h=u[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?u[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),u[c]=f)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UEe="mcp_used/unknown";function $z(t){for(const e of t)if(L1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Gz(t){var e;const n=(e=t[dI])!==null&&e!==void 0?e:"";t[dI]=(n+` ${UEe}`).trimStart()}function FEe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>L1(i)))!==null&&r!==void 0?r:!1}function BEe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!L1(i)))!==null&&r!==void 0?r:!1}function L1(t){return t!==null&&typeof t=="object"&&t instanceof U1}function qEe(t,e=100){return Nf(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield qt(t.listTools({cursor:r}));for(const s of o.tools)yield yield qt(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class U1{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new U1(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var u=!0,c=(n=void 0,jm(qEe(h))),f;f=await c.next(),e=f.done,!e;u=!0){i=f.value,u=!1;const y=i;s.push(y);const _=y.name;if(o[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);o[_]=h}}catch(y){n={error:y}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),kpe(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zEe(t,e,n){const r=new wpe;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=J_e(i);Object.assign(r,o),e(r)}class $Ee{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=HEe(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let f=()=>{};const h=new Promise(P=>{f=P}),y=e.callbacks,_=function(){f({})},E=this.apiClient,w={onopen:_,onmessage:P=>{zEe(E,y.onmessage,P)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(P){},onclose:(r=y?.onclose)!==null&&r!==void 0?r:function(P){}},A=this.webSocketFactory.create(c,jEe(s),w);A.connect(),await h;const I=It(this.apiClient,e.model),R=Lz({model:I}),M=uI({setup:R});return A.send(JSON.stringify(M)),new GEe(A,this.apiClient)}}class GEe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=c_e(e),r=Uz(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=f_e(e),r=uI(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=uI({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(wf.PLAY)}pause(){this.sendPlaybackControl(wf.PAUSE)}stop(){this.sendPlaybackControl(wf.STOP)}resetContext(){this.sendPlaybackControl(wf.RESET_CONTEXT)}close(){this.conn.close()}}function jEe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function HEe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KEe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function WEe(t,e,n){const r=new bpe;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=q_e(o);Object.assign(r,s)}else{const s=B_e(o);Object.assign(r,s)}e(r)}class YEe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new $Ee(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,u;const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const y=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&$z(e.config.tools)&&Gz(y);const _=ZEe(y);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_);else{const V=this.apiClient.getApiKey();let q="BidiGenerateContent",B="key";V?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),q="BidiGenerateContentConstrained",B="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${q}?${B}=${V}`}let E=()=>{};const w=new Promise(V=>{E=V}),A=e.callbacks,I=function(){var V;(V=A?.onopen)===null||V===void 0||V.call(A),E({})},R=this.apiClient,M={onopen:I,onmessage:V=>{WEe(R,A.onmessage,V)},onerror:(n=A?.onerror)!==null&&n!==void 0?n:function(V){},onclose:(r=A?.onclose)!==null&&r!==void 0?r:function(V){}},P=this.webSocketFactory.create(h,XEe(_),M);P.connect(),await w;let F=It(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const V=this.apiClient.getProject(),q=this.apiClient.getLocation();F=`projects/${V}/locations/${q}/`+F}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[O_.AUDIO]}:e.config.responseModalities=[O_.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],D=[];for(const V of $)if(this.isCallableTool(V)){const q=V;D.push(await q.tool())}else D.push(V);D.length>0&&(e.config.tools=D);const N={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=r_e(this.apiClient,N):U=n_e(this.apiClient,N),delete U.config,P.send(JSON.stringify(U)),new QEe(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const JEe={turnComplete:!0};class QEe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Fi(n.turns),e.isVertexAI()?r=r.map(i=>$d(i)):r=r.map(i=>rT(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(KEe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},JEe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:u_e(e)}:n={realtimeInput:l_e(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function XEe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function ZEe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VU=10;function LU(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t?.tools)!==null&&n!==void 0?n:[])if(bv(s)){i=!0;break}if(!i)return!0;const o=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function bv(t){return"callTool"in t&&typeof t.callTool=="function"}function UU(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ebe extends ac{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,u;const c=await this.processParamsForMcpUsage(n);if(!FEe(n)||LU(n.config))return await this.generateContentInternal(c);if(BEe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const y=Fi(c.contents),_=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:VU;let E=0;for(;E<_&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const w=f.candidates[0].content,A=[];for(const I of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(bv(I)){const M=await I.callTool(f.functionCalls);A.push(...M)}E++,h={role:"user",parts:A},c.contents=Fi(c.contents),c.contents.push(w),c.contents.push(h),UU(c.config)&&(y.push(w),y.push(h))}return UU(c.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async n=>{if(LU(n.config)){const r=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r?.generatedImages)for(const c of r.generatedImages)c&&c?.safetyAttributes&&((i=c?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c?.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o}:u={generatedImages:s},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ug(Wu.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)}}async processParamsForMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>bv(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&$z(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Gz(f),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return u}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(bv(s)){const u=s,c=await u.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,u)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:VU;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(f,h,y){var _,E;return Nf(this,arguments,function*(){for(var w,A,I,R;u<o;){s&&(u++,s=!1);const U=yield qt(f.processParamsForMcpUsage(y)),$=yield qt(f.generateContentStreamInternal(U)),D=[],N=[];try{for(var M=!0,P=(A=void 0,jm($)),F;F=yield qt(P.next()),w=F.done,!w;M=!0){R=F.value,M=!1;const V=R;if(yield yield qt(V),V.candidates&&(!((_=V.candidates[0])===null||_===void 0)&&_.content)){N.push(V.candidates[0].content);for(const q of(E=V.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(u<o&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(q.functionCall.name)){const B=yield qt(h.get(q.functionCall.name).callTool([q.functionCall]));D.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(V){A={error:V}}finally{try{!M&&!w&&(I=P.return)&&(yield qt(I.call(P)))}finally{if(A)throw A.error}}if(D.length>0){s=!0;const V=new gm;V.candidates=[{content:{role:"user",parts:D}}],yield yield qt(V);const q=[];q.push(...N),q.push({role:"user",parts:D});const B=Fi(y.contents).concat(q);y.contents=B}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=MU(this.apiClient,e);return u=Ne("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=NU(h),_=new gm;return Object.assign(_,y),_})}else{const f=PU(this.apiClient,e);return u=Ne("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=DU(h),_=new gm;return Object.assign(_,y),_})}}async generateContentStreamInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=MU(this.apiClient,e);return u=Ne("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(y){return Nf(this,arguments,function*(){var _,E,w,A;try{for(var I=!0,R=jm(y),M;M=yield qt(R.next()),_=M.done,!_;I=!0){A=M.value,I=!1;const F=NU(yield qt(A.json())),U=new gm;Object.assign(U,F),yield yield qt(U)}}catch(P){E={error:P}}finally{try{!I&&!_&&(w=R.return)&&(yield qt(w.call(R)))}finally{if(E)throw E.error}}})})}else{const f=PU(this.apiClient,e);return u=Ne("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(y){return Nf(this,arguments,function*(){var _,E,w,A;try{for(var I=!0,R=jm(y),M;M=yield qt(R.next()),_=M.done,!_;I=!0){A=M.value,I=!1;const F=DU(yield qt(A.json())),U=new gm;Object.assign(U,F),yield yield qt(U)}}catch(P){E={error:P}}finally{try{!I&&!_&&(w=R.return)&&(yield qt(w.call(R)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=lTe(this.apiClient,e);return u=Ne("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=hEe(h),_=new uU;return Object.assign(_,y),_})}else{const f=E0e(this.apiClient,e);return u=Ne("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=$Te(h),_=new uU;return Object.assign(_,y),_})}}async generateImagesInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=cTe(this.apiClient,e);return u=Ne("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=pEe(h),_=new cU;return Object.assign(_,y),_})}else{const f=w0e(this.apiClient,e);return u=Ne("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=HTe(h),_=new cU;return Object.assign(_,y),_})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=yTe(this.apiClient,e);return o=Ne("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=gEe(c),h=new gpe;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=_Te(this.apiClient,e);return o=Ne("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=yEe(c),h=new ype;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=TTe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>fI(h))}else{const f=A0e(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>cI(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=bTe(this.apiClient,e);return u=Ne("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=EEe(h),_=new fU;return Object.assign(_,y),_})}else{const f=I0e(this.apiClient,e);return u=Ne("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=WTe(h),_=new fU;return Object.assign(_,y),_})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=ATe(this.apiClient,e);return u=Ne("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>fI(h))}else{const f=x0e(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>cI(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=STe(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(()=>{const h=bEe(),y=new dU;return Object.assign(y,h),y})}else{const f=R0e(this.apiClient,e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(()=>{const h=YTe(),y=new dU;return Object.assign(y,h),y})}}async countTokens(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=CTe(this.apiClient,e);return u=Ne("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=wEe(h),_=new hU;return Object.assign(_,y),_})}else{const f=M0e(this.apiClient,e);return u=Ne("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=JTe(h),_=new hU;return Object.assign(_,y),_})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=xTe(this.apiClient,e);return o=Ne("{model}:computeTokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=AEe(c),h=new vpe;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=MTe(this.apiClient,e);return u=Ne("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>xEe(h))}else{const f=k0e(this.apiClient,e);return u=Ne("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>eEe(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tbe(t){const e={},n=m(t,["operationName"]);n!=null&&p(e,["_url","operationName"],n);const r=m(t,["config"]);return r!=null&&p(e,["config"],r),e}function nbe(t){const e={},n=m(t,["operationName"]);n!=null&&p(e,["_url","operationName"],n);const r=m(t,["config"]);return r!=null&&p(e,["config"],r),e}function rbe(t){const e={},n=m(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=m(t,["resourceName"]);r!=null&&p(e,["_url","resourceName"],r);const i=m(t,["config"]);return i!=null&&p(e,["config"],i),e}function ibe(t){const e={},n=m(t,["video","uri"]);n!=null&&p(e,["uri"],n);const r=m(t,["video","encodedVideo"]);r!=null&&p(e,["videoBytes"],Qs(r));const i=m(t,["encoding"]);return i!=null&&p(e,["mimeType"],i),e}function obe(t){const e={},n=m(t,["_self"]);return n!=null&&p(e,["video"],ibe(n)),e}function sbe(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>obe(s))),p(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function abe(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=m(t,["done"]);i!=null&&p(e,["done"],i);const o=m(t,["error"]);o!=null&&p(e,["error"],o);const s=m(t,["response","generateVideoResponse"]);return s!=null&&p(e,["response"],sbe(s)),e}function lbe(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],Qs(r));const i=m(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ube(t){const e={},n=m(t,["_self"]);return n!=null&&p(e,["video"],lbe(n)),e}function cbe(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ube(s))),p(e,["generatedVideos"],o)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function FU(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=m(t,["done"]);i!=null&&p(e,["done"],i);const o=m(t,["error"]);o!=null&&p(e,["error"],o);const s=m(t,["response"]);return s!=null&&p(e,["response"],cbe(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fbe extends ac{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;return r&&"httpOptions"in r&&(o=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:n.name,config:r})}async getVideosOperationInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=nbe(e);return u=Ne("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>FU(h))}else{const f=tbe(e);return u=Ne("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>abe(h))}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=rbe(e);return o=Ne("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>FU(c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dbe(t){const e={},n=m(t,["voiceName"]);return n!=null&&p(e,["voiceName"],n),e}function jz(t){const e={},n=m(t,["prebuiltVoiceConfig"]);return n!=null&&p(e,["prebuiltVoiceConfig"],dbe(n)),e}function hbe(t){const e={},n=m(t,["speaker"]);n!=null&&p(e,["speaker"],n);const r=m(t,["voiceConfig"]);return r!=null&&p(e,["voiceConfig"],jz(r)),e}function mbe(t){const e={},n=m(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>hbe(i))),p(e,["speakerVoiceConfigs"],r)}return e}function pbe(t){const e={},n=m(t,["voiceConfig"]);n!=null&&p(e,["voiceConfig"],jz(n));const r=m(t,["multiSpeakerVoiceConfig"]);r!=null&&p(e,["multiSpeakerVoiceConfig"],mbe(r));const i=m(t,["languageCode"]);return i!=null&&p(e,["languageCode"],i),e}function gbe(t){const e={},n=m(t,["fps"]);n!=null&&p(e,["fps"],n);const r=m(t,["endOffset"]);r!=null&&p(e,["endOffset"],r);const i=m(t,["startOffset"]);return i!=null&&p(e,["startOffset"],i),e}function ybe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["data"]);n!=null&&p(e,["data"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function vbe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function _be(t){const e={},n=m(t,["videoMetadata"]);n!=null&&p(e,["videoMetadata"],gbe(n));const r=m(t,["thought"]);r!=null&&p(e,["thought"],r);const i=m(t,["inlineData"]);i!=null&&p(e,["inlineData"],ybe(i));const o=m(t,["fileData"]);o!=null&&p(e,["fileData"],vbe(o));const s=m(t,["thoughtSignature"]);s!=null&&p(e,["thoughtSignature"],s);const u=m(t,["codeExecutionResult"]);u!=null&&p(e,["codeExecutionResult"],u);const c=m(t,["executableCode"]);c!=null&&p(e,["executableCode"],c);const f=m(t,["functionCall"]);f!=null&&p(e,["functionCall"],f);const h=m(t,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const y=m(t,["text"]);return y!=null&&p(e,["text"],y),e}function Tbe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_be(o))),p(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&p(e,["role"],r),e}function Ebe(t){const e={},n=m(t,["behavior"]);n!=null&&p(e,["behavior"],n);const r=m(t,["description"]);r!=null&&p(e,["description"],r);const i=m(t,["name"]);i!=null&&p(e,["name"],i);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=m(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const c=m(t,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function bbe(t){const e={},n=m(t,["startTime"]);n!=null&&p(e,["startTime"],n);const r=m(t,["endTime"]);return r!=null&&p(e,["endTime"],r),e}function wbe(t){const e={},n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],bbe(n)),e}function Abe(t){const e={},n=m(t,["mode"]);n!=null&&p(e,["mode"],n);const r=m(t,["dynamicThreshold"]);return r!=null&&p(e,["dynamicThreshold"],r),e}function Sbe(t){const e={},n=m(t,["dynamicRetrievalConfig"]);return n!=null&&p(e,["dynamicRetrievalConfig"],Abe(n)),e}function Ibe(){return{}}function Cbe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Ebe(f))),p(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearch"]);r!=null&&p(e,["googleSearch"],wbe(r));const i=m(t,["googleSearchRetrieval"]);if(i!=null&&p(e,["googleSearchRetrieval"],Sbe(i)),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(m(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");m(t,["urlContext"])!=null&&p(e,["urlContext"],Ibe());const s=m(t,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const u=m(t,["computerUse"]);return u!=null&&p(e,["computerUse"],u),e}function xbe(t){const e={},n=m(t,["handle"]);if(n!=null&&p(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BU(){return{}}function Rbe(t){const e={},n=m(t,["disabled"]);n!=null&&p(e,["disabled"],n);const r=m(t,["startOfSpeechSensitivity"]);r!=null&&p(e,["startOfSpeechSensitivity"],r);const i=m(t,["endOfSpeechSensitivity"]);i!=null&&p(e,["endOfSpeechSensitivity"],i);const o=m(t,["prefixPaddingMs"]);o!=null&&p(e,["prefixPaddingMs"],o);const s=m(t,["silenceDurationMs"]);return s!=null&&p(e,["silenceDurationMs"],s),e}function Pbe(t){const e={},n=m(t,["automaticActivityDetection"]);n!=null&&p(e,["automaticActivityDetection"],Rbe(n));const r=m(t,["activityHandling"]);r!=null&&p(e,["activityHandling"],r);const i=m(t,["turnCoverage"]);return i!=null&&p(e,["turnCoverage"],i),e}function Mbe(t){const e={},n=m(t,["targetTokens"]);return n!=null&&p(e,["targetTokens"],n),e}function Dbe(t){const e={},n=m(t,["triggerTokens"]);n!=null&&p(e,["triggerTokens"],n);const r=m(t,["slidingWindow"]);return r!=null&&p(e,["slidingWindow"],Mbe(r)),e}function Nbe(t){const e={},n=m(t,["proactiveAudio"]);return n!=null&&p(e,["proactiveAudio"],n),e}function kbe(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=m(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const s=m(t,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);const u=m(t,["topK"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topK"],u);const c=m(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const h=m(t,["seed"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","seed"],h);const y=m(t,["speechConfig"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","speechConfig"],pbe(O1(y)));const _=m(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=m(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],Tbe(Er(E)));const w=m(t,["tools"]);if(e!==void 0&&w!=null){let U=qd(w);Array.isArray(U)&&(U=U.map($=>Cbe(Bd($)))),p(e,["setup","tools"],U)}const A=m(t,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],xbe(A));const I=m(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","inputAudioTranscription"],BU());const R=m(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","outputAudioTranscription"],BU());const M=m(t,["realtimeInputConfig"]);e!==void 0&&M!=null&&p(e,["setup","realtimeInputConfig"],Pbe(M));const P=m(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],Dbe(P));const F=m(t,["proactivity"]);return e!==void 0&&F!=null&&p(e,["setup","proactivity"],Nbe(F)),n}function Obe(t,e){const n={},r=m(e,["model"]);r!=null&&p(n,["setup","model"],It(t,r));const i=m(e,["config"]);return i!=null&&p(n,["config"],kbe(i,n)),n}function Vbe(t,e,n){const r={},i=m(e,["expireTime"]);n!==void 0&&i!=null&&p(n,["expireTime"],i);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&p(n,["newSessionExpireTime"],o);const s=m(e,["uses"]);n!==void 0&&s!=null&&p(n,["uses"],s);const u=m(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&p(n,["bidiGenerateContentSetup"],Obe(t,u));const c=m(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&p(n,["fieldMask"],c),r}function Lbe(t,e){const n={},r=m(e,["config"]);return r!=null&&p(n,["config"],Vbe(t,r,n)),n}function Ube(t){const e={},n=m(t,["name"]);return n!=null&&p(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fbe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function Bbe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=Fbe(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?t.fieldMask=o:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class qbe extends ac{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Lbe(this.apiClient,e);o=Ne("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=Bbe(u,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Ube(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zbe(t){const e={},n=m(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&p(e,["config"],r),e}function $be(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function Gbe(t){const e={},n=m(t,["config"]);return n!=null&&p(e,["config"],$be(n,e)),e}function jbe(t){const e={},n=m(t,["textInput"]);n!=null&&p(e,["textInput"],n);const r=m(t,["output"]);return r!=null&&p(e,["output"],r),e}function Hbe(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=m(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jbe(i))),p(e,["examples","examples"],r)}return e}function Kbe(t,e){const n={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=m(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=m(t,["learningRateMultiplier"]);if(o!=null&&p(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=m(t,["batchSize"]);e!==void 0&&s!=null&&p(e,["tuningTask","hyperparameters","batchSize"],s);const u=m(t,["learningRate"]);return e!==void 0&&u!=null&&p(e,["tuningTask","hyperparameters","learningRate"],u),n}function Wbe(t){const e={},n=m(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=m(t,["trainingDataset"]);r!=null&&p(e,["tuningTask","trainingData"],Hbe(r));const i=m(t,["config"]);return i!=null&&p(e,["config"],Kbe(i,e)),e}function Ybe(t){const e={},n=m(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&p(e,["config"],r),e}function Jbe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=m(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function Qbe(t){const e={},n=m(t,["config"]);return n!=null&&p(e,["config"],Jbe(n,e)),e}function Xbe(t,e){const n={},r=m(t,["gcsUri"]);e!==void 0&&r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=m(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],i),m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Zbe(t,e){const n={},r=m(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const i=m(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function ewe(t,e){const n={},r=m(t,["validationDataset"]);e!==void 0&&r!=null&&p(e,["supervisedTuningSpec"],Zbe(r,n));const i=m(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=m(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const s=m(t,["epochCount"]);e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const u=m(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=m(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=m(t,["adapterSize"]);if(e!==void 0&&f!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function twe(t){const e={},n=m(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=m(t,["trainingDataset"]);r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],Xbe(r,e));const i=m(t,["config"]);return i!=null&&p(e,["config"],ewe(i,e)),e}function nwe(t){const e={},n=m(t,["name"]);n!=null&&p(e,["model"],n);const r=m(t,["name"]);return r!=null&&p(e,["endpoint"],r),e}function Hz(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["state"]);r!=null&&p(e,["state"],wz(r));const i=m(t,["createTime"]);i!=null&&p(e,["createTime"],i);const o=m(t,["tuningTask","startTime"]);o!=null&&p(e,["startTime"],o);const s=m(t,["tuningTask","completeTime"]);s!=null&&p(e,["endTime"],s);const u=m(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const c=m(t,["description"]);c!=null&&p(e,["description"],c);const f=m(t,["baseModel"]);f!=null&&p(e,["baseModel"],f);const h=m(t,["_self"]);h!=null&&p(e,["tunedModel"],nwe(h));const y=m(t,["distillationSpec"]);y!=null&&p(e,["distillationSpec"],y);const _=m(t,["experiment"]);_!=null&&p(e,["experiment"],_);const E=m(t,["labels"]);E!=null&&p(e,["labels"],E);const w=m(t,["pipelineJob"]);w!=null&&p(e,["pipelineJob"],w);const A=m(t,["satisfiesPzi"]);A!=null&&p(e,["satisfiesPzi"],A);const I=m(t,["satisfiesPzs"]);I!=null&&p(e,["satisfiesPzs"],I);const R=m(t,["serviceAccount"]);R!=null&&p(e,["serviceAccount"],R);const M=m(t,["tunedModelDisplayName"]);return M!=null&&p(e,["tunedModelDisplayName"],M),e}function rwe(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["tunedModels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Hz(o))),p(e,["tuningJobs"],i)}return e}function iwe(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=m(t,["done"]);i!=null&&p(e,["done"],i);const o=m(t,["error"]);return o!=null&&p(e,["error"],o),e}function owe(t){const e={},n=m(t,["checkpointId"]);n!=null&&p(e,["checkpointId"],n);const r=m(t,["epoch"]);r!=null&&p(e,["epoch"],r);const i=m(t,["step"]);i!=null&&p(e,["step"],i);const o=m(t,["endpoint"]);return o!=null&&p(e,["endpoint"],o),e}function swe(t){const e={},n=m(t,["model"]);n!=null&&p(e,["model"],n);const r=m(t,["endpoint"]);r!=null&&p(e,["endpoint"],r);const i=m(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>owe(s))),p(e,["checkpoints"],o)}return e}function hI(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const r=m(t,["state"]);r!=null&&p(e,["state"],wz(r));const i=m(t,["createTime"]);i!=null&&p(e,["createTime"],i);const o=m(t,["startTime"]);o!=null&&p(e,["startTime"],o);const s=m(t,["endTime"]);s!=null&&p(e,["endTime"],s);const u=m(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const c=m(t,["error"]);c!=null&&p(e,["error"],c);const f=m(t,["description"]);f!=null&&p(e,["description"],f);const h=m(t,["baseModel"]);h!=null&&p(e,["baseModel"],h);const y=m(t,["tunedModel"]);y!=null&&p(e,["tunedModel"],swe(y));const _=m(t,["supervisedTuningSpec"]);_!=null&&p(e,["supervisedTuningSpec"],_);const E=m(t,["tuningDataStats"]);E!=null&&p(e,["tuningDataStats"],E);const w=m(t,["encryptionSpec"]);w!=null&&p(e,["encryptionSpec"],w);const A=m(t,["partnerModelTuningSpec"]);A!=null&&p(e,["partnerModelTuningSpec"],A);const I=m(t,["distillationSpec"]);I!=null&&p(e,["distillationSpec"],I);const R=m(t,["experiment"]);R!=null&&p(e,["experiment"],R);const M=m(t,["labels"]);M!=null&&p(e,["labels"],M);const P=m(t,["pipelineJob"]);P!=null&&p(e,["pipelineJob"],P);const F=m(t,["satisfiesPzi"]);F!=null&&p(e,["satisfiesPzi"],F);const U=m(t,["satisfiesPzs"]);U!=null&&p(e,["satisfiesPzs"],U);const $=m(t,["serviceAccount"]);$!=null&&p(e,["serviceAccount"],$);const D=m(t,["tunedModelDisplayName"]);return D!=null&&p(e,["tunedModelDisplayName"],D),e}function awe(t){const e={},n=m(t,["nextPageToken"]);n!=null&&p(e,["nextPageToken"],n);const r=m(t,["tuningJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>hI(o))),p(e,["tuningJobs"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lwe extends ac{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ug(Wu.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const r=await this.tuneMldevInternal(n);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:rI.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Ybe(e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>hI(h))}else{const f=zbe(e);return u=Ne("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Hz(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const f=Qbe(e);return u=Ne("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const y=awe(h),_=new mU;return Object.assign(_,y),_})}else{const f=Gbe(e);return u=Ne("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const y=rwe(h),_=new mU;return Object.assign(_,y),_})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=twe(e);return o=Ne("tuningJobs",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>hI(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wbe(e);return o=Ne("tunedModels",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>iwe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uwe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cwe=1024*1024*8,fwe=3,dwe=1e3,hwe=2,fA="x-goog-upload-status";async function mwe(t,e,n){var r,i,o;let s=0,u=0,c=new iI(new Response),f="upload";for(s=t.size;u<s;){const y=Math.min(cwe,s-u),_=t.slice(u,u+y);u+y>=s&&(f+=", finalize");let E=0,w=dwe;for(;E<fwe&&(c=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(u),"Content-Length":String(y)}}}),!(!((r=c?.headers)===null||r===void 0)&&r[fA]));)E++,await gwe(w),w=w*hwe;if(u+=y,((i=c?.headers)===null||i===void 0?void 0:i[fA])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await c?.json();if(((o=c?.headers)===null||o===void 0?void 0:o[fA])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function pwe(t){return{size:t.size,type:t.type}}function gwe(t){return new Promise(e=>setTimeout(e,t))}class ywe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mwe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pwe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vwe{create(e,n,r){return new _we(e,n,r)}}class _we{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qU="x-goog-api-key";class Twe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(qU)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(qU,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ewe="gl-node/";class bwe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=ppe(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new Twe(this.apiKey);this.apiClient=new VEe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Ewe+"web",uploader:new ywe,downloader:new uwe}),this.models=new ebe(this.apiClient),this.live=new YEe(this.apiClient,i,new vwe),this.batches=new $ge(this.apiClient),this.chats=new Kye(this.models,this.apiClient),this.caches=new Gye(this.apiClient),this.files=new sve(this.apiClient),this.operations=new fbe(this.apiClient),this.authTokens=new qbe(this.apiClient),this.tunings=new lwe(this.apiClient)}}var wwe={};const F1=wwe.GEMINI_API_KEY;F1||console.error("Gemini API key not found in environment variables.");const Awe=new bwe({apiKey:F1}),Swe=async(t,e)=>{if(!F1)return"API Key not configured. Could not generate remark.";try{const n=`As a manager for the 'Vakratunda' group, write a concise and professional performance remark (1-2 sentences) for a member named ${t}. Be encouraging but factual based on their attendance. The summary is: "${e}"`;return(await Awe.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:n,config:{temperature:.5,topP:.95,topK:64}})).text||""}catch(n){return console.error("Error generating performance remark:",n),"Could not generate remark due to an API error."}},Iwe=({status:t})=>{const e={[st.Present]:"bg-green-500",[st.Absent]:"bg-red-500",[st.HalfDay]:"bg-orange-500"};return H.jsx("span",{className:`w-3 h-3 rounded-full inline-block ${e[t]}`})},Cwe=({member:t,attendance:e,onUpdateMember:n})=>{const[r,i]=O.useState(""),[o,s]=O.useState(!1),[u,c]=O.useState(!1),[f,h]=O.useState(!1),[y,_]=O.useState(t.name),[E,w]=O.useState(t.instrument),A=O.useMemo(()=>{const P={[st.Present]:0,[st.Absent]:0,[st.HalfDay]:0},F=new Date;let U=0;const $=new Date(t.createdAt);for(let D=0;D<30;D++){const N=new Date(F);if(N.setDate(F.getDate()-D),N<$)continue;U++;const V=N.toISOString().split("T")[0],q=e[V];q===st.Present?P.present++:q===st.HalfDay&&P.halfday++}return P.absent=U-P.present-P.halfday,P},[e,t.createdAt]),I=O.useMemo(()=>{const P=[],F=new Date,U=new Date(t.createdAt);for(let $=0;$<30;$++){const D=new Date(F);if(D.setDate(F.getDate()-$),D<U)continue;const N=D.toISOString().split("T")[0],V=e[N]||st.Absent;P.push({date:N,status:V})}return P},[e,t.createdAt]),R=async()=>{s(!0),i("");const P=`Total days tracked: ${I.length}. Present: ${A.present}, Absent: ${A.absent}, Half Day: ${A.halfday}.`,F=await Swe(t.name,P);i(F),s(!1)},M=async()=>{if(!(!y.trim()||!E.trim())){h(!0);try{await n(t.id,y,E),c(!1)}catch(P){console.error("Error updating member:",P)}finally{h(!1)}}};return H.jsxs("div",{className:"p-4",children:[H.jsxs("div",{className:"bg-stone-900 p-4 rounded-lg shadow-md mb-6",children:[H.jsx("h3",{className:"text-lg font-semibold mb-3 text-stone-100",children:"Attendance Summary (Last 30 Days)"}),H.jsxs("div",{className:"flex justify-around",children:[H.jsxs("div",{className:"text-center",children:[H.jsx("p",{className:"text-3xl font-bold text-green-400",children:A.present}),H.jsx("p",{className:"text-sm text-stone-400",children:"Present"})]}),H.jsxs("div",{className:"text-center",children:[H.jsx("p",{className:"text-3xl font-bold text-red-400",children:A.absent}),H.jsx("p",{className:"text-sm text-stone-400",children:"Absent"})]}),H.jsxs("div",{className:"text-center",children:[H.jsx("p",{className:"text-3xl font-bold text-orange-400",children:A.halfday}),H.jsx("p",{className:"text-sm text-stone-400",children:"Half Day"})]})]})]}),H.jsxs("div",{className:"bg-stone-900 p-4 rounded-lg shadow-md mb-6",children:[H.jsxs("div",{className:"flex justify-between items-center mb-3",children:[H.jsx("h3",{className:"text-lg font-semibold text-stone-100",children:"AI Performance Remark"}),H.jsx("button",{onClick:R,disabled:o,className:"text-sm bg-orange-600 text-white px-3 py-1 rounded-md hover:bg-orange-700 disabled:bg-stone-700 disabled:cursor-wait transition-colors",children:o?"Generating...":"Generate"})]}),o&&H.jsx("div",{className:"text-center text-stone-400",children:"Analyzing data with Gemini..."}),r&&H.jsxs("p",{className:"text-stone-300 bg-stone-800 p-3 rounded-md italic",children:['"',r,'"']})]}),H.jsxs("div",{className:"bg-stone-900 p-4 rounded-lg shadow-md mb-6",children:[H.jsxs("div",{className:"flex justify-between items-center",children:[H.jsx("h3",{className:"text-lg font-semibold text-stone-100",children:"Member Details"}),!u&&H.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 text-sm bg-stone-700 text-white px-3 py-1 rounded-md hover:bg-stone-600 transition-colors",children:[H.jsx(Cn,{type:"edit",className:"w-4 h-4"}),"Edit"]})]}),u?H.jsxs("div",{className:"mt-4 space-y-4",children:[H.jsxs("div",{children:[H.jsx("label",{htmlFor:"memberName",className:"block text-sm font-medium text-stone-300 mb-1",children:"Member Name"}),H.jsx("input",{type:"text",id:"memberName",value:y,onChange:P=>_(P.target.value),className:"w-full bg-stone-800 border border-stone-700 text-stone-100 rounded-lg p-2 focus:ring-orange-500 focus:border-orange-500 transition",disabled:f})]}),H.jsxs("div",{children:[H.jsx("label",{htmlFor:"memberInstrument",className:"block text-sm font-medium text-stone-300 mb-1",children:"Instrument"}),H.jsx("input",{type:"text",id:"memberInstrument",value:E,onChange:P=>w(P.target.value),className:"w-full bg-stone-800 border border-stone-700 text-stone-100 rounded-lg p-2 focus:ring-orange-500 focus:border-orange-500 transition",disabled:f})]}),H.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[H.jsx("button",{onClick:()=>c(!1),disabled:f,className:"text-sm bg-stone-600 text-white px-4 py-2 rounded-md hover:bg-stone-500 transition-colors",children:"Cancel"}),H.jsxs("button",{onClick:M,disabled:f||!y.trim()||!E.trim(),className:"text-sm bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 disabled:bg-stone-700 disabled:cursor-not-allowed flex items-center gap-2",children:[f?H.jsx(Cn,{type:"spinner",className:"w-4 h-4"}):H.jsx(Cn,{type:"save",className:"w-4 h-4"}),"Save"]})]})]}):H.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[H.jsxs("div",{children:[H.jsx("p",{className:"text-stone-400",children:"Name"}),H.jsx("p",{className:"text-stone-100 font-medium",children:t.name})]}),H.jsxs("div",{children:[H.jsx("p",{className:"text-stone-400",children:"Instrument"}),H.jsx("p",{className:"text-stone-100 font-medium",children:t.instrument})]}),H.jsxs("div",{children:[H.jsx("p",{className:"text-stone-400",children:"Member Since"}),H.jsx("p",{className:"text-stone-100 font-medium",children:new Date(t.createdAt).toLocaleDateString()})]})]})]}),H.jsxs("div",{children:[H.jsx("h3",{className:"text-lg font-semibold mb-3 text-stone-100",children:"Detailed Log (Last 30 Days)"}),H.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:I.length>0?I.map(({date:P,status:F})=>H.jsxs("div",{className:"bg-stone-900 p-3 rounded-md flex justify-between items-center",children:[H.jsx("p",{className:"text-stone-300",children:new Date(P).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}),H.jsxs("div",{className:"flex items-center gap-2",children:[H.jsx(Iwe,{status:F}),H.jsx("span",{className:"capitalize text-sm font-medium",children:F===st.HalfDay?"Half Day":F})]})]},P)):H.jsx("p",{className:"text-center text-stone-500",children:"No attendance records found."})})]})]})},dA=({label:t,view:e,iconType:n,currentView:r,onClick:i})=>{const o=r===e;return H.jsxs("button",{onClick:()=>i(e),className:`flex flex-col items-center justify-center flex-1 transition-colors duration-200 ${o?"text-orange-500":"text-stone-400 hover:text-stone-100"}`,children:[H.jsx(Cn,{type:n,className:"w-6 h-6 mb-1"}),H.jsx("span",{className:"text-xs font-medium",children:t})]})},xwe=({currentView:t,setView:e})=>H.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 h-16 bg-stone-900 border-t border-stone-800 flex justify-around items-center z-50 shadow-lg",children:[H.jsx(dA,{label:"Dashboard",view:dn.Dashboard,iconType:"dashboard",currentView:t,onClick:e}),H.jsx(dA,{label:"Attendance",view:dn.Attendance,iconType:"attendance",currentView:t,onClick:e}),H.jsx(dA,{label:"Add Member",view:dn.AddMember,iconType:"add",currentView:t,onClick:e})]}),Rwe=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,o]=O.useState(""),[s,u]=O.useState(!1),c=async f=>{f.preventDefault(),o(""),u(!0);try{await nS.signInWithEmailAndPassword(t,n)}catch(h){switch(h.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Invalid username or password.");break;case"auth/invalid-email":o("Please enter a valid email address.");break;default:o("An unexpected error occurred. Please try again.");break}}finally{u(!1)}};return H.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-stone-950 p-4",children:H.jsxs("div",{className:"w-full max-w-sm",children:[H.jsxs("div",{className:"text-center mb-8",children:[H.jsx("div",{className:"w-28 h-28 inline-block rounded-full mb-4 overflow-hidden shadow-lg bg-stone-900",children:H.jsx(Cn,{type:"appLogo",className:"w-full h-full object-cover"})}),H.jsx("h1",{className:"text-4xl font-bold text-orange-100",style:{fontFamily:"sans-serif"},children:""}),H.jsx("p",{className:"text-stone-400 mt-2",children:"   "})]}),H.jsxs("form",{onSubmit:c,className:"bg-stone-900 shadow-lg rounded-xl px-8 pt-6 pb-8 mb-4",children:[H.jsxs("div",{className:"mb-4",children:[H.jsx("label",{className:"block text-stone-300 text-sm font-bold mb-2",htmlFor:"username",children:"Username (Email)"}),H.jsx("input",{id:"username",type:"email",value:t,onChange:f=>e(f.target.value),className:"w-full bg-stone-800 border border-stone-700 text-stone-100 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-orange-500 transition",placeholder:"user@example.com",autoComplete:"email"})]}),H.jsxs("div",{className:"mb-6",children:[H.jsx("label",{className:"block text-stone-300 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),H.jsx("input",{id:"password",type:"password",value:n,onChange:f=>r(f.target.value),className:"w-full bg-stone-800 border border-stone-700 text-stone-100 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-orange-500 transition",placeholder:"",autoComplete:"current-password"})]}),i&&H.jsx("p",{className:"text-red-400 text-center text-sm mb-4",children:i}),H.jsx("div",{className:"flex items-center justify-between",children:H.jsx("button",{type:"submit",disabled:s,className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-colors duration-200 disabled:bg-stone-700 disabled:cursor-not-allowed flex items-center justify-center",children:s?H.jsx(Cn,{type:"spinner",className:"w-6 h-6"}):"Sign In"})})]})]})})},Pwe=({title:t,showBack:e,onBack:n,onLogout:r})=>H.jsxs("header",{className:"fixed top-0 left-0 right-0 h-16 bg-stone-900/80 backdrop-blur-sm border-b border-stone-800 flex items-center justify-between px-4 z-50 shadow-md",children:[H.jsxs("div",{className:"flex items-center",children:[e&&n&&H.jsx("button",{onClick:n,className:"p-2 mr-2 -ml-2 rounded-full hover:bg-stone-800 transition-colors",children:H.jsx(Cn,{type:"back",className:"w-6 h-6 text-stone-100"})}),H.jsx("h1",{className:"text-xl font-bold text-stone-100",children:t})]}),r&&H.jsx("button",{onClick:r,className:"p-2 -mr-2 rounded-full hover:bg-stone-800 transition-colors",children:H.jsx(Cn,{type:"logout",className:"w-6 h-6 text-stone-300"})})]}),Mwe=()=>new Date().toISOString().split("T")[0];function Dwe(){const[t,e]=O.useState(),[n,r]=O.useState(dn.Dashboard),[i,o]=O.useState(null),{members:s,loading:u,addMember:c,updateMember:f,markBatchAttendance:h,getMemberById:y,getAttendanceByMember:_,getWeeklySummary:E,getTodaySummary:w,generateCsvReport:A}=FX();O.useEffect(()=>{const $=nS.onAuthStateChanged(D=>{e(D),D&&r(dn.Dashboard)});return()=>$()},[]);const I=$=>{o(null),r($)},R=()=>{nS.signOut()},M=$=>{o($),r(dn.MemberDetails)},P=()=>{I(dn.Dashboard)},F=()=>{switch(n){case dn.Dashboard:return H.jsx(Mme,{loading:u,todaySummary:w(),weeklySummary:E(),onLogout:R,members:s,onSelectMember:M,onGenerateReport:A});case dn.Attendance:const $=Mwe(),D=s.reduce((N,V)=>{const q=_(V.id)[$];return q&&(N[V.id]=q),N},{});return H.jsx(Dme,{members:s,todaysAttendance:D,onSave:h});case dn.AddMember:return H.jsx(Nme,{onAddMember:c,onDone:()=>I(dn.Dashboard)});case dn.MemberDetails:if(i){const N=y(i);if(N)return H.jsx(Cwe,{member:N,attendance:_(N.id),onUpdateMember:f})}return H.jsx("div",{className:"text-center p-4",children:"Member not found"});default:return H.jsx("div",{children:"Home"})}};if(t===void 0)return H.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-stone-950",children:[H.jsx(Cn,{type:"spinner",className:"w-12 h-12 text-orange-500"}),H.jsx("p",{className:"text-stone-400 mt-4",children:"Initializing..."})]});if(!t)return H.jsx(Rwe,{});const U=()=>{switch(n){case dn.Dashboard:return"Dashboard";case dn.Attendance:return"Mark Attendance";case dn.AddMember:return"Add New Member";case dn.MemberDetails:return(i?y(i):null)?.name||"Member Details";default:return"Vakratunda Attendance"}};return H.jsxs("div",{className:"min-h-screen bg-stone-950 text-stone-100 font-sans",children:[n!==dn.Dashboard&&H.jsx(Pwe,{title:U(),showBack:n===dn.MemberDetails,onBack:P,onLogout:R}),H.jsxs("main",{className:`pb-20 ${n!==dn.Dashboard?"pt-16":""}`,children:[" ",F()]}),n!==dn.MemberDetails&&H.jsx(xwe,{currentView:n,setView:I})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/VdtdpAttendance/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});const Kz=document.getElementById("root");if(!Kz)throw new Error("Could not find root element to mount to");const Nwe=CG.createRoot(Kz);Nwe.render(H.jsx(hA.StrictMode,{children:H.jsx(Dwe,{})}));
